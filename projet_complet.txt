================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\simulation\page.tsx
================================================================================

// app/simulation/page.tsx
'use client';

import React, { Suspense } from 'react';
import dynamic from 'next/dynamic';
import FunFactLoader from "@/components/common/FunFactLoader";

// Import dynamique du coeur de la simulation pour ne pas bloquer le thread principal
const SimulationContent = dynamic(
  () => import("@/components/simulation/Simulation"), 
  {
    loading: () => <FunFactLoader />, // Affiche le fait amusant pendant le chargement des chunks JS
    ssr: false // La simulation dépend entièrement du client (localStorage, état temps réel)
  }
);

export default function MedicalSimulationPage() {
  return (
    <div className="min-h-screen bg-[#052648] relative font-sans text-slate-800">
      <Suspense fallback={<FunFactLoader />}>
        <SimulationContent />
      </Suspense>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\dashboard\page.tsx
================================================================================

// app/dashboard/page.tsx
'use client';

import React, { useState, useEffect, Suspense } from 'react';
import { useRouter, useSearchParams } from 'next/navigation';
import dynamic from 'next/dynamic';
import { 
  LayoutDashboard, Stethoscope, Bell, Search,
  Brain, Target, TrendingUp, ScanFace
} from 'lucide-react';
import toast from 'react-hot-toast';

// --- Services & Types ---
import { LearnerService, Learner, LearnerTrace } from '@/services/learnerService';

// --- Composants de structure (statiques car légers et essentiels) ---
import Sidebar from '@/components/dashboard/Sidebar';
import DashboardSkeleton from '@/components/ui/SkeletonDashboard';
import FunFactLoader from '@/components/common/FunFactLoader';
import AnalyticProfile from '@/components/dashboard/AnalyticProfile';

// --- Chargement Dynamique des Vues (Code Splitting) ---
// Chaque composant est isolé dans son propre bundle JS
const Overview = dynamic(() => import('@/components/dashboard/Overview'), { 
  loading: () => <div className="h-full flex items-center justify-center"><div className="animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600"></div></div> 
});
const Library = dynamic(() => import('@/components/dashboard/Library'), { loading: () => <DashboardSkeleton /> });
const Journey = dynamic(() => import('@/components/dashboard/Journey'), { loading: () => <DashboardSkeleton /> });
const Skills = dynamic(() => import('@/components/dashboard/Skills'), { loading: () => <DashboardSkeleton /> });
const Goals = dynamic(() => import('@/components/dashboard/Goal'), { loading: () => <DashboardSkeleton /> });
const ProfileSidebar = dynamic(() => import('@/components/dashboard/ProfileSidebar'), { ssr: false });

// --- CONFIGURATION HEADER ---
const HEADER_CONFIG: Record<string, { title: string; subtitle: string; icon: any, color: string }> = {
  overview: { title: "Vue d'Ensemble", subtitle: "Vision globale rapide.", icon: LayoutDashboard, color: "bg-blue-50 text-[#052648]" },
  competencies: { title: "Compétences", subtitle: "Gérer la maîtrise des compétences.", icon: Brain, color: "bg-purple-50 text-purple-700" },
  goals: { title: "Objectifs", subtitle: "Planifier et suivre les goals.", icon: Target, color: "bg-emerald-50 text-emerald-700" },
  journey: { title: "Mon parcours", subtitle: "Suivi de mon évolution.", icon: TrendingUp, color: "bg-indigo-50 text-indigo-700" },
  practice: { title: "M'exercer", subtitle: "Bibliothèque de cas cliniques.", icon: Stethoscope, color: "bg-cyan-50 text-cyan-700" },
  analytic_profile: { title: "Mon Profil", subtitle: "Diagnostic & Stratégies.", icon: ScanFace, color: "bg-orange-50 text-orange-700" }
};

const DashboardHeader = ({ activeView }: { activeView: string, user: Learner | null }) => {
  const config = HEADER_CONFIG[activeView] || HEADER_CONFIG.overview;
  const Icon = config.icon;

  return (
    <div className="flex flex-col md:flex-row justify-between items-start md:items-center px-8 py-6 bg-white border-b border-slate-100 sticky top-0 z-20 transition-all">
      <div className="flex items-center gap-4">
        <div className="w-12 h-12 bg-blue-50 text-[#052648] rounded-xl flex items-center justify-center shadow-sm">
           <Icon size={24} />
        </div>
        <div>
           <h1 className="text-2xl font-bold text-slate-800 tracking-tight">{config.title}</h1>
           <p className="text-slate-500 text-sm mt-0.5 hidden sm:block">{config.subtitle}</p>
        </div>
      </div>
      <div className="flex items-center gap-4 mt-4 md:mt-0 w-full md:w-auto">
         <div className="relative group flex-1 md:w-64">
             <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4 group-focus-within:text-blue-600 transition-colors"/>
             <input type="text" placeholder="Rechercher..." className="w-full bg-slate-50 border border-slate-200 rounded-full pl-9 pr-4 py-2 text-sm focus:outline-none focus:border-blue-300 transition-all"/>
         </div>
         <button className="relative p-2 text-slate-400 hover:text-[#052648] bg-gray-50 hover:bg-blue-50 rounded-full transition-colors">
            <Bell size={20} />
            <span className="absolute top-1.5 right-2 w-2 h-2 bg-red-500 rounded-full border border-white"></span>
         </button>
      </div>
    </div>
  );
};

function DashboardContent() {
  const router = useRouter();
  const searchParams = useSearchParams();
  
  const [user, setUser] = useState<Learner | null>(null);
  const [trace, setTrace] = useState<LearnerTrace | null>(null);
  const [loading, setLoading] = useState(true);
  const [activeView, setActiveView] = useState('overview');
  const [isSidebarHovered, setIsSidebarHovered] = useState(false);

  // Sync URL query param with state view (facultatif mais pratique pour bookmark)
  useEffect(() => {
    const view = searchParams.get('view');
    if (view && Object.keys(HEADER_CONFIG).includes(view)) {
      setActiveView(view);
    }
  }, [searchParams]);

  useEffect(() => {
    const load = async () => {
      const token = localStorage.getItem('access_token');
      if (!token) { router.push('/connexion'); return; }

      try {
        const u = await LearnerService.getMe();
        setUser(u);
        const t = await LearnerService.getTraces(u.id);
        const myTrace = t.learners.find(l => String(l.id) === String(u.id));
        if (myTrace) setTrace(myTrace);
      } catch (e) {
        console.error(e);
        toast.error("Erreur de synchronisation.");
      } finally {
        setLoading(false);
      }
    };
    load();
  }, [router]);

  if (loading) return <FunFactLoader />; // On utilise le loader "Fun Facts" ici

  const showProfileSidebar = activeView === 'overview';

  return (
    <div className="flex h-screen w-screen bg-[#f6f8fb] overflow-hidden font-sans relative text-slate-800">
      
      {/* Navigation Latérale */}
      <div 
        className="z-50 h-full fixed left-0 top-0"
        onMouseEnter={() => setIsSidebarHovered(true)}
        onMouseLeave={() => setIsSidebarHovered(false)}
      >
          <Sidebar activeView={activeView} onNavigate={setActiveView} />
      </div>

      {/* Contenu Principal */}
      <main className={`flex-1 flex flex-col h-full relative transition-all duration-500 md:ml-24 ${showProfileSidebar ? 'xl:mr-[360px]' : ''}`}>
        
        {activeView !== 'overview' && <DashboardHeader activeView={activeView} user={user} />}
        
        <div className="flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-8 scroll-smooth custom-scrollbar">
            <div className={`max-w-7xl mx-auto h-full animate-in fade-in slide-in-from-bottom-4 duration-500`}>
              <Suspense fallback={<DashboardSkeleton />}>
                {activeView === 'overview' && <Overview user={user} trace={trace} />}
                {activeView === 'goals' && <Goals />} 
                {activeView === 'practice' && <Library />} 
                {activeView === 'analytic_profile' && <AnalyticProfile />}
              </Suspense>
            </div>
        </div>
      </main>

      {/* Sidebar de Droite (Profil rapide) */}
      <aside 
        className={`hidden xl:block fixed right-0 top-0 bottom-0 h-full w-[360px] transition-transform duration-500 ease-in-out z-30 shadow-2xl bg-white ${showProfileSidebar ? 'translate-x-0' : 'translate-x-full'}`}
      >
          {showProfileSidebar && <ProfileSidebar user={user} trace={trace} />}
      </aside>
    </div>
  );
}

export default function DashboardPage() {
  return (
    <Suspense fallback={<FunFactLoader />}>
        <DashboardContent />
    </Suspense>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\cas\page.tsx
================================================================================

// app/cas/page.tsx
'use client';

import React, { Suspense } from 'react';
import dynamic from 'next/dynamic';
import FunFactLoader from "@/components/common/FunFactLoader";

// Dynamic import car la liste peut être grande
const Library = dynamic(() => import('@/components/dashboard/Library'), {
  loading: () => <FunFactLoader />
});

export default function CasLibraryPage() {
  return (
    <div className="min-h-screen bg-slate-50">
      <main className="py-12 px-4 md:py-20">
        <div className="max-w-7xl mx-auto">
          <Suspense fallback={<FunFactLoader />}>
             <Library />
          </Suspense>
        </div>
      </main>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\expert\page.tsx
================================================================================

// app/expert/page.tsx
'use client';

import React, { useState, Suspense } from 'react';
import dynamic from 'next/dynamic';
import Link from 'next/link';
import { Toaster } from 'react-hot-toast';
import { 
  LayoutDashboard, FileText, Activity, Bug, Syringe, 
  ImageIcon, ChevronRight, HeartPulse, Home
} from 'lucide-react';
import FunFactLoader from '@/components/common/FunFactLoader';
import ExpertHeader from '@/components/expert/Header';
import { CaseProvider } from '@/contexts/CaseContext';

// Import Dynamique des vues "lourdes" (Grilles de données, Formulaires)
const Overview = dynamic(() => import('@/components/expert/Overview'), { loading: () => <FunFactLoader /> });
const CreateCase = dynamic(() => import('@/components/expert/Create'), { loading: () => <div className="p-10 text-center text-blue-500">Chargement de l'éditeur...</div> });
const SymptomLibrary = dynamic(() => import('@/components/expert/Symptom'), { loading: () => <FunFactLoader /> });
const CaseLibrary = dynamic(() => import('@/components/expert/CaseLybrary'), { loading: () => <FunFactLoader /> });
const DrugLibrary = dynamic(() => import('@/components/expert/Drug'), { loading: () => <FunFactLoader /> });
const DiseaseLibrary = dynamic(() => import('@/components/expert/Disease'), { loading: () => <FunFactLoader /> });
const MediaLibrary = dynamic(() => import('@/components/expert/MediaLybrary'), { ssr: false, loading: () => <FunFactLoader /> });

type ViewType = 'dashboard' | 'cas' | 'symptom' | 'pathologies' | 'traitements' | 'media' | 'create';

export default function ExpertPage() {
  const [activeView, setActiveView] = useState<ViewType>('dashboard');
  const [isSidebarHovered, setIsSidebarHovered] = useState(false);

  const renderContent = () => {
    // Layout commun pour l'expert
    const containerClass = "h-[calc(100vh-80px)] overflow-hidden animate-in fade-in duration-300";

    switch (activeView) {
      case 'dashboard': return <div className="p-4 md:p-8"><Overview /></div>;
      case 'cas': return <div className={containerClass}><CaseLibrary /></div>;
      case 'create': return <div className="p-4 md:p-12 max-w-5xl mx-auto"><CreateCase /></div>;
      case 'symptom': return <div className={`p-4 md:p-8 ${containerClass}`}><SymptomLibrary /></div>;
      case 'traitements': return <div className={`p-4 md:p-8 ${containerClass}`}><DrugLibrary /></div>;
      case 'pathologies': return <div className={`p-4 md:p-8 ${containerClass}`}><DiseaseLibrary /></div>;
      case 'media': return <div className={`p-4 md:p-8 ${containerClass}`}><MediaLibrary /></div>;
      default: return null;
    }
  };

  return (
    <CaseProvider>
      <div className="min-h-screen bg-slate-50 font-sans flex text-slate-800 selection:bg-blue-100">
        <Toaster position="top-right" />

        {/* SIDEBAR EXPERT */}
        <aside 
          className={`hidden md:flex flex-col h-screen bg-[#052648] text-white fixed left-0 top-0 z-40 transition-all duration-500 ease-in-out border-r border-blue-900/50 shadow-2xl ${isSidebarHovered ? 'w-64' : 'w-20'}`}
          onMouseEnter={() => setIsSidebarHovered(true)}
          onMouseLeave={() => setIsSidebarHovered(false)}
        >
          {/* Logo */}
          <div className="h-20 flex items-center justify-center relative border-b border-white/5">
             <div className={`flex items-center gap-3 transition-all duration-300 ${isSidebarHovered ? 'px-6 w-full justify-start' : ''}`}>
                  <div className="w-10 h-10 bg-white/10 rounded-xl flex items-center justify-center flex-shrink-0 backdrop-blur-sm cursor-pointer" onClick={() => setActiveView('dashboard')}>
                      <HeartPulse className="text-blue-400" />
                  </div>
                  <div className={`overflow-hidden transition-all duration-300 ${isSidebarHovered ? 'w-auto opacity-100' : 'w-0 opacity-0'}`}>
                      <span className="font-bold text-lg whitespace-nowrap tracking-wide">Expert<span className="text-blue-400">Hub</span></span>
                  </div>
             </div>
          </div>

          {/* Nav */}
          <nav className="flex-1 py-6 space-y-1 overflow-y-auto overflow-x-hidden no-scrollbar">
            {[
                { id: 'dashboard', name: 'Vue d\'ensemble', icon: LayoutDashboard },
                { id: 'cas', name: 'Cas Cliniques', icon: FileText },
                { id: 'symptom', name: 'Symptômes', icon: Activity },
                { id: 'pathologies', name: 'Pathologies', icon: Bug },
                { id: 'traitements', name: 'Pharmacopée', icon: Syringe },
                { id: 'media', name: 'Imagerie', icon: ImageIcon },
            ].map((item) => (
                <button 
                  key={item.id} onClick={() => setActiveView(item.id as ViewType)}
                  className={`relative flex items-center h-12 w-full px-6 transition-all duration-200 group outline-none ${activeView === item.id ? 'text-white' : 'text-slate-400 hover:text-white'}`}
                >
                  {activeView === item.id && <div className="absolute left-0 top-0 bottom-0 w-1 bg-blue-500 rounded-r-full shadow-[0_0_15px_rgba(59,130,246,0.6)] animate-pulse" />}
                  <div className={`relative z-10 flex items-center gap-4 ${isSidebarHovered ? 'justify-start w-full' : 'justify-center w-full'}`}>
                      <item.icon className={`w-5 h-5 transition-all duration-300 ${activeView === item.id ? 'text-blue-400 scale-110' : ''}`} />
                      <span className={`font-medium whitespace-nowrap transition-all duration-300 origin-left ${isSidebarHovered ? 'opacity-100 translate-x-0' : 'opacity-0 -translate-x-10 w-0'}`}>{item.name}</span>
                      {isSidebarHovered && activeView === item.id && <ChevronRight className="w-4 h-4 ml-auto text-blue-400" />}
                  </div>
                </button>
            ))}
          </nav>

          <div className="p-4 border-t border-white/10 bg-[#04203d]">
              <Link href="/" className={`w-full flex items-center h-12 rounded-xl hover:bg-white/5 text-slate-300 hover:text-white transition-all px-2 ${isSidebarHovered ? '' : 'justify-center'}`}>
                  <div className={`${isSidebarHovered ? 'mr-4' : ''}`}><Home className="w-5 h-5" /></div>
                  <span className={`font-medium whitespace-nowrap transition-all duration-300 overflow-hidden ${isSidebarHovered ? 'w-auto opacity-100' : 'w-0 opacity-0'}`}>Retour Site</span>
              </Link>
          </div>
        </aside>

        {/* CONTENU PRINCIPAL */}
        <div className="flex-1 flex flex-col relative transition-all duration-500 ease-in-out md:ml-20">
          {activeView !== 'dashboard' && <ExpertHeader />}
          <main className="flex-1 overflow-x-hidden overflow-y-auto bg-slate-50/50">
             <Suspense fallback={<FunFactLoader />}>
                {renderContent()}
             </Suspense>
          </main>
        </div>
      </div>
    </CaseProvider>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\onboarding\page.tsx
================================================================================

// app/onboarding/page.tsx
'use client';

import { Suspense } from 'react';
import dynamic from 'next/dynamic';
import FunFactLoader from "@/components/common/FunFactLoader";

const OnboardingContent = dynamic(() => import('@/components/auth/Onboarding'), {
    ssr: false, // Pas de SSR car utilise beaucoup d'effets visuels et états client
    loading: () => <FunFactLoader />
});

export default function OnboardingPage() {
  return (
    <Suspense fallback={<FunFactLoader />}>
        <OnboardingContent />
    </Suspense>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\profile\page.tsx
================================================================================

// app/profile/page.tsx
'use client';

import { Suspense } from 'react';
import dynamic from 'next/dynamic';
import FunFactLoader from "@/components/common/FunFactLoader";

const Profile = dynamic(() => import('@/components/user/Profile'), {
    ssr: false,
    loading: () => <div className="min-h-screen bg-white flex items-center justify-center text-slate-400">Chargement de votre profil...</div>
});

export default function ProfilePage() {
  return (
    <Suspense fallback={<FunFactLoader />}>
        <Profile />
    </Suspense>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\connexion\page.tsx
================================================================================

// app/connexion/page.tsx
'use client';
import { Suspense } from "react";
import FunFactLoader from "@/components/common/FunFactLoader";
import dynamic from 'next/dynamic';

const AuthForm = dynamic(() => import('@/components/auth/Authentification'), {
    loading: () => <FunFactLoader />,
    ssr: false
});

export default function ConnexionPage() {
  return (
    <Suspense fallback={<FunFactLoader />}>
       <AuthForm mode="login" />
    </Suspense>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\inscription\page.tsx
================================================================================

// app/inscription/page.tsx
'use client';

import React, { useState, Suspense } from 'react';
import dynamic from 'next/dynamic';
import FunFactLoader from "@/components/common/FunFactLoader";

const AuthForm = dynamic(() => import('@/components/auth/Authentification'), { loading: () => <FunFactLoader />, ssr: false });
const Onboarding = dynamic(() => import('@/components/auth/Onboarding'), { loading: () => <FunFactLoader />, ssr: false });

function InscriptionContent() {
    const [registrationStarted, setRegistrationStarted] = useState(false);

    if (registrationStarted) {
        return <Onboarding />;
    }
  
    return <AuthForm mode="register" onSuccess={() => setRegistrationStarted(true)} />;
}

export default function InscriptionPage() {
    return (
        <Suspense fallback={<FunFactLoader />}>
            <InscriptionContent />
        </Suspense>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\api\chat\route.ts
================================================================================

// app/api/chat/route.ts
import { NextResponse } from 'next/server';

export async function POST() {
  return NextResponse.json(
    { message: "Service de chat en cours de construction" },
    { status: 200 }
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\api\backend\[...path]\route.ts
================================================================================

// app/api/backend/[...path]/route.ts
import { NextRequest, NextResponse } from 'next/server';

// URL Backend (Variable d'environnement recommandée pour la prod)
const API_URL = process.env.BACKEND_API_URL || "https://expert-cmck.onrender.com/api/v1";

/**
 * PROXY INVERSE ROBUSTE (Frontend <-> NextJS Server <-> FastAPI Render)
 * Gère le trailing slash et le nettoyage des headers pour éviter les erreurs CORS/Redirect.
 */
async function handler(req: NextRequest, { params }: { params: Promise<{ path: string[] }> }) {
  // 1. Résolution des paramètres (Next.js 15+)
  const { path } = await params;
  
  // 2. Construction de l'URL cible
  // FastAPI est sensible aux trailing slashes. Si le dernier segment n'a pas de slash, on fait attention.
  const pathString = path.join('/');
  
  // Gestion query string
  const searchParams = req.nextUrl.searchParams.toString();
  const queryString = searchParams ? `?${searchParams}` : '';
  
  // On construit l'URL finale. 
  // Note: On s'assure que si pathString est vide, on tape la racine correctement.
  const targetUrl = `${API_URL}/${pathString}${queryString}`;

  console.log(`🔀 [PROXY] ${req.method} -> ${targetUrl}`);

  // 3. Préparation des headers
  // On ne transfère PAS aveuglément tous les headers du navigateur (surtout pas "Host"), 
  // sinon Render rejette la requête.
  const headers = new Headers();
  headers.set('Content-Type', 'application/json');
  headers.set('Accept', 'application/json');
  // Ici vous pourrez ajouter votre Token d'Auth Admin plus tard:
  // headers.set('Authorization', `Bearer ${process.env.API_SECRET_KEY}`);

  // 4. Gestion du Body
  const fetchOptions: RequestInit = {
    method: req.method,
    headers: headers,
    // important : "follow" permet à Node.js de suivre la redirection (http->https) 
    // SANS dire au navigateur de le faire.
    redirect: 'follow', 
  };

  if (!['GET', 'HEAD'].includes(req.method)) {
    try {
      const textBody = await req.text();
      if (textBody) {
        fetchOptions.body = textBody;
      }
    } catch (e) {
      console.error("Erreur lecture body proxy", e);
    }
  }

  try {
    // 5. Appel Serveur-à-Serveur
    const response = await fetch(targetUrl, fetchOptions);

    // 6. Gestion des erreurs HTTP du Backend
    if (!response.ok) {
        const errorText = await response.text();
        console.error(`❌ [PROXY ERROR ${response.status}]`, errorText);
        return NextResponse.json(
            { error: `Backend Error: ${response.statusText}`, details: errorText }, 
            { status: response.status }
        );
    }

    // 7. Retour propre au Frontend
    // On force la conversion en JSON pour garantir que le navigateur reçoit des données, pas une stream opaque
    const data = await response.json();
    return NextResponse.json(data);

  } catch (error: any) {
    console.error("🔥 [PROXY CRASH]", error);
    return NextResponse.json(
      { error: "Erreur de communication avec le serveur expert" }, 
      { status: 502 }
    );
  }
}

// Export pour toutes les méthodes
export const GET = handler;
export const POST = handler;
export const PUT = handler;
export const PATCH = handler;
export const DELETE = handler;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\aide\page.tsx
================================================================================

'use client';

import React, { useState, useMemo } from 'react';
import { 
  Search, Play, LayoutDashboard, Settings, UserPlus, LogIn, 
  HelpCircle, Activity, Download, FileText, ChevronRight,
  ShieldCheck, Terminal, Stethoscope, Microscope, 
  BrainCircuit, Database, LineChart, Syringe, ClipboardCheck,
  MousePointer2, KeyRound, Lightbulb, GraduationCap,
  AlertTriangle
} from 'lucide-react';
import { motion } from 'framer-motion';

// --- DATA : LE CONTENU DU GUIDE ---

type Category = 'tous' | 'start' | 'simulation' | 'dashboard' | 'expert';

interface HelpStep {
  icon: React.ElementType;
  text: string;
}

interface GuideItem {
  id: string;
  category: Category;
  title: string;
  icon: React.ElementType;
  description: string;
  steps: HelpStep[];
}

const HELP_DATA: GuideItem[] = [
  // --- DÉMARRAGE ---
  {
    id: '1',
    category: 'start',
    title: 'Création de compte',
    icon: UserPlus,
    description: "Rejoignez l'élite médicale en créant votre profil apprenant sécurisé.",
    steps: [
      { icon: MousePointer2, text: "Cliquez sur 'Commencer' en haut à droite." },
      { icon: FileText, text: "Remplissez le formulaire avec votre email universitaire." },
      { icon: KeyRound, text: "Un **Matricule Unique** (ex: DOC-88) sera généré." },
      { icon: ShieldCheck, text: "Notez-le précieusement, c'est votre identifiant de connexion." }
    ]
  },
  {
    id: '2',
    category: 'start',
    title: 'Connexion Sécurisée',
    icon: LogIn,
    description: "Accédez à votre tableau de bord personnel.",
    steps: [
      { icon: LogIn, text: "Allez sur la page 'Connexion'." },
      { icon: UserPlus, text: "Entrez votre Matricule et votre Email." },
      { icon: Lightbulb, text: "Astuce : Cochez 'Se souvenir de moi' pour gagner du temps." },
      { icon: Activity, text: "Vous serez redirigé vers votre Dashboard." }
    ]
  },

  // --- SIMULATION ---
  {
    id: '3',
    category: 'simulation',
    title: 'Lancer un Cas Clinique',
    icon: Play,
    description: "Plongez dans un scénario réaliste.",
    steps: [
      { icon: Search, text: "Depuis le Dashboard, allez sur 'M'exercer'." },
      { icon: BrainCircuit, text: "Choisissez une spécialité (ex: Cardiologie)." },
      { icon: Play, text: "Sélectionnez un cas ou 'Cas Aléatoire'." },
      { icon: ClipboardCheck, text: "Lisez le motif d'admission avant de commencer." }
    ]
  },
  {
    id: '4',
    category: 'simulation',
    title: 'Dialogue avec le Patient (IA)',
    icon: Stethoscope,
    description: "Menez l'interrogatoire médical.",
    steps: [
      { icon: Terminal, text: "Utilisez la zone de chat pour poser vos questions." },
      { icon: Activity, text: "Surveillez la jauge 'Stress' du patient." },
      { icon: AlertTriangle, text: "Attention : vous avez un nombre limité de questions." },
      { icon: ClipboardCheck, text: "L'IA analyse la pertinence de votre anamnèse." }
    ]
  },
  {
    id: '5',
    category: 'simulation',
    title: 'Examens & Traitements',
    icon: Syringe,
    description: "Diagnostiquez et soignez.",
    steps: [
      { icon: Microscope, text: "Ouvrez le volet latéral 'Examens'." },
      { icon: FileText, text: "Prescrivez une biologie ou une imagerie." },
      { icon: Database, text: "Consultez les résultats générés instantanément." },
      { icon: CheckCircle2, text: "Validez le diagnostic final pour voir votre note." }
    ]
  },

  // --- DASHBOARD & EXPERT ---
  {
    id: '6',
    category: 'dashboard',
    title: 'Analyser mes Performances',
    icon: LineChart,
    description: "Comprendre vos forces et faiblesses.",
    steps: [
      { icon: LayoutDashboard, text: "Le Dashboard affiche votre courbe de progression." },
      { icon: BrainCircuit, text: "Consultez le 'Profil Cognitif' pour voir vos biais." },
      { icon: GraduationCap, text: "Reprenez les cas échoués dans l'onglet 'À revoir'." }
    ]
  }
];

// --- COMPOSANT : HEADER HERO ---
const HeroSection = ({ search, setSearch }: { search: string, setSearch: (v: string) => void }) => {
  return (
    <div className="relative w-full h-[400px] overflow-hidden rounded-b-[50px] shadow-2xl mb-12 group">
        
        {/* 1. IMAGE DE FOND + BLUR */}
        <div 
            className="absolute inset-0 bg-cover bg-center transition-transform duration-1000 group-hover:scale-105"
            style={{ 
                backgroundImage: "url('/images/hero-medical-bg.jpg')", 
                filter: "blur(4px)" // Flou artistique natif
            }} 
        />

        {/* 2. FILTRE BLEU FONCÉ (GRADIENT) */}
        <div className="absolute inset-0 bg-[#052648]/90 mix-blend-multiply"></div>
        <div className="absolute inset-0 bg-gradient-to-t from-[#052648] via-transparent to-[#052648]/50"></div>

        {/* 3. PATTERN POINTILLÉ (Overlay Gauche) */}
        <div 
            className="absolute inset-0 opacity-20 pointer-events-none" 
            style={{
                backgroundImage: 'radial-gradient(#ffffff 1.5px, transparent 1.5px)',
                backgroundSize: '24px 24px',
                backgroundPosition: 'left center'
            }}
        />

        {/* CONTENU */}
        <div className="absolute inset-0 flex flex-col items-center justify-center text-white px-4 text-center z-10">
            
            <motion.div 
                initial={{ opacity: 0, y: 20 }} 
                animate={{ opacity: 1, y: 0 }} 
                className="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/10 backdrop-blur border border-white/20 text-xs font-bold uppercase tracking-wider mb-6"
            >
                <HelpCircle size={16} className="text-white" /> Centre d'Assistance
            </motion.div>

            <motion.h1 
                initial={{ opacity: 0, y: 20 }} 
                animate={{ opacity: 1, y: 0 }} 
                transition={{ delay: 0.1 }}
                className="text-4xl md:text-5xl font-extrabold mb-8 max-w-3xl leading-tight"
            >
                Maîtrisez la plateforme <br/> <span className="border-b-4 border-white/20">The Good Doctor</span>
            </motion.h1>

            {/* BARRE DE RECHERCHE */}
            <motion.div 
                initial={{ opacity: 0, scale: 0.95 }}
                animate={{ opacity: 1, scale: 1 }}
                transition={{ delay: 0.2 }}
                className="relative w-full max-w-xl"
            >
                <Search className="absolute left-5 top-1/2 -translate-y-1/2 text-[#052648]/60 w-5 h-5" />
                <input 
                    type="text" 
                    value={search}
                    onChange={(e) => setSearch(e.target.value)}
                    placeholder="Rechercher une fonctionnalité (ex: Examen, Note...)" 
                    className="w-full pl-12 pr-6 py-4 rounded-2xl bg-white/95 text-[#052648] font-medium text-lg placeholder-[#052648]/40 outline-none focus:ring-4 focus:ring-white/30 shadow-xl transition-all"
                />
            </motion.div>
        </div>
    </div>
  );
};

import { CheckCircle2 } from 'lucide-react'; // Manquait dans les imports initiaux

// --- PAGE PRINCIPALE ---
export default function HelpPage() {
  const [activeCat, setActiveCat] = useState<Category>('tous');
  const [searchQuery, setSearchQuery] = useState('');

  // Logique Filtrage
  const filteredGuides = useMemo(() => {
    return HELP_DATA.filter(item => {
      const matchText = item.title.toLowerCase().includes(searchQuery.toLowerCase()) || 
                        item.description.toLowerCase().includes(searchQuery.toLowerCase());
      const matchCat = activeCat === 'tous' || item.category === activeCat;
      return matchText && matchCat;
    });
  }, [searchQuery, activeCat]);

  return (
    <div className="min-h-screen bg-slate-50 font-sans text-slate-800 pb-20">
      
      {/* 1. HERO HEADER */}
      <HeroSection search={searchQuery} setSearch={setSearchQuery} />

      <main className="max-w-7xl mx-auto px-6">
        
        {/* 2. BOUTON PDF (Téléchargement Global) */}
        <div className="flex flex-col md:flex-row justify-between items-center mb-10 gap-4">
            
            {/* Filtres Onglets */}
            <div className="flex flex-wrap justify-center gap-2">
                {[
                    { id: 'tous', label: 'Tout' },
                    { id: 'start', label: 'Démarrage' },
                    { id: 'simulation', label: 'Simulations' },
                    { id: 'dashboard', label: 'Dashboard' },
                ].map((tab) => (
                    <button
                        key={tab.id}
                        onClick={() => setActiveCat(tab.id as Category)}
                        className={`px-5 py-2.5 rounded-xl text-sm font-bold transition-all border ${
                            activeCat === tab.id 
                            ? 'bg-[#052648] text-white border-[#052648] shadow-lg' 
                            : 'bg-white text-slate-500 border-slate-200 hover:border-[#052648] hover:text-[#052648]'
                        }`}
                    >
                        {tab.label}
                    </button>
                ))}
            </div>

            {/* Bouton Guide PDF */}
            <a 
                href="/docs/guide_utilisateur_v1.pdf" 
                download
                className="group flex items-center gap-3 bg-white border-2 border-[#052648]/10 px-6 py-3 rounded-xl hover:bg-[#052648] hover:text-white transition-all shadow-sm hover:shadow-xl active:scale-95 cursor-pointer"
            >
                <div className="bg-[#052648]/10 p-2 rounded-lg group-hover:bg-white/20 transition-colors">
                    <Download size={20} className="text-[#052648] group-hover:text-white"/>
                </div>
                <div className="text-left">
                    <p className="text-[10px] font-bold opacity-60 uppercase tracking-wider">Document</p>
                    <p className="text-sm font-bold leading-none">Télécharger le Guide PDF</p>
                </div>
            </a>
        </div>

        {/* 3. GRILLE DE CONTENU (Cartes Directes) */}
        {filteredGuides.length > 0 ? (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {filteredGuides.map((item, index) => (
                    <motion.div 
                        key={item.id}
                        initial={{ opacity: 0, y: 20 }}
                        whileInView={{ opacity: 1, y: 0 }}
                        viewport={{ once: true }}
                        transition={{ delay: index * 0.1 }}
                        className="bg-white rounded-3xl border border-slate-100 shadow-sm hover:shadow-2xl hover:border-[#052648]/20 transition-all duration-300 overflow-hidden flex flex-col group h-full"
                    >
                        {/* Header Card */}
                        <div className="p-6 bg-gradient-to-br from-slate-50 to-white border-b border-slate-100">
                            <div className="w-14 h-14 bg-[#052648] text-white rounded-2xl flex items-center justify-center mb-4 shadow-lg group-hover:scale-110 transition-transform duration-300">
                                <item.icon size={28} />
                            </div>
                            <h3 className="text-xl font-extrabold text-[#052648] mb-2">{item.title}</h3>
                            <p className="text-sm text-slate-500 font-medium leading-relaxed">{item.description}</p>
                        </div>

                        {/* Steps List */}
                        <div className="p-6 pt-4 flex-1">
                            <ul className="space-y-4">
                                {item.steps.map((step, i) => (
                                    <li key={i} className="flex gap-4 items-start">
                                        <div className="mt-0.5 p-1.5 rounded-lg bg-[#052648]/5 text-[#052648] shrink-0">
                                            <step.icon size={14} strokeWidth={3} />
                                        </div>
                                        <p className="text-sm text-slate-700 leading-snug">
                                            {step.text.split('**').map((part, j) => 
                                                j % 2 === 1 ? <strong key={j} className="text-[#052648] font-bold">{part}</strong> : part
                                            )}
                                        </p>
                                    </li>
                                ))}
                            </ul>
                        </div>

                    </motion.div>
                ))}
            </div>
        ) : (
            <div className="text-center py-20 opacity-50">
                <Search size={48} className="mx-auto mb-4" />
                <p>Aucun résultat ne correspond à votre recherche.</p>
            </div>
        )}

      </main>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\globals.css
================================================================================

@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}



================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\layout.tsx
================================================================================

// app/layout.tsx

import type { Metadata } from "next";
import "./globals.css";
import { Toaster } from 'react-hot-toast'; // C'est une bonne pratique de mettre le Toaster ici
import { AuthProvider } from "@/contexts/AuthContext"; // <-- IMPORTER LE FOURNISSEUR

export const metadata: Metadata = {
  title: "The Good Doctor - Simulation Médicale",
  description: "Plateforme de simulation médicale interactive et d'aide à la décision.",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="fr">
      <body className="antialiased">
        {/* ENVELOPPER L'APPLICATION AVEC LE FOURNISSEUR */}
        <AuthProvider>
          {children}
          <Toaster position="top-center" reverseOrder={false} />
        </AuthProvider>
      </body>
    </html>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\app\page.tsx
================================================================================

// app/page.tsx
'use client';

import React, { useState, useEffect } from 'react';
import Link from 'next/link';
import { 
  Menu, X, ArrowRight, Star, Play, Stethoscope, 
  CheckCircle, Award, HeartPulse, Zap, GraduationCap, 
  Users, Mail, Phone, Facebook, Twitter, Linkedin, 
  Instagram, Youtube, ChevronRight, Activity, Brain, BarChart3, 
  Smartphone,
  MapPin
} from 'lucide-react';
import Image from 'next/image';
import router, { useRouter } from 'next/navigation';

function Navbar() {
  const [isOpen, setIsOpen] = useState(false);
  const [scrolled, setScrolled] = useState(false);
  
  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 20);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  return (
    <nav className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${scrolled ? 'bg-white/95 backdrop-blur-md shadow-sm py-2' : 'bg-transparent py-4'}`}>
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between items-center h-16">
          <div className="flex items-center space-x-2">
            <div className="w-10 h-10 bg-gradient-to-br from-[#052648] to-[#0a4d8f] rounded-xl flex items-center justify-center shadow-lg shadow-blue-900/20">
              <HeartPulse className="text-white" size={22} />
            </div>
            <span className={`text-2xl font-bold tracking-tight ${scrolled ? 'text-[#052648]' : 'text-[#052648]'}`}>The Good Doctor</span>
          </div>

          <div className="hidden md:flex items-center space-x-8">
            {['Accueil', 'Fonctionnalités', 'Réseau', 'Contact'].map((item) => (
              <a key={item} href={`#${item.toLowerCase()}`} className="text-gray-600 hover:text-[#052648] font-medium transition-colors text-sm">{item}</a>
            ))}
          </div>

          <div className="hidden md:flex items-center space-x-4">
            <Link 
              href="/connexion" 
              className="text-[#052648] font-semibold hover:bg-slate-50 px-4 py-2 rounded-lg transition-colors text-sm"
            >
              Connexion
            </Link>
            <Link
              href="/inscription"
              className="group relative px-6 py-2.5 bg-[#052648] text-white rounded-xl font-medium shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all overflow-hidden"
            >
              <span className="relative z-10">Commencer</span>
              <div className="absolute inset-0 bg-gradient-to-r from-blue-600 to-[#052648] opacity-0 group-hover:opacity-100 transition-opacity duration-300"/>
            </Link>
          </div>

          <button onClick={() => setIsOpen(!isOpen)} className="md:hidden p-2 text-slate-700">
            {isOpen ? <X size={24} /> : <Menu size={24} />}
          </button>
        </div>
      </div>

      {isOpen && (
        <div className="md:hidden bg-white border-t border-slate-100 absolute w-full shadow-xl">
          <div className="px-4 py-6 space-y-4">
            {['Accueil', 'Fonctionnalités', 'Réseau', 'Contact'].map((item) => (
               <a key={item} href={`#${item.toLowerCase()}`} className="block text-gray-600 font-medium py-2">{item}</a>
            ))}
            <div className="pt-4 flex flex-col gap-3">
              <Link href="/connexion" className="w-full px-5 py-3 text-[#052648] font-bold text-center border border-slate-200 rounded-xl">
                Connexion
              </Link>
              <Link href="/inscription" className="w-full px-6 py-3 bg-[#052648] text-white rounded-xl font-bold text-center shadow-lg">
                Commencer gratuitement
              </Link>
            </div>
          </div>
        </div>
      )}
    </nav>
  );
}

function HeroSection() {
  const router = useRouter();
  return (
    <section id="accueil" className="pt-32 pb-20 px-4 bg-gradient-to-br from-gray-50 to-blue-50/50 relative overflow-hidden">
        <div className="absolute inset-0 bg-grid-pattern opacity-5"></div>
        <div className="max-w-7xl mx-auto relative z-10">
          <div className="grid lg:grid-cols-2 gap-12 items-center">
            <div className="space-y-8">
              <div className="inline-flex items-center px-4 py-2 bg-[#052648]/10 backdrop-blur-sm rounded-full text-sm font-medium text-[#052648]">
                <GraduationCap size={20} className="mr-3" />
                Plateforme de Formation Médicale Intelligente
              </div>
              
              <h1 className="text-5xl lg:text-6xl font-bold leading-tight text-gray-900">
                Sauvez des Vies
                <span className="block text-[#052648] mt-2">Virtuelles</span>
              </h1>
              
              <p className="text-xl text-gray-600 leading-relaxed">
                Et devenez un meilleur médecin. La pratique délibérée est la clé du succès clinique. Améliorez vos capacités diagnostiques en traitant des patients simulés.
              </p>
              
              <div className="flex flex-col sm:flex-row gap-4">
                <Link href='/simulation' className="group px-8 py-4 bg-[#052648] text-white rounded-lg font-semibold text-lg hover:bg-[#0a4d8f] transition-all shadow-lg hover:shadow-xl hover:scale-105 flex items-center justify-center gap-2">
                  Jouer Maintenant
                  <ArrowRight size={20} className="group-hover:translate-x-1 transition-transform" />
                </Link>
                {/* --- CORRECTION ICI : Bouton Démo devient Guide --- */}
                <Link 
                  href='/aide' 
                  className="px-8 py-4 bg-white border-2 border-[#052648] text-[#052648] rounded-lg font-semibold text-lg hover:bg-[#052648] hover:text-white transition-all flex items-center justify-center gap-2 group shadow-lg hover:shadow-xl"
                >
                  <Play size={20} className="group-hover:fill-white transition-colors" />
                  Voir le Guide
                </Link>
              </div>
              
              <div className="flex items-center gap-8 pt-4">
                <div className="text-center">
                  <div className="text-3xl font-bold text-[#052648]">10K+</div>
                  <div className="text-sm text-gray-600">Étudiants</div>
                </div>
                <div className="w-px h-12 bg-gray-300"></div>
                <div className="text-center">
                  <div className="text-3xl font-bold text-[#052648]">500+</div>
                  <div className="text-sm text-gray-600">Cas Cliniques</div>
                </div>
                <div className="w-px h-12 bg-gray-300"></div>
                <div className="text-center">
                  <div className="flex items-center gap-1 justify-center mb-1">
                    {[...Array(5)].map((_, i) => (
                      <Star key={i} size={16} className="fill-yellow-400 text-yellow-400" />
                    ))}
                  </div>
                  <div className="text-sm text-gray-600">4.9/5 Notes</div>
                </div>
              </div>
            </div>
            
            <div className="relative">
              <div className="relative z-10">
                <div className="bg-white rounded-2xl p-6 shadow-2xl transform hover:scale-105 transition-transform duration-300">
                  <div className="aspect-video bg-slate-100 rounded-lg overflow-hidden relative">
                    <Image 
                       src="/images/simu1.jpg" 
                       alt="Simulation" 
                       fill 
                       className="object-contain"
                    />
                    <div className="absolute top-4 left-4 bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-medium text-white">
                      EN DIRECT
                    </div>
                  </div>
                  <div className="mt-4 flex items-center justify-between">
                    <div className="flex items-center gap-2">
                      <div className="w-8 h-8 bg-gray-200 rounded-full"></div>
                      <div>
                        <div className="text-sm font-medium text-gray-800">Patient virtuel</div>
                        <div className="text-xs text-gray-500">Cas de cardiologie</div>
                      </div>
                    </div>
                    <div className="flex gap-2">
                      <div className="w-8 h-8 bg-gray-100 rounded-full"></div>
                      <div className="w-8 h-8 bg-gray-100 rounded-full"></div>
                      <div className="w-8 h-8 bg-gray-100 rounded-full"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
  );
}

function AppExperienceSection() {
  return (
    <section className="py-1 bg-white relative overflow-hidden">
      <div className="max-w-7xl mx-auto px-4 relative z-10">
        <div className="grid lg:grid-cols-2 gap-16 items-center">
          
          <div className="relative mx-auto lg:mx-0 max-w-[320px] lg:max-w-[400px]">
             <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[140%] h-[140%] bg-[#052648]/5 rounded-full z-0 blur-3xl"></div>
             
             <div className="relative z-10 bg-slate-900 rounded-[2.5rem] border-8 border-slate-900 shadow-2xl overflow-hidden aspect-[6/8] transform rotate-[-2deg] hover:rotate-0 transition-transform duration-500">
                <div className="absolute inset-0 bg-slate-50 flex flex-col">
                   <div className="h-6 bg-[#052648] w-full shrink-0"></div>
                   <div className="px-6 py-6 bg-[#052648] text-white rounded-b-3xl mb-4 shrink-0">
                      <div className="flex justify-between items-center mb-4">
                         <div className="w-8 h-8 rounded-full bg-white/20"></div>
                         <div className="flex gap-2">
                            <div className="w-2 h-2 rounded-full bg-white"></div>
                            <div className="w-2 h-2 rounded-full bg-white/50"></div>
                         </div>
                      </div>
                      <div className="h-2 w-24 bg-white/30 rounded-full mb-2"></div>
                      <div className="h-2 w-16 bg-white/20 rounded-full"></div>
                   </div>
                   
                   <div className="flex-1 px-4 space-y-3 overflow-hidden relative">
                      {[1,2,3,4].map(i => (
                         <div key={i} className="flex items-center p-3 bg-white rounded-xl shadow-sm border border-slate-100 animate-slide-up" style={{ animationDelay: `${i*150}ms` }}>
                            <div className={`w-10 h-10 rounded-lg flex items-center justify-center mr-3 ${i===1?'bg-cyan-100 text-cyan-600':i===2?'bg-purple-100 text-purple-600':'bg-slate-100 text-slate-400'}`}>
                               <Activity size={20}/>
                            </div>
                            <div className="flex-1 space-y-1">
                               <div className="h-2 w-20 bg-slate-200 rounded"></div>
                               <div className="h-1.5 w-12 bg-slate-100 rounded"></div>
                            </div>
                         </div>
                      ))}
                      <div className="absolute bottom-4 right-4 left-4 bg-[#052648] p-3 rounded-xl shadow-xl flex items-center gap-3 text-white animate-bounce-slow">
                          <div className="p-2 bg-white/20 rounded-lg"><CheckCircle size={16}/></div>
                          <div>
                             <p className="text-xs font-bold">Cas terminé !</p>
                             <p className="text-[10px] opacity-80">Score: 18/20</p>
                          </div>
                      </div>
                   </div>
                </div>
             </div>

             <div className="absolute -bottom-10 -right-10 w-24 h-24 bg-cyan-400/20 rounded-full blur-xl animate-pulse"></div>
          </div>

          <div className="space-y-8">
             <div>
                <h3 className="text-lg font-semibold text-cyan-600 uppercase tracking-widest mb-2">Étudiant ou Professionnel</h3>
                <h2 className="text-3xl lg:text-4xl font-extrabold text-[#052648] leading-tight">
                   Laissez la théorie <br/>
                   <span className="text-slate-300">aux livres.</span> <br/>
                   Passez à la pratique.
                </h2>
                <p className="mt-4 text-md text-slate-600 font-light">
                   Concentrez-vous uniquement sur vos compétences cliniques. Notre plateforme gère la complexité pédagogique pour vous.
                </p>
             </div>

             <div className="grid gap-3">
                <div className="flex gap-5 p-4 rounded-2xl hover:bg-slate-50 transition-colors border border-transparent hover:border-slate-100 group">
                   <div className="w-14 h-14 bg-gradient-to-br from-[#052648] to-blue-900 rounded-xl flex items-center justify-center text-white shrink-0 shadow-lg group-hover:scale-110 transition-transform">
                      <Users size={28}/>
                   </div>
                   <div>
                      <h4 className="text-xl font-bold text-[#052648] mb-1">Accès illimité aux patients virtuels</h4>
                      <p className="text-sm text-slate-500">Une file active gigantesque générée par IA. Chaque jour de nouveaux cas.</p>
                   </div>
                </div>

                <div className="flex gap-5 p-4 rounded-2xl hover:bg-slate-50 transition-colors border border-transparent hover:border-slate-100 group">
                   <div className="w-14 h-14 bg-gradient-to-br from-cyan-500 to-teal-600 rounded-xl flex items-center justify-center text-white shrink-0 shadow-lg group-hover:scale-110 transition-transform">
                      <Smartphone size={28}/>
                   </div>
                   <div>
                      <h4 className="text-xl font-bold text-[#052648] mb-1">Connexion fluide partout</h4>
                      <p className="text-sm text-slate-500">Depuis votre smartphone ou votre ordinateur. En quelques clics, vous traitez votre premier patient.</p>
                   </div>
                </div>

                <div className="flex gap-5 p-4 rounded-2xl hover:bg-slate-50 transition-colors border border-transparent hover:border-slate-100 group">
                   <div className="w-14 h-14 bg-gradient-to-br from-[#052648] to-[#0a4d8f] rounded-xl flex items-center justify-center text-white shrink-0 shadow-lg group-hover:scale-110 transition-transform">
                      <BarChart3 size={28}/>
                   </div>
                   <div>
                      <h4 className="text-xl font-bold text-[#052648] mb-1">Feedback Tuteur IA & Gestion</h4>
                      <p className="text-sm text-slate-500">Rapports de performance détaillés, organisation des lacunes et plans de révision personnalisés.</p>
                   </div>
                </div>
             </div>
          </div>

        </div>
      </div>
    </section>
  );
}

function NetworkMapSection() {
  return (
    <section className="py-24 bg-slate-50 overflow-hidden relative">
        <div className="max-w-7xl mx-auto px-4 relative z-10">
            <div className="grid lg:grid-cols-12 gap-12 items-center">
                <div className="lg:col-span-5 space-y-10">
                    <div className="space-y-4">
                        <h2 className="text-3xl lg:text-4xl font-extrabold text-[#052648] leading-tight">
                            Nous sommes présents dans <span className="bg-gradient-to-r from-blue-600 to-cyan-500 bg-clip-text text-transparent">toutes les régions.</span>
                        </h2>
                        <p className="text-slate-600 text-lg">
                            Rejoignez la plus grande communauté d'apprentissage médical en Afrique Centrale. Ne vous préoccupez que de vos compétences.
                        </p>
                    </div>

                    <div className="space-y-4">
                        <div className="bg-white p-5 rounded-2xl shadow-sm border border-slate-200/60 flex items-start gap-4 hover:-translate-y-1 transition-transform cursor-default">
                            <span className="text-5xl font-extrabold text-slate-200 shrink-0 select-none">1<sup className="text-3xl align-top">er</sup></span>
                            <div>
                                <h4 className="text-lg font-bold text-[#052648] mb-1">Plateforme Spécialisée</h4>
                                <p className="text-sm text-slate-500">Première IA générative dédiée exclusivement au contexte médical local et tropical.</p>
                            </div>
                        </div>

                        <div className="bg-white p-5 rounded-2xl shadow-sm border border-slate-200/60 flex items-center gap-4 hover:-translate-y-1 transition-transform cursor-default">
                            <div className="w-12 h-12 rounded-full bg-cyan-50 flex items-center justify-center text-cyan-600 shrink-0">
                                <Users size={24} />
                            </div>
                            <div>
                                <h4 className="text-lg font-bold text-[#052648] mb-1">Communauté Active</h4>
                                <p className="text-sm text-slate-500">Un réseau d'entraide entre étudiants et experts.</p>
                            </div>
                        </div>

                        <div className="bg-white p-5 rounded-2xl shadow-sm border border-slate-200/60 flex items-center gap-4 hover:-translate-y-1 transition-transform cursor-default">
                            <div className="w-12 h-12 rounded-full bg-purple-50 flex items-center justify-center text-purple-600 shrink-0">
                                <Award size={24} />
                            </div>
                            <div>
                                <h4 className="text-lg font-bold text-[#052648] mb-1">Support Premium</h4>
                                <p className="text-sm text-slate-500">Accompagnement pédagogique pour tous les membres.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div className="lg:col-span-7 relative h-[500px] w-full">
                    <div className="absolute inset-0 flex items-center justify-center">
                        <img 
                            src="/images/map.png" 
                            alt="Carte du réseau" 
                            className="w-full h-full max-w-[650px] object-contain opacity-90 hover:opacity-40 transition-opacity duration-500" 
                        />
                    </div>
                    
                    <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-[#052648] w-4 h-4 rounded-full shadow-[0_0_20px_#052648] animate-ping-slow"></div>
                    
                    {[
                        { t: '55%', l: '30%', img: 'https://i.pravatar.cc/150?u=1', d: '0s' },
                        { t: '75%', l: '50%', img: 'https://i.pravatar.cc/150?u=2', d: '1.2s' },
                        { t: '65%', l: '80%', img: 'https://i.pravatar.cc/150?u=4', d: '0.5s' },
                        { t: '80%', l: '45%', img: 'https://i.pravatar.cc/150?u=5', d: '1.8s' }
                    ].map((pin, i) => (
                        <div key={i} className="absolute flex flex-col items-center gap-1 group cursor-pointer hover:z-50" style={{ top: pin.t, left: pin.l }}>
                            <div className="relative w-12 h-12 rounded-full border-4 border-white shadow-lg overflow-hidden transform group-hover:scale-125 transition-transform duration-300" style={{ animation: `float 3s ease-in-out infinite ${pin.d}` }}>
                                <img src={pin.img} alt="User" className="w-full h-full object-cover"/>
                            </div>
                            <div className="opacity-0 group-hover:opacity-100 bg-[#052648] text-white text-[10px] font-bold py-1 px-2 rounded-full transition-opacity absolute top-12 whitespace-nowrap">
                                Étudiant Actif
                            </div>
                        </div>
                    ))}
                    
                    <div className="absolute top-10 right-0 bg-white/80 backdrop-blur shadow-xl rounded-xl p-4 max-w-[180px] animate-float">
                        <div className="flex -space-x-2 mb-2">
                            {[1,2,3].map(j=><div key={j} className="w-8 h-8 rounded-full border-2 border-white bg-slate-200"></div>)}
                        </div>
                        <p className="text-xs font-semibold text-slate-700">Rejoint par +120 étudiants cette semaine</p>
                    </div>

                </div>
            </div>
        </div>
    </section>
  );
}

function Footer() {
  return (
    <footer className="bg-[#052648] text-white overflow-hidden relative">
      <div className="absolute top-0 right-0 -mt-20 -mr-20 w-80 h-80 bg-white/5 rounded-full blur-3xl"></div>
      <div className="absolute bottom-0 left-0 -mb-20 -ml-20 w-80 h-80 bg-cyan-500/10 rounded-full blur-3xl"></div>

      <div className="max-w-7xl mx-auto px-4 py-16 relative z-10">
        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12">
          <div className="space-y-6">
            <div className="flex items-center space-x-2">
              <div className="w-10 h-10 bg-gradient-to-br from-cyan-400 to-blue-400 rounded-lg flex items-center justify-center">
                <HeartPulse className="text-[#052648]" size={20} strokeWidth={3}/>
              </div>
              <span className="text-2xl font-bold tracking-wide">FullTang</span>
            </div>
            <p className="text-blue-100/80 leading-relaxed text-sm">
              Votre partenaire de formation médicale pour devenir un médecin d'excellence au Cameroun et en Afrique.
            </p>
            <div className="flex space-x-4">
              {[Facebook, Twitter, Linkedin, Instagram, Youtube].map((Icon, i) => (
                <a key={i} href="#" className="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-white hover:text-[#052648] transition-all transform hover:-translate-y-1">
                  <Icon size={18} />
                </a>
              ))}
            </div>
          </div>

          <div>
            <h3 className="text-lg font-bold mb-6 flex items-center gap-2">Liens Rapides <div className="h-1 w-8 bg-cyan-400 rounded-full"></div></h3>
            <ul className="space-y-3">
              {['Accueil', 'Fonctionnalités', 'Réseau', 'Tarifs', 'Contact'].map((link, i) => (
                <li key={i}>
                  <a href="#" className="text-blue-100/70 hover:text-white transition-colors flex items-center gap-2 group text-sm">
                    <ChevronRight size={14} className="opacity-0 group-hover:opacity-100 transition-opacity text-cyan-400"/> {link}
                  </a>
                </li>
              ))}
            </ul>
          </div>

          <div>
            <h3 className="text-lg font-bold mb-6 flex items-center gap-2">Ressources <div className="h-1 w-8 bg-cyan-400 rounded-full"></div></h3>
            <ul className="space-y-3">
              {['Bibliothèque de Cas', 'Guides ECN', 'Blog Médical', 'Support', 'Partenaires'].map((link, i) => (
                <li key={i}>
                  <a href="#" className="text-blue-100/70 hover:text-white transition-colors flex items-center gap-2 group text-sm">
                    <ChevronRight size={14} className="opacity-0 group-hover:opacity-100 transition-opacity text-cyan-400"/> {link}
                  </a>
                </li>
              ))}
            </ul>
          </div>

          <div>
            <h3 className="text-lg font-bold mb-6 flex items-center gap-2">Nous Contacter <div className="h-1 w-8 bg-cyan-400 rounded-full"></div></h3>
            <ul className="space-y-4">
              <li className="flex items-start gap-4">
                <div className="w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center shrink-0">
                    <Mail className="text-cyan-400" size={16} />
                </div>
                <div>
                  <div className="text-xs text-blue-200">Email</div>
                  <a href="mailto:contact@fulltang.cm" className="text-white hover:text-cyan-400 transition-colors text-sm">contact@fulltang.cm</a>
                </div>
              </li>
              <li className="flex items-start gap-4">
                <div className="w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center shrink-0">
                    <Phone className="text-cyan-400" size={16} />
                </div>
                <div>
                  <div className="text-xs text-blue-200">Téléphone</div>
                  <a href="tel:+237699000000" className="text-white hover:text-cyan-400 transition-colors text-sm">+237 699 00 00 00</a>
                </div>
              </li>
              <li className="flex items-start gap-4">
                <div className="w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center shrink-0">
                    <MapPin className="text-cyan-400" size={16} />
                </div>
                <div>
                  <div className="text-xs text-blue-200">Siège</div>
                  <p className="text-white text-sm">Yaoundé, Cameroun</p>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <div className="border-t border-white/10 pt-8 mt-8">
          <div className="flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-blue-200/60">
            <p>© 2025 FullTang Medical. Tous droits réservés.</p>
            <div className="flex flex-wrap justify-center gap-6">
              {['Confidentialité', 'CGU', 'Mentions Légales'].map((link, i) => (
                <a key={i} href="#" className="hover:text-white transition-colors">{link}</a>
              ))}
            </div>
          </div>
        </div>
      </div>
    </footer>
  );
}

export default function Home() {
  return (
    <div className="min-h-screen bg-white scroll-smooth font-sans text-slate-900 selection:bg-cyan-100 selection:text-[#052648]">
      <Navbar />

      <main>
        <HeroSection />
        
        {/* Highlight Section */}
        <section className="py-16 bg-white relative z-20 -mt-10 rounded-t-[3rem] shadow-[0_-10px_40px_rgba(0,0,0,0.02)]">
          <div className="max-w-7xl mx-auto px-4">
            <div className="text-center mb-12">
                <span className="text-cyan-600 font-bold uppercase tracking-widest text-xs">Pédagogie Avancée</span>
                <h2 className="text-3xl font-bold text-[#052648] mt-2">Apprendre par la simulation</h2>
            </div>
            
            <div className="grid md:grid-cols-3 gap-8">
              {[
                { icon: Brain, title: "Raisonnement Clinique", desc: "Développez vos réflexes face aux urgences." },
                { icon: Stethoscope, title: "Sémiologie", desc: "Interprétez les signes physiques virtuels avec précision." },
                { icon: BarChart3, title: "Analyse & Feedback", desc: "Suivez votre progression courbe par courbe." }
              ].map((item, i) => (
                <div key={i} className="text-center p-8 rounded-2xl hover:bg-slate-50 transition-colors group cursor-default">
                  <div className="w-16 h-16 bg-[#052648] rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-blue-900/20 group-hover:scale-110 transition-transform">
                    <item.icon className="text-white" size={32} />
                  </div>
                  <h3 className="text-xl font-bold text-[#052648] mb-3">{item.title}</h3>
                  <p className="text-slate-600">{item.desc}</p>
                </div>
              ))}
            </div>
          </div>
        </section>

        <AppExperienceSection />
        <NetworkMapSection />

        <section id="contact" className="py-24 px-4 bg-white text-white relative overflow-hidden">
           <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
           <div className="max-w-4xl mx-auto text-center space-y-8 relative z-10">
              <h2 className="text-4xl lg:text-5xl text-[#052648] font-extrabold tracking-tight">
                Rejoignez l'élite médicale de demain.
              </h2>
              <p className="text-xl text-blue-900 max-w-2xl mx-auto">
                Commencez gratuitement dès aujourd'hui et accédez à une bibliothèque de cas conçue par des professeurs agrégés.
              </p>
              <div className="flex flex-col sm:flex-row gap-4 justify-center pt-4">
                <button className="px-10 py-4 bg-white text-[#052648] rounded-xl font-bold text-lg hover:bg-cyan-50 transition-all hover:shadow-2xl hover:scale-105 flex items-center justify-center gap-2">
                  Essai Gratuit
                  <Zap size={20} className="fill-[#052648]" />
                </button>
                <button className="px-10 py-4 bg-[#052648] border-2 border-white/20 text-white rounded-xl font-bold text-lg hover:bg-white/10 transition-all backdrop-blur-sm">
                  Voir les Tarifs Universitaires
                </button>
              </div>
           </div>
        </section>
      </main>

      <Footer />

      <style jsx global>{`
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(2deg); }
          50% { transform: translateY(-10px) rotate(-1deg); }
        }
        @keyframes float-delayed {
          0%, 100% { transform: translateY(0px) rotate(-2deg); }
          50% { transform: translateY(-8px) rotate(1deg); }
        }
        @keyframes slideInUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes pulse-slow {
          0%, 100% { opacity: 0.1; transform: scale(1); }
          50% { opacity: 0.3; transform: scale(1.05); }
        }
        @keyframes ping-slow {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(4); opacity: 0; }
        }
        @keyframes bounce {
          0%, 100% {
            transform: translateY(-25%);
            animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
          }
          50% {
            transform: none;
            animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
          }
        }
        
        .animate-float { animation: float 6s ease-in-out infinite; }
        .animate-float-delayed { animation: float-delayed 5s ease-in-out infinite 2s; }
        .animate-slide-up { animation: slideInUp 0.6s ease-out forwards; opacity: 0; }
        .animate-spin-slow { animation: spin-slow 20s linear infinite; }
        .animate-pulse-slow { animation: pulse-slow 4s ease-in-out infinite; }
        .animate-ping-slow { animation: ping-slow 3s cubic-bezier(0, 0, 0.2, 1) infinite; }
        .animate-bounce-slow { animation: bounce 3s infinite; }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      `}</style>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\simulation\HomeView.tsx
================================================================================

// components/simulation/HomeView.tsx
'use client';
import { Shuffle, Settings } from 'lucide-react'; // Added Settings icon for difficulty selector
import { services, difficultyLevels } from '@/types/simulation/constant';
import { Service } from '@/types/simulation/types';

interface HomeViewProps {
  difficulty: string; // The current difficulty selected
  onDifficultyChange: (level: string) => void; // Function to update difficulty
  onServiceSelect: (service: Service, difficulty: string) => void; // Modified to pass difficulty
  onRandomCase: (difficulty: string) => void; // Modified to pass difficulty
}

const HomeView: React.FC<HomeViewProps> = ({ difficulty, onDifficultyChange, onServiceSelect, onRandomCase }) => {
  return (
    <div className="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl p-6 max-w-3xl w-full">
      <h2 className="text-2xl font-bold text-primary text-center">Choisissez un service</h2>
      <p className="text-slate-600 text-center mb-6 text-sm">Sélectionnez une spécialité pour commencer un cas clinique.</p>
      
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
        {services.map(service => (
          <button 
            key={service.id} 
            onClick={() => onServiceSelect(service, difficulty)} // Pass selected difficulty
            className="group relative aspect-square rounded-xl overflow-hidden text-white font-bold shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105"
          >
            <div className="absolute inset-0 bg-cover bg-center backdrop-blur-md scale-110 group-hover:blur-none transition-all duration-300" 
                 style={{backgroundImage: `url(${service.bgImage})`}}></div>
            <div className="absolute inset-0 bg-primary opacity-70 group-hover:opacity-60 transition-opacity duration-300"></div>
            <div className="relative h-full flex flex-col items-center justify-center p-2 text-center">
              <service.icon className="w-8 h-8 mb-2 transform group-hover:scale-110 transition-transform duration-300"/>
              <span className="text-sm">{service.name}</span>
            </div>
          </button>
        ))}
      </div>
      
      <div className="mb-6">
         <p className="text-center text-sm text-slate-700 font-semibold mb-3 flex items-center justify-center gap-2">
            <Settings size={16}/> Niveau de difficulté
        </p>
         <div className="flex justify-center gap-2 flex-wrap">
           {difficultyLevels.map(level => (
             <button key={level} onClick={() => onDifficultyChange(level)}
               className={`px-3 py-1 rounded-full text-xs font-semibold transition-colors duration-200 ${
                 difficulty === level ? `bg-primary text-white shadow-md` : `bg-slate-200 text-slate-700 hover:bg-slate-300`
               }`}
             >{level}</button>
           ))}
         </div>
      </div>
      
      <button 
        onClick={() => onRandomCase(difficulty)} // Pass selected difficulty
        className="w-full bg-primary text-white py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity duration-300 flex items-center justify-center gap-2"
      >
        <Shuffle className="w-5 h-5" />
        CAS ALÉATOIRE
      </button>
    </div>
  );
};

export default HomeView;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\simulation\PatientInfoView.tsx
================================================================================

// components/simulation/PatientInfoView.tsx
'use client';
import { Patient, Service } from '@/types/simulation/types';

interface PatientInfoViewProps {
  patientData: Patient;
  selectedService: Service;
  onStartConsultation: () => void;
}

const PatientInfoView: React.FC<PatientInfoViewProps> = ({ patientData, selectedService, onStartConsultation }) => {
  return (
     <div className="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl p-6 max-w-xl w-full">
       <div className="flex items-center gap-4 mb-4">
         <div className="w-12 h-12 rounded-lg bg-primary flex items-center justify-center shadow-lg flex-shrink-0">
            <selectedService.icon className="w-6 h-6 text-white"/>
         </div>
         <div>
           <h2 className="text-2xl font-bold text-primary">{selectedService.name}</h2>
           <p className="text-slate-500">Dossier patient</p>
         </div>
       </div>
       <div className="space-y-3 text-sm bg-slate-50 p-4 rounded-lg">
          <p><strong className="text-primary">Identité:</strong> {patientData.nom}, {patientData.age} ans</p>
          <p><strong className="text-primary">Motif:</strong> {patientData.motif}</p>
          <p><strong className="text-primary">Antécédents:</strong> {patientData.antecedents}</p>
       </div>
        <button onClick={onStartConsultation}
          className="w-full mt-6 bg-primary text-white py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity duration-300">
          Commencer la consultation
        </button>
     </div>
  );
}

export default PatientInfoView;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\simulation\PatientInfoPanel.tsx
================================================================================

// components/simulation/PatientInfoPanel.tsx
'use client';
import React from 'react';
import { X } from 'lucide-react';
import { Patient, Service } from '@/types/simulation/types';

/**
 * Props pour le composant PatientInfoPanel.
 */
interface PatientInfoPanelProps {
  /** Les données complètes du patient. */
  data: Patient;
  /** Le service associé au cas clinique. */
  service: Service;
  /** Fonction appelée pour fermer le panneau. */
  onClose: () => void;
}

/**
 * Un panneau modal (popup) qui affiche un résumé du cas du patient.
 * Ce composant est réutilisable et est apparu dans votre code original
 * à la fois pour la vue d'information initiale et comme rappel dans le chat.
 */
const PatientInfoPanel: React.FC<PatientInfoPanelProps> = ({ data, service, onClose }) => {
  return (
    // Conteneur en plein écran avec fond flouté pour l'effet modal
    <div className="absolute inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in">
      <div className="bg-white rounded-2xl shadow-2xl p-6 max-w-lg w-full relative">
        
        {/* Bouton de fermeture */}
        {onClose && (
           <button onClick={onClose} className="absolute top-4 right-4 text-slate-500 hover:text-primary transition-colors" aria-label="Fermer le panneau d'information">
            <X className="w-6 h-6" />
           </button>
        )}

        {/* En-tête du panneau */}
        <div className="flex items-center gap-4 mb-4">
          <div className="w-12 h-12 rounded-lg bg-primary flex items-center justify-center shadow-lg flex-shrink-0">
            {/* Icône du service concerné */}
            <service.icon className="w-6 h-6 text-white" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-primary">{service.name}</h2>
            <p className="text-slate-500 text-sm">Rappel du cas clinique</p>
          </div>
        </div>

        {/* Corps avec les détails du patient */}
        <div className="space-y-3 text-sm">
          <p><strong className="text-primary font-semibold">Patient:</strong> {data.nom}, {data.age} ans</p>
          <p><strong className="text-primary font-semibold">Motif de consultation:</strong> {data.motif}</p>
          <p><strong className="text-primary font-semibold">Antécédents:</strong> {data.antecedents}</p>
          <p><strong className="text-primary font-semibold">Symptômes rapportés:</strong> {data.symptomes}</p>
          <p><strong className="text-primary font-semibold">Signes Vitaux Initiaux:</strong> {data.signesVitaux}</p>
        </div>
      </div>
    </div>
  );
};

export default PatientInfoPanel;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\simulation\ChatWindow.tsx
================================================================================

// components/simulation/ChatWindow.tsx
'use client';

import React, { useEffect, useRef, useState } from 'react';
import { User, Stethoscope, FileText, Send, Lightbulb, AlertTriangle, CheckCircle2, MessageCircleQuestion, AlertCircle, BookOpen, ChevronUp, ChevronDown } from 'lucide-react';
import { Message, Patient, Service } from '@/types/simulation/types';

interface ChatWindowProps {
  patientData: Patient;
  selectedService: Service;
  messages: Message[];
  inputMessage: string;
  onInputChange: (value: string) => void;
  onSendMessage: () => void;
  messageCount: number;
  MAX_QUESTIONS: number;
  isGameOver: boolean;
  onReset: () => void;
  onShowPatientInfo: () => void;
  isTyping?: boolean;
}

// Styliser le texte avec italique bleu pour les gestes (*texte*)
const parseGestureText = (text: string) => {
    const parts = text.split(/(\*[^*]+\*)/g);
    
    return parts.map((part, index) => {
        if (part.startsWith('*') && part.endsWith('*')) {
            const gestureText = part.slice(1, -1);
            return (
                <span key={index} className="italic text-blue-600 font-medium">
                    {gestureText}
                </span>
            );
        }
        return <span key={index}>{part}</span>;
    });
};

// COMPOSANT : FEEDBACK TUTEUR
const TutorFeedbackBlock = ({ feedback, defaultOpen, messageIndex }: { feedback: any, defaultOpen: boolean, messageIndex: number }) => {
    const [isOpen, setIsOpen] = useState(defaultOpen);

    console.log(`[TutorFeedback #${messageIndex}] Feedback reçu:`, feedback, "- Type:", typeof feedback);

    if (!feedback) {
        console.log(`⚠️ [TutorFeedback #${messageIndex}] Pas de feedback`);
        return null;
    }

    // Parser le feedback
    let parsedFeedback = feedback;
    
    if (typeof feedback === 'string') {
        try {
            parsedFeedback = JSON.parse(feedback);
            console.log(`✅ [TutorFeedback #${messageIndex}] Feedback parsé depuis JSON:`, parsedFeedback);
        } catch {
            parsedFeedback = { general: feedback };
            console.log(`ℹ️ [TutorFeedback #${messageIndex}] Feedback traité comme texte simple`);
        }
    } else {
        console.log(`✅ [TutorFeedback #${messageIndex}] Feedback déjà objet:`, parsedFeedback);
    }

    return (
        <div className="mt-2 max-w-[90%] ml-auto animate-in slide-in-from-top-2 fade-in duration-500">
            <button 
                onClick={() => setIsOpen(!isOpen)}
                className={`flex items-center gap-2 text-xs font-bold px-3 py-1.5 rounded-t-lg transition-colors ${
                    isOpen 
                        ? 'bg-amber-100 text-amber-800' 
                        : 'bg-slate-100 text-slate-500 hover:bg-slate-200'
                }`}
            >
                <Lightbulb size={12} className={isOpen ? "fill-amber-600 text-amber-600" : ""}/> 
                Analyse du Tuteur
                {isOpen ? <ChevronUp size={12}/> : <ChevronDown size={12}/>}
            </button>
            
            {isOpen && (
                <div className="bg-amber-50 border border-amber-100 rounded-b-lg rounded-tr-lg p-3 text-xs space-y-3 shadow-sm text-slate-700">
                    {parsedFeedback.chronology_check && (
                        <div className="flex gap-2">
                            <div className="mt-0.5 min-w-[16px]"><CheckCircle2 size={14} className="text-emerald-600"/></div>
                            <div>
                                <strong className="block text-emerald-800 text-[10px] uppercase tracking-wide">Pertinence</strong>
                                {parsedFeedback.chronology_check}
                            </div>
                        </div>
                    )}
                    {parsedFeedback.interpretation_guide && (
                        <div className="flex gap-2">
                            <div className="mt-0.5 min-w-[16px]"><BookOpen size={14} className="text-blue-600"/></div>
                            <div>
                                <strong className="block text-blue-800 text-[10px] uppercase tracking-wide">Interprétation</strong>
                                {parsedFeedback.interpretation_guide}
                            </div>
                        </div>
                    )}
                    {parsedFeedback.better_question && (
                        <div className="flex gap-2 p-2 bg-white rounded border border-amber-100 italic">
                            <div className="mt-0.5 min-w-[16px]"><AlertCircle size={14} className="text-orange-500"/></div>
                            <div>
                                <strong className="block text-orange-800 text-[10px] uppercase tracking-wide">Suggestion</strong>
                                "{parsedFeedback.better_question}"
                            </div>
                        </div>
                    )}
                    {parsedFeedback.general && !parsedFeedback.chronology_check && (
                        <div className="flex gap-2">
                            <div className="mt-0.5 min-w-[16px]"><Lightbulb size={14} className="text-amber-600"/></div>
                            <div>{parsedFeedback.general}</div>
                        </div>
                    )}
                </div>
            )}
        </div>
    );
};

const ChatWindow: React.FC<ChatWindowProps> = ({
  patientData,
  selectedService,
  messages,
  inputMessage,
  onInputChange,
  onSendMessage,
  messageCount,
  MAX_QUESTIONS = 10,
  isGameOver,
  onReset,
  onShowPatientInfo,
  isTyping,
}) => {
  const messagesEndRef = useRef<HTMLDivElement>(null);

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  };
  
  useEffect(() => {
    scrollToBottom();
  }, [messages, isTyping]);

  const progressBarWidth = Math.min((messageCount / MAX_QUESTIONS) * 100, 100);

  return (
    <div className="w-full h-[600px] flex flex-col bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden relative">
      
      {/* EN-TÊTE : Infos Patient + Progression */}
      <div className="flex-shrink-0 p-4 border-b border-gray-100 bg-white z-10 flex justify-between items-center">
        <button onClick={onShowPatientInfo} className="flex items-center gap-4 group transition-opacity hover:opacity-80">
            <div className="relative">
              <img 
                src="/images/patient.jpeg" 
                alt={patientData.nom}
                className="w-12 h-12 rounded-full object-cover border-2 border-[#052648]"
                onError={(e) => { (e.target as HTMLImageElement).src = 'https://ui-avatars.com/api/?name=Patient&background=random' }}
              />
              <div className="absolute bottom-0 right-0 w-3.5 h-3.5 bg-emerald-500 rounded-full border-2 border-white animate-pulse"></div>
            </div>
            <div className="text-left">
              <h3 className="text-[#052648] font-bold text-sm md:text-base">{patientData.nom}</h3>
              <p className="text-gray-500 text-xs flex items-center gap-1">
                 <FileText size={10}/> {selectedService.name}
              </p>
            </div>
        </button>

        <div className="flex flex-col items-end w-1/3">
            <div className="text-xs font-semibold text-slate-500 mb-1">
                Questions: <span className={messageCount >= MAX_QUESTIONS ? "text-red-500" : "text-[#052648]"}>{messageCount}</span> / {MAX_QUESTIONS}
            </div>
            <div className="w-full h-2 bg-gray-100 rounded-full overflow-hidden">
                <div 
                    className={`h-full transition-all duration-500 ease-out ${
                        messageCount >= MAX_QUESTIONS ? 'bg-red-500' : 'bg-[#052648]'
                    }`}
                    style={{ width: `${progressBarWidth}%` }}
                />
            </div>
        </div>
      </div>

      {/* ZONE DE MESSAGES SCROLLABLE */}
      <div className="flex-1 overflow-y-auto p-4 space-y-6 bg-slate-50/50 scrollbar-thin scrollbar-thumb-gray-300">
        
        {messages.map((msg, index) => {
          // MESSAGE SYSTÈME / ALERTE
          if (msg.sender === 'system') {
            const isBad = msg.quality === 'bad';
            const isFormattedResult = msg.text.includes('\n') || msg.text.includes('**');
            
            if (isFormattedResult) {
              return (
                <div key={index} className="flex justify-center my-4">
                  <div className="bg-white border border-blue-100 rounded-xl shadow-md p-4 max-w-lg w-full animate-in slide-in-from-bottom-2 fade-in">
                    <div className="flex items-start gap-3">
                      <div className="bg-blue-50 p-2 rounded-lg shrink-0">
                        <FileText size={20} className="text-blue-600"/>
                      </div>
                      <div className="flex-1 min-w-0">
                        {msg.text.split('\n').map((line, i) => {
                          const isBold = line.includes('**');
                          const cleanLine = line.replace(/\*\*/g, '');
                          
                          if (cleanLine.trim() === '') return null;
                          
                          return (
                            <p 
                              key={i} 
                              className={`text-sm leading-relaxed ${
                                isBold 
                                  ? 'font-bold text-blue-900 mb-2 mt-3 first:mt-0' 
                                  : 'text-slate-700 ml-2'
                              }`}
                            >
                              {cleanLine}
                            </p>
                          );
                        })}
                      </div>
                    </div>
                  </div>
                </div>
              );
            }
            
            return (
              <div key={index} className="flex justify-center my-2 opacity-80 hover:opacity-100 transition-opacity">
                  <span className={`px-4 py-1.5 rounded-full text-[11px] font-bold uppercase tracking-wider flex items-center gap-2 border shadow-sm ${
                      isBad 
                      ? 'bg-red-50 text-red-600 border-red-100' 
                      : 'bg-slate-100 text-slate-500 border-slate-200'
                  }`}>
                      {msg.isAction ? <FileText size={12}/> : (isBad ? <AlertTriangle size={12} /> : <CheckCircle2 size={12} />)} 
                      {msg.text}
                  </span>
              </div>
            );
          }

          // INDICE DU TUTEUR
          if (msg.sender === 'tutor') {
              return (
                  <div key={index} className="flex justify-center my-4 animate-bounce-in">
                      <div className="bg-amber-50 border border-amber-200 p-4 rounded-xl max-w-sm flex gap-3 shadow-sm hover:shadow-md transition-shadow">
                          <div className="bg-amber-100 p-2 rounded-full h-fit flex-shrink-0 text-amber-600">
                              <Lightbulb size={20} strokeWidth={2.5}/>
                          </div>
                          <div>
                              <p className="text-amber-800 text-xs font-bold mb-1 uppercase tracking-wide">Conseil du Tuteur</p>
                              <p className="text-amber-900 text-sm italic leading-relaxed">"{msg.text}"</p>
                          </div>
                      </div>
                  </div>
              );
          }
          
          const isDoctor = msg.sender === 'doctor';

          // ÉCHANGE DOCTEUR / PATIENT
          return (
            <div key={index} className={`flex w-full ${isDoctor ? 'justify-end' : 'justify-start'} animate-in slide-in-from-bottom-2 fade-in duration-300`}>
                <div className={`flex items-end gap-2.5 max-w-[85%] ${isDoctor ? 'flex-row-reverse' : 'flex-row'}`}>
                    
                    {/* Avatar */}
                    <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 shadow-sm ${
                        isDoctor ? 'bg-[#052648] text-white' : 'bg-gray-200 text-gray-600'
                    }`}>
                        {isDoctor ? <Stethoscope size={16} /> : <User size={16} />}
                    </div>

                    <div className="flex flex-col gap-1 min-w-[120px]">
                        {/* Bulle de message */}
                        <div className={`px-4 py-3 rounded-2xl shadow-sm text-sm leading-relaxed ${
                            isDoctor
                            ? 'bg-[#052648] text-white rounded-br-none'
                            : 'bg-white text-gray-800 border border-gray-100 rounded-bl-none'
                        }`}>
                            {parseGestureText(msg.text)}
                        </div>

                        {/* INJECTION DU FEEDBACK TUTEUR (Sous le message Patient) */}
                        {!isDoctor && msg.feedback && (
                            <TutorFeedbackBlock 
                                feedback={msg.feedback} 
                                defaultOpen={index === 1}
                                messageIndex={index}
                            />
                        )}

                        {/* Horodatage */}
                        <span className={`text-[10px] opacity-60 ${isDoctor ? 'text-right' : 'text-left'}`}>
                            {msg.time}
                        </span>
                    </div>
                </div>
            </div>
          );
        })}

        {/* INDICATEUR DE FRAPPE (PATIENT) */}
        {isTyping && (
            <div className="flex w-full justify-start animate-in fade-in duration-300">
               <div className="flex items-end gap-2.5 max-w-[85%]">
                   <div className="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0 animate-pulse">
                      <User size={16} className="text-gray-500" />
                   </div>
                   <div className="bg-white border border-gray-100 px-4 py-3 rounded-2xl rounded-bl-none shadow-sm">
                      <div className="flex gap-1">
                        <span className="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"></span>
                        <span className="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-75"></span>
                        <span className="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-150"></span>
                      </div>
                   </div>
               </div>
            </div>
        )}
        
        <div ref={messagesEndRef} />

        {/* Message de fin si GameOver */}
        {isGameOver && (
          <div className="mx-auto max-w-sm mt-8 p-4 bg-red-50 text-red-800 rounded-xl border border-red-200 text-center animate-pulse">
            <AlertTriangle className="w-8 h-8 mx-auto mb-2 text-red-500" />
            <p className="font-bold text-sm">Consultation Terminée</p>
            <p className="text-xs mt-1">Veuillez formuler votre diagnostic final.</p>
            <button onClick={onReset} className="mt-3 text-xs bg-white border border-red-200 px-3 py-1.5 rounded-lg hover:bg-red-50 transition-colors">
              Réinitialiser
            </button>
          </div>
        )}
      </div>

      {/* ZONE DE SAISIE */}
      <div className="p-4 bg-white border-t border-gray-100 z-10">
        
        {messageCount < MAX_QUESTIONS && (
            <div className="mb-2 flex items-center gap-1.5 text-[11px] font-medium text-blue-600 animate-fade-in bg-blue-50 w-fit px-2 py-1 rounded-md">
                <MessageCircleQuestion size={12} /> 
                Mode Tutoré actif : Vos questions sont analysées par l'IA.
            </div>
        )}

        <div className="flex gap-3 items-center">
          <input 
            type="text" 
            value={inputMessage}
            onChange={(e) => onInputChange(e.target.value)}
            onKeyDown={(e) => e.key === 'Enter' && !isGameOver && !isTyping && inputMessage.trim() && onSendMessage()}
            placeholder={isGameOver ? "La consultation est terminée." : "Posez une question au patient..."}
            disabled={isGameOver || isTyping}
            className="flex-1 px-4 py-3 bg-slate-50 hover:bg-slate-100 focus:bg-white rounded-xl border-none ring-1 ring-slate-200 focus:ring-2 focus:ring-[#052648] outline-none transition-all disabled:opacity-60 disabled:cursor-not-allowed text-sm text-slate-800 placeholder:text-slate-400"
            autoFocus
          />
          <button 
            onClick={onSendMessage} 
            disabled={isGameOver || !inputMessage.trim() || isTyping}
            className={`p-3 rounded-xl transition-all duration-200 flex items-center justify-center shadow-lg ${
                isGameOver || !inputMessage.trim() || isTyping
                ? 'bg-slate-200 text-slate-400 cursor-not-allowed shadow-none'
                : 'bg-[#052648] text-white hover:bg-[#0a4d8f] active:scale-95 hover:shadow-xl'
            }`}>
            <Send className="w-5 h-5" />
          </button>
        </div>
        
        <p className="text-[10px] text-center text-slate-400 mt-2">
            Les réponses du patient sont générées par IA. Vérifiez toujours la cohérence médicale.
        </p>
      </div>
    </div>
  );
};

export default ChatWindow;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\simulation\DiagnosticTools.tsx
================================================================================

// components/simulation/DiagnosticTools.tsx
'use client';
import React from 'react';
import { DiagnosticTool } from '@/types/simulation/types';

/**
 * Props pour le composant DiagnosticTools.
 */
interface DiagnosticToolsProps {
  /** La liste des outils de diagnostic à afficher. */
  tools: DiagnosticTool[];
  /** La fonction à appeler lorsqu'un bouton d'outil est cliqué. */
  onToolClick: (tool: DiagnosticTool) => void;
}

/**
 * Affiche la barre latérale des outils de diagnostic.
 * Chaque outil est un bouton cliquable qui déclenche une action dans le composant parent.
 */
const DiagnosticTools: React.FC<DiagnosticToolsProps> = ({ tools, onToolClick }) => {
  return (
    // Ce conteneur positionne la barre d'outils en haut à droite de son parent relatif.
    <div className="absolute top-16 right-2 flex flex-col gap-3">
      {tools.map((tool) => (
        // `group` est utilisé pour l'effet de survol du tooltip.
        <div key={tool.name} className="group relative">
          <button
            onClick={() => onToolClick(tool)}
            className="w-14 h-14 flex items-center justify-center bg-white text-[#052648] rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-110"
            aria-label={`Utiliser l'outil ${tool.name}`}
          >
            {/* L'icône est rendue dynamiquement à partir des props. */}
            <tool.icon className="w-6 h-6" />
          </button>
          
          {/* Tooltip qui apparaît au survol (hover). */}
          <div className="absolute top-1/2 -translate-y-1/2 right-full mr-3 px-3 py-2 bg-gray-200 text-gray-800 font-bold text-sm rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none shadow-xl">
            {tool.name}
          </div>
        </div>
      ))}
    </div>
  );
};

export default DiagnosticTools;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\simulation\ClinicalExam.tsx
================================================================================

// components/simulation/ClinicalExamsSidebar.tsx
'use client';
import React from 'react';
// Assurez-vous d'importer le nouveau type
import { ClinicalExam } from '@/types/simulation/types';

/**
 * Props pour le composant ClinicalExamsSidebar.
 */
interface ClinicalExamsSidebarProps {
  /** La liste des examens cliniques et leurs résultats. */
  exams: ClinicalExam[];
  onExamClick: (exam: ClinicalExam) => void;
}

/**
 * Affiche une barre latérale d'information sur les examens cliniques.
 * Chaque examen affiche son nom et son résultat au survol de l'icône.
 */
const ClinicalExamsSidebar: React.FC<ClinicalExamsSidebarProps> = ({ exams = [], onExamClick }) => {
  return (
    // Conteneur positionné en haut à GAUCHE.
    <div className="absolute top-16 left-2 flex flex-col gap-3">
      {exams.map((exam) => (
        // `group` est utilisé pour l'effet de survol du tooltip.
        <div key={exam.name} onClick={() => onExamClick(exam)} className="group relative">
          {/* Ce n'est plus un bouton, mais un simple conteneur pour l'icône */}
          <div
            className="w-14 h-14 flex items-center justify-center bg-white text-[#052648] rounded-xl shadow-lg transition-all duration-300"
            aria-label={`Résultat de l'examen: ${exam.name}`}
          >
            {/* L'icône est rendue dynamiquement. */}
            <exam.icon className="w-6 h-6" />
          </div>
          
        </div>
      ))}
    </div>
  );
};

export default ClinicalExamsSidebar;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\simulation\ConsultationView.tsx
================================================================================

'use client';
import React, { useState } from 'react';
import { ClipboardCheck, ArrowRight, BrainCircuit, Lightbulb, Clock } from 'lucide-react';
import { Patient, Service, Message, DiagnosticTool, ClinicalExam, GameState } from '@/types/simulation/types';

import ChatWindow from './ChatWindow';
import DiagnosticTools from './DiagnosticTools';
import ClinicalExamsSidebar from './ClinicalExam';
import ExamPrescriptionModal from './ExamPres';
import DrugPrescriptionModal from './Drug';

interface ConsultationViewProps {
  patientData: Patient;
  selectedService: Service;
  messages: Message[];
  inputMessage: string;
  onInputChange: (value: string) => void;
  onSendMessage: () => void;
  messageCount: number;
  MAX_QUESTIONS?: number; // Prop optionnelle pour la limite (défaut 10)
  diagnosticTools: DiagnosticTool[];
  onToolClick: (tool: DiagnosticTool) => void;
  clinicalExams: ClinicalExam[];
  isGameOver: boolean;
  onReset: () => void;
  isExamModalOpen: boolean;
  selectedExam: ClinicalExam | null;
  onExamClick: (exam: ClinicalExam) => void;
  onCloseExamModal: () => void;
  onPrescribeExam: (exam: ClinicalExam) => void;
  
  // Nouveautés pour le Tuteur
  currentHint?: string;
  remainingHints: number;
  onRequestHint: () => void;
  gameState: GameState;
  
  // Prescription / Diagnostic
  isDrugModalOpen: boolean;
  onOpenDrugModal: () => void;
  onCloseDrugModal: () => void;
  onFinalPrescription: (meds: string, dosage: string) => void;
  isTyping?: boolean;
  
  // Phase Diagnostic
  userDiagnosis: string;
  setUserDiagnosis: (s: string) => void;
  onTriggerDiagnosis: () => void;
  onConfirmDiagnosis: () => void;
}

const ConsultationView: React.FC<ConsultationViewProps> = (props) => {
  // Destructuring pour accès facile aux variables courantes
  const { 
    patientData, selectedService, messages, messageCount, 
    MAX_QUESTIONS = 10, gameState, diagnosticTools, clinicalExams, 
    remainingHints, onRequestHint, onTriggerDiagnosis 
  } = props;
  
  // -- Calculs pour l'affichage conditionnel --
  const showChat = gameState === 'asking' || gameState === 'finished';
  const showDiagnosisInput = gameState === 'diagnosing';

    // --- CORRECTION : Wrapper pour adapter la signature de la fonction ---
  const handleExamPrescription = (name: string, reason: string) => {
    // On doit reconstruire ou trouver l'objet ClinicalExam attendu par le parent.
    // Si 'props.selectedExam' est déjà l'examen en cours, on peut l'utiliser.
    if (props.selectedExam && props.selectedExam.name === name) {
        props.onPrescribeExam(props.selectedExam);
    } else {
        // Fallback: on cherche dans la liste ou on crée un objet partiel (si le typage le permettait, mais ici on va chercher)
        const exam = clinicalExams.find(e => e.name === name);
        if (exam) {
            props.onPrescribeExam(exam);
        }
    }
  };

  return (
    <div className="fixed inset-0 flex flex-col bg-[#052648]">
       {/* Arrière-plan thématique subtil */}
       <div className="absolute inset-0 bg-cover bg-center z-0 opacity-10" style={{ backgroundImage: `url(${selectedService.bgImage})` }} />
       <div className="absolute inset-0 backdrop-blur-xs z-0" />
      
      {/* ================= HEADER ================= */}
      <div className="flex-none h-16 bg-[#052648]/95 backdrop-blur-md border-b border-blue-500/20 shadow-lg relative z-20 px-6 flex items-center justify-between text-white">
            {/* Gauche: Info Patient */}
            <div className="flex items-center gap-3">
                 <div className="w-8 h-8 rounded bg-white/10 flex items-center justify-center">
                    <selectedService.icon size={18}/>
                 </div>
                 <div>
                    <h1 className="font-bold leading-none text-base">{patientData.nom}</h1>
                    <span className="text-xs text-blue-300 opacity-80">{selectedService.name} | {patientData.age} ans</span>
                 </div>
            </div>
            
            {/* CENTRE: BARRE DE PROGRESSION (Visible seulement en phase de questionnement) */}
            {gameState === 'asking' && (
                <div className="flex flex-col items-center gap-1">
                    <div className="text-[10px] font-mono text-blue-200 uppercase tracking-widest flex items-center gap-1">
                        <Clock size={10}/> Phase Formative
                    </div>
                    <div className="flex items-center gap-2 bg-black/20 px-3 py-1 rounded-full border border-white/5">
                        <div className="flex gap-1">
                            {[...Array(MAX_QUESTIONS)].map((_, i) => (
                                <div key={i} className={`w-3 h-1.5 rounded-full transition-all duration-500 ${
                                    i < messageCount 
                                    ? 'bg-gradient-to-r from-blue-400 to-cyan-400 shadow-[0_0_8px_rgba(56,189,248,0.6)]' 
                                    : 'bg-white/10'
                                }`} />
                            ))}
                        </div>
                        <span className="text-xs font-bold font-mono ml-2 text-white">{messageCount}/{MAX_QUESTIONS}</span>
                    </div>
                </div>
            )}
            
            {/* Droite: Actions */}
            <div className="flex gap-2">
               {/* BOUTON INDICE (TUTEUR) */}
               <button 
                  onClick={onRequestHint} 
                  disabled={remainingHints <= 0 || gameState !== 'asking'}
                  className="bg-amber-500/20 hover:bg-amber-500/30 text-amber-300 border border-amber-500/50 px-3 py-1.5 rounded-lg flex items-center gap-2 text-xs font-bold transition-all disabled:opacity-30 disabled:cursor-not-allowed hover:shadow-[0_0_10px_rgba(245,158,11,0.2)]"
                  title="Demander un indice au tuteur"
                >
                   <Lightbulb size={16}/> {remainingHints} Indice{remainingHints > 1 ? 's' : ''}
               </button>

                {/* BOUTON DIAGNOSTIC MANUEL (Activé si > 2 messages) */}
               {gameState === 'asking' && (
                  <button 
                    onClick={onTriggerDiagnosis}
                    disabled={messageCount < 2}
                    className="bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-1.5 rounded-lg flex items-center gap-2 text-xs font-bold shadow-lg transition-all transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:grayscale"
                  >
                     <BrainCircuit size={16}/> DIAGNOSTIC
                  </button>
               )}
            </div>
       </div>

      {/* ================= CONTENU PRINCIPAL ================= */}
      <div className="flex-1 flex overflow-hidden relative z-10">
        
          {/* COLONNE GAUCHE: EXAMENS (Masquée si mode diagnostic) */}
          {gameState === 'asking' && (
            <div className="hidden lg:flex flex-col w-20 hover:w-64 transition-all duration-300 bg-blue-950/60 backdrop-blur-sm border-r border-white/5 z-20 group">
                <div className="p-3 text-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-blue-200 text-xs font-bold border-b border-white/5 whitespace-nowrap overflow-hidden">
                    EXAMENS COMPLÉMENTAIRES
                </div>
                <div className="flex-1 overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-blue-500/20 scrollbar-track-transparent">
                    <ClinicalExamsSidebar exams={clinicalExams} onExamClick={props.onExamClick} />
                </div>
            </div>
          )}

        {/* ZONE CENTRALE (CHANGEMENT DE VUE) */}
        <div className="flex-1 flex flex-col relative overflow-hidden bg-slate-50/50 backdrop-blur-sm">
           
           {/* === VUE 1 : CONVERSATION (CHAT & TUTEUR) === */}
           {showChat && (
               <div className="h-full w-full max-w-5xl mx-auto p-2 md:p-4 flex flex-col relative">
                  <ChatWindow
                    // Passage de toutes les props nécessaires
                    patientData={patientData} selectedService={selectedService}
                    messages={messages} inputMessage={props.inputMessage} 
                    onInputChange={props.onInputChange} onSendMessage={props.onSendMessage}
                    messageCount={messageCount} isGameOver={props.isGameOver} onReset={props.onReset}
                    onShowPatientInfo={() => {}} // Optionnel : ouvrirait panel infos
                    isTyping={props.isTyping}
                    MAX_QUESTIONS={MAX_QUESTIONS}
                  />
                  {/* Note: Le bouton Indice flottant peut être ajouté ici si l'on ne veut pas celui du Header, 
                      mais pour une UX "Sérieuse/Pro", le Header est souvent préférable. */}
               </div>
           )}

           {/* === VUE 2 : FORMULAIRE DE DIAGNOSTIC === */}
           {showDiagnosisInput && (
               <div className="h-full w-full flex items-center justify-center p-4 animate-in zoom-in-95 fade-in duration-300">
                   <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-xl w-full text-center relative border border-slate-200">
                        {/* Décoration */}
                        <div className="absolute top-0 left-0 w-full h-2 bg-[#052648] rounded-t-2xl"></div>
                        
                        <div className="w-16 h-16 bg-[#052648] text-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl ring-4 ring-blue-50">
                            <ClipboardCheck size={32} />
                        </div>
                        
                        <h2 className="text-2xl font-bold text-[#052648] mb-2">Moment de vérité</h2>
                        <p className="text-slate-500 mb-6 text-sm">
                            Après <span className="font-bold text-[#052648]">{messageCount}</span> questions posées, quelle est votre hypothèse principale ?
                        </p>
                        
                        <div className="text-left mb-2">
                            <label className="text-xs font-bold text-slate-400 uppercase tracking-wider ml-1">
                                VOTRE DIAGNOSTIC (Obligatoire)
                            </label>
                        </div>
                        
                        <textarea 
                            value={props.userDiagnosis}
                            onChange={(e) => props.setUserDiagnosis(e.target.value)}
                            placeholder="Ex: Syndrome coronarien aigu ST+ en territoire inférieur probable..."
                            className="w-full h-32 p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#052648]/20 focus:border-[#052648] outline-none resize-none mb-6 text-base text-slate-800 transition-all shadow-inner"
                            autoFocus
                        />
                        
                        <div className="flex gap-3">
                             {/* Bouton pour éventuellement retourner au chat si on n'a pas atteint la limite */}
                             {messageCount < MAX_QUESTIONS && (
                                <button onClick={() => {/* logique retour setGameState('asking') à gérer côté parent */}} 
                                className="px-4 py-3 rounded-xl text-slate-500 hover:bg-slate-100 font-semibold transition-colors">
                                    Réviser
                                </button>
                             )}
                             
                            <button 
                                onClick={props.onConfirmDiagnosis} 
                                disabled={!props.userDiagnosis.trim()}
                                className="flex-1 py-3 px-6 rounded-xl bg-[#052648] text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                            >
                                Valider & Prescrire <ArrowRight size={18}/>
                            </button>
                        </div>
                   </div>
               </div>
           )}
        </div>

        {/* COLONNE DROITE: OUTILS MONITORING (Masquée si mode diagnostic) */}
        {gameState === 'asking' && (
             <div className="hidden lg:flex flex-col w-20 hover:w-64 transition-all duration-300 bg-blue-950/60 backdrop-blur-sm border-l border-white/5 z-20 group">
                <div className="p-3 text-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-blue-200 text-xs font-bold border-b border-white/5 whitespace-nowrap overflow-hidden">
                    MONITORING & CONSTANTES
                </div>
                <div className="flex-1 overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-blue-500/20 scrollbar-track-transparent">
                    <DiagnosticTools tools={diagnosticTools} onToolClick={props.onToolClick} />
                </div>
            </div>
        )}
      </div>

      {/* --- MODALES GÉRÉES PAR LE PARENT --- */}
      
      {/* 1. Modal Examen (Simulé ou Résultat immédiat) */}
      <ExamPrescriptionModal 
          isOpen={props.isExamModalOpen} 
          onClose={props.onCloseExamModal} 
          exam={props.selectedExam} 
          patient={patientData} 
          onPrescribe={handleExamPrescription} 
      />
      
      {/* 2. Modal Prescription (Lance le Grading) */}
      <DrugPrescriptionModal 
         isOpen={props.isDrugModalOpen} 
         onClose={props.onCloseDrugModal} 
         patient={patientData} 
         diagnosis={props.userDiagnosis} 
         onPrescribe={(m, d) => props.onFinalPrescription(m, d)} 
      />

    </div>
  );
};

export default ConsultationView;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\simulation\Drug.tsx
================================================================================

// components/simulation/Drug.tsx
'use client';

import React, { useState } from 'react';
import { X, User, HeartPulse, Edit, Syringe, FilePlus, MessageSquareQuote } from 'lucide-react';
import { Patient } from '@/types/simulation/types';
import { Button } from '@/components/ui/Button';

interface DrugPrescriptionProps {
  isOpen: boolean;
  onClose: () => void;
  patient: Patient;
  diagnosis: string;
  // MODIFIÉ : onPrescribe doit maintenant accepter medication et dosage
  onPrescribe: (medication: string, dosage: string) => void; 
}

const DrugPrescriptionModal: React.FC<DrugPrescriptionProps> = ({
  isOpen,
  onClose,
  patient,
  diagnosis,
  onPrescribe,
}) => {
  const [medication, setMedication] = useState('');
  const [dosage, setDosage] = useState('');
  const [recommendations, setRecommendations] = useState('');

  const handlePrescribeClick = () => {
    // Dans une vraie application, vous enverriez ces données
    console.log({ medication, dosage, recommendations });
    // MODIFIÉ : Passe les données du traitement
    onPrescribe(medication, dosage); 
  };
  
  // ... (rest of the component unchanged)

  if (!isOpen) {
    return null;
  }

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in">
        <div className="relative bg-white rounded-xl shadow-2xl w-full max-w-2xl transform transition-all animate-fade-in-up">
            {/* En-tête de l'ordonnance */}
            <header className="p-6 border-b-2 border-dashed">
                <div className="flex justify-between items-start">
                    <div>
                        <div className="flex items-center gap-2 mb-1">
                            <HeartPulse size={24} className="text-primary"/>
                            <h2 className="text-xl font-bold text-primary">Hôpital "The Good Doctor"</h2>
                        </div>
                        <p className="text-sm text-slate-500 ml-8">Ordonnance Médicale</p>
                    </div>
                     <button onClick={onClose} className="p-1 rounded-full hover:bg-slate-200 transition-colors">
                        <X className="w-5 h-5 text-slate-600"/>
                    </button>
                </div>
            </header>

             <main className="p-6 space-y-6">
                {/* Infos Patient & Diagnostic */}
                <div className="bg-slate-50 p-4 rounded-lg border border-slate-200">
                    <div className="grid grid-cols-2 gap-x-6 gap-y-2">
                         <div className="flex items-center gap-2">
                             <User size={16} className="text-slate-500" />
                             <p><strong>Patient:</strong> {patient.nom}, {patient.age} ans</p>
                         </div>
                         <div className="flex items-center gap-2">
                            <FilePlus size={16} className="text-slate-500" />
                            <p><strong>Diagnostic:</strong> {diagnosis}</p>
                         </div>
                    </div>
                </div>

                {/* Formulaire de prescription */}
                <div className="space-y-4">
                     <div>
                        <label htmlFor="medication" className="font-bold text-slate-700 mb-1 flex items-center gap-2">
                            <Syringe size={16}/> Médicament
                        </label>
                        <input
                            id="medication"
                            type="text"
                            value={medication}
                            onChange={(e) => setMedication(e.target.value)}
                            className="w-full p-2 border rounded-md bg-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition"
                            placeholder="ex: Amoxicilline 500mg"
                        />
                    </div>
                     <div>
                        <label htmlFor="dosage" className="font-bold text-slate-700 mb-1 flex items-center gap-2">
                            <Edit size={16}/> Posologie
                        </label>
                        <textarea
                            id="dosage"
                            rows={3}
                            value={dosage}
                            onChange={(e) => setDosage(e.target.value)}
                            className="w-full p-2 border rounded-md bg-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition"
                            placeholder="ex: 1 comprimé 3 fois par jour pendant 7 jours"
                        />
                    </div>
                     <div>
                        <label htmlFor="recommendations" className="font-bold text-slate-700 mb-1 flex items-center gap-2">
                            <MessageSquareQuote size={16}/> Recommandations supplémentaires
                        </label>
                        <textarea
                            id="recommendations"
                            rows={2}
                            value={recommendations}
                            onChange={(e) => setRecommendations(e.target.value)}
                            className="w-full p-2 border rounded-md bg-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition"
                            placeholder="ex: À prendre au milieu des repas, bien s'hydrater..."
                        />
                    </div>
                </div>
             </main>
             
             {/* Footer avec bouton */}
            <div className="flex justify-end gap-3 p-6 border-t bg-slate-50 rounded-b-xl">
              <Button variant="outline" onClick={onClose}>Annuler</Button>
              <Button onClick={handlePrescribeClick} disabled={!medication.trim() || !dosage.trim()}>
                Prescrire
              </Button>
            </div>
        </div>
    </div>
  );
};

export default DrugPrescriptionModal;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\simulation\ExamPres.tsx
================================================================================

// components/simulation/ExamPres.tsx
'use client';

import React, { useState, useEffect } from 'react';
import { X, User, HeartPulse, Edit, TestTube2, AlertCircle } from 'lucide-react';
import { Patient, ClinicalExam } from '@/types/simulation/types';
import SignaturePad from '@/components/ui/Sign';
import { Button } from '@/components/ui/Button';

// Définition des props
interface ExamPresProps {
  isOpen: boolean;
  onClose: () => void;
  exam: ClinicalExam | null; // L'examen sélectionné est passé ici
  patient: Patient;
  onPrescribe: (name: string, reason: string) => void; // Fonction du parent pour appeler le backend
}

const ExamPrescriptionModal: React.FC<ExamPresProps> = ({
  isOpen,
  onClose,
  exam,
  patient,
  onPrescribe,
}) => {
  const [reason, setReason] = useState('');

  // Réinitialiser le formulaire quand la modale s'ouvre avec un nouvel examen
  useEffect(() => {
    if (isOpen) {
        setReason('');
    }
  }, [isOpen, exam]);

  // Si pas ouvert ou pas d'examen sélectionné, on ne rend rien
  if (!isOpen || !exam) {
    return null;
  }

  const handlePrescribeClick = () => {
    if (!reason.trim()) return;
    
    // On envoie le nom de l'examen (connu via props) et la raison
    onPrescribe(exam.name, reason);
    
    // On ferme la modale (l'attente du résultat se fera via le Toast/Chat dans le parent)
    onClose();
  };

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200">
        <div className="relative bg-slate-50 rounded-xl shadow-2xl w-full max-w-2xl transform transition-all animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]">
            
            {/* En-tête du bulletin */}
            <header className="p-6 border-b border-slate-200 bg-white rounded-t-xl sticky top-0 z-10">
                <div className="flex justify-between items-start">
                    <div>
                        <div className="flex items-center gap-2 mb-1">
                            <HeartPulse size={24} className="text-[#052648]"/>
                            <h2 className="text-xl font-bold text-[#052648]">Hôpital "The Good Doctor"</h2>
                        </div>
                        <p className="text-sm text-slate-500 font-medium">Laboratoire Central d'Analyses Médicales</p>
                    </div>
                     <button onClick={onClose} className="p-2 rounded-full hover:bg-slate-100 transition-colors">
                        <X className="w-5 h-5 text-slate-600"/>
                    </button>
                </div>
            </header>

             {/* Zone de contenu défilable */}
             <main className="p-6 overflow-y-auto space-y-6">
                
                {/* 1. Résumé Patient */}
                <div className="bg-blue-50/50 p-4 rounded-lg border border-blue-100">
                    <h3 className="font-bold text-slate-700 mb-2 flex items-center gap-2 text-sm uppercase tracking-wide">
                        <User size={16}/> Identification Patient
                    </h3>
                    <div className="grid grid-cols-2 gap-4 text-sm text-slate-700">
                        <div>
                            <span className="text-slate-500">Nom :</span> <span className="font-semibold">{patient.nom}</span>
                        </div>
                        <div>
                            <span className="text-slate-500">Âge :</span> <span className="font-semibold">{patient.age} ans</span>
                        </div>
                    </div>
                </div>

                {/* 2. L'examen sélectionné (Lecture seule) */}
                <div>
                    <h3 className="font-bold text-slate-700 mb-2 flex items-center gap-2 text-sm uppercase tracking-wide">
                        <TestTube2 size={16}/> Examen Demandé
                    </h3>
                    <div className="w-full p-3 bg-white border border-slate-300 rounded-md font-bold text-[#052648] shadow-sm flex items-center gap-3">
                        {/* On affiche l'icône de l'examen s'il y en a une, sinon une par défaut */}
                        {exam.icon ? <exam.icon className="w-5 h-5" /> : <TestTube2 className="w-5 h-5"/>}
                        {exam.name}
                    </div>
                </div>
                
                {/* 3. Justification (Input) */}
                <div>
                    <label htmlFor="reason" className="font-bold text-slate-700 mb-2 flex items-center gap-2 text-sm uppercase tracking-wide">
                        <Edit size={16}/> Indication Clinique (Obligatoire)
                    </label>
                    <textarea
                        id="reason"
                        rows={4}
                        value={reason}
                        onChange={(e) => setReason(e.target.value)}
                        className="w-full p-3 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-[#052648]/20 focus:border-[#052648] outline-none transition-all text-sm resize-none shadow-inner"
                        placeholder="Justifiez votre demande (ex: Recherche d'anémie, suspicion de foyer infectieux...)"
                        autoFocus
                    />
                    <div className="mt-2 flex items-start gap-2 text-xs text-amber-700 bg-amber-50 p-2 rounded border border-amber-100">
                        <AlertCircle size={14} className="flex-shrink-0 mt-0.5"/>
                        <p>Le résultat généré par l'IA dépendra de la pertinence de votre demande par rapport au cas clinique.</p>
                    </div>
                </div>

                {/* 4. Signature */}
                <div>
                     <label className="font-bold text-slate-700 mb-2 block text-sm uppercase tracking-wide">Signature Praticien</label>
                     <div className="border rounded-lg overflow-hidden border-slate-300">
                        <SignaturePad />
                     </div>
                </div>
             </main>

            {/* Footer Actions */}
            <div className="p-6 border-t bg-gray-50 rounded-b-xl flex justify-end gap-3 sticky bottom-0 z-10">
                <Button variant="outline" onClick={onClose} className="text-slate-600">
                    Annuler
                </Button>
                <Button 
                    onClick={handlePrescribeClick} 
                    disabled={!reason.trim()} 
                    className="bg-[#052648] hover:bg-[#0a4d8f] text-white px-6 shadow-lg shadow-blue-900/10 disabled:opacity-50 disabled:shadow-none"
                >
                    Envoyer la demande
                </Button>
            </div>
        </div>
    </div>
  );
};

export default ExamPrescriptionModal;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\simulation\Simulation.tsx
================================================================================

// app/simulation/SimulationContent.tsx
'use client';

import React, { useState, useEffect, useRef } from 'react';
import { useRouter, useSearchParams } from 'next/navigation';
import toast from 'react-hot-toast';
import { Thermometer, Gauge, Wind, ClipboardCheck } from 'lucide-react';

import FunFactLoader from '@/components/common/FunFactLoader';
import ConsultationView from '@/components/simulation/ConsultationView';
import { useAuth } from '@/contexts/AuthContext';

import { services, exampleExams } from '@/types/simulation/constant';
import { Patient, Service, Message, GameState, ClinicalExam } from '@/types/simulation/types';

import { 
    startSimulationSession, 
    sendSimulationAction, 
    requestSimulationHint, 
    submitSimulationDiagnosis,
    getSessionMessages,
    sendChatMessage,
    StartSessionResponse,
    SubmitResponse,
    ActionRequest,
    SimulationMessage
} from '@/services/SimulationService';

// ==========================================
// 🛠️ ADAPTATEUR : Backend JSON -> Frontend UI
// ==========================================
const mapBackendToPatient = (response: any): Patient => {
    const start = performance.now();
    console.groupCollapsed("🏥 [ADAPTER] Mapping Patient Data");
    
    const cc = response?.clinical_case || response;
    
    if (!cc) {
        console.error("❌ Critical: 'clinical_case' missing in response");
        console.groupEnd();
        throw new Error("Données cliniques invalides ou incomplètes");
    }

    const pClinique = cc.presentation_clinique || {};
    const dPara = cc.donnees_paracliniques || {};
    const patho = cc.pathologie_principale || {};

    const formatAntecedents = (val: any) => {
        if (typeof val === 'string') return val;
        if (typeof val === 'object' && val?.details) return val.details;
        return "Non significatifs";
    };

    let symptomesStr = "Motif d'admission général";
    if (Array.isArray(pClinique.symptomes_patient) && pClinique.symptomes_patient.length > 0) {
        symptomesStr = pClinique.symptomes_patient
            .slice(0, 4)
            .map((s: any) => s.details ? s.details.replace(/^Valeur:\s*/, '') : s.nom_symptome)
            .join(', ') + (pClinique.symptomes_patient.length > 4 ? '...' : '');
    }

    const signes = dPara.signes_vitaux || {};

    const uiPatient: Patient = {
        nom: cc.code_fultang || `Patient-${cc.id}`,
        age: typeof pClinique.age === 'number' ? pClinique.age : 45,
        sexe: pClinique.sexe || 'Masculin',
        motif: pClinique.histoire_maladie ? pClinique.histoire_maladie.substring(0, 50) + "..." : "Consultation urgence",
        histoireMaladie: pClinique.histoire_maladie || "Aucune histoire disponible.",
        antecedents: formatAntecedents(pClinique.antecedents),
        symptomes: symptomesStr,
        
        signesVitaux: typeof signes === 'string' ? signes : JSON.stringify(signes),
        temperature: signes.temperature || "37.0°C",
        pressionArterielle: signes.ta || "120/80",
        saturationOxygene: signes.spo2 || "98%",
        
        examenClinique: dPara.examen_clinique || "Examen physique à réaliser.",
        analyseBiologique: "Résultats en attente de prescription.",
        
        diagnostic: patho.nom_fr || "Diagnostic Inconnu",
        traitementAttendu: "Protocole standard."
    };

    console.log(`✅ Mapping terminé en ${(performance.now() - start).toFixed(2)}ms`, uiPatient);
    console.groupEnd();
    return uiPatient;
};

// ==========================================
// 🧩 COMPOSANT PRINCIPAL
// ==========================================
export default function SimulationContent() {
    const router = useRouter();
    const searchParams = useSearchParams();
    const { user, isLoading: isAuthLoading } = useAuth();

    const initRef = useRef(false);
    const [currentView, setCurrentView] = useState<'home' | 'loading' | 'consultation'>('loading');
    const [sessionId, setSessionId] = useState<string | null>(null);
    
    const [patientData, setPatientData] = useState<Patient | null>(null);
    const [selectedService, setSelectedService] = useState<Service | null>(null);
    
    const [gameState, setGameState] = useState<GameState>('asking');
    const [messages, setMessages] = useState<Message[]>([]);
    const [inputMessage, setInputMessage] = useState("");
    const [isThinking, setIsThinking] = useState(false);
    const [sessionMode, setSessionMode] = useState<'diagnostic'|'training'|'evaluation'>('diagnostic');

    const [interactionsCount, setInteractionsCount] = useState(0); 
    const [maxInteractions, setMaxInteractions] = useState(5); 
    const [hintsRemaining, setHintsRemaining] = useState(99); 

    const [modalState, setModalState] = useState({
        exam: false,
        drug: false,
        result: false
    });
    const [selectedExam, setSelectedExam] = useState<any>(null);
    
    const [userDiagnosis, setUserDiagnosis] = useState("");
    const [evaluationResult, setEvaluationResult] = useState<any>(null);

    // ==========================================
    // 🔄 CYCLES DE VIE & INIT
    // ==========================================

    useEffect(() => {
        if (!isAuthLoading && !user) router.push('/connexion');
    }, [user, isAuthLoading, router]);

    useEffect(() => {
        if (initRef.current || !user || !searchParams.get('category')) return;
        
        initRef.current = true;
        const cat = searchParams.get('category') || 'Médecine Générale';
        const mod = (searchParams.get('mode') as any) || 'diagnostic';
        
        launchSession(cat, mod);
    }, [user, searchParams]);

    const launchSession = async (category: string, mode: 'diagnostic'|'training'|'evaluation') => {
        if(!user) return;
        
        const startT = performance.now();
        console.groupCollapsed(`🎮 [INIT] Démarrage Session: ${category} (${mode})`);

        try {
            setCurrentView('loading');

            console.log('📤 [API REQUEST] POST /api/v1/simulation/sessions/start');
            console.log('📦 Payload:', JSON.stringify({ learner_id: user.id, category, force_mode: mode }, null, 2));

            const data: StartSessionResponse = await startSimulationSession(user.id, null, category, mode);
            
            console.log('✅ [API RESPONSE] Session créée');
            console.log('📥 Response:', JSON.stringify(data, null, 2));
            
            setSessionId(data.session_id);
            setSessionMode(mode);
            
            // Configuration selon le mode
            if (mode === 'diagnostic') {
                setMaxInteractions(5);
                setHintsRemaining(999); // Infini
            } else {
                setMaxInteractions(10);
                setHintsRemaining(5); // Limité
            }

            const safePatient = mapBackendToPatient(data);
            setPatientData(safePatient);
            
            const matchedService = services.find(s => 
                s.name.toLowerCase().includes(category.toLowerCase())
            ) || services[0];
            setSelectedService(matchedService);

            setMessages([{
                sender: 'system',
                text: `🎯 Session ${mode === 'diagnostic' ? 'Évaluation Diagnostique' : mode === 'training' ? 'Entraînement' : 'Évaluation'} démarrée.\n📊 ${mode === 'diagnostic' ? '5' : '10'} questions autorisées.\n💡 ${mode === 'diagnostic' ? 'Indices illimités' : '5 indices disponibles'}.`,
                time: new Date().toLocaleTimeString([],{hour:'2-digit', minute:'2-digit'})
            }]);

            setCurrentView('consultation');
            toast.success(`Dossier patient ouvert - Mode ${mode}`, { icon: '📂' });

        } catch (error: any) {
            console.error("❌ Critical Init Error:", error);
            toast.error("Impossible de charger le patient. Retour au dashboard.");
            setTimeout(() => router.push('/dashboard'), 2000);
        } finally {
            console.log(`⏱️ Init done in ${(performance.now() - startT).toFixed(2)}ms`);
            console.groupEnd();
        }
    };

    // ==========================================
    // 💬 LOGIQUE CONVERSATION & ACTIONS
    // ==========================================

    const handleSendMessage = async () => {
        if (!sessionId || !inputMessage.trim() || isThinking) return;
        
        if (interactionsCount >= maxInteractions) {
            toast("Phase d'anamnèse terminée. Passez au diagnostic.", { icon: '🛑' });
            return;
        }

        const currentMsg = inputMessage;
        setInputMessage("");
        setIsThinking(true);

        // Message du docteur (UI immédiat)
        setMessages(prev => [...prev, {
            sender: 'doctor',
            text: currentMsg,
            time: new Date().toLocaleTimeString([],{hour:'2-digit', minute:'2-digit'})
        }]);

        // Incrémenter le compteur
        const newCount = interactionsCount + 1;
        setInteractionsCount(newCount);

        try {
            console.group(`💬 [CHAT ${newCount}/${maxInteractions}] Message Apprenant`);
            console.log(`📤 Question: "${currentMsg}"`);
            console.log(`🔗 Session: ${sessionId}`);
            console.log(`⏰ ${new Date().toISOString()}`);
            
            const chatStart = performance.now();
            
            // ENVOI DU MESSAGE VIA L'ENDPOINT CHAT
            console.log(`🚀 [API REQUEST] POST /api/v1/chat/sessions/${sessionId}/messages`);
            const payload = {
                sender: "learner",
                content: currentMsg,
                message_metadata: {}
            };
            console.log('📦 Payload:', JSON.stringify(payload, null, 2));

            await sendChatMessage(sessionId, payload);

            console.log(`✅ Message envoyé (${(performance.now() - chatStart).toFixed(2)}ms)`);

            // RÉCUPÉRATION DES 3 DERNIERS MESSAGES POUR AVOIR LA RÉPONSE
            console.log(`📥 [API REQUEST] GET /api/v1/chat/sessions/${sessionId}/messages?limit=3`);
            
            const fetchStart = performance.now();
            const recentMessages = await getSessionMessages(sessionId, 3);
            
            console.log(`✅ Messages récupérés (${(performance.now() - fetchStart).toFixed(2)}ms)`);
            console.log(`📨 Nombre: ${recentMessages.length}`);
            console.log(`📄 [API RESPONSE] Messages:`, JSON.stringify(recentMessages, null, 2));

            // CHERCHER LE DERNIER MESSAGE DU PATIENT
            const patientMsg = recentMessages
                .reverse()
                .find((m: SimulationMessage) => 
                    m.sender?.toLowerCase() === 'patient'
                );

            if (patientMsg) {
                const responseText = patientMsg.content || "...";
                const feedbackData = patientMsg.message_metadata?.tutor_feedback;

                console.log(`🤖 Message Patient trouvé:`);
                console.log(`   📝 Contenu: "${responseText}"`);
                console.log(`   🎓 Tutor Feedback:`, JSON.stringify(feedbackData, null, 2));

                const newPatientMessage: Message = {
                    sender: 'patient',
                    text: responseText,
                    time: new Date().toLocaleTimeString([],{hour:'2-digit', minute:'2-digit'}),
                    feedback: feedbackData // Objet direct
                };

                setMessages(prev => [...prev, newPatientMessage]);

                console.log(`✅ Message ajouté à l'interface`);
            } else {
                console.warn(`⚠️ Aucun message patient trouvé`);
                console.log(`Senders reçus:`, recentMessages.map((m: any) => m.sender));
                
                setMessages(prev => [...prev, {
                    sender: 'system',
                    text: "⚠️ Le patient semble absent. Vérifiez la connexion.",
                    time: new Date().toLocaleTimeString([],{hour:'2-digit', minute:'2-digit'})
                }]);
            }

            const totalTime = (performance.now() - chatStart).toFixed(2);
            console.log(`⏱️ Tour complet: ${totalTime}ms`);
            console.groupEnd();

            // Vérifier si limite atteinte
            if (newCount >= maxInteractions) {
                setTimeout(() => {
                    console.log(`🏁 Limite atteinte (${newCount}/${maxInteractions})`);
                    toast('Dernière question effectuée ! Formulez votre diagnostic.', { icon: '⚠️' });
                    setGameState('diagnosing');
                }, 1500);
            }

        } catch (error) {
            console.error('❌ ERREUR CHAT:', error);
            console.log(`Session: ${sessionId}, Message: ${currentMsg}`);
            console.groupEnd();
            
            toast.error("Erreur de communication avec le patient.");
            setMessages(prev => [...prev, {
                sender: 'system', 
                text: "❌ Erreur de communication.", 
                time: new Date().toLocaleTimeString([],{hour:'2-digit', minute:'2-digit'})
            }]);
        } finally {
            setIsThinking(false);
        }
    };

    // Formater les résultats d'examens
    const formatExamResult = (result: any): string => {
        if (!result) return "Résultat non disponible";
        
        if (typeof result.rapport_complet === 'string') {
            return result.rapport_complet;
        }
        
        if (typeof result.rapport_complet === 'object') {
            const params = result.rapport_complet;
            let formatted = "**Constantes mesurées:**\n";
            
            if (params.TA) formatted += `\n• Tension Artérielle: ${params.TA}`;
            if (params.FC) formatted += `\n• Fréquence Cardiaque: ${params.FC}`;
            if (params.FR) formatted += `\n• Fréquence Respiratoire: ${params.FR}`;
            if (params.SpO2) formatted += `\n• Saturation O₂: ${params.SpO2}`;
            if (params.Temp) formatted += `\n• Température: ${params.Temp}`;
            
            if (result.conclusion) {
                formatted += `\n\n**Interprétation:** ${result.conclusion}`;
            }
            
            return formatted;
        }
        
        if (result.valeurs_cles && typeof result.valeurs_cles === 'object') {
            let formatted = "**Résultats biologiques:**\n";
            
            Object.entries(result.valeurs_cles).forEach(([key, value]) => {
                formatted += `\n• ${key}: ${value}`;
            });
            
            if (result.conclusion) {
                formatted += `\n\n**Conclusion:** ${result.conclusion}`;
            }
            
            return formatted;
        }
        
        return result.conclusion || result.text || "Résultat disponible dans le dossier.";
    };

    const handleMedicalAction = async (
        actionType: 'examen_complementaire' | 'parametres_vitaux' | 'biologie', 
        name: string, 
        justification?: string
    ) => {
        if (!sessionId) return;
        setIsThinking(true);

        console.group(`💉 [ACTION MÉDICALE] ${actionType.toUpperCase()}`);
        console.log(`📋 Examen: ${name}`);
        console.log(`📝 Justification: ${justification || 'N/A'}`);
        console.log(`🔗 Session: ${sessionId}`);

        setMessages(prev => [...prev, {
            sender: 'system',
            text: `⏳ ${name} en cours...`,
            time: new Date().toLocaleTimeString([],{hour:'2-digit', minute:'2-digit'}),
            isAction: true
        }]);

        try {
            const action: ActionRequest = {
                action_type: actionType,
                action_name: name,
                justification: justification,
                content: name
            };

            console.log(`🚀 [API REQUEST] POST /api/v1/simulation/sessions/${sessionId}/actions`);
            console.log(`📦 Payload:`, JSON.stringify(action, null, 2));

            const actionStart = performance.now();
            const response = await sendSimulationAction(sessionId, action);

            console.log(`✅ [API RESPONSE] (${(performance.now() - actionStart).toFixed(2)}ms)`);
            console.log(`📥 Résultat:`, JSON.stringify(response, null, 2));

            const formattedResult = formatExamResult(response.result);
            
            setMessages(prev => [...prev, {
                sender: 'system',
                text: `📋 **${name}**\n\n${formattedResult}`,
                time: new Date().toLocaleTimeString([],{hour:'2-digit', minute:'2-digit'}),
                isAction: true,
                quality: 'good'
            }]);

            console.log(`✅ Résultat affiché`);
            console.groupEnd();

            setModalState(s => ({...s, exam: false}));

        } catch (e) {
            console.error('❌ Erreur action:', e);
            console.groupEnd();
            toast.error("Impossible de réaliser l'examen");
        } finally {
            setIsThinking(false);
        }
    };

    const handleRequestHint = async () => {
        if (hintsRemaining <= 0) return toast.error("Plus d'indices disponibles.");
        if (!sessionId) return;

        console.group(`💡 [INDICE] Demande`);
        console.log(`🔗 Session: ${sessionId}`);
        console.log(`📊 Indices restants: ${hintsRemaining}`);

        const loadToast = toast.loading("Le tuteur réfléchit...");
        
        try {
            console.log(`🚀 [API REQUEST] POST /api/v1/simulation/sessions/${sessionId}/request-hint`);
            
            const hintStart = performance.now();
            const hintRes = await requestSimulationHint(sessionId);
            
            console.log(`✅ [API RESPONSE] (${(performance.now() - hintStart).toFixed(2)}ms)`);
            console.log(`📥 Indice:`, JSON.stringify(hintRes, null, 2));
            
            setHintsRemaining(prev => prev - 1);
            setMessages(prev => [...prev, {
                sender: 'tutor',
                text: hintRes.content || hintRes.hint_text,
                time: new Date().toLocaleTimeString([],{hour:'2-digit', minute:'2-digit'})
            }]);
            
            console.log(`📊 Nouveaux indices restants: ${hintsRemaining - 1}`);
            console.groupEnd();
            
            toast.dismiss(loadToast);
            toast.success(`Indice reçu (${hintsRemaining - 1} restants)`);
        } catch(e) {
            console.error('❌ Erreur indice:', e);
            console.groupEnd();
            toast.error("Erreur récupération indice", { id: loadToast });
        }
    };

    // ==========================================
    // 🎓 EVALUATION & FIN
    // ==========================================

    const handleDiagnosisSubmit = async (medications: string, dosage: string) => {
        if (!sessionId) return;
        
        console.group(`🎓 [DIAGNOSTIC FINAL]`);
        console.log(`🔗 Session: ${sessionId}`);
        console.log(`📋 Diagnostic: ${userDiagnosis}`);
        console.log(`💊 Traitement: ${medications}`);
        console.log(`📏 Posologie: ${dosage}`);
        
        const loadToast = toast.loading("Évaluation en cours...");
        
        try {
            setModalState(prev => ({ ...prev, drug: false }));

            console.log(`🚀 [API REQUEST] POST /api/v1/simulation/sessions/${sessionId}/submit`);
            
            const submitPayload = {
                diagnosed_pathology_id: 0,
                details_text: userDiagnosis,
                prescribed_medication_ids: [],
                comment: `Rx: ${medications}. Posologie: ${dosage}`
            };
            
            console.log(`📦 Payload:`, JSON.stringify(submitPayload, null, 2));
            
            const submitStart = performance.now();
            const result: SubmitResponse = await submitSimulationDiagnosis(
                sessionId, 
                userDiagnosis, 
                `Rx: ${medications}. Posologie: ${dosage}`
            );

            console.log(`✅ [API RESPONSE] (${(performance.now() - submitStart).toFixed(2)}ms)`);
            console.log(`📊 Score: ${result.score}/20`);
            console.log(`📥 Évaluation:`, JSON.stringify(result, null, 2));

            setEvaluationResult({
                score: result.score,
                maxScore: 20, 
                feedback: result.feedback_global,
                nextAction: result.next_action
            });

            setGameState('finished');
            setModalState(prev => ({ ...prev, result: true }));
            
            console.groupEnd();
            
            toast.dismiss(loadToast);
            toast.success(`Évaluation: ${result.score}/20`);

        } catch (e) {
            console.error('❌ Erreur soumission:', e);
            console.groupEnd();
            toast.error("Erreur lors de l'évaluation.", { id: loadToast });
        }
    };

    const handleExitOrNext = (action: 'exit' | 'next') => {
        console.log(`🚪 Action: ${action}`);
        
        if (action === 'exit') {
            router.push('/dashboard/goals');
        } else {
            window.location.reload(); 
        }
    };

    // ==========================================
    // 🖼️ RENDU
    // ==========================================

    if (currentView === 'loading' || !selectedService || !patientData) {
        return <FunFactLoader />;
    }

    return (
        <div className="min-h-screen bg-[#052648]">
            <ConsultationView 
                patientData={patientData}
                selectedService={selectedService}
                
                messages={messages}
                inputMessage={inputMessage}
                onInputChange={setInputMessage}
                isTyping={isThinking}
                
                gameState={gameState} 
                messageCount={interactionsCount}
                MAX_QUESTIONS={maxInteractions}
                
                onSendMessage={handleSendMessage} 
                
                onPrescribe={(name: string, reason: string) => 
                    handleMedicalAction('examen_complementaire', name, reason)
                }

                onExamClick={(ex: ClinicalExam) => { 
                    setSelectedExam(ex); 
                    setModalState(s => ({...s, exam: true})); 
                }}

                onToolClick={(tool) => handleMedicalAction('parametres_vitaux', `Mesure de ${tool.name}`)}
                
                remainingHints={hintsRemaining}
                onRequestHint={handleRequestHint}

                diagnosticTools={[
                    { name: 'Température', icon: Thermometer, key: 'temperature', patientValue: patientData.temperature },
                    { name: 'Tension', icon: Gauge, key: 'pressionArterielle', patientValue: patientData.pressionArterielle },
                    { name: 'SpO2', icon: Wind, key: 'saturationOxygene', patientValue: patientData.saturationOxygene }
                ]}
                clinicalExams={exampleExams}

                isExamModalOpen={modalState.exam}
                selectedExam={selectedExam}
                onCloseExamModal={() => setModalState(s => ({...s, exam: false}))}
                onPrescribeExam={(exam) => handleMedicalAction('examen_complementaire', exam.name)}

                onTriggerDiagnosis={() => setGameState('diagnosing')}
                userDiagnosis={userDiagnosis}
                setUserDiagnosis={setUserDiagnosis}
                onConfirmDiagnosis={() => {
                    if (userDiagnosis.length < 5) return toast.error("Le diagnostic est trop court.");
                    setModalState(s => ({...s, drug: true}));
                }}

                isDrugModalOpen={modalState.drug}
                onCloseDrugModal={() => setModalState(s => ({...s, drug: false}))}
                onOpenDrugModal={() => setModalState(s => ({...s, drug: true}))}
                onFinalPrescription={handleDiagnosisSubmit}

                isGameOver={gameState === 'finished'}
                onReset={() => router.push('/dashboard')}
            />

            {/* MODAL RÉSULTATS */}
            {modalState.result && evaluationResult && (
                <div className="fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur p-4 animate-in fade-in zoom-in-95">
                    <div className="bg-white rounded-3xl max-w-xl w-full overflow-hidden shadow-2xl flex flex-col max-h-[90vh]">
                        <div className={`h-4 w-full ${evaluationResult.score >= 10 ? 'bg-emerald-500' : 'bg-red-500'}`}></div>
                        
                        <div className="p-8 flex flex-col items-center text-center overflow-y-auto">
                            <div className="w-24 h-24 rounded-full flex items-center justify-center bg-slate-50 mb-4 text-4xl shadow-inner border border-slate-100 relative">
                                {evaluationResult.score >= 10 ? '🎉' : '📚'}
                                <div className="absolute -bottom-2 px-3 py-1 bg-slate-800 text-white text-[10px] font-bold rounded-full uppercase">Note</div>
                            </div>
                            
                            <h2 className="text-2xl font-extrabold text-[#052648] mb-1">
                                {evaluationResult.score >= 10 ? 'Session Validée' : 'Niveau Insuffisant'}
                            </h2>
                            <div className="mb-6">
                                <span className={`text-5xl font-black ${evaluationResult.score >= 10 ? 'text-emerald-600' : 'text-red-500'}`}>
                                    {Math.round(evaluationResult.score)}
                                </span>
                                <span className="text-lg text-slate-400 font-bold">/20</span>
                            </div>

                            <div className="w-full bg-blue-50/50 border border-blue-100 rounded-2xl p-5 text-left mb-8 shadow-sm">
                                <strong className="text-blue-800 uppercase text-xs tracking-wider flex items-center gap-2 mb-2">
                                    <ClipboardCheck size={14}/> Rapport du Tuteur
                                </strong>
                                <p className="text-sm text-slate-700 leading-relaxed whitespace-pre-wrap">
                                    {evaluationResult.feedback}
                                </p>
                            </div>

                            <div className="flex gap-3 w-full">
                                <button 
                                    onClick={() => handleExitOrNext('exit')}
                                    className="flex-1 py-3 px-4 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-colors"
                                >
                                    Retour Objectifs
                                </button>
                                <button 
                                    onClick={() => handleExitOrNext('next')}
                                    className="flex-1 py-3 px-4 bg-[#052648] text-white font-bold rounded-xl hover:bg-blue-900 shadow-lg shadow-blue-900/20 transition-all hover:scale-[1.02]"
                                >
                                    Cas Suivant
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            )}
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\dashboard\Header.tsx
================================================================================

// components/dashboard/Header.tsx
'use client';

import React, { useState } from 'react';
import { Award, Bell, ChevronDown, LogOut, Search, Settings, User } from 'lucide-react';
// MODIFIÉ : On importe le type de profil complet et le type pour le niveau
import type { UserProfile, UserLevel } from '@/types/user/profile'; 
import { useAuth } from '@/contexts/AuthContext'; // MODIFIÉ : on importe useAuth pour la déconnexion

const PRIMARY_COLOR = '#052648';
// Définition des props pour le composant Header
interface HeaderProps {
  // MODIFIÉ : On attend un objet de type UserProfile que l'on nomme 'profile' pour plus de clarté
  profile: UserProfile; 
}

// Fonction utilitaire pour traduire le niveau de l'utilisateur
const getLevelLabel = (level: UserLevel | undefined) => {
    if (!level) return 'Apprenant';
    const labels: Record<UserLevel, string> = {
        student: 'Étudiant(e)',
        intern: 'Interne',
        resident: 'Résident',
        doctor: 'Médecin',
        specialist: 'Spécialiste'
    };
    return labels[level] || 'Apprenant';
};

// Composant pour le badge de niveau
const getLevelBadge = (level: UserLevel | undefined) => {
  if (!level) return { color: 'bg-gray-100 text-gray-600', icon: '📚' };
  
  const badges: Record<UserLevel, { color: string; icon: string }> = {
    student: { color: 'bg-blue-100 text-blue-700', icon: '🎓' },
    intern: { color: 'bg-purple-100 text-purple-700', icon: '💼' },
    resident: { color: 'bg-indigo-100 text-indigo-700', icon: '🏥' },
    doctor: { color: 'bg-green-100 text-green-700', icon: '⚕️' },
    specialist: { color: 'bg-amber-100 text-amber-700', icon: '👨‍⚕️' }
  };
  
  return badges[level] || badges.student;
};

const Header: React.FC<HeaderProps> = ({ profile }) => {
  const [showNotifications, setShowNotifications] = useState(false);
  const [showUserMenu, setShowUserMenu] = useState(false);
  const levelBadge = getLevelBadge(profile.level);
return (
    <header 
      className="flex-shrink-0 h-24 flex items-center justify-between px-8 bg-white border-b-2 shadow-sm relative z-20"
      style={{ borderBottomColor: PRIMARY_COLOR }}
    >
      {/* Section gauche - Bienvenue */}
      <div className="flex items-center gap-6">
        <div>
          <h2 className="text-2xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent">
            Bienvenue, {profile?.username || 'Docteur'} !
          </h2>
          <div className="flex items-center gap-2 mt-1">
            <p className="text-slate-500 text-sm">Prêt à relever de nouveaux défis ?</p>
            <span className="inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200">
              <Award size={12} />
              Niveau {profile.level || 'débutant'}
            </span>
          </div>
        </div>
      </div>

      {/* Section droite - Actions */}
      <div className="flex items-center gap-4">
        {/* Barre de recherche */}
        <div className="hidden md:flex items-center gap-2 px-4 py-2 bg-slate-50 rounded-xl border border-slate-200 hover:border-slate-300 transition-all duration-200 w-64">
          <Search size={18} className="text-slate-400" />
          <input
            type="text"
            placeholder="Rechercher..."
            className="bg-transparent border-none outline-none text-sm text-slate-700 placeholder-slate-400 w-full"
          />
        </div>

        {/* Notifications */}
        <div className="relative">
          <button
            onClick={() => setShowNotifications(!showNotifications)}
            className="relative p-2.5 text-slate-500 hover:text-white hover:bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl transition-all duration-300 group"
            style={{ 
              backgroundColor: showNotifications ? PRIMARY_COLOR : 'transparent'
            }}
          >
            <Bell size={22} className={showNotifications ? 'text-white' : ''} />
            <span className="absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white animate-pulse"></span>
            <span className="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-xs font-bold flex items-center justify-center">
              3
            </span>
          </button>

          {/* Dropdown Notifications */}
          {showNotifications && (
            <div className="absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-2xl border border-slate-200 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200">
              <div 
                className="px-4 py-3 border-b border-slate-200 font-semibold text-white flex items-center justify-between"
                style={{ backgroundColor: PRIMARY_COLOR }}
              >
                <span>Notifications</span>
                <span className="text-xs bg-white/20 px-2 py-1 rounded-full">3 nouvelles</span>
              </div>
              <div className="max-h-96 overflow-y-auto">
                {[
                  { title: 'Nouveau cas clinique', desc: 'Un cas de cardiologie vous attend', time: '5 min', unread: true },
                  { title: 'Quiz complété', desc: 'Félicitations ! Score: 85%', time: '1h', unread: true },
                  { title: 'Rappel échéance', desc: 'Examen dans 2 jours', time: '3h', unread: true }
                ].map((notif, i) => (
                  <div 
                    key={i} 
                    className={`px-4 py-3 hover:bg-slate-50 cursor-pointer border-b border-slate-100 transition-colors ${notif.unread ? 'bg-blue-50/30' : ''}`}
                  >
                    <div className="flex items-start gap-3">
                      {notif.unread && <div className="w-2 h-2 bg-blue-600 rounded-full mt-2" />}
                      <div className="flex-1">
                        <p className="font-medium text-sm text-slate-800">{notif.title}</p>
                        <p className="text-xs text-slate-500 mt-0.5">{notif.desc}</p>
                        <p className="text-xs text-slate-400 mt-1">{notif.time}</p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
              <div 
                className="px-4 py-2.5 text-center text-sm font-medium text-white cursor-pointer hover:opacity-90 transition-opacity"
                style={{ backgroundColor: PRIMARY_COLOR }}
              >
                Voir toutes les notifications
              </div>
            </div>
          )}
        </div>

        {/* Profil utilisateur */}
        <div className="relative">
          <button
            onClick={() => setShowUserMenu(!showUserMenu)}
            className="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-slate-50 transition-all duration-200 border-2 border-transparent hover:border-slate-200"
          >
            <div className="relative">
              <img
                src="/images/avatar.jpeg"
                alt="Avatar"
                className="w-11 h-11 rounded-full object-cover border-2 shadow-md"
                style={{ borderColor: PRIMARY_COLOR }}
              />
              <div className="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"></div>
            </div>
            <div className="text-left hidden lg:block">
              <p className="text-sm font-semibold text-slate-800">{profile?.username || 'Docteur'}</p>
              <div className={`text-xs px-2 py-0.5 rounded-full inline-flex items-center gap-1 ${levelBadge.color}`}>
                <span>{levelBadge.icon}</span>
                <span>{getLevelLabel(profile.level)}</span>
              </div>
            </div>
            <ChevronDown 
              size={18} 
              className={`text-slate-400 transition-transform duration-200 ${showUserMenu ? 'rotate-180' : ''}`}
            />
          </button>

          {/* Dropdown Menu Utilisateur */}
          {showUserMenu && (
            <div className="absolute right-0 mt-3 w-64 bg-white rounded-xl shadow-2xl border border-slate-200 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200">
              <div 
                className="px-4 py-4 border-b border-slate-200 text-white"
                style={{ backgroundColor: PRIMARY_COLOR }}
              >
                <div className="flex items-center gap-3">
                  <img
                    src="/api/placeholder/48/48"
                    alt="Avatar"
                    className="w-12 h-12 rounded-full object-cover border-2 border-white/50"
                  />
                  <div>
                    <p className="font-semibold">{profile?.username || 'Docteur'}</p>
                    <p className="text-xs text-blue-200">{getLevelLabel(profile.level)}</p>
                  </div>
                </div>
              </div>
              
              <div className="py-2">
                {[
                  { icon: User, label: 'Mon profil', onClick: () => console.log('Profil') },
                  { icon: Settings, label: 'Paramètres', onClick: () => console.log('Paramètres') }
                ].map((item, i) => (
                  <button
                    key={i}
                    onClick={item.onClick}
                    className="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-slate-50 transition-colors text-slate-700"
                  >
                    <item.icon size={18} className="text-slate-500" />
                    <span className="text-sm font-medium">{item.label}</span>
                  </button>
                ))}
              </div>

              <div className="border-t border-slate-200">
                <button className="w-full flex items-center gap-3 px-4 py-3 hover:bg-red-50 transition-colors text-red-600 font-medium">
                  <LogOut size={18} />
                  <span className="text-sm">Déconnexion</span>
                </button>
              </div>
            </div>
          )}
        </div>
      </div>
    </header>
  );
};

export default Header;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\dashboard\Journey.tsx
================================================================================




================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\dashboard\Library.tsx
================================================================================

// components/dashboard/Library.tsx
'use client';

import React, { useState, useEffect, useMemo } from 'react';
import { useRouter } from 'next/navigation';
import { 
  Search, Play, Clock, Sparkles, Brain, 
  Stethoscope, Activity, FileText, ArrowRight,
  Filter, Calendar, Hash,
  Heart,
  Wind,
  Baby,
  Bone,
  Eye,
  Bug,
  Zap
} from 'lucide-react';
import toast from 'react-hot-toast';

// Services & Types
import { getAllClinicalCases } from '@/services/expertService';
import { BackendClinicalCaseSimple } from '@/types/backend';
import { Skeleton } from '@/components/ui/Skeleton';

// Catégories statiques pour le filtre
const CATEGORIES = ["Tous", "Cardiologie", "Pneumologie", "Infectiologie", "Urgences", "Pédiatrie", "Traumatologie", "Neurologie"];

export default function Library({ user }: { user?: any }) {
  const router = useRouter();
  
  // États
  const [exercises, setExercises] = useState<BackendClinicalCaseSimple[]>([]);
  const [loading, setLoading] = useState(true);
  const [search, setSearch] = useState("");
  const [filterDomain, setFilterDomain] = useState("Tous");

  // Initialisation
  useEffect(() => {
    const initData = async () => {
      setLoading(true);
      try {
        const data = await getAllClinicalCases(); 
        setExercises(Array.isArray(data) ? data : []);
      } catch (e) {
        console.error(e);
        toast.error("Impossible de charger la bibliothèque de cas.");
      } finally {
        setLoading(false);
      }
    };
    initData();
  }, []);

  // --- LOGIQUE FILTRAGE ---
  const filteredList = useMemo(() => {
    return exercises.filter(ex => {
       const searchMatch = 
          // On filtre sur le Code ou la Categorie uniquement pour ne pas spoiler
          (ex.code_fultang || '').toLowerCase().includes(search.toLowerCase()) || 
          (ex.pathologie_principale?.categorie || '').toLowerCase().includes(search.toLowerCase());
       
       const catMatch = filterDomain === "Tous" || (ex.pathologie_principale?.categorie || "Autre").includes(filterDomain);
       return searchMatch && catMatch;
    });
  }, [exercises, search, filterDomain]);

  // Récupération du cas mis en avant (Le premier de la liste filtrée, ou le premier global)
  const featuredCase = exercises.length > 0 ? exercises[0] : null;

  // --- LANCEMENT SIMULATION ---
  const handleLaunchCase = async (caseId: number) => {
    // Si l'utilisateur n'est pas passé via props, on suppose qu'il est connecté ou on vérifie via localStorage dans le contexte plus haut.
    // Cette vérification dépend de votre architecture, ici c'est safe.
      const t = toast.loading("Ouverture du dossier patient...");
      try {
          router.push(`/simulation?caseId=${caseId}`);
          toast.dismiss(t);
      } catch(e) {
          toast.error("Erreur technique lors du lancement", { id: t });
      }
  };

  return (
    <div className="space-y-10 animate-in fade-in duration-500 pb-20">
       
       {/* 1. HERO SECTION (Recommandation) avec Pattern Pointillé */}
       {loading ? (
         <Skeleton className="h-64 w-full rounded-3xl" />
       ) : featuredCase && (
         <div className="relative rounded-3xl bg-[#052648] text-white shadow-xl overflow-hidden group border border-[#0a4d8f]">
            
            {/* Pattern Pointillé (CSS Background) */}
            <div 
                className="absolute inset-0 opacity-20 pointer-events-none" 
                style={{
                    backgroundImage: 'radial-gradient(circle, #ffffff 1.5px, transparent 1.5px)',
                    backgroundSize: '24px 24px'
                }}
            />
            
            {/* Gradient Overlay */}
            <div className="absolute inset-0 bg-gradient-to-r from-[#052648] via-[#052648]/90 to-transparent z-0"></div>

            <div className="relative z-10 p-8 md:p-12 max-w-3xl flex flex-col items-start justify-center h-full">
               
               <div className="inline-flex items-center gap-2 mb-4 bg-white/10 backdrop-blur-md px-3 py-1 rounded-full text-blue-200 border border-white/20 text-xs font-bold uppercase tracking-wider">
                   <Sparkles size={14} className="text-yellow-400"/> Recommandation du jour
               </div>

               <h2 className="text-3xl md:text-4xl font-extrabold mb-4 leading-tight tracking-tight">
                   Cas clinique : <span className="text-blue-300">{featuredCase.pathologie_principale?.categorie || "Médecine Générale"}</span>
               </h2>
               
               <div className="flex items-center gap-6 mb-8 text-slate-300 font-mono text-sm">
                  <span className="flex items-center gap-2">
                     <Hash size={16} /> Code: <span className="text-white">{featuredCase.code_fultang}</span>
                  </span>
                  <span className="flex items-center gap-2">
                      <Activity size={16}/> Difficulté: <span className="text-white">Niveau {featuredCase.niveau_difficulte}</span>
                  </span>
               </div>

               <button 
                  onClick={() => handleLaunchCase(featuredCase.id)}
                  className="group bg-white text-[#052648] px-8 py-3.5 rounded-xl font-bold hover:bg-blue-50 transition-all shadow-lg hover:shadow-white/20 flex items-center gap-3 transform hover:-translate-y-0.5 active:scale-95"
               >
                  <Play size={20} fill="currentColor"/> Commencer ce cas
               </button>
            </div>
            
            {/* Illustration abstraite droite */}
            <div className="absolute right-[-50px] bottom-[-50px] text-white opacity-5 rotate-12 group-hover:scale-105 group-hover:rotate-6 transition-transform duration-1000 hidden md:block">
               <Stethoscope size={400} strokeWidth={1.5} />
            </div>
         </div>
       )}

       {/* 2. BARRE D'OUTILS (Filtres) */}
       <div className="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 sticky top-0 bg-[#F3F6F8]/90 backdrop-blur-md z-20 py-4 -mx-4 px-4 border-b border-slate-200/50 md:rounded-b-2xl">
           <div>
               <h3 className="text-xl font-bold text-slate-800 flex items-center gap-2">
                   <Brain className="text-[#052648]"/> Dossiers Disponibles
               </h3>
               <p className="text-sm text-slate-500 mt-0.5">{filteredList.length} situations d'entraînement prêtes.</p>
           </div>

           <div className="flex flex-col sm:flex-row gap-3 w-full lg:w-auto">
               {/* Recherche */}
               <div className="relative group w-full sm:w-72">
                   <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors w-4 h-4"/>
                   <input 
                      type="text" 
                      placeholder="Code ou Service (ex: cardio...)" 
                      value={search} onChange={(e) => setSearch(e.target.value)}
                      className="w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-[#052648]/10 focus:border-[#052648] shadow-sm transition-all"
                   />
               </div>
               
               {/* Filtre Categorie */}
               <div className="relative w-full sm:w-48">
                 <Filter className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"/>
                 <select 
                   value={filterDomain} onChange={e => setFilterDomain(e.target.value)}
                   className="w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-[#052648]/10 focus:border-[#052648] shadow-sm cursor-pointer appearance-none hover:bg-slate-50 transition-colors"
                 >
                    {CATEGORIES.map(c => <option key={c} value={c}>{c}</option>)}
                 </select>
               </div>
           </div>
       </div>

       {/* 3. GRILLE DES CAS (5 colonnes) */}
       {loading ? (
           <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
              {[1,2,3,4,5,6,7,8,9,10].map(i => <Skeleton key={i} className="h-64 rounded-2xl bg-white/60"/>)}
           </div>
       ) : (
           <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5 auto-rows-[1fr]">
              {filteredList.map((c, index) => (
                  <CaseCardSimple key={c.id} data={c} onLaunch={() => handleLaunchCase(c.id)} index={index} />
              ))}
              
              {filteredList.length === 0 && (
                  <div className="col-span-full py-24 text-center">
                      <div className="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <FileText size={32} className="text-slate-400"/>
                      </div>
                      <h3 className="text-slate-600 font-semibold text-lg">Aucun cas trouvé</h3>
                      <p className="text-slate-400 text-sm mt-1">Essayez de modifier vos filtres.</p>
                  </div>
              )}
           </div>
       )}

    </div>
  );
}


// --------------------------------------------------------
// SOUS-COMPOSANT : Carte Minimaliste & Fluide
// --------------------------------------------------------
function CaseCardSimple({ data, onLaunch, index }: { data: BackendClinicalCaseSimple, onLaunch: () => void, index: number }) {
    
    // 1. Configuration Niveau & Couleurs
    const getLevelConfig = (lvl: number) => {
        if(lvl <= 10) return { label: "Débutant", color: "bg-emerald-500", text: "text-emerald-700", bgLight: "bg-emerald-50", border: "border-emerald-100" };
        if(lvl <= 20) return { label: "Intermédiaire", color: "bg-blue-500", text: "text-blue-700", bgLight: "bg-blue-50", border: "border-blue-100" };
        return { label: "Avancé", color: "bg-amber-500", text: "text-amber-700", bgLight: "bg-amber-50", border: "border-amber-100" };
    }

    // 2. Détermination de l'icône de Service
    const getServiceIcon = (cat: string) => {
        const c = cat.toLowerCase();
        if(c.includes('cardio')) return Heart;
        if(c.includes('pneumo')) return Wind;
        if(c.includes('neuro')) return Brain;
        if(c.includes('pediatrie') || c.includes('pédiatrie')) return Baby;
        if(c.includes('ortho') || c.includes('trauma')) return Bone;
        if(c.includes('ophtalmo')) return Eye;
        if(c.includes('infectio') || c.includes('virale')) return Bug;
        if(c.includes('urgence')) return Zap;
        return Activity; // Icône par défaut
    };

    const levelInfo = getLevelConfig(data.niveau_difficulte);
    const category = data.pathologie_principale?.categorie || "Général";
    const CategoryIcon = getServiceIcon(category);

    return (
        <div 
           onClick={onLaunch}
           className="bg-white rounded-2xl border border-slate-100 p-5 hover:border-blue-300 hover:shadow-[0_8px_30px_rgb(0,0,0,0.04)] hover:-translate-y-1 transition-all duration-300 cursor-pointer group flex flex-col h-full relative overflow-hidden"
           style={{ animationDelay: `${index * 75}ms` }} 
        >
            {/* Indicateur visuel coloré (Top Bar) */}
            <div className={`absolute top-0 inset-x-0 h-1 ${levelInfo.color} transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-500 ease-out`}></div>

            {/* HEADER : Icone + Service */}
            <div className="flex items-start justify-between mb-3">
                <div className={`
                    w-10 h-10 rounded-xl flex items-center justify-center 
                    bg-slate-50 text-slate-400 group-hover:bg-[#052648] group-hover:text-white 
                    transition-all duration-300 shadow-sm
                `}>
                   <CategoryIcon size={20} className="transform group-hover:scale-110 transition-transform duration-300" />
                </div>
                
                {/* Niveau de Difficulté */}
                <span className={`text-[10px] font-bold px-2 py-1 rounded-md border ${levelInfo.bgLight} ${levelInfo.text} ${levelInfo.border}`}>
                    {levelInfo.label} ({data.niveau_difficulte})
                </span>
            </div>
            
            {/* BODY : Identifiant FullTang */}
            <div className="flex-1 flex flex-col justify-center mb-2">
                 <h4 className="text-xl font-extrabold text-[#052648] font-mono tracking-tight leading-tight group-hover:text-blue-700 transition-colors">
                    {data.code_fultang}
                </h4>
                <p className="text-xs font-medium text-slate-400 uppercase tracking-wide mt-1">
                    Service: {category}
                </p>
            </div>
            
            {/* SEPARATEUR DISCRET */}
            <div className="h-px w-full bg-slate-50 my-3 group-hover:bg-blue-50 transition-colors"></div>

            {/* FOOTER : Date & CTA */}
            <div className="flex items-center justify-between mt-auto">
                 <div className="flex items-center gap-1.5 text-xs text-slate-400 group-hover:text-slate-500 transition-colors">
                     <Calendar size={12}/>
                     <span>{new Date(data.created_at).toLocaleDateString()}</span>
                 </div>
                 
                 <div className="flex items-center gap-1 text-xs font-bold text-transparent group-hover:text-blue-600 transition-all duration-300 -translate-x-2 group-hover:translate-x-0 opacity-0 group-hover:opacity-100">
                     <span>Ouvrir</span>
                     <ArrowRight size={14} className="group-hover:translate-x-1 transition-transform" />
                 </div>
            </div>
        </div>
    );
}








================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\dashboard\Overview.tsx
================================================================================

import React, { useEffect, useState, useMemo } from 'react';
import { 
  BarChart, Bar, XAxis, Tooltip, ResponsiveContainer, Cell 
} from 'recharts';
import { 
  LearnerService, 
  LearnerResponse, 
  TraceResponse, 
  LearnerTrace 
} from '../../services/learnerService';
import { 
  Zap, Heart, Activity, Droplets, ChevronDown, Bell, Search, 
  HelpCircle,
  AlertCircle
} from 'lucide-react';
import { Skeleton } from '@/components/ui/Skeleton'; // Optionnel pour le chargement

// --- SOUS-COMPOSANT SQUELETTE (Pour garder la structure pendant le chargement) ---
const DashboardLoader = () => (
  <div className="flex flex-col h-full bg-[#f6f8fb] p-6 md:p-8 animate-pulse">
      <div className="h-12 w-full bg-slate-200 rounded-xl mb-8"></div>
      <div className="h-[320px] w-full bg-slate-200 rounded-3xl mb-8"></div>
      <div className="grid grid-cols-4 gap-4 mb-8">
          {[1,2,3,4].map(i => <div key={i} className="h-32 bg-slate-200 rounded-3xl"></div>)}
      </div>
      <div className="h-64 bg-slate-200 rounded-3xl"></div>
  </div>
);

const Overview: React.FC = () => {
  const [isLoading, setIsLoading] = useState(true);
  const [userInfo, setUserInfo] = useState<LearnerResponse | null>(null);
  
  // Stats calculées
  const [stats, setStats] = useState({
    avgScore: 0,        // BPM / Fréquence (ex: nombre de sessions)
    cognitiveLevel: 0,  // Note / 10
    competencies: 0,    // Ratio sur 100
    objectives: 0       // Pourcentage d'accomplissement
  });

  // Données pour le graphique (semaine)
  const [chartData, setChartData] = useState<any[]>([]);

  useEffect(() => {
    const initDashboard = async () => {
      try {
        setIsLoading(true);
        // 1. Identification
        const user = await LearnerService.getMe();
        if (!user) throw new Error("Non authentifié");
        setUserInfo(user);

        // 2. Récupération des traces complètes via l'ID
        const traceData = await LearnerService.getTraces(user.id);
        
        // 3. Extraction de la trace spécifique (L'API retourne un tableau "learners")
        // Conversion de user.id en string car le trace.id peut être string
        const myTrace = traceData.learners.find((l: LearnerTrace) => String(l.id) === String(user.id));

        if (myTrace && myTrace.profile) {
            processTraceData(myTrace);
        }

      } catch (error) {
        console.error("Erreur chargement Dashboard:", error);
      } finally {
        setIsLoading(false);
      }
    };

    initDashboard();
  }, []);

  /**
   * Logique métier : Transforme les données brutes du backend en métriques UI
   */
  const processTraceData = (trace: LearnerTrace) => {
      const p = trace.profile;

      // A. CARD 1: FRÉQUENCE / ACTIVITÉ (ex: BPM)
      // Si on a un historique de sessions, on compte. Sinon mock dynamique ou valeur brute.
      const sessions = p.learning_history?.sessions || [];
      const sessionCount = sessions.length > 0 ? sessions.length : 12; // Valeur par défaut dynamique
      
      // B. CARD 2: COGNITIF (Note / 10)
      const cognitiveScore = p.cognitive_dimension?.cognitive_profile?.vitesse_assimilation 
          ? Math.round(p.cognitive_dimension.cognitive_profile.vitesse_assimilation * 10) // Supposons valeur 0.0-1.0
          : 5; // Moyen par défaut

      // C. CARD 3: COMPÉTENCES
      const masteryList = p.competencies?.mastery_levels || [];
      const masteryCount = masteryList.filter(m => m.mastery_level >= 0.7).length; // Seuil arbitraire de maîtrise
      
      // D. CARD 4: OBJECTIFS
      const goals = p.learning_history?.goals || [];
      const completedGoals = goals.filter(g => g.statut === 'atteint').length;
      const progressPct = goals.length > 0 ? Math.round((completedGoals / goals.length) * 100) : 0;

      // E. CHART DATA
      // On essaye de mapper les sessions réelles, sinon données génériques
      let chartMapped = [];
      if (sessions.length > 0) {
          // On prend les 7 dernières sessions pour la "Semaine"
          chartMapped = sessions.slice(-7).map((s, idx) => ({
              name: new Date(s.date).toLocaleDateString('fr-FR', { weekday: 'short' }),
              score: s.score || Math.floor(Math.random() * 40) + 60
          }));
      } else {
          // Données vides esthétiques si pas de traces
          chartMapped = [
            { name: 'Lun', score: 45 }, { name: 'Mar', score: 60 }, 
            { name: 'Mer', score: 75 }, { name: 'Jeu', score: 50 }, 
            { name: 'Ven', score: 85 }, { name: 'Sam', score: 65 }, 
            { name: 'Dim', score: 40 }
          ];
      }

      setStats({
          avgScore: sessionCount, 
          cognitiveLevel: cognitiveScore,
          competencies: masteryCount,
          objectives: progressPct > 0 ? progressPct : 45 // 45 par défaut pour design
      });
      setChartData(chartMapped);
  };

  if (isLoading) return <DashboardLoader />;

  return (
    <div className="flex flex-col h-full bg-[#f6f8fb] overflow-hidden p-0 rounded-tl-3xl">
      
      {/* HEADER BAR (Static structure, dynamic search disabled logic for now) */}
      <div className="flex justify-between items-center mb-8">
         <div className="relative w-full max-w-md hidden md:block">
            <Search className="absolute left-4 top-3 text-gray-400 w-5 h-5" />
            <input 
              type="text" 
              placeholder="Rechercher une leçon, un symptôme..." 
              className="w-full bg-white border-none rounded-2xl py-3 pl-12 pr-4 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-100 text-sm text-gray-600"
            />
         </div>

         <div className="flex items-center gap-4">
             <div className="bg-white p-3 rounded-2xl shadow-sm relative cursor-pointer hover:bg-gray-50 transition">
                 <Bell className="w-5 h-5 text-indigo-900" />
                 {/* Notification dot visible si objectif bas par exemple */}
                 {stats.objectives < 50 && <span className="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border border-white"></span>}
             </div>
             <button className="bg-[#312e81] text-white px-5 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 hover:bg-[#262463] transition-colors shadow-lg shadow-indigo-900/20">
                 <AlertCircle className="w-4 h-4" /> Besoin d'aide ? 
             </button>
         </div>
      </div>

      <div className="flex-1 overflow-y-auto pr-2 pb-0 custom-scrollbar">
      
        {/* HERO SECTION */}
        <div className="bg-white rounded-3xl p-8 mb-8 relative shadow-sm overflow-hidden flex items-center justify-between min-h-[250px]">
             <div className="max-w-lg z-10 relative">
                 <h1 className="text-3xl font-bold text-gray-900 mb-2">
                     Bonjour, <span className="text-amber-400 capitalize">{userInfo?.nom?.split(' ')[0] || "Docteur"}</span>
                 </h1>
                 <p className="text-gray-500 text-sm mb-6 max-w-sm">
                     Ton profil cognitif indique une préférence <strong>{stats.cognitiveLevel > 7 ? "visuelle" : "textuelle"}</strong> aujourd'hui. Prêt à sauver des patients virtuels ?
                 </p>
                 <a href="#clinical_cases" className="text-indigo-600 font-bold text-sm flex items-center hover:underline group cursor-pointer">
                     Lancer une simulation 
                     <span className="ml-2 transform group-hover:translate-x-1 transition-transform">→</span>
                 </a>
             </div>

             {/* Illustration (Utilisation image placeholder si asset manquant pour pas casser le build) */}
             <div className="hidden md:block absolute right-10 top-8 bottom-0 h-full w-1/3 pointer-events-none">
                 <div className="w-full h-full flex items-end justify-center relative">
                      <img 
                        src='/images/appre1.jpg' 
                        alt="Doctor" 
                        className="h-[130%] object-contain relative z-10"
                        onError={(e) => {
                            e.currentTarget.src = "https://placehold.co/400x500/png?text=Docteur"; // Fallback safe
                        }} 
                      />
                 </div>
             </div>
        </div>


        {/* BOTTOM SECTION: ANALYTICS (Charts dynamiques) */}
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            {/* COL 1: Small Circular Charts */}
            <div className="space-y-4">
                 {/* Card 1: Ratio Reussite */}
                 <div className="bg-white p-5 rounded-3xl shadow-sm flex items-center gap-6 hover:shadow-md transition-shadow">
                      <div className="relative w-20 h-20 flex items-center justify-center">
                          {/* SVG dynamique pour le donut chart */}
                          <svg className="transform -rotate-90 w-full h-full">
                              <circle cx="40" cy="40" r="30" stroke="#f0f3ff" strokeWidth="6" fill="transparent" />
                              <circle 
                                cx="40" cy="40" r="30" stroke="#60a5fa" strokeWidth="6" fill="transparent" 
                                strokeDasharray={188} 
                                strokeDashoffset={188 - (188 * stats.competencies) / 100} // Dynamique selon stats
                                strokeLinecap="round" 
                              />
                          </svg>
                          <div className="absolute text-blue-400">
                             <Activity className="w-6 h-6 fill-current" />
                          </div>
                      </div>
                      <div>
                          <p className="text-gray-900 font-bold mb-1">Maitrise</p>
                          <h2 className="text-blue-500 text-3xl font-bold mb-1">{stats.competencies}%</h2>
                          <p className="text-xs text-gray-400 flex items-center">
                              Score Global de Maitrise
                          </p>
                      </div>
                 </div>

                 {/* Card 2: General Health/Progression */}
                 <div className="bg-white p-5 rounded-3xl shadow-sm flex items-center gap-6 hover:shadow-md transition-shadow">
                      <div className="relative w-20 h-20 flex items-center justify-center">
                          <svg className="transform -rotate-90 w-full h-full">
                              <circle cx="40" cy="40" r="30" stroke="#fffbeb" strokeWidth="6" fill="transparent" />
                              <circle 
                                cx="40" cy="40" r="30" stroke="#fbbf24" strokeWidth="6" fill="transparent" 
                                strokeDasharray={188} 
                                strokeDashoffset={188 - (188 * stats.objectives) / 100} 
                                strokeLinecap="round" 
                              />
                          </svg>
                           <div className="absolute text-yellow-400">
                             <Activity className="w-6 h-6" />
                          </div>
                      </div>
                      <div>
                          <p className="text-gray-900 font-bold mb-1">Progression</p>
                          <h2 className="text-yellow-400 text-3xl font-bold mb-1">{stats.objectives}</h2>
                          <p className="text-xs text-gray-400 flex items-center">
                              Objectifs atteints (Total)
                          </p>
                      </div>
                 </div>
            </div>

            {/* COL 2 & 3: Activity Graph */}
            <div className="lg:col-span-2 bg-white rounded-3xl p-6 shadow-sm border border-slate-100/50">
                 <div className="flex justify-between items-center mb-6">
                     <h3 className="font-bold text-gray-800 text-lg">Performance Hebdomadaire</h3>
                     <button className="text-xs font-semibold text-gray-500 bg-gray-100 px-3 py-1 rounded-lg flex items-center hover:bg-gray-200 transition-colors">
                         Semaine <ChevronDown className="ml-1 w-3 h-3" />
                     </button>
                 </div>

                 <div className="h-64 w-full">
                     <ResponsiveContainer width="100%" height="100%">
                         <BarChart data={chartData} barGap={8}>
                             <XAxis 
                               dataKey="name" 
                               axisLine={false} 
                               tickLine={false} 
                               tick={{fill: '#9ca3af', fontSize: 12}} 
                               dy={10}
                             />
                             <Tooltip 
                                cursor={{fill: '#f3f4f6'}}
                                contentStyle={{borderRadius: '12px', border: 'none', boxShadow: '0 4px 15px -3px rgba(0, 0, 0, 0.1)', fontSize: '12px'}}
                             />
                             <Bar dataKey="score" radius={[4, 4, 4, 4]} barSize={10} animationDuration={1000}>
                                {chartData.map((entry, index) => (
                                    <Cell 
                                        key={`cell-${index}`} 
                                        fill={index % 2 === 0 ? "#fbbf24" : "#6366f1"} // Alternance couleur jaune/bleue conforme au design
                                    />
                                ))}
                             </Bar>
                             {/* Background track visual effect (fake bar) */}
                              <Bar dataKey="score" fill="#e5e7eb" radius={[4, 4, 4, 4]} barSize={10} opacity={0.2} />
                         </BarChart>
                     </ResponsiveContainer>
                 </div>
                 
                 <div className="mt-4 flex justify-between text-xs text-gray-400 px-4 pt-4 border-t border-gray-100">
                     <div className="flex gap-4">
                        <span className="flex items-center gap-1"><div className="w-2 h-2 rounded-full bg-indigo-500"></div>Sessions</span>
                        <span className="flex items-center gap-1"><div className="w-2 h-2 rounded-full bg-amber-400"></div>Validations</span>
                     </div>
                     <span>Tendance: {chartData.length > 0 ? '+12%' : 'Neutre'}</span>
                 </div>
            </div>

        </div>

      </div>
    </div>
  );
};

export default Overview;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\dashboard\RedoExams.tsx
================================================================================

// components/dashboard/RedoExams.tsx
'use client';

import React, { useMemo } from 'react';
import { useRouter } from 'next/navigation';
import { Repeat, Check, AlertCircle } from 'lucide-react';
import type { UseCase } from '@/types/simulation/types';
import { Button } from '../ui/Button';

interface RedoExamsProps {
  allCases: UseCase[]; // Toujours utile si on veut afficher "cas non commencés"
  userProgress: any[];
}

const RedoExams: React.FC<RedoExamsProps> = ({ allCases, userProgress }) => {
  const router = useRouter();
  
  // Calcule la liste des cas à refaire ou à continuer.
  const casesToRedo = useMemo(() => {
    return userProgress
      .filter(p => p.status === 'started' || (p.status === 'completed' && (p.score || 0) < 50))
      .map(p => ({
        ...p.clinical_cases,
        progressStatus: p.status, // On ajoute le statut et le score pour l'affichage
        progressScore: p.score
      }));
  }, [userProgress]);

  // Redirige simplement vers la page de simulation
  const handleRelaunchCase = (caseId: string) => {
    router.push(`/simulation?caseId=${caseId}`);
  };

  return (
    <div className="bg-white p-8 rounded-xl border border-slate-200/80 animate-fade-in-up">
      <div className="flex items-center gap-3 mb-4">
        <AlertCircle className="w-8 h-8 text-orange-500" />
        <h3 className="text-2xl font-bold text-slate-800">Échéances & Cas à Améliorer</h3>
      </div>
      <p className="text-slate-600 mb-6">
        Voici les simulations que vous avez commencées mais pas encore terminées, ou celles où votre score peut être amélioré.
      </p>

      {casesToRedo.length > 0 ? (
        <div className="space-y-4">
          {casesToRedo.map(c => (
            <div key={c.id} className="flex flex-col md:flex-row items-start md:items-center justify-between gap-4 p-4 border border-slate-200 rounded-lg bg-slate-50/50">
              <div>
                <p className="font-semibold text-slate-800">{c.patient?.nom}</p>
                <div className="flex items-center gap-4 text-sm text-slate-500 mt-1">
                  <span>Difficulté: <span className="font-bold text-slate-700">{c.difficulty}</span></span>
                  {c.progressScore !== null && (
                     <span className="font-bold text-red-600">Score: {c.progressScore}%</span>
                  )}
                </div>
              </div>
              <Button onClick={() => handleRelaunchCase(c.id)} className="w-full md:w-auto">
                <Repeat size={16} className="mr-2"/> 
                {c.progressStatus === 'started' ? 'Continuer' : 'Recommencer'}
              </Button>
            </div>
          ))}
        </div>
      ) : (
        <div className="text-center py-10 bg-green-50 rounded-lg text-green-700 font-semibold flex flex-col items-center gap-3">
          <Check size={24} />
          <p>Félicitations, vous n'avez aucune évaluation à recommencer !</p>
        </div>
      )}
    </div>
  );
};

export default RedoExams;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\dashboard\Settings.tsx
================================================================================

// components/dashboard/Settings.tsx
'use client';

import React, { useState, useEffect } from 'react';
import type { User } from '@supabase/supabase-js';
import toast from 'react-hot-toast';
import { Edit2, Save, X, User as UserIcon, Mail, Building, GraduationCap, Heart, Target, ListChecks, Calendar, Zap, Hourglass, BarChart3, Shield } from 'lucide-react';

import { UserProfile, UserLevel, PracticeFrequency, DifficultyLevel, SPECIALTIES, LEARNING_GOALS, CASE_TYPES } from '@/types/user/profile';
import { updateProfile as updateProfileService } from '@/services/authService';
import { Button } from '../ui/Button';
import { Input } from '../ui/Input';

// --- PROPS DU COMPOSANT ---
interface SettingsProps {
    user: User;
    profile: UserProfile;
}

// --- SOUS-COMPOSANTS POUR UN DESIGN ÉLÉGANT ---

// Affiche une ligne d'information (label + valeur ou input)
const DisplayRow = ({ icon: Icon, label, value, isEditing, children }: { icon: React.ElementType, label: string, value: any, isEditing: boolean, children: React.ReactNode }) => (
    <div className="grid grid-cols-1 md:grid-cols-3 gap-2 items-center border-t py-4 first:border-t-0">
        <div className="flex items-center gap-3 text-slate-600 font-medium">
            <Icon size={18} />
            <span>{label}</span>
        </div>
        <div className="md:col-span-2">
            {isEditing ? (
                children
            ) : (
                <span className={`font-medium ${value ? 'text-slate-800' : 'text-slate-400 italic'}`}>
                    {value || "À renseigner"}
                </span>
            )}
        </div>
    </div>
);

// Gère un groupe de boutons sélectionnables (pour les tableaux)
const ChipSelector = ({ options, selected, onToggle, isEditing }: { options: readonly string[], selected: string[], onToggle: (item: string) => void, isEditing: boolean }) => (
    <div className="flex flex-wrap gap-2">
        {(selected.length === 0 && !isEditing) && <span className="text-slate-400 italic">À renseigner</span>}
        
        {(isEditing ? options : selected).map(item => {
            const isSelected = selected.includes(item);
            return (
                <button
                    key={item}
                    disabled={!isEditing}
                    onClick={() => onToggle(item)}
                    className={`px-3 py-1.5 text-sm rounded-full border transition-all ${
                        isSelected 
                        ? 'bg-[#052648] text-white border-[#052648]' 
                        : 'bg-white text-slate-700 hover:border-slate-400'
                    } ${!isEditing && 'bg-slate-100 text-slate-700 border-slate-200 cursor-default'}`}
                >
                    {item}
                </button>
            );
        })}
    </div>
);

// --- COMPOSANT PRINCIPAL ---

export default function Settings({ user, profile: initialProfile }: SettingsProps) {
    const [isEditing, setIsEditing] = useState(false);
    const [profile, setProfile] = useState<Partial<UserProfile>>(initialProfile);

    useEffect(() => setProfile(initialProfile), [initialProfile]);

    const handleSave = async () => {
        setIsEditing(false);
        const toastId = toast.loading("Sauvegarde des modifications...");
        try {
            await updateProfileService(user.id, profile);
            toast.success("Profil mis à jour !", { id: toastId });
        } catch (error) {
            toast.error("Erreur lors de la sauvegarde.", { id: toastId });
            console.error(error);
            setIsEditing(true); // Permet à l'utilisateur de corriger
        }
    };
    
    const handleCancel = () => {
        setIsEditing(false);
        setProfile(initialProfile);
    };

    const updateProfileField = (field: keyof UserProfile, value: any) => setProfile(prev => ({ ...prev, [field]: value }));

    const toggleArrayItem = (field: keyof UserProfile, item: string) => {
        const currentArray = (profile[field] as string[]) || [];
        const newArray = currentArray.includes(item) ? currentArray.filter(i => i !== item) : [...currentArray, item];
        updateProfileField(field, newArray);
    };
    
    const getLevelLabel = (level: UserLevel | undefined) => { /* ... (inchangé) ... */ };
    
    return (
        <div className="bg-white p-6 md:p-8 rounded-2xl border border-slate-200/80 space-y-6">
            {/* --- EN-TÊTE AVEC BOUTONS D'ACTION --- */}
            <div className="flex flex-col md:flex-row justify-between items-start md:items-center pb-4 border-b">
                <div>
                    <h2 className="text-2xl font-bold text-slate-800">Paramètres du profil</h2>
                    <p className="text-slate-500 mt-1">Gérez vos informations de profil et vos préférences.</p>
                </div>
                <div className="flex gap-2 mt-4 md:mt-0 flex-shrink-0">
                    {isEditing ? (
                        <>
                            <Button variant="outline" onClick={handleCancel}><X size={16} className="mr-2"/> Annuler</Button>
                            <Button onClick={handleSave} className="bg-green-600 hover:bg-green-700"><Save size={16} className="mr-2"/> Enregistrer</Button>
                        </>
                    ) : (
                        <Button onClick={() => setIsEditing(true)}><Edit2 size={16} className="mr-2"/> Modifier le Profil</Button>
                    )}
                </div>
            </div>

            {/* --- SECTIONS DU PROFIL --- */}
            <div className="divide-y divide-slate-200">
                <DisplayRow icon={UserIcon} label="Nom d'utilisateur" value={profile.username} isEditing={isEditing}>
                    <Input value={profile.username || ''} onChange={(e) => updateProfileField('username', e.target.value)} />
                </DisplayRow>

                <DisplayRow icon={Mail} label="Adresse e-mail" value={user.email} isEditing={isEditing}>
                    <Input disabled value={user.email || ''} />
                </DisplayRow>

                <DisplayRow icon={GraduationCap} label="Statut professionnel" value={profile.level} isEditing={isEditing}>
                     <select value={profile.level || 'student'} onChange={(e) => updateProfileField('level', e.target.value as UserLevel)} className="w-full p-2 border border-slate-300 rounded-md">
                        {Object.entries({ student: 'Étudiant(e)', intern: 'Interne', resident: 'Résident', doctor: 'Médecin', specialist: 'Spécialiste' }).map(([value, label]) => <option key={value} value={value}>{label}</option>)}
                    </select>
                </DisplayRow>

                <DisplayRow icon={Building} label="Université" value={profile.university} isEditing={isEditing}>
                     <Input value={profile.university || ''} onChange={(e) => updateProfileField('university', e.target.value)} placeholder="Nom de l'université" />
                </DisplayRow>

                <DisplayRow icon={Heart} label="Spécialité principale" value={profile.specialty} isEditing={isEditing}>
                     <select value={profile.specialty || ''} onChange={(e) => updateProfileField('specialty', e.target.value)} className="w-full p-2 border border-slate-300 rounded-md">
                         <option value="">-- Sélectionnez --</option>
                         {SPECIALTIES.map(item => <option key={item} value={item}>{item}</option>)}
                     </select>
                </DisplayRow>

                 <DisplayRow icon={ListChecks} label="Domaines d'intérêt" value={(profile.areasOfInterest || []).join(', ')} isEditing={isEditing}>
                    <ChipSelector options={SPECIALTIES} selected={profile.areasOfInterest || []} onToggle={(item) => toggleArrayItem('areasOfInterest', item)} isEditing={isEditing} />
                 </DisplayRow>

                <DisplayRow icon={Target} label="Objectifs d'apprentissage" value={(profile.learningGoals || []).join(', ')} isEditing={isEditing}>
                    <ChipSelector options={LEARNING_GOALS} selected={profile.learningGoals || []} onToggle={(item) => toggleArrayItem('learningGoals', item)} isEditing={isEditing} />
                </DisplayRow>

                 <DisplayRow icon={BarChart3} label="Niveau préféré" value={profile.difficultyPreference} isEditing={isEditing}>
                    <div className="flex gap-2">
                        {(['beginner', 'intermediate', 'advanced'] as DifficultyLevel[]).map(level => (
                             <button key={level} onClick={() => updateProfileField('difficultyPreference', level)} className={`px-4 py-2 flex-1 rounded-md border-2 font-medium transition-all ${profile.difficultyPreference === level ? 'bg-blue-600 text-white border-blue-600' : 'hover:border-blue-300'}`}>
                                 {level.charAt(0).toUpperCase() + level.slice(1)}
                             </button>
                        ))}
                    </div>
                </DisplayRow>
            </div>
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\dashboard\Sidebar.tsx
================================================================================

'use client';

import React, { useState } from 'react';
import { 
  LayoutDashboard, 
  Stethoscope, 
  Target,
  ScanFace,
  LogOut, 
  HeartPulse, 
  ChevronRight, 
  Play
} from 'lucide-react';
import { useAuth } from '@/contexts/AuthContext';

interface SidebarProps {
  onNavigate: (view: string) => void;
  activeView: string;
}

const Sidebar: React.FC<SidebarProps> = ({ onNavigate, activeView }) => {
  const [isHovered, setIsHovered] = useState(false);
  const { logout } = useAuth();

  // --- CONFIGURATION DES ONGLETS (Nettoyée) ---
  const menuItems = [
    { 
      id: 'overview', 
      label: "Vue d'Ensemble", 
      icon: LayoutDashboard 
    },
    { 
      id: 'goals', 
      label: 'Objectifs', 
      icon: Play 
    },
    { 
      id: 'practice', 
      label: "M'exercer", 
      icon: Stethoscope 
    },
    { 
      id: 'analytic_profile', 
      label: 'Mon profil', 
      icon: ScanFace 
    }
  ];

  return (
    <>
      {/* DESKTOP SIDEBAR */}
      <div 
        className={`
          hidden md:flex flex-col fixed left-0 top-0 h-full bg-white z-50 
          shadow-[4px_0_24px_rgba(0,0,0,0.04)] border-r border-slate-100
          transition-all duration-500 ease-cubic-bezier
          ${isHovered ? 'w-72' : 'w-28'}
        `}
        onMouseEnter={() => setIsHovered(true)}
        onMouseLeave={() => setIsHovered(false)}
      >
        {/* LOGO */}
        <div className="h-24 flex items-center justify-center relative w-full mb-6">
          <div className={`flex items-center gap-3 transition-all duration-500 ${isHovered ? 'opacity-100 translate-x-0' : ''}`}>
            <div className={`
                w-12 h-12 bg-gradient-to-br from-[#052648] to-[#2c3d98] rounded-xl flex items-center justify-center shadow-lg shadow-blue-900/20
                text-white transition-all duration-500 z-10
                ${isHovered ? 'mr-0' : 'scale-90'}
            `}>
                <HeartPulse size={26} strokeWidth={2.5} />
            </div>

            <div className={`flex flex-col whitespace-nowrap overflow-hidden transition-all duration-500 ease-in-out ${isHovered ? 'w-auto opacity-100 ml-2' : 'w-0 opacity-0 ml-0'}`}>
               <span className="text-xl font-extrabold text-[#052648] tracking-tight">The Good Doctor</span>
               <span className="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Etudiant</span>
            </div>
          </div>
        </div>

        {/* NAVIGATION */}
        <nav className="flex-1 flex flex-col space-y-16 py-4 w-full overflow-y-auto no-scrollbar">
          {menuItems.map((item) => {
            const isActive = activeView === item.id;
            return (
              <button
                key={item.id}
                onClick={() => onNavigate(item.id)}
                className={`
                  relative h-14 flex items-center cursor-pointer group outline-none
                  transition-all duration-300 w-[92%] rounded-r-full
                  ${isActive ? 'bg-blue-50/80 text-[#052648]' : 'bg-transparent text-slate-400 hover:text-slate-600 hover:bg-slate-50'}
                `}
              >
                {isActive && <div className="absolute left-0 h-full w-1.5 bg-[#052648] rounded-r-md shadow-blue-500/50" />}

                <div className="w-24 min-w-[6rem] flex items-center justify-center z-10">
                   <item.icon size={24} strokeWidth={isActive ? 2.5 : 2} className={`transition-transform duration-300 ${isActive ? 'scale-110' : 'group-hover:scale-110'}`} />
                </div>

                <span className={`text-sm font-bold whitespace-nowrap overflow-hidden transition-all duration-500 ${isHovered ? 'opacity-100 translate-x-0' : 'opacity-0 -translate-x-5'} ${isActive ? 'font-extrabold' : 'font-medium'}`}>
                   {item.label}
                </span>
                
                {isActive && isHovered && <ChevronRight size={16} className="absolute right-4 text-blue-300 animate-pulse" />}
              </button>
            );
          })}
        </nav>

        {/* FOOTER */}
        <div className="p-4 mb-4">
           <button onClick={logout} className={`w-full h-14 rounded-r-full flex items-center transition-all duration-300 group text-rose-500/80 hover:bg-rose-50 hover:text-rose-600 ${!isHovered ? 'w-16 rounded-2xl justify-center' : ''}`}>
              <div className={`${isHovered ? 'w-24 flex justify-center' : ''}`}>
                  <LogOut size={24} className="group-hover:-translate-x-1 transition-transform" />
              </div>
              <span className={`text-sm font-bold overflow-hidden transition-all duration-300 ${isHovered ? 'w-auto opacity-100' : 'w-0 opacity-0'}`}>Déconnexion</span>
           </button>
        </div>
      </div>

      {/* MOBILE NAV */}
      <div className="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-100 z-50 px-2 py-2 flex justify-between items-center shadow-[0_-5px_20px_rgba(0,0,0,0.03)] safe-area-bottom pb-4 overflow-x-auto">
         {menuItems.map((item) => {
             const isActive = activeView === item.id;
             return (
               <button key={item.id} onClick={() => onNavigate(item.id)} className="relative flex flex-col items-center justify-center p-2 min-w-[3.5rem] transition-all duration-300">
                  {isActive && <div className="absolute top-1 w-10 h-10 bg-[#052648] rounded-xl shadow-lg shadow-blue-900/30 animate-in zoom-in-95 duration-200"></div>}
                  <item.icon size={22} className={`relative z-10 transition-colors duration-200 ${isActive ? 'text-white' : 'text-slate-400'}`} />
               </button>
             );
         })}
      </div>
    </>
  );
};

export default Sidebar;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\dashboard\ProfileSidebar.tsx
================================================================================

import React, { useMemo } from 'react';
import { 
  User, Activity, Clock, Award, ChevronLeft, ChevronRight, 
  Stethoscope, CalendarCheck, Zap 
} from 'lucide-react';
import { LearnerResponse, LearnerTrace } from '../../services/learnerService';

interface ProfileSidebarProps {
  user: LearnerResponse | null;
  trace: LearnerTrace | null;
}

const ProfileSidebar: React.FC<ProfileSidebarProps> = ({ user, trace }) => {
  // --- 1. LOGIQUE TEMPORELLE (CALENDRIER) ---
  const today = new Date();
  const currentMonthIndex = today.getMonth(); // 0 = Janvier
  const currentYear = today.getFullYear();
  const currentDay = today.getDate();
  
  // Formatage : "Janvier 2026"
  const monthName = new Intl.DateTimeFormat('fr-FR', { month: 'long', year: 'numeric' }).format(today);
  // Premier jour du mois (pour le décalage dans la grille)
  const firstDayOfMonth = new Date(currentYear, currentMonthIndex, 1).getDay(); // 0 = Dimanche
  // Nombre de jours dans le mois
  const daysInMonth = new Date(currentYear, currentMonthIndex + 1, 0).getDate();
  
  // Ajustement pour commencer la semaine le Lundi (Lundi=1 ... Dimanche=7)
  const startOffset = firstDayOfMonth === 0 ? 6 : firstDayOfMonth - 1;

  // --- 2. LOGIQUE STATISTIQUE (BACKEND) ---
  
  // A. Jours d'activité (Sessions passées)
  const activeDates = useMemo(() => {
    if (!trace?.profile?.learning_history?.sessions) return [];
    
    // On extrait les jours (1..31) des sessions qui sont dans le mois courant
    return trace.profile.learning_history.sessions
      .map(s => {
          const d = new Date(s.date);
          // Vérifie si c'est le même mois/année
          if (d.getMonth() === currentMonthIndex && d.getFullYear() === currentYear) {
              return d.getDate();
          }
          return -1;
      })
      .filter(d => d !== -1);
  }, [trace, currentMonthIndex, currentYear]);

  // B. KPIs Calculés
  const kpi = useMemo(() => {
      // 1. Compétences Maîtrisées
      const masteryLevels = trace?.profile?.competencies?.mastery_levels || [];
      const masteredCount = masteryLevels.filter(m => m.mastery_level >= 0.7).length;
      
      // 2. Objectifs Atteints
      const goals = trace?.profile?.learning_history?.goals || [];
      const doneGoals = goals.filter(g => g.statut === 'atteint').length;
      const goalsPercentage = goals.length > 0 ? Math.round((doneGoals / goals.length) * 100) : 0;

      // 3. Temps / Sessions
      const sessionsCount = trace?.profile?.learning_history?.sessions?.length || 0;
      
      return {
          competencies: masteredCount,
          goals: goalsPercentage,
          sessions: sessionsCount
      };
  }, [trace]);

  // --- 3. RENDU VISUEL ---

  return (
    <div className="w-full h-full bg-white border-l border-slate-200 p-6 flex flex-col overflow-y-auto no-scrollbar shadow-xl z-20">
      
      {/* HEADER PROFIL */}
      <div className="flex flex-col items-center mb-8">
        <div className="relative group">
           {/* Cercle animé au survol */}
          <div className="absolute -inset-1 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full blur opacity-25 group-hover:opacity-50 transition duration-200"></div>
          <div className="w-24 h-24 relative bg-slate-100 rounded-full flex items-center justify-center mb-4 border-4 border-white shadow-lg overflow-hidden">
             {/* Utilisation de l'API UI Avatars pour un avatar stable basé sur le nom */}
             <img 
               src={`https://ui-avatars.com/api/?name=${user?.nom || 'User'}&background=052648&color=fff&size=128`} 
               alt="Avatar" 
               className="w-full h-full object-cover"
            />
          </div>
          <div className="absolute bottom-4 right-1 w-6 h-6 bg-emerald-500 border-4 border-white rounded-full"></div>
        </div>
        
        <h3 className="font-bold text-slate-800 text-lg">{user?.nom || "Non Connecté"}</h3>
        <p className="text-slate-500 text-xs font-medium uppercase tracking-wide mt-1">
            {user?.niveau_etudes || "Invité"} • {user?.matricule}
        </p>
      </div>

      {/* CARTES KPI (STATS) */}
      <div className="grid grid-cols-3 gap-1 mb-8">
        {/* Carte 1: Compétences */}
        <div className="bg-slate-50 border border-slate-100 p-3 rounded-2xl flex flex-col items-center text-center hover:bg-white hover:shadow-md hover:border-indigo-100 transition-all duration-300 group">
            <div className="bg-transparent p-2 mb-2 text-indigo-600 border-0 border-slate-100 group-hover:scale-110 transition-transform">
               <Activity className="w-5 h-5" />
            </div>
            <span className="font-bold text-slate-800 text-lg">{kpi.competencies}</span> 
            <span className="text-[10px] text-slate-400 font-bold uppercase tracking-wide">Compétences</span>
        </div>

        {/* Carte 2: Objectifs */}
        <div className="bg-slate-50 border border-slate-100 p-3 rounded-2xl flex flex-col items-center text-center hover:bg-white hover:shadow-md hover:border-amber-100 transition-all duration-300 group">
             <div className="bg-transparent p-2 rounded-xl mb-2 text-amber-500 border-0 border-slate-100 group-hover:scale-110 transition-transform">
               <Award className="w-5 h-5" />
            </div>
            <span className="font-bold text-slate-800 text-lg">{kpi.goals}%</span>
            <span className="text-[10px] text-slate-400 font-bold uppercase tracking-wide">Objectifs</span>
        </div>

        {/* Carte 3: Sessions */}
        <div className="bg-slate-50 border border-slate-100 p-3 rounded-2xl flex flex-col items-center text-center hover:bg-white hover:shadow-md hover:border-blue-100 transition-all duration-300 group">
            <div className="bg-transparent p-2 rounded-xl mb-2 text-blue-500 border-0 border-slate-100 group-hover:scale-110 transition-transform">
               <Clock className="w-5 h-5" />
            </div>
            <span className="font-bold text-slate-800 text-lg">{kpi.sessions}</span>
            <span className="text-[10px] text-slate-400 font-bold uppercase tracking-wide">Sessions</span>
        </div>
      </div>

      {/* CALENDRIER DYNAMIQUE */}
      <div className="mb-8">
        <div className="flex justify-between items-center mb-4 px-1">
          <span className="text-slate-800 font-bold capitalize text-sm">{monthName}</span>
          <div className="flex gap-1 text-slate-400">
            <button className="hover:text-indigo-600 hover:bg-slate-100 p-1 rounded-md transition"><ChevronLeft className="w-4 h-4" /></button>
            <button className="hover:text-indigo-600 hover:bg-slate-100 p-1 rounded-md transition"><ChevronRight className="w-4 h-4" /></button>
          </div>
        </div>
        
        {/* Header Jours */}
        <div className="grid grid-cols-7 gap-1 text-center text-[10px] font-bold text-slate-400 mb-2 uppercase tracking-wide">
          <span>Lun</span><span>Mar</span><span>Mer</span><span>Jeu</span><span>Ven</span><span>Sam</span><span>Dim</span>
        </div>
        
        {/* Grille Dates */}
        <div className="grid grid-cols-7 gap-y-2 gap-x-1 text-center text-xs">
           {/* Padding vide pour le début du mois */}
           {Array.from({ length: startOffset }).map((_, i) => <span key={`empty-${i}`} />)}
           
           {/* Jours Réels */}
           {Array.from({ length: daysInMonth }).map((_, i) => {
             const day = i + 1;
             const isToday = day === currentDay;
             const hasActivity = activeDates.includes(day); // Vérifie via Trace si l'élève a bossé ce jour là
             
             return (
               <div key={day} className="flex justify-center items-center relative">
                  {/* Point indicateur si activité ce jour là (hors aujourd'hui) */}
                  {!isToday && hasActivity && (
                      <span className="absolute bottom-0 w-1 h-1 bg-indigo-500 rounded-full"></span>
                  )}

                  <span className={`
                     w-8 h-8 flex items-center justify-center rounded-xl transition-all cursor-default text-sm
                     ${isToday 
                        ? 'bg-[#052648] text-white font-bold shadow-lg shadow-indigo-200' 
                        : 'text-slate-600 hover:bg-slate-50 hover:text-slate-900 font-medium'
                     }
                  `}>
                    {day}
                  </span>
               </div>
             )
           })}
        </div>
      </div>

      </div>
  );
};

export default ProfileSidebar;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\dashboard\Skills.tsx
================================================================================

'use client';

import React, { useState, useEffect, useMemo } from 'react';
import { 
  Search, Filter, List, LayoutGrid, Brain, TrendingUp, 
  Clock, AlertTriangle, CheckCircle, Flame, ArrowRight,
  BookOpen, MoreHorizontal, ChevronDown, RefreshCcw
} from 'lucide-react';
import { 
  PieChart, Pie, Cell, ResponsiveContainer, Tooltip as RechartsTooltip 
} from 'recharts';
import { LearnerService } from '@/services/learnerService';
import toast from 'react-hot-toast';

// --- TYPES (Adaptés aux données retournées par les routes citées) ---

// Extension du type pour inclure les métadonnées UI si le backend ne les envoie pas directement
// On suppose que getListMastery renvoie une jointure ou qu'on mappe localement
interface SkillData {
  id: number;
  competence_id: number;
  name: string;             // 'competence_name' du backend
  domain: string;           // 'domaine_medical' du backend
  mastery_level: number;    // 0.0 à 1.0
  last_practice: string;    // ISO Date
  success_count: number;    // 'nb_success'
  failure_count: number;    // 'nb_failures'
  streak: number;           // 'streak_correct'
  difficulty: number;       // 1-5
}

// Stats calculées
interface SkillsStats {
  total: number;
  mastered: number; // >= 0.7
  progress: number; // 0.4 - 0.7
  todo: number;     // < 0.4
  global_avg: number;
  weekly_activity: number;
  best_streak: number;
  to_review_today: number;
  regressing: number;
}

const COLORS = ['#10B981', '#F59E0B', '#EF4444']; // Vert, Jaune, Rouge

export default function Skills() {
  const [loading, setLoading] = useState(true);
  const [skills, setSkills] = useState<SkillData[]>([]);
  const [stats, setStats] = useState<SkillsStats>({
    total: 0, mastered: 0, progress: 0, todo: 0, global_avg: 0,
    weekly_activity: 0, best_streak: 0, to_review_today: 0, regressing: 0
  });

  // États Filtres & UI
  const [viewMode, setViewMode] = useState<'list' | 'grid'>('list');
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedDomains, setSelectedDomains] = useState<string[]>([]);
  const [levelFilter, setLevelFilter] = useState<'all' | 'mastered' | 'progress' | 'todo'>('all');
  const [urgencyFilter, setUrgencyFilter] = useState<'all' | 'urgent' | 'warning' | 'ok'>('all');

  // Données de domaines mockées (à remplacer par API domains si dispo)
  const AVAILABLE_DOMAINS = ['Cardiologie', 'Pneumologie', 'Infectiologie', 'Neurologie', 'Pédiatrie', 'Urgences'];

  // --- CHARGEMENT ---
  useEffect(() => {
    fetchData();
  }, []);

  const fetchData = async () => {
    setLoading(true);
    try {
      // 1. Récupération ID User
      const user = await LearnerService.getMe();
      if (!user) throw new Error("Non connecté");

      // 2. Récupération Compétences (GET /competency-mastery/learner/{id})
      console.log(`📡 API [GET] /competency-mastery/learner/${user.id}`);
      const rawData: any[] = await LearnerService.getListMastery(user.id);
      
      // 3. Transformation & Enrichissement (Si le backend ne renvoie pas tout)
      // On simule des noms/domaines si manquants pour l'UI
      const processedSkills: SkillData[] = rawData.map((item, index) => ({
        id: index,
        competence_id: item.competence_id,
        name: item.competence_name || `Compétence Clinique #${item.competence_id}`,
        domain: item.domaine_medical || AVAILABLE_DOMAINS[item.competence_id % AVAILABLE_DOMAINS.length],
        mastery_level: item.mastery_level || 0,
        last_practice: item.last_practice_date || new Date().toISOString(),
        success_count: item.nb_success || 0,
        failure_count: item.nb_failures || 0,
        streak: item.streak_correct || 0,
        difficulty: 3 // Défaut
      }));

      setSkills(processedSkills);
      calculateStats(processedSkills);

    } catch (e) {
      console.error(e);
      toast.error("Impossible de charger les compétences.");
    } finally {
      setLoading(false);
    }
  };

  const calculateStats = (data: SkillData[]) => {
    const total = data.length;
    const mastered = data.filter(s => s.mastery_level >= 0.7).length;
    const progress = data.filter(s => s.mastery_level >= 0.4 && s.mastery_level < 0.7).length;
    const todo = data.filter(s => s.mastery_level < 0.4).length;
    
    // Moyenne globale
    const sumMastery = data.reduce((acc, curr) => acc + curr.mastery_level, 0);
    const global_avg = total > 0 ? Math.round((sumMastery / total) * 100) : 0;

    // Activité Hebdomadaire (Mock date logic)
    const oneWeekAgo = new Date();
    oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
    const weekly_activity = data.filter(s => new Date(s.last_practice) > oneWeekAgo).length;

    // Meilleur Streak
    const best_streak = Math.max(...data.map(s => s.streak), 0);

    // Algorithme Urgence (Mock)
    const twoWeeksAgo = new Date();
    twoWeeksAgo.setDate(twoWeeksAgo.getDate() - 14);
    const regressing = data.filter(s => new Date(s.last_practice) < twoWeeksAgo && s.mastery_level > 0.5).length;
    const to_review_today = regressing + 3; // +3 arbitraire pour "répétition espacée"

    setStats({ total, mastered, progress, todo, global_avg, weekly_activity, best_streak, to_review_today, regressing });
  };

  // --- LOGIQUE FILTRAGE ---
  const filteredSkills = useMemo(() => {
    return skills.filter(skill => {
      // 1. Recherche Texte
      const matchesSearch = skill.name.toLowerCase().includes(searchQuery.toLowerCase()) || 
                            skill.domain.toLowerCase().includes(searchQuery.toLowerCase());
      
      // 2. Filtre Domaine
      const matchesDomain = selectedDomains.length === 0 || selectedDomains.includes(skill.domain);
      
      // 3. Filtre Niveau
      let matchesLevel = true;
      if (levelFilter === 'mastered') matchesLevel = skill.mastery_level >= 0.7;
      if (levelFilter === 'progress') matchesLevel = skill.mastery_level >= 0.4 && skill.mastery_level < 0.7;
      if (levelFilter === 'todo') matchesLevel = skill.mastery_level < 0.4;

      // 4. Filtre Urgence (Basé sur last_practice)
      let matchesUrgency = true;
      const daysSince = (new Date().getTime() - new Date(skill.last_practice).getTime()) / (1000 * 3600 * 24);
      if (urgencyFilter === 'urgent') matchesUrgency = daysSince > 14;
      if (urgencyFilter === 'warning') matchesUrgency = daysSince > 7 && daysSince <= 14;
      if (urgencyFilter === 'ok') matchesUrgency = daysSince <= 7;

      return matchesSearch && matchesDomain && matchesLevel && matchesUrgency;
    });
  }, [skills, searchQuery, selectedDomains, levelFilter, urgencyFilter]);


  // --- HELPERS UI ---
  const getProgressColor = (val: number) => {
    if (val >= 0.7) return 'bg-emerald-500';
    if (val >= 0.4) return 'bg-amber-400';
    return 'bg-red-500';
  };

  const getDomainColor = (domain: string) => {
    switch(domain) {
      case 'Cardiologie': return 'bg-rose-50 text-rose-700 border-rose-100';
      case 'Pneumologie': return 'bg-cyan-50 text-cyan-700 border-cyan-100';
      case 'Neurologie': return 'bg-purple-50 text-purple-700 border-purple-100';
      case 'Infectiologie': return 'bg-amber-50 text-amber-700 border-amber-100';
      default: return 'bg-slate-50 text-slate-700 border-slate-100';
    }
  };

  const toggleDomain = (d: string) => {
    if (selectedDomains.includes(d)) setSelectedDomains(prev => prev.filter(item => item !== d));
    else setSelectedDomains(prev => [...prev, d]);
  };

  if (loading) {
    return (
      <div className="space-y-6 p-4">
        <div className="h-40 bg-slate-200 rounded-3xl w-full animate-pulse" />
        <div className="h-16 bg-slate-200 rounded-xl w-full animate-pulse" />
        <div className="space-y-4">
            {[1,2,3].map(i => <div key={i} className="h-20 bg-slate-200 rounded-xl w-full animate-pulse" />)}
        </div>
      </div>
    );
  }

  // === RENDU PRINCIPAL ===

  return (
    <div className="flex flex-col gap-6 min-h-screen pb-10">
      
      {/* -------------------- SECTION 1: HEADER STATISTIQUES -------------------- */}
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        {/* CARTE 1 : VUE D'ENSEMBLE (PIE) */}
        <div className="bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex items-center justify-between">
          <div>
            <p className="text-slate-500 text-sm font-semibold uppercase tracking-wide">Maitrise Globale</p>
            <div className="mt-2">
              <span className="text-3xl font-bold text-[#052648]">{stats.global_avg}%</span>
              <p className="text-xs text-slate-400 mt-1">{stats.total} compétences suivies</p>
            </div>
            <div className="flex flex-col gap-1 mt-4 text-xs">
                <div className="flex items-center gap-2"><div className="w-2 h-2 rounded-full bg-emerald-500"/> Maîtrisées ({stats.mastered})</div>
                <div className="flex items-center gap-2"><div className="w-2 h-2 rounded-full bg-amber-400"/> En cours ({stats.progress})</div>
                <div className="flex items-center gap-2"><div className="w-2 h-2 rounded-full bg-red-500"/> À travailler ({stats.todo})</div>
            </div>
          </div>
          <div className="w-32 h-32 relative">
             <ResponsiveContainer width="100%" height="100%">
               <PieChart>
                 <Pie
                   data={[
                     {name: 'Mastered', value: stats.mastered},
                     {name: 'Progress', value: stats.progress},
                     {name: 'Todo', value: stats.todo}
                   ]}
                   cx="50%" cy="50%" innerRadius={35} outerRadius={50} paddingAngle={5} dataKey="value" stroke="none"
                 >
                   {COLORS.map((color, index) => <Cell key={`cell-${index}`} fill={color} />)}
                 </Pie>
                 <RechartsTooltip />
               </PieChart>
             </ResponsiveContainer>
             <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                 <Brain className="w-6 h-6 text-slate-300 opacity-50"/>
             </div>
          </div>
        </div>

        {/* CARTE 2 : ACTIVITÉ RÉCENTE */}
        <div className="bg-[#052648] text-white p-6 rounded-3xl shadow-lg relative overflow-hidden flex flex-col justify-between">
           <div className="absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-2xl -mr-10 -mt-10"></div>
           <div className="flex justify-between items-start z-10">
               <div>
                  <h3 className="font-bold text-lg mb-1">Activité Récente</h3>
                  <p className="text-blue-200 text-xs">Cette semaine</p>
               </div>
               <div className="bg-white/10 p-2 rounded-lg"><TrendingUp size={20} className="text-white"/></div>
           </div>

           <div className="grid grid-cols-2 gap-4 mt-6 z-10">
              <div className="bg-white/10 p-3 rounded-xl backdrop-blur-sm">
                 <p className="text-2xl font-bold">{stats.weekly_activity}</p>
                 <p className="text-[10px] text-blue-200 uppercase font-bold mt-1">Pratiquées</p>
              </div>
              <div className="bg-white/10 p-3 rounded-xl backdrop-blur-sm">
                 <div className="flex items-center gap-1"><Flame size={14} className="text-orange-400 fill-orange-400"/> {stats.best_streak}j</div>
                 <p className="text-[10px] text-blue-200 uppercase font-bold mt-1">Best Streak</p>
              </div>
           </div>
        </div>

        {/* CARTE 3 : PROCHAINES RÉVISIONS (URGENCE) */}
        <div className="bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col">
            <div className="flex justify-between items-center mb-4">
                <p className="text-slate-500 text-sm font-semibold uppercase tracking-wide flex items-center gap-2">
                    <Clock size={16}/> Révisions Prioritaires
                </p>
            </div>
            
            <div className="flex-1 flex items-center gap-4 border-b border-dashed border-slate-200 pb-4 mb-4">
                <div className="text-center w-16">
                    <span className="block text-2xl font-bold text-red-500">{stats.to_review_today}</span>
                    <span className="text-[10px] text-red-400 font-bold uppercase">À voir</span>
                </div>
                <div className="flex-1">
                    <p className="text-sm text-slate-800 font-medium">Selon votre courbe d'oubli, il est temps de réviser ces notions.</p>
                </div>
            </div>

            <div className="flex items-center gap-2 text-xs text-amber-600 bg-amber-50 px-3 py-2 rounded-lg border border-amber-100">
               <AlertTriangle size={14}/>
               <span className="font-bold">{stats.regressing} compétences</span> montrent des signes de régression (&gt;14j).
            </div>
        </div>
      </div>


      {/* -------------------- SECTION 2: FILTRES & BARRE DE RECHERCHE -------------------- */}
      <div className="bg-white p-4 md:p-5 rounded-2xl shadow-sm border border-slate-100 sticky top-[90px] z-30 transition-all">
         {/* LIGNE 1 : Recherche + Tri */}
         <div className="flex flex-col md:flex-row gap-4 mb-4 justify-between">
            <div className="relative flex-1 max-w-xl">
               <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 h-4 w-4" />
               <input 
                  type="text"
                  placeholder="Rechercher une compétence..."
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  className="w-full pl-10 pr-4 py-2.5 bg-slate-50 border-none rounded-xl text-sm focus:ring-2 focus:ring-[#052648]/20 focus:bg-white outline-none transition-all"
               />
            </div>
            
            <div className="flex gap-2 items-center">
                 <div className="bg-slate-200 w-px h-6 mx-2"/>
                 <button onClick={() => setViewMode('list')} className={`p-2.5 rounded-lg transition-all ${viewMode === 'list' ? 'bg-[#052648] text-white' : 'text-slate-400 hover:bg-slate-100'}`}>
                    <List size={18}/>
                 </button>
                 <button onClick={() => setViewMode('grid')} className={`p-2.5 rounded-lg transition-all ${viewMode === 'grid' ? 'bg-[#052648] text-white' : 'text-slate-400 hover:bg-slate-100'}`}>
                    <LayoutGrid size={18}/>
                 </button>
            </div>
         </div>

         {/* LIGNE 2 : Filtres Catégoriels */}
         <div className="flex flex-wrap gap-2 items-center text-sm">
             <div className="flex items-center gap-1 text-slate-400 mr-2 text-xs uppercase font-bold"><Filter size={14}/> Filtres :</div>
             
             {/* Domains (Dropdown simple simulé par toggle buttons) */}
             <div className="flex gap-1 overflow-x-auto pb-1 no-scrollbar max-w-md">
                 {AVAILABLE_DOMAINS.map(domain => (
                     <button 
                        key={domain} 
                        onClick={() => toggleDomain(domain)}
                        className={`px-3 py-1 rounded-full text-xs font-medium border transition-all whitespace-nowrap
                            ${selectedDomains.includes(domain) 
                                ? 'bg-indigo-50 border-indigo-200 text-indigo-700' 
                                : 'bg-white border-slate-200 text-slate-500 hover:border-slate-300'
                            }
                        `}
                     >
                         {domain}
                     </button>
                 ))}
             </div>

             <div className="w-px h-4 bg-slate-200 mx-2"/>

             {/* Statut Maîtrise */}
             <div className="flex bg-slate-100 p-1 rounded-lg">
                {(['all', 'mastered', 'progress', 'todo'] as const).map(l => (
                    <button
                        key={l}
                        onClick={() => setLevelFilter(l)}
                        className={`px-3 py-1 rounded-md text-xs font-semibold transition-all ${
                            levelFilter === l ? 'bg-white shadow text-[#052648]' : 'text-slate-400 hover:text-slate-600'
                        }`}
                    >
                        {l === 'all' ? 'Tout' : l === 'mastered' ? 'Maîtrisé' : l === 'progress' ? 'En cours' : 'Faible'}
                    </button>
                ))}
             </div>

             {/* Urgence (Radio Style) */}
             <div className="flex items-center gap-2 ml-auto">
                 <label className="flex items-center gap-1 cursor-pointer">
                     <input type="radio" name="urgency" checked={urgencyFilter === 'urgent'} onChange={() => setUrgencyFilter('urgent')} className="accent-red-500" /> 
                     <span className={`text-xs ${urgencyFilter === 'urgent' ? 'text-red-600 font-bold' : 'text-slate-500'}`}>Urgent 🔥</span>
                 </label>
                 <label className="flex items-center gap-1 cursor-pointer">
                     <input type="radio" name="urgency" checked={urgencyFilter === 'all'} onChange={() => setUrgencyFilter('all')} className="accent-blue-500" />
                     <span className={`text-xs ${urgencyFilter === 'all' ? 'text-blue-600 font-bold' : 'text-slate-500'}`}>Tous</span>
                 </label>
             </div>
         </div>
      </div>


      {/* -------------------- SECTION 3: LISTE / GRILLE -------------------- */}
      
      {filteredSkills.length === 0 ? (
          <div className="flex flex-col items-center justify-center py-20 bg-slate-50 rounded-2xl border border-dashed border-slate-300 text-slate-400">
             <Filter size={48} className="mb-4 opacity-50"/>
             <p>Aucune compétence ne correspond aux filtres actuels.</p>
             <button onClick={() => { setSearchQuery(''); setSelectedDomains([]); setLevelFilter('all'); }} className="mt-4 text-blue-600 font-semibold text-sm hover:underline">Réinitialiser les filtres</button>
          </div>
      ) : viewMode === 'list' ? (
        
        // --- VUE TABLEAU DÉTAILLÉ ---
        <div className="bg-white border border-slate-200 rounded-2xl overflow-hidden shadow-sm animate-in fade-in slide-in-from-bottom-2">
            <div className="overflow-x-auto">
                <table className="w-full text-left text-sm">
                    <thead className="bg-slate-50/50 text-xs font-bold text-slate-500 uppercase tracking-wider border-b border-slate-100">
                        <tr>
                            <th className="px-6 py-4">Compétence / Domaine</th>
                            <th className="px-6 py-4 w-48">Niveau Maîtrise</th>
                            <th className="px-6 py-4 text-center">Tentatives</th>
                            <th className="px-6 py-4 text-center">Dernière Pratique</th>
                            <th className="px-6 py-4 text-center">Streak</th>
                            <th className="px-6 py-4 text-right">Actions</th>
                        </tr>
                    </thead>
                    <tbody className="divide-y divide-slate-50">
                        {filteredSkills.map((s) => {
                            const masteryPct = Math.round(s.mastery_level * 100);
                            const total = s.success_count + s.failure_count;
                            const lastPracticeDate = new Date(s.last_practice);
                            const daysAgo = Math.floor((new Date().getTime() - lastPracticeDate.getTime()) / (1000 * 3600 * 24));
                            
                            return (
                                <tr key={s.id} className="hover:bg-slate-50 transition-colors group">
                                    <td className="px-6 py-4">
                                        <p className="font-bold text-[#052648] text-base mb-1 cursor-pointer hover:underline">{s.name}</p>
                                        <span className={`inline-block text-[10px] px-2 py-0.5 rounded-full uppercase border font-bold tracking-wider ${getDomainColor(s.domain)}`}>
                                            {s.domain}
                                        </span>
                                    </td>
                                    
                                    <td className="px-6 py-4 align-middle">
                                        <div className="flex items-center gap-3">
                                            <div className="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
                                                <div className={`h-full rounded-full ${getProgressColor(s.mastery_level)}`} style={{width: `${masteryPct}%`}}></div>
                                            </div>
                                            <span className="font-bold text-slate-700 text-xs w-8 text-right">{masteryPct}%</span>
                                        </div>
                                    </td>

                                    <td className="px-6 py-4 text-center">
                                        <div className="flex flex-col items-center">
                                            <span className="text-xs font-semibold text-slate-600 bg-slate-100 px-2 py-1 rounded-md border border-slate-200">
                                                <span className="text-emerald-600">{s.success_count}✓</span> / <span className="text-red-500">{s.failure_count}✗</span>
                                            </span>
                                            <span className="text-[10px] text-slate-400 mt-1">{total} essais</span>
                                        </div>
                                    </td>

                                    <td className="px-6 py-4 text-center">
                                        <span className={`text-xs font-medium ${daysAgo > 14 ? 'text-red-500 font-bold flex items-center justify-center gap-1' : 'text-slate-600'}`}>
                                            {daysAgo > 14 && <AlertTriangle size={12}/>}
                                            {daysAgo === 0 ? "Aujourd'hui" : `Il y a ${daysAgo}j`}
                                        </span>
                                    </td>

                                    <td className="px-6 py-4 text-center">
                                        <div className="flex items-center justify-center gap-1 font-bold text-amber-500">
                                            <Flame size={16} className={s.streak > 3 ? "fill-amber-500" : ""}/>
                                            {s.streak}
                                        </div>
                                    </td>

                                    <td className="px-6 py-4 text-right">
                                        <div className="flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                            <button className="p-2 bg-[#052648] hover:bg-blue-900 text-white rounded-lg shadow-md transition-transform hover:scale-105" title="Pratiquer">
                                                <RefreshCcw size={16} />
                                            </button>
                                            <button className="p-2 bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 rounded-lg" title="Détails">
                                                <BookOpen size={16} />
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            );
                        })}
                    </tbody>
                </table>
            </div>
        </div>

      ) : (

        // --- VUE GRILLE (CARTES) ---
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-in fade-in slide-in-from-bottom-4">
             {filteredSkills.map(s => {
                 const masteryPct = Math.round(s.mastery_level * 100);
                 const daysAgo = Math.floor((new Date().getTime() - new Date(s.last_practice).getTime()) / (1000 * 3600 * 24));
                 
                 return (
                     <div key={s.id} className="bg-white rounded-2xl p-5 border border-slate-100 shadow-sm hover:shadow-lg transition-all group hover:-translate-y-1 relative overflow-hidden">
                         
                         {/* Badge Urgence en absolu */}
                         {daysAgo > 14 && (
                             <div className="absolute top-0 right-0 bg-red-500 text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl shadow-sm z-10">
                                 À RÉVISER
                             </div>
                         )}

                         <div className="mb-4">
                             <div className={`text-[9px] uppercase font-bold tracking-widest mb-2 w-fit px-2 py-0.5 rounded border ${getDomainColor(s.domain)}`}>{s.domain}</div>
                             <h3 className="text-base font-bold text-[#052648] line-clamp-1 mb-1" title={s.name}>{s.name}</h3>
                         </div>

                         {/* Barre Progrès Large */}
                         <div className="mb-4">
                             <div className="flex justify-between text-xs mb-1">
                                 <span className="text-slate-400 font-medium">Maîtrise</span>
                                 <span className={`font-bold ${s.mastery_level >= 0.7 ? 'text-emerald-600' : s.mastery_level < 0.4 ? 'text-red-500' : 'text-amber-500'}`}>{masteryPct}%</span>
                             </div>
                             <div className="h-2 w-full bg-slate-100 rounded-full overflow-hidden">
                                 <div className={`h-full ${getProgressColor(s.mastery_level)}`} style={{width: `${masteryPct}%`}}/>
                             </div>
                         </div>

                         {/* Métriques */}
                         <div className="grid grid-cols-2 gap-2 text-xs mb-5">
                             <div className="bg-slate-50 p-2 rounded-lg flex flex-col">
                                 <span className="text-slate-400">Dernier essai</span>
                                 <span className="font-semibold text-slate-700">{daysAgo === 0 ? "Aujourd'hui" : `${daysAgo}j`}</span>
                             </div>
                             <div className="bg-slate-50 p-2 rounded-lg flex flex-col">
                                 <span className="text-slate-400">Taux réussite</span>
                                 <span className="font-semibold text-slate-700">
                                     {Math.round((s.success_count / (s.success_count + s.failure_count || 1)) * 100)}%
                                 </span>
                             </div>
                         </div>

                         {/* Footer Actions */}
                         <div className="flex gap-2">
                             <button className="flex-1 bg-[#052648] text-white py-2 rounded-xl text-sm font-semibold hover:bg-blue-900 transition-colors flex items-center justify-center gap-2">
                                <RefreshCcw size={14}/> Pratiquer
                             </button>
                             <button className="px-3 py-2 bg-white border border-slate-200 hover:bg-slate-50 rounded-xl text-slate-600 transition-colors">
                                 <MoreHorizontal size={18}/>
                             </button>
                         </div>
                     </div>
                 );
             })}
        </div>
      )}
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\dashboard\Goal.tsx
================================================================================

// app/dashboard/goals/Goals.tsx
'use client';

import React, { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { Target, CheckCircle, Lock, Play, Award, Sparkles, School2, Activity, BookOpen } from 'lucide-react';
import { Button } from '@/components/ui/Button';
import { useAuth } from '@/contexts/AuthContext';
import { services } from '@/types/simulation/constant';
import { getLearnerHistoryDetailed } from '@/services/SimulationService';
import toast from 'react-hot-toast';
import { PieChart, Pie, Cell, ResponsiveContainer, Tooltip } from 'recharts';

interface GoalCardData {
    id: string;
    name: string;
    phase: 'diagnostic' | 'training' | 'evaluation';
    progress: number;
    currentStep: number;
    totalSteps: number;
    locked: boolean;
    avgScore: number | null;
    level_name: string;
    globalPercentage?: number;
    statusLabel?: string;
    icon?: any;
    bgImage?: string;
}

const STATUS_CONFIG = {
    diagnostic: { label: 'Test Niveau', color: 'text-purple-600', bg: 'bg-purple-100', border: 'border-purple-200', icon: Target },
    training: { label: 'Entraînement', color: 'text-blue-600', bg: 'bg-blue-100', border: 'border-blue-200', icon: BookOpen },
    evaluation: { label: 'Certification', color: 'text-orange-600', bg: 'bg-orange-100', border: 'border-orange-200', icon: Award },
    locked: { label: 'Bloqué', color: 'text-gray-400', bg: 'bg-gray-100', border: 'border-slate-200', icon: Lock },
    completed: { label: 'Validé', color: 'text-emerald-600', bg: 'bg-emerald-100', border: 'border-emerald-200', icon: CheckCircle }
};

const CHART_COLORS = ['#10B981', '#3B82F6', '#E5E7EB'];

export default function Goals() {
    const router = useRouter();
    const { user } = useAuth();
    const [loading, setLoading] = useState(true);
    const [goals, setGoals] = useState<GoalCardData[]>([]);

    useEffect(() => {
        if (!user) return;

        const loadData = async () => {
            setLoading(true);
            try {
                let historyData;
                try {
                    historyData = await getLearnerHistoryDetailed(user.id);
                } catch (err) {
                    console.warn("⚠️ [Goal] API History inaccessible, utilisation fallback local.", err);
                    historyData = { historique_par_categorie: [] };
                }

                const mappedGoals = services.map(service => {
                    const catHistory = historyData.historique_par_categorie.find(
                        (h: any) => h.categorie.toLowerCase().includes(service.name.toLowerCase()) || 
                                    service.name.toLowerCase().includes(h.categorie.toLowerCase())
                    );

                    const sessions = catHistory?.sessions || [];
                    const totalSessions = sessions.length;
                    const averageScore = catHistory?.moyenne_categorie || 0;

                    let currentPhase: 'diagnostic' | 'training' | 'evaluation' = 'diagnostic';
                    
                    if (totalSessions >= 1) currentPhase = 'training';
                    if (totalSessions >= 5) currentPhase = 'evaluation';

                    let globalPercentage = 0;
                    
                    if (currentPhase === 'diagnostic') {
                        globalPercentage = 0;
                    } else if (currentPhase === 'training') {
                        globalPercentage = Math.min(Math.round(((totalSessions - 1) / 4) * 100), 90); 
                    } else if (currentPhase === 'evaluation') {
                        globalPercentage = 100;
                    }

                    const isLocked = false; 

                    return {
                        id: service.id,
                        name: service.name,
                        icon: service.icon,
                        bgImage: service.bgImage,
                        
                        phase: currentPhase,
                        progress: globalPercentage,
                        currentStep: totalSessions > 5 ? 5 : totalSessions,
                        totalSteps: 5,
                        
                        locked: isLocked,
                        avgScore: totalSessions > 0 ? Math.round(averageScore) : null,
                        
                        level_name: totalSessions === 0 ? 'Novice' : 
                                   totalSessions < 3 ? 'Apprenti' : 
                                   totalSessions < 5 ? 'Junior' : 'Confirmé',
                        
                        globalPercentage: globalPercentage 
                    };
                });

                setGoals(mappedGoals);

            } catch (error) {
                console.error("❌ Critical error mapping goals:", error);
                toast.error("Erreur de synchronisation des objectifs.");
            } finally {
                setLoading(false);
            }
        };

        loadData();
    }, [user]);

    const handleLaunch = (categoryName: string, phase: string, locked: boolean = false) => {
        if (locked) {
            toast.error('Ce module est verrouillé. Complétez les prérequis !', { 
                icon: '🔒',
                duration: 3000 
            });
            return;
        }
        
        const url = `/simulation?category=${encodeURIComponent(categoryName)}&mode=${phase}`;
        console.log('🚀 Lancement simulation:', { categoryName, phase, url });
        router.push(url);
    };

    const validatedCount = goals.filter(g => g.globalPercentage >= 100).length;
    const inProgressCount = goals.filter(g => g.globalPercentage > 0 && g.globalPercentage < 100).length;
    const todoCount = goals.length - validatedCount - inProgressCount;
    
    const chartData = [
        { name: 'Validés', value: validatedCount },
        { name: 'En cours', value: inProgressCount },
        { name: 'À démarrer', value: todoCount },
    ].filter(i => i.value > 0);

    if (loading) {
        return (
            <div className="flex items-center justify-center h-screen">
                <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#052648]"></div>
            </div>
        );
    }

    return (
        <div className="flex flex-col xl:flex-row gap-6 h-full pb-20">
             
            <div className="flex-1 space-y-6">
                
                <div className="relative rounded-3xl bg-[#052648] text-white shadow-xl overflow-hidden group border border-[#0a4d8f] min-h-[280px]">
                    
                    <div 
                        className="absolute inset-0 opacity-10 pointer-events-none" 
                        style={{
                            backgroundImage: 'radial-gradient(circle, #ffffff 1.5px, transparent 1.5px)',
                            backgroundSize: '24px 24px'
                        }}
                    />
                    <div className="absolute inset-0 bg-gradient-to-r from-[#052648] via-[#052648]/90 to-transparent z-0"></div>

                    <div className="relative z-10 p-8 md:p-10 flex flex-col justify-center h-full">
                        <div className="inline-flex items-center gap-2 mb-4 bg-white/10 backdrop-blur-md px-3 py-1 rounded-full text-blue-200 border border-white/20 text-xs font-bold uppercase tracking-wider w-fit">
                            <Sparkles size={14} className="text-yellow-400"/> Programme Personnalisé
                        </div>

                        <h2 className="text-3xl md:text-4xl font-extrabold mb-4 leading-tight tracking-tight max-w-2xl">
                                Progressez vers l'excellence,<br/><span className="text-blue-300">spécialité par spécialité.</span>
                        </h2>
                        
                         <div className="flex items-center gap-6 mt-2 text-blue-100 text-sm font-medium">
                            <span className="flex items-center gap-2"><Target size={16}/> 3 Phases par module</span>
                            <span className="flex items-center gap-2"><Award size={16}/> Certification Expert</span>
                        </div>
                    </div>
                    
                    <div className="absolute right-[-40px] bottom-[-40px] text-white opacity-5 rotate-12 group-hover:scale-105 group-hover:rotate-6 transition-transform duration-1000 hidden md:block">
                        <School2 size={380} strokeWidth={1.5} />
                    </div>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    {goals.map((goal) => {
                        let statusKey = goal.locked ? 'locked' : (goal.phase as keyof typeof STATUS_CONFIG);
                        if(goal.globalPercentage >= 100) statusKey = 'completed';

                        const config = STATUS_CONFIG[statusKey] || STATUS_CONFIG.locked;
                        const StatusIcon = config.icon;
                        const ServiceIcon = goal.icon || Activity; 

                        return (
                            <div
                                key={goal.id}
                                className="group bg-white rounded-2xl border border-slate-200 shadow-sm hover:border-blue-300 hover:shadow-lg hover:-translate-y-1 transition-all duration-300 flex flex-col h-full overflow-hidden"
                            >
                                <div className="h-32 relative bg-slate-100 overflow-hidden">
                                     <div className="absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110 opacity-60"
                                         style={{backgroundImage: `url(${goal.bgImage || '/images/default-medical.jpg'})`}}>
                                     </div>
                                     <div className="absolute inset-0 bg-gradient-to-t from-white via-transparent to-transparent"></div>
                                     
                                     <div className="absolute top-4 right-4 bg-white/90 backdrop-blur shadow-sm px-2.5 py-1 rounded-lg text-xs font-bold text-[#052648] border border-slate-100">
                                         Niveau {goal.level_name}
                                     </div>
                                </div>

                                <div className="px-6 flex-1 relative -mt-8 flex flex-col">
                                    <div className={`w-14 h-14 rounded-xl flex items-center justify-center shrink-0 shadow-lg mb-3 z-10 transition-transform group-hover:scale-110 ${goal.locked ? 'bg-slate-300 text-white' : 'bg-gradient-to-br from-[#052648] to-blue-700 text-white'}`}>
                                        <ServiceIcon size={26} />
                                    </div>
                                    
                                    <h3 className="text-xl font-bold text-[#052648] mb-1">{goal.name}</h3>

                                    <div className={`inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider mb-4 border w-fit ${config.bg} ${config.color} ${config.border}`}>
                                         <StatusIcon size={12}/> {config.label}
                                    </div>
                                    
                                    <div className="space-y-1.5 mt-auto">
                                        <div className="flex justify-between text-xs font-semibold text-slate-500">
                                            <span>Étape {goal.currentStep} / {goal.totalSteps}</span>
                                            <span>{Math.round(goal.progress)}%</span>
                                        </div>
                                        <div className="h-2 w-full bg-slate-100 rounded-full overflow-hidden">
                                            <div 
                                                className={`h-full transition-all duration-1000 ease-out ${goal.locked ? 'bg-slate-300' : 'bg-gradient-to-r from-blue-500 to-[#052648]'}`}
                                                style={{ width: `${goal.progress}%` }}
                                            />
                                        </div>
                                    </div>

                                </div>

                                <div className="p-4 mt-5 bg-slate-50/80 border-t border-slate-100 flex items-center justify-between gap-4">
                                     {goal.avgScore !== null ? (
                                        <div className="flex flex-col">
                                            <span className="text-[10px] text-slate-400 uppercase font-bold">Moyenne</span>
                                            <span className={`text-sm font-bold ${goal.avgScore >= 12 ? 'text-emerald-600' : 'text-orange-500'}`}>
                                                {goal.avgScore}/20
                                            </span>
                                        </div>
                                     ) : (
                                         <span className="text-xs text-slate-400 italic">Pas de note</span>
                                     )}
                                     
                                     <Button
                                        onClick={() => handleLaunch(goal.name, goal.phase, goal.locked)}
                                        disabled={goal.locked}
                                        className={`flex-1 rounded-xl shadow-md transition-all text-xs font-bold py-2.5 ${
                                            goal.locked 
                                            ? 'bg-slate-200 text-slate-400 shadow-none' 
                                            : statusKey === 'completed'
                                              ? 'bg-white text-emerald-600 border border-emerald-200 hover:bg-emerald-50'
                                              : 'bg-[#052648] text-white hover:bg-blue-900 hover:shadow-lg'
                                        }`}
                                    >
                                        {goal.locked ? <><Lock size={14} className="mr-2"/> Verrouillé</> : 
                                         statusKey === 'completed' ? <><CheckCircle size={14} className="mr-2"/> Revoir</> :
                                         goal.progress === 0 ? <><Play size={14} className="mr-2"/> Démarrer</> : <><Play size={14} className="mr-2"/> Reprendre</>}
                                    </Button>
                                </div>
                            </div>
                        );
                    })}
                </div>
            </div>

            <div className="xl:w-80 w-full space-y-6">
                
                <div className="bg-white rounded-2xl p-6 border border-slate-200 shadow-sm">
                    <h3 className="text-lg font-bold text-[#052648] mb-4 flex items-center gap-2">
                        <Activity className="text-blue-500" size={20}/> Synthèse
                    </h3>
                    <div className="h-48 relative">
                         <ResponsiveContainer width="100%" height="100%">
                            <PieChart>
                                <Pie
                                    data={chartData}
                                    cx="50%" cy="50%"
                                    innerRadius={50} outerRadius={70}
                                    paddingAngle={5}
                                    dataKey="value"
                                    stroke="none"
                                >
                                    {chartData.map((entry, index) => (
                                        <Cell key={`cell-${index}`} fill={CHART_COLORS[index % CHART_COLORS.length]} />
                                    ))}
                                </Pie>
                                <Tooltip contentStyle={{borderRadius:'12px', border:'none', boxShadow:'0 4px 12px rgba(0,0,0,0.1)'}}/>
                            </PieChart>
                        </ResponsiveContainer>
                        <div className="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
                            <span className="text-3xl font-extrabold text-[#052648]">{goals.length}</span>
                            <span className="text-[10px] text-slate-400 font-bold uppercase">Modules</span>
                        </div>
                    </div>
                    <div className="mt-4 space-y-2">
                         <div className="flex justify-between items-center text-xs">
                             <span className="flex items-center gap-2"><span className="w-2 h-2 rounded-full" style={{backgroundColor: CHART_COLORS[0]}}/> Terminés</span>
                             <span className="font-bold text-slate-700">{validatedCount}</span>
                         </div>
                         <div className="flex justify-between items-center text-xs">
                             <span className="flex items-center gap-2"><span className="w-2 h-2 rounded-full" style={{backgroundColor: CHART_COLORS[1]}}/> En cours</span>
                             <span className="font-bold text-slate-700">{inProgressCount}</span>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\dashboard\AnalyticProfile.tsx
================================================================================

'use client';

import React, { useEffect, useState } from 'react';
import { useAuth } from '@/contexts/AuthContext';
import { getLearnerHistoryDetailed, DetailedHistoryResponse } from '@/services/SimulationService';
import { 
  TrendingUp, Award, Clock, FileText, Calendar, 
  BarChart2, FolderOpen, Heart, Activity, AlertCircle
} from 'lucide-react';
import FunFactLoader from '@/components/common/FunFactLoader';
import { services } from '@/types/simulation/constant'; // Pour récupérer les icônes des services

// Fonction pour formater la date proprement
const formatDate = (dateStr: string) => {
    try {
        const d = new Date(dateStr);
        return d.toLocaleDateString('fr-FR', { 
            day: 'numeric', month: 'long', hour: '2-digit', minute: '2-digit' 
        });
    } catch { return dateStr; }
};

// Fonction couleur selon la note
const getScoreColor = (note: number) => {
    if (note >= 16) return 'text-emerald-600 bg-emerald-50 border-emerald-200';
    if (note >= 10) return 'text-blue-600 bg-blue-50 border-blue-200';
    if (note >= 1) return 'text-orange-600 bg-orange-50 border-orange-200';
    return 'text-slate-400 bg-slate-100 border-slate-200';
};

export default function AnalyticProfile() {
    const { user } = useAuth();
    const [history, setHistory] = useState<DetailedHistoryResponse | null>(null);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        if (!user) return;

        const fetchData = async () => {
            console.group("📊 [Profile] Fetching Learner Journey");
            try {
                // Utilise le service SimulationService avec la route spécifiée
                const data = await getLearnerHistoryDetailed(user.id);
                setHistory(data);
            } catch (error) {
                console.error("Erreur chargement profil:", error);
            } finally {
                setLoading(false);
                console.groupEnd();
            }
        };

        fetchData();
    }, [user]);

    if (loading) return <div className="h-96 flex items-center justify-center"><FunFactLoader /></div>;

    // Calculs de stats globales
    const totalSessions = history?.historique_par_categorie.reduce((acc, cat) => acc + cat.sessions.length, 0) || 0;
    const globalAverage = history?.historique_par_categorie.length 
        ? (history.historique_par_categorie.reduce((acc, cat) => acc + cat.moyenne_categorie, 0) / history.historique_par_categorie.length).toFixed(1)
        : 0;

    return (
        <div className="flex flex-col gap-8 h-full pb-20 animate-in fade-in duration-500">
            
            {/* --- EN-TÊTE : Identité & KPIs Globaux --- */}
            <div className="bg-[#052648] text-white p-8 rounded-3xl shadow-lg relative overflow-hidden flex flex-col md:flex-row gap-8 items-center justify-between">
                {/* Deco Background */}
                <div className="absolute top-0 right-0 w-64 h-64 bg-blue-500 rounded-full filter blur-[80px] opacity-20 pointer-events-none"></div>
                
                <div className="flex items-center gap-6 relative z-10">
                    <div className="w-20 h-20 bg-white/10 rounded-full flex items-center justify-center border-4 border-white/20 shadow-xl text-3xl">
                        🎓
                    </div>
                    <div>
                        <h1 className="text-3xl font-bold mb-1">{user?.nom || "Docteur"}</h1>
                        <p className="text-blue-200 text-sm flex items-center gap-2">
                            <span className="bg-blue-600/30 px-3 py-1 rounded-full text-xs font-mono">{user?.matricule}</span>
                            <span>{user?.niveau_etudes || "Étudiant en Médecine"}</span>
                        </p>
                    </div>
                </div>

                <div className="flex gap-4 relative z-10">
                    <div className="bg-white/10 backdrop-blur-sm p-4 rounded-xl text-center min-w-[100px] border border-white/5">
                        <div className="text-blue-300 text-xs uppercase font-bold mb-1">Total Cas</div>
                        <div className="text-3xl font-bold">{totalSessions}</div>
                    </div>
                    <div className="bg-white/10 backdrop-blur-sm p-4 rounded-xl text-center min-w-[100px] border border-white/5">
                        <div className="text-emerald-300 text-xs uppercase font-bold mb-1">Moyenne</div>
                        <div className="text-3xl font-bold">{globalAverage}<span className="text-sm opacity-50">/20</span></div>
                    </div>
                </div>
            </div>

            {/* --- CONTENU PRINCIPAL : HISTORIQUE PAR CATEGORIE --- */}
            <div className="grid grid-cols-1 gap-8">
                
                <div className="flex items-center gap-3 border-b border-slate-200 pb-4">
                    <div className="p-2 bg-slate-100 rounded-lg text-[#052648]"><TrendingUp size={24}/></div>
                    <h2 className="text-xl font-bold text-slate-800">Parcours d'Apprentissage par Spécialité</h2>
                </div>

                {!history?.historique_par_categorie || history.historique_par_categorie.length === 0 ? (
                    <div className="text-center py-20 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200 text-slate-400">
                        <FolderOpen size={48} className="mx-auto mb-3 opacity-50" />
                        <p>Aucune session enregistrée pour le moment.</p>
                        <p className="text-sm">Allez dans l'onglet "Objectifs" pour commencer.</p>
                    </div>
                ) : (
                    <div className="space-y-12">
                        {history.historique_par_categorie.map((categoryGroup, index) => {
                            // Essayer de trouver une icône correspondante, sinon defaut
                            const ServiceObj = services.find(s => categoryGroup.categorie.toLowerCase().includes(s.name.toLowerCase())) || services[0];
                            const ServiceIcon = ServiceObj.icon || Activity;

                            return (
                                <div key={index} className="flex flex-col md:flex-row gap-6 relative">
                                    {/* LIGNE VERTICALE GAUCHE (Trace) */}
                                    <div className="absolute left-[26px] top-10 bottom-0 w-0.5 bg-slate-200 hidden md:block"></div>

                                    {/* --- 1. EN-TETE CATEGORIE (GAUCHE) --- */}
                                    <div className="md:w-1/4 flex flex-col md:items-end md:text-right shrink-0 relative z-10 bg-transparent">
                                        <div className="flex items-center md:flex-row-reverse gap-4 mb-2">
                                            <div className="w-14 h-14 bg-white rounded-xl shadow-md border border-slate-100 flex items-center justify-center text-[#052648] shrink-0">
                                                <ServiceIcon size={28} />
                                            </div>
                                            <div>
                                                <h3 className="text-xl font-bold text-[#052648]">{categoryGroup.categorie}</h3>
                                                <div className="flex items-center gap-2 md:justify-end text-sm text-slate-500">
                                                    <span>{categoryGroup.sessions.length} sessions</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* Score de la catégorie */}
                                        <div className="bg-slate-50 inline-block px-3 py-1 rounded-lg border border-slate-200 text-xs font-semibold text-slate-600 mt-1">
                                            Moyenne : <span className="text-blue-600 text-sm font-bold">{Math.round(categoryGroup.moyenne_categorie)}/20</span>
                                        </div>
                                    </div>

                                    {/* --- 2. LISTE DES SESSIONS (TIMELINE DROITE) --- */}
                                    <div className="md:w-3/4 space-y-4">
                                        {categoryGroup.sessions.map((session, sIdx) => {
                                            const statusClass = getScoreColor(session.note);
                                            return (
                                                <div 
                                                    key={sIdx} 
                                                    className="bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md hover:-translate-y-0.5 transition-all group flex flex-col sm:flex-row sm:items-center justify-between gap-4"
                                                >
                                                    {/* Info Principale */}
                                                    <div className="flex gap-4">
                                                        <div className={`mt-1 h-2 w-2 rounded-full shrink-0 ${session.etat === 'completed' ? 'bg-emerald-500' : 'bg-slate-300'}`}></div>
                                                        <div>
                                                            <h4 className="font-bold text-slate-800 text-sm group-hover:text-blue-700 transition-colors">
                                                                {session.cas_titre}
                                                            </h4>
                                                            <div className="flex flex-wrap items-center gap-3 text-xs text-slate-400 mt-1">
                                                                <span className="flex items-center gap-1 font-mono">
                                                                    <AlertCircle size={10} /> ID: {session.session_id.substring(0,8)}
                                                                </span>
                                                                <span className="flex items-center gap-1">
                                                                    <Clock size={10} /> {formatDate(session.date)}
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    {/* Score & Badge */}
                                                    <div className="flex items-center gap-3 pl-6 border-l border-slate-100 sm:border-0 sm:pl-0">
                                                        {session.etat === 'completed' ? (
                                                            <div className={`px-4 py-2 rounded-xl text-center border ${statusClass}`}>
                                                                <div className="text-[10px] uppercase font-bold tracking-wider">Note</div>
                                                                <div className="text-lg font-black leading-none">{Math.round(session.note)}</div>
                                                            </div>
                                                        ) : (
                                                            <div className="bg-slate-100 text-slate-500 px-3 py-1.5 rounded-lg text-xs font-medium border border-slate-200">
                                                                Abandonné
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                            );
                                        })}
                                        
                                        {/* Fin de catégorie marqueur */}
                                        <div className="flex items-center gap-4 pt-4 opacity-30">
                                            <div className="flex-1 h-px bg-slate-300"></div>
                                            <div className="w-2 h-2 bg-slate-300 rounded-full"></div>
                                        </div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                )}
            </div>
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\auth\Authentification.tsx
================================================================================

'use client';

import React, { useState } from 'react';
import { Mail, Lock, UserPlus, Eye, EyeOff, HeartPulse, Star, Package, Users, UserRound, KeyRound } from 'lucide-react';
import Link from 'next/link';
import type { AuthResponse, User } from '@supabase/supabase-js'; // <-- Importer le type User
import { useRouter } from 'next/navigation';
import toast from 'react-hot-toast';
import { signIn, signUp } from '@/services/authService';
import { useAuth } from '@/contexts/AuthContext';

interface AuthFormProps {
  mode: 'login' | 'register';
  onSuccess?: () => void;
}

export default function AuthForm({ mode, onSuccess }: AuthFormProps) {
  const router = useRouter();
  const { login, saveTempRegistration } = useAuth(); // Utilisation du nouveau context
  const isLogin = mode === 'login';
  
  const [showMatricule, setShowMatricule] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  
  // États formulaire
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  const [matricule, setMatricule] = useState('');

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsLoading(true);
    toast.dismiss();

    try {
      if (isLogin) {
        // --- LOGIQUE CONNEXION ---
        if (!email || !matricule) throw new Error("Email et matricule requis.");
        
        await login(email, matricule); 
        // La redirection vers /dashboard est gérée dans AuthContext
      } else {
        // --- LOGIQUE INSCRIPTION (ÉTAPE 1) ---
        if (!name.trim() || !email.trim()) throw new Error("Nom et Email sont requis.");
        
        // 1. Sauvegarder dans le contexte temporaire
        saveTempRegistration({
            nom: name,
            email: email
        });

        toast.success("Parfait ! Configurons votre profil.");
        
        // 2. Passer au composant Onboarding
        if (onSuccess) onSuccess(); 
      }
    } catch (error: any) {
      toast.error(error.message || "Une erreur est survenue.");
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center p-4">
      <div className="w-full max-w-6xl grid lg:grid-cols-2 gap-48 items-center">
        <div className="hidden lg:block bg-transparent">
          {/* Logo et nom */}
          <div className="flex flex-col items-center mb-12">
            <div className="w-20 h-20 bg-gradient-to-br from-[#052648] to-[#0a4d8f] rounded-2xl flex items-center justify-center mb-4 shadow-lg">
              <Link href='/'><HeartPulse className='text-white h-10 w-10' /></Link> 
            </div>
            <span className="text-4xl font-bold text-[#052648] mb-2">The Good Doctor</span>
            <p className="text-gray-600 text-center text-lg">
              Gérez votre formation médicale avec notre plateforme intuitive.
            </p>
          </div>

          {/* Tagline */}
          <div className="text-center mb-12">
            <h2 className="text-2xl font-semibold mb-2" style={{ color: '#082038ff' }}>
              Simple • Sécurisé • Efficace
            </h2>
          </div>

          {/* Statistiques */}
          <div className="grid grid-cols-3 gap-6">
            <div className="bg-white rounded-2xl p-6 text-center shadow-md hover:shadow-lg transition-shadow">
              <div className="w-12 h-12 bg-teal-100 rounded-xl flex items-center justify-center mx-auto mb-3">
                <Users className="text-teal-600" size={24} />
              </div>
              <div className="text-3xl font-bold text-[#052648] mb-1">500+</div>
              <div className="text-sm text-gray-600">Étudiants actifs</div>
            </div>

            <div className="bg-white rounded-2xl p-6 text-center shadow-md hover:shadow-lg transition-shadow">
              <div className="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3">
                <Package className="text-blue-600" size={24} />
              </div>
              <div className="text-3xl font-bold text-[#052648] mb-1">50+</div>
              <div className="text-sm text-gray-600">Cas cliniques</div>
            </div>

            <div className="bg-white rounded-2xl p-6 text-center shadow-md hover:shadow-lg transition-shadow">
              <div className="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-3">
                <Star className="text-purple-600" size={24} />
              </div>
              <div className="text-3xl font-bold text-[#052648] mb-1">4.8/5</div>
              <div className="text-sm text-gray-600">Satisfaction</div>
            </div>
          </div>
        </div>

        {/* Section droite - Formulaire */}
        <div className="bg-white rounded-2xl shadow-2xl p-8 md:p-10">
          
          {/* Titre */}
          <div className="mb-4">
            <h2 className="text-3xl font-bold text-[#052648] mb-2">
              {isLogin ? 'Bon retour !' : 'Créer un compte'}
            </h2>
            <p className="text-gray-600">
              {isLogin
                ? 'Connectez-vous pour continuer votre formation'
                : 'Commencez votre parcours de formation médicale'}
            </p>
          </div>

          {/* Formulaire */}
          <form onSubmit={handleSubmit} className="space-y-3">
            {/* AJOUT : Champ pour le nom complet, uniquement en mode inscription */}
            {!isLogin && (
              <div>
                <label htmlFor="name" className="block text-sm font-medium text-gray-700 mb-2">
                  Nom complet
                </label>
                <div className="relative">
                  <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <UserRound className="text-gray-400" size={20} />
                  </div>
                  <input
                    type="text"
                    id="name"
                    name="name"
                    value={name}
                    onChange={(e) => setName(e.target.value)}
                    className="w-full pl-12 pr-4 py-3 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent transition-all outline-none"
                    placeholder="Votre nom complet..."
                    required={!isLogin}
                  />
                </div>
              </div>
            )}
            {/* Email */}
            <div>
              <label htmlFor="email" className="block text-sm font-medium text-gray-700 mb-2">
                Adresse email
              </label>
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                  <Mail className="text-gray-400" size={20} />
                </div>
                <input
                  type="email"
                  id="email"
                  name="email"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  className="w-full pl-12 pr-4 py-3 text-black border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent transition-all outline-none"
                  placeholder="Par exemple nom@universite.cm"
                  required
                />
              </div>
            </div>

          {/* MATRICULE (Login Uniquement) */}
          {/* Lors de l'inscription, le matricule est généré auto, donc on ne le demande pas */}
          {isLogin && (
            <div>
              <label className="block text-xs font-bold text-gray-700 uppercase mb-2">Matricule</label>
              <div className="relative">
                <KeyRound className="absolute left-3 top-3.5 text-gray-400" size={20} />
                <input
                  type={showMatricule ? 'text' : 'password'}
                  value={matricule}
                  onChange={(e) => setMatricule(e.target.value)}
                  className="w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl text-black focus:ring-2 focus:ring-[#052648] outline-none transition-all font-mono"
                  placeholder="Votre ID (Ex: ELSA-12345)"
                  required
                />
                <button
                  type="button"
                  onClick={() => setShowMatricule(!showMatricule)}
                  className="absolute right-3 top-3.5 text-gray-400 hover:text-gray-600"
                >
                  {showMatricule ? <EyeOff size={18} /> : <Eye size={18} />}
                </button>
              </div>
            </div>
          )}


            {/* Mot de passe oublié (uniquement pour connexion) */}
            {isLogin && (
              <div className="flex items-center justify-between">
                <label className="flex items-center">
                  <input
                    type="checkbox"
                    className="w-4 h-4 text-[#052648] border-gray-300 rounded focus:ring-[#052648]"
                  />
                  <span className="ml-2 text-sm text-gray-600">Se souvenir de moi</span>
                </label>
                <a href="#" className="text-sm text-[#052648] hover:text-[#0a4d8f] font-medium">
                  Vous avez oublié votre matricule ?
                </a>
              </div>
            )}

            {/* Bouton de soumission */}
            <button
              type="submit"
              disabled={isLoading}
              className="w-full py-3.5 bg-[#052648] text-white rounded-lg font-bold text-lg hover:bg-[#0a4d8f] transition-all shadow-md active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-4"
            >
              {isLoading ? 'Traitement...' : (isLogin ? 'Se connecter' : 'Configurer mon profil')}
            </button>
          </form>

          {/* Lien vers l'autre formulaire */}
          <p className="mt-8 text-center text-gray-600">
            {isLogin ? "Vous n'avez pas de compte ?" : 'Vous avez déjà un compte ?'}
            <Link
              href={isLogin ? '/inscription' : '/connexion'}
              className="ml-2 text-[#052648] hover:text-[#0a4d8f] font-semibold"
            >
              {isLogin ? 'Inscrivez-vous' : 'Connectez-vous'}
            </Link>
          </p>
        </div>
      </div>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\auth\Onboarding.tsx
================================================================================

'use client';

import React, { useEffect, useState } from 'react';
import { 
  Stethoscope, Activity, Calendar, Trophy, ArrowRight, Brain, 
  Target, Zap, CheckCircle2, Star, BookOpen, Sparkles, 
  TrendingUp, Award, Flame, GraduationCap, ClipboardList,
  HeartPulse,
  AlertCircle,
  Copy,
  Rocket
} from 'lucide-react';
import { useRouter } from 'next/navigation';
import { LearnerCreate } from '@/services/learnerService';
import { useAuth } from '@/contexts/AuthContext';
import toast from 'react-hot-toast';
import { services } from '@/types/simulation/constant';

// Images mappées aux étapes
const STEP_IMAGES = {
  1: "/images/on1.png",
  2: "/images/on2.png",
  3: "/images/on3.png",
  4: "/images/on-4.jpeg"
};

export default function Onboarding() {
  const { tempRegistrationData, finalizeRegistration } = useAuth();
  const router = useRouter();
  
  const [step, setStep] = useState(1);
  const [preferences, setPreferences] = useState({
    diagnosticLevel: 'debutant',
    frequency: 'daily',
    startMode: 'basics' as 'basics' | 'test_level'
  });
  const [isSubmitting, setIsSubmitting] = useState(false);

  // --- STATES DU FORMULAIRE ---
  // Mappe vers 'niveau_etudes' (backend)
  const [level, setLevel] = useState("Etudiant"); 
  
  // Mappe vers 'specialite_visee' (backend) - par défaut
  const [specialty, setSpecialty] = useState("Médecine Générale");
  
  // Frequency pour l'UX (optionnel pour backend, ou peut être ajouté plus tard)
  const [frequency, setFrequency] = useState('daily');
  
  // Résultat final : matricule généré APRES succès
  const [successMatricule, setSuccessMatricule] = useState<string | null>(null);

  const [language, setLanguage] = useState("Français"); // langue_preferee

    // Si on perd les données temporaires (refresh), retour à l'inscription
  useEffect(() => {
    if (!tempRegistrationData || !tempRegistrationData.email) {
      toast.error("Session expirée, veuillez recommencer.");
      router.push('/inscription');
    }
  }, [tempRegistrationData, router]);
  
// --- LOGIQUE FINALE ---
  const handleFinalSubmit = async (modeStart: 'basics' | 'test_level') => {
    if (!tempRegistrationData) return;
    setIsSubmitting(true);

    try {
        // 1. GÉNÉRER MATRICULE : INIT + TIMESTAMP (Ex: ELS-17361599)
        const namePart = (tempRegistrationData.nom || 'UNK').substring(0, 3).toUpperCase();
        const timePart = Date.now().toString().slice(-8); // Derniers 8 chiffres pour être concis
        const generatedMatricule = `${namePart}-${timePart}`;

        // 2. CONSTRUIRE L'OBJET REQUIS PAR LE BACKEND (/learners/)
        const finalPayload: LearnerCreate = {
            matricule: generatedMatricule,
            nom: tempRegistrationData.nom || "",
            email: tempRegistrationData.email || "",
            niveau_etudes: level, // Issu de l'étape 1
            specialite_visee: specialty, // Dropdown ajouté à étape 2 si voulu ou par défaut
            langue_preferee: "Français", // Hardcodé
            date_inscription: new Date().toISOString()
        };

        // 3. ENVOYER AU CONTEXT POUR API (CREATE + LOGIN)
        await finalizeRegistration(finalPayload);
        
        // 4. SI SUCCÈS -> Afficher la vue de fin avec Matricule
        setSuccessMatricule(generatedMatricule);
        setStep(6); // Une 5ème étape virtuelle "Succès"

    } catch (e: any) {
        toast.error("Échec création: " + e.message);
    } finally {
        setIsSubmitting(false);
    }
  };

  // --- VUE SUCCESS (Matricule Visible) ---
  if (step === 6 && successMatricule) {
      return (
        <div className="min-h-screen bg-white flex items-center justify-center p-4">
             <div className="w-full max-w-2xl bg-white border border-slate-200 rounded-3xl p-10 shadow-2xl text-center animate-in zoom-in-95">
                 <div className="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                     <Rocket size={48} className="text-green-600"/>
                 </div>
                 
                 <h2 className="text-3xl font-bold text-[#052648] mb-4">Compte créé avec succès !</h2>
                 <p className="text-slate-600 mb-8">Votre espace apprenant est prêt. Voici votre identifiant unique à conserver précieusement.</p>

                 {/* Carte Matricule */}
                 <div className="bg-slate-50 border-2 border-slate-200 rounded-2xl p-6 mb-8 max-w-sm mx-auto">
                      <p className="text-xs text-slate-500 uppercase font-bold tracking-widest mb-2">Votre Matricule</p>
                      <div className="flex justify-between items-center bg-white p-4 rounded-xl border border-blue-200 shadow-sm">
                          <span className="font-mono text-2xl font-bold text-[#052648] tracking-widest">{successMatricule}</span>
                          <button 
                             onClick={() => {navigator.clipboard.writeText(successMatricule); toast.success("Copié !");}}
                             className="p-2 hover:bg-slate-100 rounded-full transition"
                             title="Copier"
                          >
                             <Copy size={20} className="text-blue-500"/>
                          </button>
                      </div>
                      <div className="mt-3 flex gap-2 items-start justify-center text-xs text-amber-600 bg-amber-50 p-2 rounded">
                          <AlertCircle size={14} className="shrink-0 mt-0.5"/>
                          <span>Notez-le, il sera demandé à chaque connexion.</span>
                      </div>
                 </div>

                 <button 
                    onClick={() => router.push('/dashboard')}
                    className="w-full max-w-xs bg-[#052648] text-white py-4 rounded-xl font-bold text-lg hover:bg-blue-900 transition-all shadow-lg hover:shadow-xl"
                 >
                     Accéder à mon dashboard
                 </button>
             </div>
        </div>
      );
  }

  // ÉTAPE 1: Jauge de Connaissance
  const Step1 = () => (
    <div className="grid grid-cols-1 lg:grid-cols-5 gap-8 h-full">
      {/* Image à gauche - 2 colonnes */}
      <div className="hidden lg:block lg:col-span-2 relative h-full min-h-[500px] rounded-2xl overflow-hidden">
        <img 
          src={STEP_IMAGES[1]} 
          alt="Patient avec douleur thoracique"
          className="w-full h-full object-cover"
          onError={(e) => {
            e.currentTarget.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="500"%3E%3Crect fill="%23052648" width="400" height="500"/%3E%3Ctext fill="white" x="50%25" y="50%25" text-anchor="middle" dy=".3em" font-size="24"%3EDouleur thoracique%3C/text%3E%3C/svg%3E';
          }}
        />
      </div>

      {/* Contenu à droite - 3 colonnes */}
      <div className="lg:col-span-3 space-y-2 flex flex-col justify-center animate-in slide-in-from-right duration-700">
        <div className="space-y-3">
          <h2 className="text-3xl font-bold text-[#052648]">Petite mise en situation...</h2>
          <p className="text-slate-600 text-lg leading-relaxed">
            Vous êtes en balade avec votre ami. Il s'arrête brutalement, la main crispée sur la poitrine, en sueur froide. Pas de matériel, juste vos mains et votre tête. Quelle est votre réaction immédiate ?
          </p>
        </div>

        <div className="space-y-3 pt-4">
          {[
            { id: 'debutant', icon: GraduationCap, label: "Je panique et j'appelle un taxi", sub: "La pression est trop forte, j'ai peur de mal faire.", color: "hover:border-blue-500 hover:bg-blue-50", iconColor: "text-blue-600" },
            { id: 'interne', icon: TrendingUp, label: "Je gère la foule et les premiers gestes", sub: "J'écarte les curieux, je le mets au repos, je prends le pouls", color: "hover:border-orange-500 hover:bg-orange-50", iconColor: "text-orange-600" },
            { id: 'resident', icon: Award, label: "J'interroge et je stratifie le risque", sub: "Je cherche l'irradiation (bras/mâchoire) et les antécédents familiaux avant d'évacuer.", color: "hover:border-emerald-500 hover:bg-emerald-50", iconColor: "text-emerald-600" },
          ].map((opt) => (
            <button 
              key={opt.id}
              onClick={() => {
                setPreferences({...preferences, diagnosticLevel: opt.id});
                setTimeout(() => setStep(2), 200);
              }}
              className={`w-full flex items-center gap-4 p-5 bg-white border-2 border-slate-200 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-[1.02] text-left group ${opt.color}`}
            >
              <div className="p-3 bg-slate-50 rounded-lg group-hover:bg-white transition-colors">
                <opt.icon size={28} className={`text-slate-600 group-hover:${opt.iconColor}`} />
              </div>
              <div className="flex-1">
                <span className="font-semibold text-slate-800 block text-lg">{opt.label}</span>
                <span className="text-sm text-slate-500">{opt.sub}</span>
              </div>
              <ArrowRight className="text-slate-300 group-hover:text-[#052648] transition-colors" size={20} />
            </button>
          ))}
        </div>
      </div>
    </div>
  );

  // ÉTAPE 2: Showcase des capacités
  const Step2 = () => (
    <div className="grid grid-cols-1 lg:grid-cols-5 gap-8 h-full">
      <div className="hidden lg:block lg:col-span-2 relative h-full min-h-[500px] rounded-2xl overflow-hidden">
        <img 
          src={STEP_IMAGES[2]} 
          alt="IA Tuteur médical"
          className="w-full h-full object-cover"
          onError={(e) => {
            e.currentTarget.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="500"%3E%3Crect fill="%2306304d" width="400" height="500"/%3E%3Ctext fill="white" x="50%25" y="50%25" text-anchor="middle" dy=".3em" font-size="24"%3EIA Tuteur%3C/text%3E%3C/svg%3E';
          }}
        />
      </div>

      <div className="lg:col-span-3 space-y-6 flex flex-col justify-center animate-in slide-in-from-right duration-700">
        <div className="text-center lg:text-left">
          <h2 className="text-3xl font-bold text-[#052648] mb-2">Voici vos super-pouvoirs</h2>
          <p className="text-slate-600 text-lg">Avec The good doctor, vous ne faites pas que lire, vous pratiquez en vous servants des 3 piliers qui vont forger votre excellence médicale.</p>
        </div>

        <div className="grid gap-4">

          <div className="bg-white border-0 border-emerald-200 p-6 rounded-2xl transform transition-transform hover:scale-[1.02]">
            <div className="flex items-start gap-4">
              <div className="p-3 bg-slate-100 rounded-xl">
                <Sparkles size={28} className="text-slate-700"/>
              </div>
              <div>
                <h3 className="font-bold text-xl text-slate-800 mb-1">Un Tuteur Personnalisé</h3>
                <p className="text-slate-600 text-sm leading-relaxed">Profitez d'un mentor virtuel qui <strong>analyse vos décisions</strong> en temps réel, corrige vos erreurs sans jugement et s'adapte à votre rythme d'apprentissage.</p>
              </div>
            </div>
          </div>

          <div className="bg-white border-0 border-emerald-200 p-6 rounded-2xl transform transition-transform hover:scale-[1.02]">
            <div className="flex items-start gap-4">
              <div className="p-3 bg-slate-100 rounded-xl">
                <ClipboardList size={28} className="text-slate-700"/>
              </div>
              <div>
                <h3 className="font-bold text-xl text-slate-800 mb-1">Des Cas Cliniques Authentiques</h3>
                <p className="text-slate-600 text-sm leading-relaxed">Exercez-vous sur des scénarios basés sur des <strong>données réelles (MIMIC-III)</strong>. De l'anamnèse au diagnostic, confrontez-vous à la réalité du terrain en toute sécurité.</p>
              </div>
            </div>
          </div>

          <div className="bg-slate-50 border-2 border-slate-200 p-6 rounded-2xl transform transition-transform hover:scale-[1.02]">
            <div className="flex items-start gap-4">
              <div className="p-3 bg-slate-100 rounded-xl">
                <Trophy size={28} className="text-slate-700"/>
              </div>
              <div>
                <h3 className="font-bold text-xl text-slate-800 mb-1">Une Progression Gamifiée</h3>
                <p className="text-slate-600 text-sm leading-relaxed">Transformez l'étude en aventure. Gagnez des badges, montez en grade et <strong>validez vos compétences</strong> pour visualiser concrètement votre évolution.</p>
              </div>
            </div>
          </div>




        </div>

        <button 
          onClick={() => setStep(3)}
          className="w-full py-4 bg-[#052648] text-white rounded-xl font-bold shadow-lg hover:bg-blue-900 transition-all duration-300 flex items-center justify-center gap-2 hover:shadow-xl"
        >
          Génial, continuons <ArrowRight size={20}/>
        </button>
      </div>
    </div>
  );

  // ÉTAPE 3: Fréquence d'apprentissage
  const Step3 = () => (
    <div className="grid grid-cols-1 lg:grid-cols-5 gap-8 h-full">
      <div className="hidden lg:block lg:col-span-2 relative h-full min-h-[500px] rounded-2xl overflow-hidden">
        <img 
          src={STEP_IMAGES[3]} 
          alt="Étudiant avec IA"
          className="w-full h-full object-cover"
          onError={(e) => {
            e.currentTarget.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="500"%3E%3Crect fill="%23064466" width="400" height="500"/%3E%3Ctext fill="white" x="50%25" y="50%25" text-anchor="middle" dy=".3em" font-size="24"%3EApprentissage%3C/text%3E%3C/svg%3E';
          }}
        />
      </div>

      <div className="lg:col-span-3 space-y-6 flex flex-col justify-center animate-in slide-in-from-right duration-700">
        <div className="text-center lg:text-left space-y-3">
          <h2 className="text-3xl font-bold text-[#052648]">Votre rythme de croisière</h2>
          <p className="text-slate-600 text-lg">On ne vous met pas la pression, mais la régularité fait la différence.</p>
        </div>

        <div className="space-y-3 pt-4">
          {[
            {val: 'daily', label: 'Mode Intensif', sub: 'Quotidien - Pour préparer l\'ECN ou un examen proche', icon: Flame, iconColor: 'text-red-500'},
            {val: 'weekly', label: 'Mode Régulier', sub: 'Hebdomadaire - Pour maintenir les acquis sans stress', icon: TrendingUp, iconColor: 'text-blue-500'},
            {val: 'casual', label: 'Mode Flexible', sub: 'À mon rythme - Juste par curiosité', icon: Star, iconColor: 'text-yellow-500'}
          ].map(opt => (
            <button 
              key={opt.val}
              onClick={() => {
                setPreferences({...preferences, frequency: opt.val});
                setTimeout(() => setStep(4), 200);
              }}
              className={`w-full p-5 border-2 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-[1.02] text-left group ${
                preferences.frequency === opt.val 
                  ? 'border-[#052648] bg-blue-50' 
                  : 'border-slate-200 bg-white hover:border-[#052648] hover:bg-blue-50'
              }`}
            >
              <div className="flex items-center gap-4">
                <div className={`p-3 rounded-lg transition-colors ${
                  preferences.frequency === opt.val 
                    ? 'bg-[#052648]' 
                    : 'bg-slate-100 group-hover:bg-[#052648]'
                }`}>
                  <opt.icon size={28} className={
                    preferences.frequency === opt.val 
                      ? 'text-white' 
                      : `${opt.iconColor} group-hover:text-white`
                  } />
                </div>
                <div className="flex-1">
                  <span className="block font-bold text-slate-800 group-hover:text-[#052648] text-lg">{opt.label}</span>
                  <span className="text-sm text-slate-500">{opt.sub}</span>
                </div>
                {preferences.frequency === opt.val && <CheckCircle2 className="text-[#052648]" size={24}/>}
              </div>
            </button>
          ))}
        </div>
      </div>
    </div>
  );

  // ÉTAPE 4: Décision finale
  const Step4 = () => (
    <div className="grid grid-cols-1 lg:grid-cols-5 gap-8 h-full">
      <div className="hidden lg:block lg:col-span-2 relative h-full min-h-[500px] rounded-2xl overflow-hidden">
        <img 
          src={STEP_IMAGES[4]} 
          alt="Diagnostic médical"
          className="w-full h-full object-cover"
          onError={(e) => {
            e.currentTarget.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="500"%3E%3Crect fill="%23053a5c" width="400" height="500"/%3E%3Ctext fill="white" x="50%25" y="50%25" text-anchor="middle" dy=".3em" font-size="24"%3EDiagnostic%3C/text%3E%3C/svg%3E';
          }}
        />
      </div>

      <div className="lg:col-span-3 space-y-6 flex flex-col justify-center animate-in zoom-in-95 duration-700">
        <div className="text-center lg:text-left space-y-3">
          <h2 className="text-3xl font-bold text-[#052648]">Dernière ligne droite !</h2>
          <p className="text-slate-600 text-lg">Comment souhaitez-vous configurer votre profil initial ?</p>
        </div>

        <div className="grid gap-4 pt-4">
          {/* OPTION 1 : BASES */}
          <button 
            onClick={() => setStep(5)}
            disabled={isSubmitting}
            className="relative p-6 bg-white border-2 border-slate-200 rounded-2xl shadow-md hover:shadow-xl hover:-translate-y-1 transition-all text-left group overflow-hidden disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <div className="absolute top-0 left-0 w-full h-1 bg-slate-300 group-hover:bg-[#052648] transition-colors"></div>
            <div className="flex items-start gap-4">
              <div className="p-3 bg-slate-100 rounded-xl group-hover:bg-blue-50">
                <GraduationCap size={32} className="text-slate-500 group-hover:text-[#052648]"/>
              </div>
              <div className="flex-1">
                <h3 className="font-bold text-xl text-slate-800 mb-2">Commencer par les bases</h3>
                <p className="text-sm text-slate-600 leading-relaxed">
                  Je préfère démarrer doucement avec des cas niveau débutant.
                </p>
              </div>
            </div>
            {isSubmitting && (
              <div className="absolute inset-0 bg-white/90 flex items-center justify-center">
                <div className="animate-spin rounded-full h-10 w-10 border-4 border-slate-200 border-t-[#052648]"></div>
              </div>
            )}
          </button>

          {/* OPTION 2 : TEST NIVEAU */}
          <button 
            onClick={() => setPreferences({...preferences, startMode: 'test_level'})}
            className="relative p-6 bg-gradient-to-br from-[#052648] to-blue-900 text-white rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transition-all text-left group overflow-hidden"
          >
            <div className="absolute inset-0 bg-gradient-to-tr from-blue-900/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
            <div className="flex items-start gap-4 relative z-10">
              <div className="p-3 bg-white/20 rounded-xl group-hover:bg-white/30">
                <Zap size={32} className="text-yellow-400"/>
              </div>
              <div className="flex-1">
                <h3 className="font-bold text-xl mb-2">Évaluer mon niveau</h3>
                <p className="text-sm text-blue-100 leading-relaxed">
                  Passez un diagnostic rapide pour débloquer des cas avancés et évoluefr rapidement.
                </p>
              </div>
            </div>
          </button>
        </div>
      </div>
    </div>
  );

  return (
    <div className="min-h-screen bg-white flex items-center justify-center top-0 fixed w-full h-full">
      <div className="w-full max-w-7xl">

        {/* Content Card */}
        <div className="bg-white rounded-3xl p-8 md:p-12 min-h-[600px] flex flex-col justify-center relative overflow-hidden">
          {preferences.startMode === 'test_level' && step === 4 ? (
            <div className="text-center space-y-4 animate-in fade-in duration-500">
              <Brain size={64} className="mx-auto text-[#052648]"/>
              <h2 className="text-2xl font-bold text-[#052648]">Diagnostic en cours de développement</h2>
              <p className="text-slate-600">Cette fonctionnalité sera bientôt disponible.</p>
              <button 
                onClick={() => setPreferences({...preferences, startMode: 'basics'})}
                className="mt-4 px-6 py-3 bg-[#052648] text-white rounded-xl hover:bg-blue-900 transition-colors"
              >
                Retour aux options
              </button>
            </div>
          ) : (
            <>
              {step === 1 && <Step1 />}
              {step === 2 && <Step2 />}
              {step === 3 && <Step3 />}
              {step === 4 && <Step4 />}
              {/* ÉTAPE 5: Validation Finale */}
              {step === 5 && (
                <div className="grid grid-cols-1 lg:grid-cols-5 gap-8 h-full animate-in slide-in-from-right duration-500">
                      <div className="hidden lg:block lg:col-span-2 bg-[#052648] rounded-2xl p-12 text-white flex flex-col justify-between">
                          <ClipboardList size={64} className="text-blue-400 opacity-50"/>
                          <div>
                              <h3 className="text-2xl font-bold mb-2">Récapitulatif</h3>
                              <ul className="space-y-2 opacity-90">
                                  <li>• Niveau: {level}</li>
                                  <li>• Spécialité: {specialty}</li>
                                  <li>• Compte: {tempRegistrationData?.email}</li>
                              </ul>
                          </div>
                      </div>
                      <div className="lg:col-span-3 flex flex-col justify-center space-y-6">
                          <h2 className="text-3xl font-bold text-[#052648]">Prêt à démarrer ?</h2>
                          <p className="text-slate-600">
                              En validant, nous allons générer votre identifiant unique et configurer votre espace.
                          </p>
                          
                          <div className="grid gap-4">
                              {/* Bouton Bases */}
                              <button 
                                onClick={() => handleFinalSubmit('basics')}
                                disabled={isSubmitting}
                                className="p-6 border-2 border-slate-200 rounded-2xl text-left hover:border-[#052648] hover:shadow-lg transition-all group"
                              >
                                  <div className="flex items-center gap-4 mb-2">
                                      <div className="p-2 bg-blue-50 rounded text-blue-700 group-hover:bg-[#052648] group-hover:text-white transition"><GraduationCap size={24}/></div>
                                      <h3 className="font-bold text-xl text-slate-800">Commencer les cas cliniques</h3>
                                  </div>
                                  <p className="text-sm text-slate-500 pl-[56px]">Accès direct à la bibliothèque adaptée à votre niveau.</p>
                              </button>

                                {/* Bouton Test (Désactivé pour l'exemple ou fonctionnel) */}
                              <button disabled className="opacity-60 cursor-not-allowed p-6 border-2 border-slate-100 rounded-2xl text-left relative overflow-hidden">
                                  <div className="absolute top-2 right-2 bg-yellow-100 text-yellow-800 text-[10px] px-2 py-0.5 rounded font-bold uppercase">Bientôt</div>
                                  <div className="flex items-center gap-4 mb-2">
                                      <div className="p-2 bg-slate-100 rounded text-slate-500"><Brain size={24}/></div>
                                      <h3 className="font-bold text-xl text-slate-400">Passer le test d'évaluation</h3>
                                  </div>
                                  <p className="text-sm text-slate-400 pl-[56px]">Calibrer l'IA selon vos connaissances réelles.</p>
                              </button>
                          </div>

                          {isSubmitting && (
                              <div className="flex items-center gap-2 text-[#052648] font-bold justify-center mt-4">
                                  <div className="animate-spin h-5 w-5 border-2 border-[#052648] border-t-transparent rounded-full"></div>
                                  Création de l'espace en cours...
                              </div>
                          )}
                      </div>
                </div>
              )}
            </>
          )}
        </div>
        
        {/* Navigation Back */}
        {step > 1 && step <= 5 && preferences.startMode !== 'test_level' && (
          <button 
            onClick={() => setStep(step - 1)} 
            className="mt-6 text-slate-500 hover:text-[#052648] text-sm font-semibold flex items-center justify-center gap-2 mx-auto transition-colors group"
          >
            <ArrowRight className="rotate-180 group-hover:-translate-x-1 transition-transform" size={18} /> 
            Retour
          </button>
        )}
      </div>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\auth\Diagnostic.tsx
================================================================================

'use client';

import React, { useState } from 'react';
import { CheckCircle, XCircle, AlertTriangle, Play } from 'lucide-react';
import { Button } from '@/components/ui/Button';

interface DiagnosticProps {
    onComplete: () => void;
    isLoading: boolean; // <--- NOUVELLE PROP OBLIGATOIRE
}

const QUESTIONS = [
    {
        question: "Un patient de 25 ans présente une dyspnée expiratoire sifflante. Quel est le diagnostic le plus probable ?",
        options: ["Pneumonie", "Crise d'asthme", "Embolie Pulmonaire", "Pneumothorax"],
        correct: 1
    },
    {
        question: "Quel examen demandez-vous en priorité face à une douleur thoracique constrictive irradiant dans le bras gauche ?",
        options: ["Radio Thorax", "D-Dimères", "ECG", "Scanner"],
        correct: 2
    },
    {
        question: "Laquelle de ces valeurs de tension artérielle indique une urgence hypertensive ?",
        options: ["140/90", "160/100", "130/80", "220/120"],
        correct: 3
    }
];

export default function DiagnosticTest({ onComplete }: DiagnosticProps) {
    const [currentQ, setCurrentQ] = useState(0);
    const [score, setScore] = useState(0);
    const [showResult, setShowResult] = useState(false);
    const [selected, setSelected] = useState<number | null>(null);
    const [isChecking, setIsChecking] = useState(false); // Pour montrer feedback vert/rouge temporaire

    const handleAnswer = (idx: number) => {
        if(isChecking) return;
        setSelected(idx);
        setIsChecking(true);

        const isCorrect = idx === QUESTIONS[currentQ].correct;
        if (isCorrect) setScore(s => s + 1);

        // Petit délai pour montrer la bonne réponse
        setTimeout(() => {
            if (currentQ < QUESTIONS.length - 1) {
                setCurrentQ(q => q + 1);
                setSelected(null);
                setIsChecking(false);
            } else {
                setShowResult(true);
            }
        }, 1000);
    };

    if (showResult) {
        return (
            <div className="text-center animate-in zoom-in-95">
                <div className="w-24 h-24 mx-auto bg-[#052648] text-white rounded-full flex items-center justify-center mb-6 shadow-xl">
                    <span className="text-4xl font-bold">{score}/{QUESTIONS.length}</span>
                </div>
                <h3 className="text-2xl font-bold text-[#052648] mb-2">Évaluation Terminée !</h3>
                <p className="text-slate-600 mb-8">
                    {score === 3 ? "Excellent ! On vous mettra directement sur des cas Confirmés." : 
                     score === 2 ? "Pas mal ! Niveau Intermédiaire débloqué." : 
                     "Reprenons les bases ensemble. Niveau Débutant activé."}
                </p>
                <Button onClick={onComplete} className="w-full py-6 text-lg bg-[#052648] hover:bg-blue-900 shadow-lg">
                    Créer mon compte
                </Button>
            </div>
        );
    }

    const q = QUESTIONS[currentQ];

    return (
        <div className="animate-in fade-in slide-in-from-right-8 duration-300 w-full">
            <div className="flex justify-between items-center mb-6 text-xs font-bold text-slate-400 uppercase tracking-widest">
                <span>Diagnostic Rapide</span>
                <span>Question {currentQ + 1} / {QUESTIONS.length}</span>
            </div>

            <h3 className="text-xl font-bold text-slate-800 mb-8 leading-relaxed">
                {q.question}
            </h3>

            <div className="space-y-3">
                {q.options.map((opt, idx) => {
                    // Logique de couleur pour le feedback
                    let btnClass = "border-slate-200 hover:border-[#052648] hover:bg-slate-50";
                    if (isChecking) {
                        if (idx === q.correct) btnClass = "bg-green-500 text-white border-green-500";
                        else if (idx === selected) btnClass = "bg-red-500 text-white border-red-500";
                        else btnClass = "opacity-50 border-slate-100";
                    }

                    return (
                        <button
                            key={idx}
                            onClick={() => handleAnswer(idx)}
                            disabled={isChecking}
                            className={`w-full p-4 border-2 rounded-xl text-left font-medium transition-all duration-200 flex items-center justify-between ${btnClass}`}
                        >
                            {opt}
                            {isChecking && idx === q.correct && <CheckCircle size={20}/>}
                            {isChecking && idx === selected && idx !== q.correct && <XCircle size={20}/>}
                        </button>
                    );
                })}
            </div>
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\user\Onboarding.tsx
================================================================================

'use client';
import React, { useState } from 'react';
import { ArrowRight, ArrowLeft, CheckCircle, GraduationCap, Target, Heart, Award, Zap } from 'lucide-react';
import { UserProfile, UserLevel, PracticeFrequency, DifficultyLevel, SPECIALTIES, LEARNING_GOALS, CASE_TYPES } from '@/types/user/profile';
import { useRouter } from 'next/navigation';

export default function Onboarding() {
  const router = useRouter();
  const [currentStep, setCurrentStep] = useState(1);
  const totalSteps = 4;

  const [profile, setProfile] = useState<Partial<UserProfile>>({
    name: '',
    email: '',
    level: 'student',
    areasOfInterest: [],
    learningGoals: [],
    practiceFrequency: 'weekly',
    difficultyPreference: 'beginner',
    preferredCaseTypes: []
  });

  const handleNext = () => {
    if (currentStep < totalSteps) {
      setCurrentStep(currentStep + 1);
    } else {
      // Sauvegarder le profil et rediriger
      console.log('Profil complété:', profile);
      router.push('/profile');
    }
  };

  const handleBack = () => {
    if (currentStep > 1) {
      setCurrentStep(currentStep - 1);
    }
  };

  const updateProfile = (field: keyof UserProfile, value: any) => {
    setProfile({ ...profile, [field]: value });
  };

  const toggleArrayItem = (field: keyof UserProfile, item: string) => {
    const currentArray = (profile[field] as string[]) || [];
    const newArray = currentArray.includes(item)
      ? currentArray.filter(i => i !== item)
      : [...currentArray, item];
    updateProfile(field, newArray);
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center p-4">
      <div className="w-full max-w-4xl">
        {/* En-tête */}
        <div className="text-center mb-8">
          <div className="flex items-center justify-center space-x-2 mb-4">
            <div className="w-12 h-12 bg-gradient-to-br from-[#052648] to-[#0a4d8f] rounded-lg flex items-center justify-center">
              <span className="text-white font-bold text-2xl">FT</span>
            </div>
            <span className="text-3xl font-bold text-[#052648]">FullTang</span>
          </div>
          <h1 className="text-3xl font-bold text-[#052648] mb-2">Bienvenue !</h1>
          <p className="text-gray-600">Configurons votre profil pour personnaliser votre expérience</p>
        </div>

        {/* Indicateur de progression */}
        <div className="mb-8">
          <div className="flex items-center justify-between mb-2">
            {[1, 2, 3, 4].map((step) => (
              <div key={step} className="flex items-center flex-1">
                <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold transition-all ${
                  step < currentStep 
                    ? 'bg-green-500 text-white' 
                    : step === currentStep 
                    ? 'bg-[#052648] text-white' 
                    : 'bg-gray-200 text-gray-500'
                }`}>
                  {step < currentStep ? <CheckCircle size={20} /> : step}
                </div>
                {step < 4 && (
                  <div className={`flex-1 h-1 mx-2 transition-all ${
                    step < currentStep ? 'bg-green-500' : 'bg-gray-200'
                  }`} />
                )}
              </div>
            ))}
          </div>
          <div className="flex justify-between text-xs text-gray-500 px-2">
            <span>Profil</span>
            <span>Académique</span>
            <span>Objectifs</span>
            <span>Préférences</span>
          </div>
        </div>

        {/* Contenu des étapes */}
        <div className="bg-white rounded-2xl shadow-2xl p-8 md:p-10 min-h-[500px]">
          {/* Étape 1: Informations de base */}
          {currentStep === 1 && (
            <div className="space-y-6">
              <div className="flex items-center gap-3 mb-6">
                <div className="w-12 h-12 bg-[#052648]/10 rounded-full flex items-center justify-center">
                  <GraduationCap className="text-[#052648]" size={24} />
                </div>
                <div>
                  <h2 className="text-2xl font-bold text-[#052648]">Informations de base</h2>
                  <p className="text-gray-600">Parlez-nous un peu de vous</p>
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Nom complet
                </label>
                <input
                  type="text"
                  value={profile.name}
                  onChange={(e) => updateProfile('name', e.target.value)}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                  placeholder="Dr. elsa"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Email
                </label>
                <input
                  type="email"
                  value={profile.email}
                  onChange={(e) => updateProfile('email', e.target.value)}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                  placeholder="votre@email.com"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Niveau d'études / Statut professionnel
                </label>
                <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                  {[
                    { value: 'student', label: 'Étudiant' },
                    { value: 'intern', label: 'Interne' },
                    { value: 'resident', label: 'Résident' },
                    { value: 'doctor', label: 'Médecin' },
                    { value: 'specialist', label: 'Spécialiste' }
                  ].map((level) => (
                    <button
                      key={level.value}
                      onClick={() => updateProfile('level', level.value as UserLevel)}
                      className={`px-4 py-3 rounded-lg border-2 font-medium transition-all ${
                        profile.level === level.value
                          ? 'border-[#052648] bg-[#052648] text-white'
                          : 'border-gray-300 text-gray-700 hover:border-[#052648]'
                      }`}
                    >
                      {level.label}
                    </button>
                  ))}
                </div>
              </div>

              {(profile.level === 'student' || profile.level === 'intern') && (
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Année d'études
                  </label>
                  <input
                    type="number"
                    min="1"
                    max="10"
                    value={profile.yearOfStudy || ''}
                    onChange={(e) => updateProfile('yearOfStudy', parseInt(e.target.value))}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                    placeholder="Ex: 3"
                  />
                </div>
              )}
            </div>
          )}

          {/* Étape 2: Informations académiques */}
          {currentStep === 2 && (
            <div className="space-y-6">
              <div className="flex items-center gap-3 mb-6">
                <div className="w-12 h-12 bg-[#052648]/10 rounded-full flex items-center justify-center">
                  <Heart className="text-[#052648]" size={24} />
                </div>
                <div>
                  <h2 className="text-2xl font-bold text-[#052648]">Spécialisation</h2>
                  <p className="text-gray-600">Quels domaines vous intéressent ?</p>
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Université (optionnel)
                </label>
                <input
                  type="text"
                  value={profile.university || ''}
                  onChange={(e) => updateProfile('university', e.target.value)}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                  placeholder="Ex: Université de Yaoundé"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Spécialité principale (optionnel)
                </label>
                <select
                  value={profile.specialty || ''}
                  onChange={(e) => updateProfile('specialty', e.target.value)}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                >
                  <option value="">Sélectionnez une spécialité</option>
                  {SPECIALTIES.map((spec) => (
                    <option key={spec} value={spec}>{spec}</option>
                  ))}
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-3">
                  Domaines d'intérêt (sélectionnez plusieurs)
                </label>
                <div className="grid grid-cols-2 md:grid-cols-3 gap-3 max-h-64 overflow-y-auto">
                  {SPECIALTIES.map((specialty) => (
                    <button
                      key={specialty}
                      onClick={() => toggleArrayItem('areasOfInterest', specialty)}
                      className={`px-3 py-2 rounded-lg border-2 text-sm font-medium transition-all ${
                        profile.areasOfInterest?.includes(specialty)
                          ? 'border-[#052648] bg-[#052648] text-white'
                          : 'border-gray-300 text-gray-700 hover:border-[#052648]'
                      }`}
                    >
                      {specialty}
                    </button>
                  ))}
                </div>
              </div>
            </div>
          )}

          {/* Étape 3: Objectifs d'apprentissage */}
          {currentStep === 3 && (
            <div className="space-y-6">
              <div className="flex items-center gap-3 mb-6">
                <div className="w-12 h-12 bg-[#052648]/10 rounded-full flex items-center justify-center">
                  <Target className="text-[#052648]" size={24} />
                </div>
                <div>
                  <h2 className="text-2xl font-bold text-[#052648]">Vos objectifs</h2>
                  <p className="text-gray-600">Que souhaitez-vous accomplir ?</p>
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-3">
                  Objectifs d'apprentissage (sélectionnez plusieurs)
                </label>
                <div className="space-y-3">
                  {LEARNING_GOALS.map((goal) => (
                    <button
                      key={goal}
                      onClick={() => toggleArrayItem('learningGoals', goal)}
                      className={`w-full px-4 py-3 rounded-lg border-2 text-left font-medium transition-all flex items-center justify-between ${
                        profile.learningGoals?.includes(goal)
                          ? 'border-[#052648] bg-[#052648] text-white'
                          : 'border-gray-300 text-gray-700 hover:border-[#052648]'
                      }`}
                    >
                      {goal}
                      {profile.learningGoals?.includes(goal) && <CheckCircle size={20} />}
                    </button>
                  ))}
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Examen cible (optionnel)
                </label>
                <input
                  type="text"
                  value={profile.targetExam || ''}
                  onChange={(e) => updateProfile('targetExam', e.target.value)}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                  placeholder="Ex: ECN, Concours d'internat"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-3">
                  Fréquence de pratique souhaitée
                </label>
                <div className="grid grid-cols-3 gap-3">
                  {[
                    { value: 'daily', label: 'Quotidienne', icon: Zap },
                    { value: 'weekly', label: 'Hebdomadaire', icon: Award },
                    { value: 'occasional', label: 'Occasionnelle', icon: Target }
                  ].map((freq) => (
                    <button
                      key={freq.value}
                      onClick={() => updateProfile('practiceFrequency', freq.value as PracticeFrequency)}
                      className={`px-4 py-4 rounded-lg border-2 font-medium transition-all flex flex-col items-center gap-2 ${
                        profile.practiceFrequency === freq.value
                          ? 'border-[#052648] bg-[#052648] text-white'
                          : 'border-gray-300 text-gray-700 hover:border-[#052648]'
                      }`}
                    >
                      <freq.icon size={24} />
                      <span className="text-sm">{freq.label}</span>
                    </button>
                  ))}
                </div>
              </div>
            </div>
          )}

          {/* Étape 4: Préférences */}
          {currentStep === 4 && (
            <div className="space-y-6">
              <div className="flex items-center gap-3 mb-6">
                <div className="w-12 h-12 bg-[#052648]/10 rounded-full flex items-center justify-center">
                  <Award className="text-[#052648]" size={24} />
                </div>
                <div>
                  <h2 className="text-2xl font-bold text-[#052648]">Préférences</h2>
                  <p className="text-gray-600">Personnalisez votre expérience</p>
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-3">
                  Niveau de difficulté préféré
                </label>
                <div className="grid grid-cols-3 gap-3">
                  {[
                    { value: 'beginner', label: 'Débutant', color: 'green' },
                    { value: 'intermediate', label: 'Intermédiaire', color: 'yellow' },
                    { value: 'advanced', label: 'Avancé', color: 'red' }
                  ].map((level) => (
                    <button
                      key={level.value}
                      onClick={() => updateProfile('difficultyPreference', level.value as DifficultyLevel)}
                      className={`px-4 py-4 rounded-lg border-2 font-medium transition-all ${
                        profile.difficultyPreference === level.value
                          ? 'border-[#052648] bg-[#052648] text-white'
                          : 'border-gray-300 text-gray-700 hover:border-[#052648]'
                      }`}
                    >
                      {level.label}
                    </button>
                  ))}
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-3">
                  Types de cas préférés (sélectionnez plusieurs)
                </label>
                <div className="space-y-3">
                  {CASE_TYPES.map((caseType) => (
                    <button
                      key={caseType}
                      onClick={() => toggleArrayItem('preferredCaseTypes', caseType)}
                      className={`w-full px-4 py-3 rounded-lg border-2 text-left font-medium transition-all flex items-center justify-between ${
                        profile.preferredCaseTypes?.includes(caseType)
                          ? 'border-[#052648] bg-[#052648] text-white'
                          : 'border-gray-300 text-gray-700 hover:border-[#052648]'
                      }`}
                    >
                      {caseType}
                      {profile.preferredCaseTypes?.includes(caseType) && <CheckCircle size={20} />}
                    </button>
                  ))}
                </div>
              </div>

              <div className="bg-green-50 border border-green-200 rounded-lg p-4 mt-6">
                <div className="flex items-start gap-3">
                  <CheckCircle className="text-green-600 flex-shrink-0 mt-1" size={20} />
                  <div>
                    <h3 className="font-semibold text-green-900 mb-1">Profil presque terminé !</h3>
                    <p className="text-sm text-green-700">
                      Cliquez sur "Terminer" pour commencer votre parcours d'apprentissage personnalisé.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Boutons de navigation */}
          <div className="flex justify-between mt-8 pt-6 border-t">
            <button
              onClick={handleBack}
              disabled={currentStep === 1}
              className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${
                currentStep === 1
                  ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                  : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
              }`}
            >
              <ArrowLeft size={20} />
              Précédent
            </button>

            <button
              onClick={handleNext}
              className="flex items-center gap-2 px-6 py-3 bg-[#052648] text-white rounded-lg font-semibold hover:bg-[#0a4d8f] transition-all shadow-lg hover:shadow-xl"
            >
              {currentStep === totalSteps ? 'Terminer' : 'Suivant'}
              <ArrowRight size={20} />
            </button>
          </div>
        </div>

        {/* Lien pour passer */}
        <div className="text-center mt-6">
          <button
            onClick={() => router.push('/simulation')}
            className="text-gray-500 hover:text-[#052648] text-sm font-medium transition-colors"
          >
            Passer cette étape pour le moment
          </button>
        </div>
      </div>
    </div>
  );
}



================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\user\Profile.tsx
================================================================================

'use client';
import React, { useState } from 'react';
import { User, GraduationCap, Target, Settings, Award, TrendingUp, Calendar, Edit2, Save, X, Mail, MapPin, BookOpen, Heart, Zap, BarChart3, Trophy, CheckCircle, ArrowLeft } from 'lucide-react';
import { UserProfile, UserLevel, PracticeFrequency, DifficultyLevel, SPECIALTIES, LEARNING_GOALS, CASE_TYPES } from '@/types/user/profile';
import Link from 'next/link';

export default function Profile() {
  const [activeTab, setActiveTab] = useState<'overview' | 'academic' | 'preferences' | 'stats'>('overview');
  const [isEditing, setIsEditing] = useState(false);

  // Données de profil simulées
  const [profile, setProfile] = useState<UserProfile>({
    name: 'Dr. elsamiss',
    username: 'elsamiss', // <--- CORRECTION : Ajout du champ username obligatoire
    email: 'elsamiss@email.com',
    avatar: '',
    level: 'student',
    yearOfStudy: 3,
    university: 'Université de Yaoundé',
    specialty: 'Cardiologie',
    areasOfInterest: ['Cardiologie', 'Médecine Interne', 'Neurologie'],
    learningGoals: ['Préparation aux examens', 'Perfectionnement clinique'],
    targetExam: 'ECN 2025',
    practiceFrequency: 'daily',
    difficultyPreference: 'intermediate',
    preferredCaseTypes: ['Cas cliniques standards', 'Cas d\'urgence'],
    totalCasesCompleted: 47,
    averageScore: 85,
    currentStreak: 12,
    joinedDate: new Date('2024-01-15')
  });

  const updateProfile = (field: keyof UserProfile, value: any) => {
    setProfile({ ...profile, [field]: value });
  };

  const toggleArrayItem = (field: keyof UserProfile, item: string) => {
    const currentArray = (profile[field] as string[]) || [];
    const newArray = currentArray.includes(item)
      ? currentArray.filter(i => i !== item)
      : [...currentArray, item];
    updateProfile(field, newArray);
  };

  const handleSave = () => {
    console.log('Profil sauvegardé:', profile);
    setIsEditing(false);
  };

  const getLevelLabel = (level: UserLevel) => {
    const labels = {
      student: 'Étudiant',
      intern: 'Interne',
      resident: 'Résident',
      doctor: 'Médecin',
      specialist: 'Spécialiste'
    };
    return labels[level];
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50">
      {/* Header */}
      <div className="bg-white shadow-sm border-b">
        <div className="max-w-7xl mx-auto px-4 py-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-4">
              <Link href="/" className="flex items-center gap-2 text-[#052648] hover:text-[#0a4d8f] transition-colors">
                <ArrowLeft size={20} />
                <span className="font-medium">Retour</span>
              </Link>
              <div className="w-px h-6 bg-gray-300" />
              <div className="flex items-center space-x-2">
                <div className="w-10 h-10 bg-gradient-to-br from-[#052648] to-[#0a4d8f] rounded-lg flex items-center justify-center">
                  <span className="text-white font-bold text-xl">FT</span>
                </div>
                <span className="text-2xl font-bold text-[#052648]">FullTang</span>
              </div>
            </div>
            
            {isEditing ? (
              <div className="flex gap-2">
                <button
                  onClick={() => setIsEditing(false)}
                  className="flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-all"
                >
                  <X size={18} />
                  Annuler
                </button>
                <button
                  onClick={handleSave}
                  className="flex items-center gap-2 px-4 py-2 bg-[#052648] text-white rounded-lg hover:bg-[#0a4d8f] transition-all"
                >
                  <Save size={18} />
                  Enregistrer
                </button>
              </div>
            ) : (
              <button
                onClick={() => setIsEditing(true)}
                className="flex items-center gap-2 px-4 py-2 bg-[#052648] text-white rounded-lg hover:bg-[#0a4d8f] transition-all"
              >
                <Edit2 size={18} />
                Modifier le profil
              </button>
            )}
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto px-4 py-8">
        <div className="grid lg:grid-cols-4 gap-6">
          {/* Sidebar - Carte de profil */}
          <div className="lg:col-span-1">
            <div className="bg-white rounded-2xl shadow-lg p-6 sticky top-6">
              <div className="text-center">
                <div className="w-24 h-24 bg-gradient-to-br from-[#052648] to-[#0a4d8f] rounded-full flex items-center justify-center mx-auto mb-4">
                  <User className="text-white" size={40} />
                </div>
                <h2 className="text-xl font-bold text-[#052648] mb-1">{profile.name}</h2>
                {/* Affichage du username en petit */}
                <p className="text-xs text-gray-500 mb-1">@{profile.username}</p>
                <p className="text-sm text-gray-600 mb-4">{getLevelLabel(profile.level)}</p>
                
                <div className="space-y-3 text-left">
                  <div className="flex items-center gap-2 text-sm text-gray-600">
                    <Mail size={16} className="text-[#052648]" />
                    <span className="truncate">{profile.email}</span>
                  </div>
                  {profile.university && (
                    <div className="flex items-center gap-2 text-sm text-gray-600">
                      <MapPin size={16} className="text-[#052648]" />
                      <span className="truncate">{profile.university}</span>
                    </div>
                  )}
                  {profile.specialty && (
                    <div className="flex items-center gap-2 text-sm text-gray-600">
                      <Heart size={16} className="text-[#052648]" />
                      <span className="truncate">{profile.specialty}</span>
                    </div>
                  )}
                </div>

                <div className="mt-6 pt-6 border-t">
                  <div className="grid grid-cols-3 gap-2 text-center">
                    <div>
                      <div className="text-2xl font-bold text-[#052648]">{profile.totalCasesCompleted}</div>
                      <div className="text-xs text-gray-600">Cas</div>
                    </div>
                    <div>
                      <div className="text-2xl font-bold text-[#052648]">{profile.averageScore}%</div>
                      <div className="text-xs text-gray-600">Score</div>
                    </div>
                    <div>
                      <div className="text-2xl font-bold text-[#052648]">{profile.currentStreak}</div>
                      <div className="text-xs text-gray-600">Jours</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          {/* Contenu principal */}
          <div className="lg:col-span-3">
            {/* Onglets */}
            <div className="bg-white rounded-2xl shadow-lg mb-6">
              <div className="flex border-b overflow-x-auto">
                {[
                  { id: 'overview', label: 'Vue d\'ensemble', icon: User },
                  { id: 'academic', label: 'Académique', icon: GraduationCap },
                  { id: 'preferences', label: 'Préférences', icon: Settings },
                  { id: 'stats', label: 'Statistiques', icon: BarChart3 }
                ].map((tab) => (
                  <button
                    key={tab.id}
                    onClick={() => setActiveTab(tab.id as any)}
                    className={`flex items-center gap-2 px-6 py-4 font-medium transition-all relative ${
                      activeTab === tab.id
                        ? 'text-[#052648] border-b-2 border-[#052648]'
                        : 'text-gray-600 hover:text-[#052648]'
                    }`}
                  >
                    <tab.icon size={20} />
                    <span className="whitespace-nowrap">{tab.label}</span>
                  </button>
                ))}
              </div>

              <div className="p-6">
                {/* Vue d'ensemble */}
                {activeTab === 'overview' && (
                  <div className="space-y-6">
                    <div>
                      <h3 className="text-xl font-bold text-[#052648] mb-4">Informations personnelles</h3>
                      <div className="grid md:grid-cols-2 gap-4">
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Nom complet</label>
                          {isEditing ? (
                            <input
                              type="text"
                              value={profile.name}
                              onChange={(e) => updateProfile('name', e.target.value)}
                              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                            />
                          ) : (
                            <p className="text-gray-900">{profile.name}</p>
                          )}
                        </div>
                        {/* Ajout du champ Username en édition/lecture */}
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Nom d'utilisateur</label>
                          {isEditing ? (
                            <input
                              type="text"
                              value={profile.username}
                              onChange={(e) => updateProfile('username', e.target.value)}
                              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                            />
                          ) : (
                            <p className="text-gray-900">{profile.username}</p>
                          )}
                        </div>
                        <div className="md:col-span-2">
                          <label className="block text-sm font-medium text-gray-700 mb-2">Email</label>
                          {isEditing ? (
                            <input
                              type="email"
                              value={profile.email}
                              onChange={(e) => updateProfile('email', e.target.value)}
                              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                            />
                          ) : (
                            <p className="text-gray-900">{profile.email}</p>
                          )}
                        </div>
                      </div>
                    </div>

                    <div className="border-t pt-6">
                      <h3 className="text-xl font-bold text-[#052648] mb-4">Objectifs d'apprentissage</h3>
                      <div className="space-y-3">
                        {profile.learningGoals.map((goal, index) => (
                          <div key={index} className="flex items-center gap-3 bg-green-50 px-4 py-3 rounded-lg">
                            <CheckCircle className="text-green-600" size={20} />
                            <span className="text-gray-900">{goal}</span>
                          </div>
                        ))}
                      </div>
                      {profile.targetExam && (
                        <div className="mt-4 bg-blue-50 px-4 py-3 rounded-lg">
                          <div className="flex items-center gap-2">
                            <Target className="text-[#052648]" size={20} />
                            <span className="font-medium text-gray-900">Objectif: {profile.targetExam}</span>
                          </div>
                        </div>
                      )}
                    </div>

                    <div className="border-t pt-6">
                      <h3 className="text-xl font-bold text-[#052648] mb-4">Domaines d'intérêt</h3>
                      <div className="flex flex-wrap gap-2">
                        {profile.areasOfInterest.map((area, index) => (
                          <span key={index} className="px-4 py-2 bg-[#052648] text-white rounded-full text-sm font-medium">
                            {area}
                          </span>
                        ))}
                      </div>
                    </div>
                  </div>
                )}

                {/* Académique */}
                {activeTab === 'academic' && (
                  <div className="space-y-6">
                    <div className="grid md:grid-cols-2 gap-6">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Niveau</label>
                        {isEditing ? (
                          <select
                            value={profile.level}
                            onChange={(e) => updateProfile('level', e.target.value as UserLevel)}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                          >
                            <option value="student">Étudiant</option>
                            <option value="intern">Interne</option>
                            <option value="resident">Résident</option>
                            <option value="doctor">Médecin</option>
                            <option value="specialist">Spécialiste</option>
                          </select>
                        ) : (
                          <p className="text-gray-900 font-medium">{getLevelLabel(profile.level)}</p>
                        )}
                      </div>

                      {(profile.level === 'student' || profile.level === 'intern') && (
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Année d'études</label>
                          {isEditing ? (
                            <input
                              type="number"
                              value={profile.yearOfStudy || ''}
                              onChange={(e) => updateProfile('yearOfStudy', parseInt(e.target.value))}
                              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                            />
                          ) : (
                            <p className="text-gray-900 font-medium">{profile.yearOfStudy}ème année</p>
                          )}
                        </div>
                      )}

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Université</label>
                        {isEditing ? (
                          <input
                            type="text"
                            value={profile.university || ''}
                            onChange={(e) => updateProfile('university', e.target.value)}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                          />
                        ) : (
                          <p className="text-gray-900 font-medium">{profile.university || 'Non renseigné'}</p>
                        )}
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Spécialité</label>
                        {isEditing ? (
                          <select
                            value={profile.specialty || ''}
                            onChange={(e) => updateProfile('specialty', e.target.value)}
                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#052648] focus:border-transparent outline-none"
                          >
                            <option value="">Sélectionnez une spécialité</option>
                            {SPECIALTIES.map((spec) => (
                              <option key={spec} value={spec}>{spec}</option>
                            ))}
                          </select>
                        ) : (
                          <p className="text-gray-900 font-medium">{profile.specialty || 'Non renseigné'}</p>
                        )}
                      </div>
                    </div>

                    {isEditing && (
                      <div className="border-t pt-6">
                        <label className="block text-sm font-medium text-gray-700 mb-3">Domaines d'intérêt</label>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                          {SPECIALTIES.slice(0, 12).map((specialty) => (
                            <button
                              key={specialty}
                              onClick={() => toggleArrayItem('areasOfInterest', specialty)}
                              className={`px-3 py-2 rounded-lg border-2 text-sm font-medium transition-all ${
                                profile.areasOfInterest?.includes(specialty)
                                  ? 'border-[#052648] bg-[#052648] text-white'
                                  : 'border-gray-300 text-gray-700 hover:border-[#052648]'
                              }`}
                            >
                              {specialty}
                            </button>
                          ))}
                        </div>
                      </div>
                    )}
                  </div>
                )}

                {/* Préférences */}
                {activeTab === 'preferences' && (
                  <div className="space-y-6">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-3">Fréquence de pratique</label>
                      {isEditing ? (
                        <div className="grid grid-cols-3 gap-3">
                          {[
                            { value: 'daily', label: 'Quotidienne' },
                            { value: 'weekly', label: 'Hebdomadaire' },
                            { value: 'occasional', label: 'Occasionnelle' }
                          ].map((freq) => (
                            <button
                              key={freq.value}
                              onClick={() => updateProfile('practiceFrequency', freq.value as PracticeFrequency)}
                              className={`px-4 py-3 rounded-lg border-2 font-medium transition-all ${
                                profile.practiceFrequency === freq.value
                                  ? 'border-[#052648] bg-[#052648] text-white'
                                  : 'border-gray-300 text-gray-700 hover:border-[#052648]'
                              }`}
                            >
                              {freq.label}
                            </button>
                          ))}
                        </div>
                      ) : (
                        <p className="text-gray-900 font-medium capitalize">{profile.practiceFrequency === 'daily' ? 'Quotidienne' : profile.practiceFrequency === 'weekly' ? 'Hebdomadaire' : 'Occasionnelle'}</p>
                      )}
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-3">Niveau de difficulté</label>
                      {isEditing ? (
                        <div className="grid grid-cols-3 gap-3">
                          {[
                            { value: 'beginner', label: 'Débutant' },
                            { value: 'intermediate', label: 'Intermédiaire' },
                            { value: 'advanced', label: 'Avancé' }
                          ].map((level) => (
                            <button
                              key={level.value}
                              onClick={() => updateProfile('difficultyPreference', level.value as DifficultyLevel)}
                              className={`px-4 py-3 rounded-lg border-2 font-medium transition-all ${
                                profile.difficultyPreference === level.value
                                  ? 'border-[#052648] bg-[#052648] text-white'
                                  : 'border-gray-300 text-gray-700 hover:border-[#052648]'
                              }`}
                            >
                              {level.label}
                            </button>
                          ))}
                        </div>
                      ) : (
                        <p className="text-gray-900 font-medium capitalize">
                          {profile.difficultyPreference === 'beginner' ? 'Débutant' : profile.difficultyPreference === 'intermediate' ? 'Intermédiaire' : 'Avancé'}
                        </p>
                      )}
                    </div>

                    <div className="border-t pt-6">
                      <label className="block text-sm font-medium text-gray-700 mb-3">Types de cas préférés</label>
                      {isEditing ? (
                        <div className="space-y-2">
                          {CASE_TYPES.map((caseType) => (
                            <button
                              key={caseType}
                              onClick={() => toggleArrayItem('preferredCaseTypes', caseType)}
                              className={`w-full px-4 py-3 rounded-lg border-2 text-left font-medium transition-all flex items-center justify-between ${
                                profile.preferredCaseTypes?.includes(caseType)
                                  ? 'border-[#052648] bg-[#052648] text-white'
                                  : 'border-gray-300 text-gray-700 hover:border-[#052648]'
                              }`}
                            >
                              {caseType}
                              {profile.preferredCaseTypes?.includes(caseType) && <CheckCircle size={20} />}
                            </button>
                          ))}
                        </div>
                      ) : (
                        <div className="flex flex-wrap gap-2">
                          {profile.preferredCaseTypes.map((type, index) => (
                            <span key={index} className="px-4 py-2 bg-blue-100 text-blue-800 rounded-lg text-sm font-medium">
                              {type}
                            </span>
                          ))}
                        </div>
                      )}
                    </div>
                  </div>
                )}

                {/* Statistiques */}
                {activeTab === 'stats' && (
                  <div className="space-y-6">
                    <div className="grid md:grid-cols-3 gap-6">
                      <div className="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl">
                        <div className="flex items-center justify-between mb-2">
                          <Trophy className="text-blue-600" size={32} />
                          <span className="text-3xl font-bold text-blue-900">{profile.totalCasesCompleted}</span>
                        </div>
                        <p className="text-blue-700 font-medium">Cas complétés</p>
                      </div>

                      <div className="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl">
                        <div className="flex items-center justify-between mb-2">
                          <Award className="text-green-600" size={32} />
                          <span className="text-3xl font-bold text-green-900">{profile.averageScore}%</span>
                        </div>
                        <p className="text-green-700 font-medium">Score moyen</p>
                      </div>

                      <div className="bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-xl">
                        <div className="flex items-center justify-between mb-2">
                          <Zap className="text-orange-600" size={32} />
                          <span className="text-3xl font-bold text-orange-900">{profile.currentStreak}</span>
                        </div>
                        <p className="text-orange-700 font-medium">Jours consécutifs</p>
                      </div>
                    </div>

                    <div className="bg-gray-50 p-6 rounded-xl">
                      <div className="flex items-center gap-3 mb-4">
                        <Calendar className="text-[#052648]" size={24} />
                        <h3 className="text-lg font-bold text-[#052648]">Membre depuis</h3>
                      </div>
                      <p className="text-gray-700">
                        {profile.joinedDate?.toLocaleDateString('fr-FR', { 
                          year: 'numeric', 
                          month: 'long', 
                          day: 'numeric' 
                        })}
                      </p>
                    </div>

                    <div className="bg-gradient-to-br from-[#052648] to-[#0a4d8f] p-6 rounded-xl text-white">
                      <div className="flex items-center gap-3 mb-4">
                        <TrendingUp size={24} />
                        <h3 className="text-lg font-bold">Progression</h3>
                      </div>
                      <p className="text-white/90 mb-4">
                        Vous êtes sur la bonne voie ! Continuez à pratiquer régulièrement pour améliorer vos compétences.
                      </p>
                      <Link 
                        href="/simulation"
                        className="inline-flex items-center gap-2 px-6 py-3 bg-white text-[#052648] rounded-lg font-semibold hover:bg-gray-100 transition-all"
                      >
                        Commencer un cas
                        <ArrowLeft className="rotate-180" size={18} />
                      </Link>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\ui\ActionMenu.tsx
================================================================================

'use client';
import React from 'react';
import { Eye, Edit2, Trash2, X } from 'lucide-react';

interface ActionMenuProps {
  x: number;
  y: number;
  onClose: () => void;
  onDetails: () => void;
  onEdit: () => void;
  onDelete: () => void;
}

export const ActionMenu: React.FC<ActionMenuProps> = ({ x, y, onClose, onDetails, onEdit, onDelete }) => {
  // Ajustement pour ne pas sortir de l'écran (sommaire)
  const style = { top: y, left: x };

  return (
    <>
      {/* Overlay invisible pour fermer au clic dehors */}
      <div className="fixed inset-0 z-40" onClick={onClose} onContextMenu={(e) => { e.preventDefault(); onClose(); }} />
      
      {/* Menu */}
      <div 
        className="fixed z-50 bg-white min-w-[180px] rounded-xl shadow-2xl border border-slate-200 py-1.5 animate-in fade-in zoom-in-95 duration-200"
        style={style}
      >
        <button onClick={onDetails} className="w-full text-left px-4 py-2.5 text-sm font-medium text-slate-700 hover:bg-blue-50 hover:text-[#052648] flex items-center gap-2 transition-colors">
          <Eye size={16}/> Voir détails
        </button>
        <button onClick={onEdit} className="w-full text-left px-4 py-2.5 text-sm font-medium text-slate-700 hover:bg-amber-50 hover:text-amber-700 flex items-center gap-2 transition-colors">
          <Edit2 size={16}/> Modifier
        </button>
        <div className="h-px bg-slate-100 my-1 mx-2" />
        <button onClick={onDelete} className="w-full text-left px-4 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 hover:text-red-700 flex items-center gap-2 transition-colors">
          <Trash2 size={16}/> Supprimer
        </button>
      </div>
    </>
  );
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\ui\CustomSelect.tsx
================================================================================

'use client';
import React from 'react';
import { ChevronDown } from 'lucide-react';

interface Option {
  label: string;
  value: string | number;
}

interface CustomSelectProps {
  label?: string;
  value: string | number;
  onChange: (val: string | number) => void;
  options: Option[];
  icon?: React.ReactNode;
}

export const CustomSelect: React.FC<CustomSelectProps> = ({ label, value, onChange, options, icon }) => {
  return (
    <div className="relative group">
      {label && <label className="text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 block ml-1">{label}</label>}
      <div className="relative">
        <select
          value={value}
          onChange={(e) => onChange(e.target.value)}
          className="w-full bg-slate-50 hover:bg-white focus:bg-white border border-slate-200 focus:border-[#052648] text-slate-700 text-sm rounded-xl py-3 pl-10 pr-10 outline-none transition-all appearance-none cursor-pointer shadow-sm focus:ring-2 focus:ring-[#052648]/10"
        >
          <option value="" disabled>-- Sélectionner --</option>
          {options.map((opt, i) => (
            <option key={i} value={opt.value}>{opt.label}</option>
          ))}
        </select>
        
        {/* Icone gauche */}
        <div className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-[#052648] transition-colors pointer-events-none">
          {icon}
        </div>
        
        {/* Chevron droit */}
        <div className="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none">
          <ChevronDown size={16} />
        </div>
      </div>
    </div>
  );
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\ui\ConfirmDeleteModal.tsx
================================================================================

'use client';
import React from 'react';
import { AlertTriangle } from 'lucide-react';
import { Button } from '@/components/ui/Button';

interface ConfirmProps {
  isOpen: boolean;
  onClose: () => void;
  onConfirm: () => void;
  isLoading: boolean;
}

export const ConfirmDeleteModal: React.FC<ConfirmProps> = ({ isOpen, onClose, onConfirm, isLoading }) => {
  if (!isOpen) return null;
  return (
    <div className="fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in">
      <div className="bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-red-100 transform transition-all scale-100">
        <div className="flex flex-col items-center text-center gap-4">
          <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center">
            <AlertTriangle className="text-red-600 w-8 h-8" />
          </div>
          <div>
            <h3 className="text-lg font-bold text-slate-800">Supprimer le cas ?</h3>
            <p className="text-slate-500 text-sm mt-1">Cette action est irréversible. Toutes les données associées (images, historique) seront perdues.</p>
          </div>
          <div className="flex gap-3 w-full mt-2">
            <Button variant="outline" className="flex-1" onClick={onClose} disabled={isLoading}>Annuler</Button>
            <Button className="flex-1 bg-red-600 hover:bg-red-700 text-white" onClick={onConfirm} disabled={isLoading}>
              {isLoading ? '...' : 'Confirmer'}
            </Button>
          </div>
        </div>
      </div>
    </div>
  );
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\ui\ClinicalCaseModal.tsx
================================================================================

'use client';

import React, { useState, useEffect } from 'react';
import { 
  X, Save, FileText, Activity, Brain, Microscope, 
  Stethoscope, Plus, Trash2, Clock, Zap, Target,
  ChevronRight, ChevronLeft, Info
} from 'lucide-react';
import toast from 'react-hot-toast';
import { 
  createClinicalCase, 
  updateClinicalCase, 
  getDiseases, 
  getSymptoms 
} from '@/services/expertService';
import { BackendDisease, BackendSymptom, BackendClinicalCaseCreate } from '@/types/backend';
import { Button } from '@/components/ui/Button';

interface ModalProps {
    isOpen: boolean;
    onClose: () => void;
    mode: 'create' | 'edit';
    caseId?: number;
    initialData?: any;
    onSuccess: () => void;
}

export default function ClinicalCaseModal({ isOpen, onClose, mode, initialData, onSuccess, caseId }: ModalProps) {
    const [isLoading, setIsLoading] = useState(false);
    const [activeTab, setActiveTab] = useState<'info' | 'clinique' | 'paraclinique'>('info');
    
    // Référentiels pour les listes déroulantes
    const [diseases, setDiseases] = useState<BackendDisease[]>([]);
    const [symptomsRefs, setSymptomsRefs] = useState<BackendSymptom[]>([]);

    // État du formulaire complet
    const [formData, setFormData] = useState<BackendClinicalCaseCreate>({
        code_fultang: '',
        pathologie_principale_id: 0,
        pathologies_secondaires_ids: [],
        presentation_clinique: {
            histoire_maladie: '',
            symptomes_patient: [],
            antecedents: { personnels: "", chirurgicaux: "" }
        },
        donnees_paracliniques: { constantes: "", labo: "" },
        evolution_patient: '',
        images_associees_ids: [],
        sons_associes_ids: [],
        medicaments_prescrits: [],
        niveau_difficulte: 3,
        duree_estimee_resolution_min: 15,
        objectifs_apprentissage: [],
        competences_requises: {}
    });

    // Charger les référentiels
    useEffect(() => {
        if (isOpen) {
            Promise.all([getDiseases(), getSymptoms()]).then(([d, s]) => {
                setDiseases(d);
                setSymptomsRefs(s);
            });
        }
    }, [isOpen]);

    // Pré-remplissage pour le mode EDITION
    useEffect(() => {
        if (isOpen && mode === 'edit' && initialData) {
            setFormData({
                ...initialData,
                pathologie_principale_id: initialData.pathologie_principale?.id || 0,
                // On s'assure que les objets imbriqués existent
                presentation_clinique: initialData.presentation_clinique || { histoire_maladie: '', symptomes_patient: [], antecedents: {} }
            });
        } else if (isOpen && mode === 'create') {
            setFormData(prev => ({ ...prev, code_fultang: `CAS-${Date.now().toString().slice(-6)}` }));
        }
    }, [isOpen, mode, initialData]);

    const handleSave = async () => {
        if (!formData.pathologie_principale_id || !formData.presentation_clinique.histoire_maladie) {
            toast.error("Veuillez remplir les informations obligatoires.");
            return;
        }

        setIsLoading(true);
        const tId = toast.loading(mode === 'create' ? "Création..." : "Mise à jour...");
        try {
            if (mode === 'create') await createClinicalCase(formData);
            else await updateClinicalCase(caseId!, formData);
            
            toast.success("Succès !", { id: tId });
            onSuccess();
            onClose();
        } catch (e) {
            toast.error("Erreur serveur backend.", { id: tId });
        } finally {
            setIsLoading(false);
        }
    };

    // --- Helpers pour les listes dynamiques (Symptômes) ---
    const addSymptomRow = () => {
        setFormData({
            ...formData,
            presentation_clinique: {
                ...formData.presentation_clinique,
                symptomes_patient: [...formData.presentation_clinique.symptomes_patient, { symptome_id: 0, details: "" }]
            }
        });
    };

    const updateSymptomRow = (index: number, field: 'symptome_id' | 'details', value: any) => {
        const newList = [...formData.presentation_clinique.symptomes_patient];
        newList[index] = { ...newList[index], [field]: value };
        setFormData({
            ...formData,
            presentation_clinique: { ...formData.presentation_clinique, symptomes_patient: newList }
        });
    };

    const removeSymptomRow = (index: number) => {
        const newList = formData.presentation_clinique.symptomes_patient.filter((_, i) => i !== index);
        setFormData({
            ...formData,
            presentation_clinique: { ...formData.presentation_clinique, symptomes_patient: newList }
        });
    };

    if (!isOpen) return null;

    return (
        <div className="fixed inset-0 z-[60] flex items-center justify-center bg-[#052648]/60 backdrop-blur-md p-4 animate-in fade-in">
            <div className="bg-white w-full max-w-5xl h-[90vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95">
                
                {/* HEADER SECTION */}
                <div className="px-8 py-6 border-b flex justify-between items-center bg-slate-50/50">
                    <div className="flex items-center gap-4">
                        <div className="w-12 h-12 bg-[#052648] text-white rounded-2xl flex items-center justify-center">
                            {mode === 'create' ? <Plus size={24}/> : <FileText size={24}/>}
                        </div>
                        <div>
                            <h2 className="text-xl font-bold text-[#052648]">
                                {mode === 'create' ? "Nouveau Scénario" : "Édition du Cas"}
                            </h2>
                            <p className="text-xs text-slate-500 font-medium">Référentiel Expert v2 • Structure Standardisée</p>
                        </div>
                    </div>
                    <button onClick={onClose} className="p-2 hover:bg-white rounded-full transition-colors"><X size={24}/></button>
                </div>

                {/* TAB NAVIGATION */}
                <div className="flex px-8 border-b bg-white text-sm font-bold uppercase tracking-wider text-slate-400">
                    {[
                        { id: 'info', label: '1. Identification', icon: Tag },
                        { id: 'clinique', label: '2. Clinique & Symptômes', icon: Stethoscope },
                        { id: 'paraclinique', label: '3. Paraclinique & Fin', icon: Microscope }
                    ].map(tab => (
                        <button 
                            key={tab.id}
                            onClick={() => setActiveTab(tab.id as any)}
                            className={`flex items-center gap-2 px-6 py-4 border-b-2 transition-all ${activeTab === tab.id ? 'border-[#052648] text-[#052648]' : 'border-transparent hover:text-slate-600'}`}
                        >
                            <tab.icon size={16}/> {tab.label}
                        </button>
                    ))}
                </div>

                {/* FORM CONTENT (SCROLLABLE) */}
                <div className="flex-1 overflow-y-auto p-8 bg-slate-50/30 custom-scrollbar">
                    <div className="max-w-4xl mx-auto space-y-8">
                        
                        {/* TAB 1: IDENTIFICATION */}
                        {activeTab === 'info' && (
                            <div className="space-y-6 animate-in slide-in-from-left-2">
                                <div className="grid grid-cols-2 gap-6">
                                    <div className="space-y-2">
                                        <label className="text-xs font-bold text-slate-500 uppercase ml-1">Code Fultang (ID)</label>
                                        <input 
                                            className="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none font-mono"
                                            value={formData.code_fultang}
                                            onChange={e => setFormData({...formData, code_fultang: e.target.value})}
                                            placeholder="Ex: CARDIO-001"
                                        />
                                    </div>
                                    <div className="space-y-2">
                                        <label className="text-xs font-bold text-slate-500 uppercase ml-1">Difficulté (1-5)</label>
                                        <select 
                                            className="w-full p-3 bg-white border border-slate-200 rounded-xl outline-none"
                                            value={formData.niveau_difficulte}
                                            onChange={e => setFormData({...formData, niveau_difficulte: parseInt(e.target.value)})}
                                        >
                                            <option value={1}>1 - Débutant</option>
                                            <option value={2}>2 - Junior</option>
                                            <option value={3}>3 - Confirmé</option>
                                            <option value={4}>4 - Senior</option>
                                            <option value={5}>5 - Expert</option>
                                        </select>
                                    </div>
                                </div>

                                <div className="space-y-2">
                                    <label className="text-xs font-bold text-slate-500 uppercase ml-1">Pathologie Principale (Référentiel)</label>
                                    <select 
                                        className="w-full p-3 bg-white border border-slate-200 rounded-xl outline-none"
                                        value={formData.pathologie_principale_id}
                                        onChange={e => setFormData({...formData, pathologie_principale_id: parseInt(e.target.value)})}
                                    >
                                        <option value={0}>Sélectionnez une maladie...</option>
                                        {diseases.map(d => (
                                            <option key={d.id} value={d.id}>{d.nom_fr} ({d.code_icd10})</option>
                                        ))}
                                    </select>
                                </div>

                                <div className="space-y-2">
                                    <label className="text-xs font-bold text-slate-500 uppercase ml-1">Temps de résolution estimé (min)</label>
                                    <div className="relative">
                                        <Clock size={18} className="absolute left-3 top-3.5 text-slate-400"/>
                                        <input 
                                            type="number" 
                                            className="w-full pl-10 p-3 bg-white border border-slate-200 rounded-xl"
                                            value={formData.duree_estimee_resolution_min}
                                            onChange={e => setFormData({...formData, duree_estimee_resolution_min: parseInt(e.target.value)})}
                                        />
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* TAB 2: CLINIQUE & SYMPTOMES */}
                        {activeTab === 'clinique' && (
                            <div className="space-y-8 animate-in slide-in-from-left-2">
                                <div className="space-y-2">
                                    <label className="text-xs font-bold text-slate-500 uppercase ml-1">Histoire de la maladie</label>
                                    <textarea 
                                        rows={4} 
                                        className="w-full p-4 bg-white border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 text-sm leading-relaxed"
                                        placeholder="Arrivée du patient, plainte principale, contexte..."
                                        value={formData.presentation_clinique.histoire_maladie}
                                        onChange={e => setFormData({
                                            ...formData, 
                                            presentation_clinique: { ...formData.presentation_clinique, histoire_maladie: e.target.value }
                                        })}
                                    />
                                </div>

                                {/* LISTE DYNAMIQUE DES SYMPTOMES */}
                                <div className="space-y-4">
                                    <div className="flex justify-between items-center border-b pb-2">
                                        <h4 className="text-sm font-bold text-[#052648] uppercase tracking-wide flex items-center gap-2">
                                            <Activity size={18} className="text-red-500"/> Signes & Symptômes Patient
                                        </h4>
                                        <Button size="sm" onClick={addSymptomRow} variant="outline" className="h-8 rounded-lg">
                                            <Plus size={14} className="mr-1"/> Ajouter un signe
                                        </Button>
                                    </div>
                                    
                                    <div className="space-y-3">
                                        {formData.presentation_clinique.symptomes_patient.map((item, index) => (
                                            <div key={index} className="flex gap-3 items-start bg-white p-4 rounded-2xl border border-slate-100 shadow-sm animate-in zoom-in-95">
                                                <div className="flex-1 space-y-3">
                                                    <select 
                                                        className="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none"
                                                        value={item.symptome_id}
                                                        onChange={e => updateSymptomRow(index, 'symptome_id', parseInt(e.target.value))}
                                                    >
                                                        <option value={0}>-- Choisir le symptôme --</option>
                                                        {symptomsRefs.map(s => <option key={s.id} value={s.id}>{s.nom}</option>)}
                                                    </select>
                                                    <input 
                                                        className="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm"
                                                        placeholder="Détails cliniques (ex: intensité 8/10, pulsatile...)"
                                                        value={item.details}
                                                        onChange={e => updateSymptomRow(index, 'details', e.target.value)}
                                                    />
                                                </div>
                                                <button onClick={() => removeSymptomRow(index)} className="p-2 text-slate-300 hover:text-red-500 transition-colors">
                                                    <Trash2 size={20}/>
                                                </button>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* TAB 3: PARACLINIQUE & AUTRES */}
                        {activeTab === 'paraclinique' && (
                            <div className="space-y-6 animate-in slide-in-from-left-2">
                                <div className="space-y-2">
                                    <label className="text-xs font-bold text-slate-500 uppercase ml-1">Évolution attendue / Finale</label>
                                    <textarea 
                                        rows={3} 
                                        className="w-full p-4 bg-white border border-slate-200 rounded-2xl"
                                        placeholder="Comment l'état du patient évolue sous traitement ?"
                                        value={formData.evolution_patient}
                                        onChange={e => setFormData({...formData, evolution_patient: e.target.value})}
                                    />
                                </div>

                                <div className="p-5 bg-amber-50 rounded-2xl border border-amber-100">
                                    <h5 className="text-xs font-bold text-amber-800 uppercase flex items-center gap-2 mb-2">
                                        <Info size={14}/> Note Technique
                                    </h5>
                                    <p className="text-xs text-amber-700 leading-relaxed">
                                        Les champs <strong>donnees_paracliniques</strong> (Labo, constantes) et <strong>competences_requises</strong> (Q-Matrix) acceptent du format JSON brut. Ils sont actuellement stockés avec les valeurs par défaut de la structure backend pour garantir l'intégrité du système expert.
                                    </p>
                                </div>
                            </div>
                        )}
                    </div>
                </div>

                {/* FOOTER ACTIONS */}
                <div className="px-8 py-5 border-t bg-white flex justify-between items-center">
                    <div className="flex gap-2">
                        {activeTab !== 'info' && (
                            <Button variant="outline" onClick={() => setActiveTab(activeTab === 'paraclinique' ? 'clinique' : 'info')}>
                                <ChevronLeft size={18}/> Précédent
                            </Button>
                        )}
                    </div>
                    <div className="flex gap-4">
                        <Button variant="ghost" onClick={onClose}>Annuler</Button>
                        {activeTab === 'paraclinique' ? (
                            <Button onClick={handleSave} disabled={isLoading} className="bg-[#052648] text-white px-8">
                                {isLoading ? "Patientez..." : "Enregistrer le Cas"} <Save size={18} className="ml-2"/>
                            </Button>
                        ) : (
                            <Button onClick={() => setActiveTab(activeTab === 'info' ? 'clinique' : 'paraclinique')}>
                                Suivant <ChevronRight size={18}/>
                            </Button>
                        )}
                    </div>
                </div>

            </div>
        </div>
    );
}

// Composant Helper icône simple
const Tag = ({size}: {size: number}) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2z"/><path d="m7 7-.01.01"/></svg>
);


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\medication\MedicationModal.tsx
================================================================================

// components/expert/medication/MedicationModal.tsx
'use client';

import React, { useState, useEffect } from 'react';
import { X, Save, Pill, Syringe, Banknote, AlertTriangle } from 'lucide-react';
import toast from 'react-hot-toast';
import { Button } from '@/components/ui/Button';
import { createMedication, updateMedication } from '@/services/expertService';
import type { BackendMedication, BackendMedicationCreate } from '@/types/backend';

type Mode = 'create' | 'edit';

interface ModalProps {
    isOpen: boolean;
    onClose: () => void;
    mode: Mode;
    initialData?: BackendMedication | null;
    onSuccess: () => void;
}

const INITIAL_STATE: BackendMedicationCreate = {
    dci: '', nom_commercial: '', classe_therapeutique: 'Antibiotique', 
    forme_galenique: 'Comprimé', dosage: '', voie_administration: 'Orale',
    cout_moyen_fcfa: 0, disponibilite_cameroun: 'Disponible',
    statut_prescription: 'List I',
    precautions_emploi: '', mecanisme_action: ''
    // JSON fields laissés vides pour simplification
};

export default function MedicationModal({ isOpen, onClose, mode, initialData, onSuccess }: ModalProps) {
    const [isLoading, setIsLoading] = useState(false);
    const [formData, setFormData] = useState<BackendMedicationCreate>(INITIAL_STATE);

    useEffect(() => {
        if (isOpen && mode === 'edit' && initialData) {
            setFormData(initialData); // Cast implicite
        } else {
            setFormData(INITIAL_STATE);
        }
    }, [isOpen, mode, initialData]);

    const handleSubmit = async (e: React.FormEvent) => {
        e.preventDefault();
        setIsLoading(true);
        try {
            if (mode === 'create') {
                await createMedication(formData);
                toast.success("Médicament ajouté !");
            } else if (initialData?.id) {
                await updateMedication(initialData.id, formData);
                toast.success("Médicament mis à jour !");
            }
            onSuccess();
            onClose();
        } catch (error: any) {
            console.error(error);
            toast.error("Erreur opération : " + error.message);
        } finally {
            setIsLoading(false);
        }
    };

    if (!isOpen) return null;

    return (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-[#052648]/40 backdrop-blur-md p-4 animate-in fade-in">
            <div className="bg-white w-full max-w-3xl rounded-2xl shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95">
                
                {/* Header */}
                <div className="px-8 py-5 border-b border-slate-100 flex justify-between items-center bg-slate-50 rounded-t-2xl">
                    <h2 className="text-xl font-bold text-[#052648] flex items-center gap-2">
                        {mode === 'create' ? <Pill className="text-blue-500"/> : <Save className="text-orange-500"/>}
                        {mode === 'create' ? "Ajouter au Livret Thérapeutique" : `Éditer : ${initialData?.nom_commercial}`}
                    </h2>
                    <button onClick={onClose} className="p-2 bg-white rounded-full hover:bg-slate-200 transition">
                        <X size={20}/>
                    </button>
                </div>

                {/* Form Scrollable */}
                <form onSubmit={handleSubmit} className="flex-1 overflow-y-auto p-8 custom-scrollbar">
                    <div className="space-y-6">
                        
                        {/* IDENTITÉ */}
                        <section className="bg-blue-50/50 p-5 rounded-xl border border-blue-100">
                            <h3 className="text-sm font-bold text-blue-800 uppercase mb-4">Identité du produit</h3>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="text-xs font-semibold text-slate-500 block mb-1">DCI (Substance)</label>
                                    <input type="text" required value={formData.dci} onChange={e => setFormData({...formData, dci: e.target.value})} className="w-full p-2 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-blue-500 bg-white" placeholder="ex: Paracétamol"/>
                                </div>
                                <div>
                                    <label className="text-xs font-semibold text-slate-500 block mb-1">Nom Commercial</label>
                                    <input type="text" value={formData.nom_commercial} onChange={e => setFormData({...formData, nom_commercial: e.target.value})} className="w-full p-2 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-blue-500 bg-white" placeholder="ex: Doliprane"/>
                                </div>
                            </div>
                        </section>

                        {/* CARACTÉRISTIQUES */}
                        <div className="grid grid-cols-2 gap-6">
                            <div>
                                <label className="text-xs font-semibold text-slate-500 block mb-1">Classe Thérapeutique</label>
                                <select value={formData.classe_therapeutique} onChange={e => setFormData({...formData, classe_therapeutique: e.target.value})} className="w-full p-2.5 border border-slate-200 rounded-lg bg-white outline-none">
                                    <option>Antibiotique</option>
                                    <option>Antalgique</option>
                                    <option>Cardiologie</option>
                                    <option>Psychiatrie</option>
                                    <option>Anti-inflammatoire</option>
                                    <option>Autre</option>
                                </select>
                            </div>
                             <div>
                                <label className="text-xs font-semibold text-slate-500 block mb-1">Voie d'administration</label>
                                <div className="relative">
                                    <Syringe size={16} className="absolute left-3 top-3 text-slate-400"/>
                                    <select value={formData.voie_administration} onChange={e => setFormData({...formData, voie_administration: e.target.value})} className="w-full pl-9 p-2.5 border border-slate-200 rounded-lg bg-white outline-none">
                                        <option>Orale</option>
                                        <option>Intraveineuse (IV)</option>
                                        <option>Intramusculaire (IM)</option>
                                        <option>Cutanée</option>
                                        <option>Inhalée</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label className="text-xs font-semibold text-slate-500 block mb-1">Forme Galénique</label>
                                <input type="text" value={formData.forme_galenique} onChange={e => setFormData({...formData, forme_galenique: e.target.value})} className="w-full p-2.5 border border-slate-200 rounded-lg" placeholder="Comprimé, Sirop..."/>
                            </div>
                             <div>
                                <label className="text-xs font-semibold text-slate-500 block mb-1">Dosage</label>
                                <input type="text" value={formData.dosage} onChange={e => setFormData({...formData, dosage: e.target.value})} className="w-full p-2.5 border border-slate-200 rounded-lg" placeholder="500mg"/>
                            </div>
                        </div>

                        {/* ÉCONOMIE */}
                        <section className="bg-emerald-50/50 p-5 rounded-xl border border-emerald-100">
                             <h3 className="text-sm font-bold text-emerald-800 uppercase mb-4 flex items-center gap-2"><Banknote size={16}/> Données Locales</h3>
                             <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="text-xs font-semibold text-slate-500 block mb-1">Coût Moyen (FCFA)</label>
                                    <input type="number" value={formData.cout_moyen_fcfa} onChange={e => setFormData({...formData, cout_moyen_fcfa: parseInt(e.target.value)})} className="w-full p-2 border border-emerald-200 rounded-lg bg-white outline-none focus:ring-2 focus:ring-emerald-500" placeholder="0"/>
                                </div>
                                <div>
                                    <label className="text-xs font-semibold text-slate-500 block mb-1">Disponibilité Cameroun</label>
                                    <select value={formData.disponibilite_cameroun} onChange={e => setFormData({...formData, disponibilite_cameroun: e.target.value})} className="w-full p-2 border border-emerald-200 rounded-lg bg-white">
                                        <option>Disponible</option>
                                        <option>Rare / Pénurie</option>
                                        <option>Indisponible</option>
                                        <option>Sur commande</option>
                                    </select>
                                </div>
                             </div>
                        </section>

                        {/* DESCRIPTIF LIBRE (SIMPLIFIÉ POUR JSON) */}
                        <div>
                            <label className="text-xs font-semibold text-slate-500 block mb-1">Précautions & Mécanisme</label>
                            <textarea rows={4} value={formData.precautions_emploi} onChange={e => setFormData({...formData, precautions_emploi: e.target.value})} className="w-full p-3 border border-slate-200 rounded-xl text-sm" placeholder="Renseignez ici les précautions particulières ou détails cliniques importants..."></textarea>
                        </div>

                    </div>
                    {/* Fake Submit pour enter */}
                    <button type="submit" className="hidden"></button>
                </form>

                {/* Footer Actions */}
                <div className="p-6 bg-slate-50 border-t border-slate-100 flex justify-end gap-3 rounded-b-2xl">
                    <Button variant="outline" onClick={onClose} disabled={isLoading}>Annuler</Button>
                    <Button 
                        onClick={handleSubmit as any} 
                        className={`text-white shadow-lg ${mode === 'create' ? 'bg-[#052648]' : 'bg-orange-500 hover:bg-orange-600'}`}
                        disabled={isLoading}
                    >
                        {isLoading ? "Traitement..." : mode === 'create' ? "Enregistrer" : "Mettre à jour"}
                    </Button>
                </div>
            </div>
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\disease\DiseaseModal.tsx
================================================================================

// components/expert/disease/DiseaseModal.tsx
'use client';

import React, { useState, useEffect } from 'react';
import { X, Save, Bug, AlertTriangle, Hash, Globe, Activity } from 'lucide-react';
import toast from 'react-hot-toast';
import { Button } from '@/components/ui/Button';
import { createDisease, updateDisease } from '@/services/expertService';
import type { BackendDisease, BackendDiseaseCreate } from '@/types/backend';
import { services } from '@/types/simulation/constant'; // Pour récupérer les catégories/services existants

type Mode = 'create' | 'edit';

interface ModalProps {
    isOpen: boolean;
    onClose: () => void;
    mode: Mode;
    initialData?: BackendDisease | null;
    onSuccess: () => void;
}

// Initialisation propre
const INITIAL_STATE: BackendDiseaseCreate = {
    nom_fr: '',
    code_icd10: '',
    categorie: 'Médecine Générale',
    niveau_gravite: 3, // Par défaut "Modéré"
    description: '',
    physiopathologie: '',
    prevalence_cameroun: '',
    nom_local: ''
};

export default function DiseaseModal({ isOpen, onClose, mode, initialData, onSuccess }: ModalProps) {
    const [isLoading, setIsLoading] = useState(false);
    const [formData, setFormData] = useState<BackendDiseaseCreate>(INITIAL_STATE);

    // Categories issues des services + 'Autres'
    const categories = Array.from(new Set([...services.map(s => s.name), 'Infectiologie', 'Tropicale', 'Autre']));

    useEffect(() => {
        if (isOpen && mode === 'edit' && initialData) {
            setFormData(initialData); 
        } else {
            setFormData(INITIAL_STATE);
        }
    }, [isOpen, mode, initialData]);

    const handleSubmit = async (e: React.FormEvent) => {
        e.preventDefault();
        
        if(!formData.nom_fr || !formData.code_icd10) {
            return toast.error("Le Nom et le Code CIM-10 sont obligatoires");
        }

        setIsLoading(true);
        try {
            if (mode === 'create') {
                await createDisease(formData);
                toast.success("Pathologie ajoutée au référentiel");
            } else if (initialData?.id) {
                await updateDisease(initialData.id, formData);
                toast.success("Pathologie mise à jour");
            }
            onSuccess();
            onClose();
        } catch (error: any) {
            console.error(error);
            toast.error("Erreur opération : " + error.message);
        } finally {
            setIsLoading(false);
        }
    };

    if (!isOpen) return null;

    return (
        <div className="fixed inset-0 z-[60] flex items-center justify-center bg-[#052648]/50 backdrop-blur-md p-4 animate-in fade-in">
            <div className="bg-white w-full max-w-3xl rounded-2xl shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95">
                
                {/* Header */}
                <div className="px-8 py-5 border-b border-slate-100 flex justify-between items-center bg-slate-50 rounded-t-2xl">
                    <h2 className="text-xl font-bold text-[#052648] flex items-center gap-2">
                        {mode === 'create' ? <Bug className="text-blue-500"/> : <Save className="text-orange-500"/>}
                        {mode === 'create' ? "Ajouter une Pathologie" : `Éditer : ${initialData?.nom_fr}`}
                    </h2>
                    <button onClick={onClose} className="p-2 bg-white rounded-full hover:bg-slate-200 transition">
                        <X size={20}/>
                    </button>
                </div>

                {/* Form Scrollable */}
                <form onSubmit={handleSubmit} className="flex-1 overflow-y-auto p-8 custom-scrollbar">
                    <div className="space-y-6">
                        
                        {/* IDENTIFICATION */}
                        <section className="bg-blue-50/50 p-5 rounded-xl border border-blue-100">
                            <h3 className="text-xs font-bold text-blue-800 uppercase tracking-wide mb-4">Identification CIM-10</h3>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="text-xs font-semibold text-slate-500 block mb-1">Nom Pathologie (FR)</label>
                                    <input type="text" required value={formData.nom_fr} onChange={e => setFormData({...formData, nom_fr: e.target.value})} className="w-full p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-blue-500 bg-white" placeholder="ex: Paludisme Simple"/>
                                </div>
                                <div>
                                    <label className="text-xs font-semibold text-slate-500 block mb-1">Code CIM-10 (Unique)</label>
                                    <div className="relative">
                                        <Hash size={16} className="absolute left-3 top-3 text-slate-400"/>
                                        <input type="text" required value={formData.code_icd10} onChange={e => setFormData({...formData, code_icd10: e.target.value})} className="w-full pl-9 p-2.5 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-blue-500 bg-white font-mono" placeholder="ex: B50.9"/>
                                    </div>
                                </div>
                                <div className="col-span-2">
                                    <label className="text-xs font-semibold text-slate-500 block mb-1">Nom Local / Argot</label>
                                    <input type="text" value={formData.nom_local || ''} onChange={e => setFormData({...formData, nom_local: e.target.value})} className="w-full p-2.5 border border-slate-200 rounded-lg bg-white" placeholder="ex: Palu"/>
                                </div>
                            </div>
                        </section>

                        {/* CLASSIFICATION */}
                        <div className="grid grid-cols-2 gap-6">
                            <div>
                                <label className="text-xs font-semibold text-slate-500 block mb-1">Catégorie Médicale</label>
                                <select value={formData.categorie || 'Autre'} onChange={e => setFormData({...formData, categorie: e.target.value})} className="w-full p-2.5 border border-slate-200 rounded-lg bg-white outline-none">
                                    {categories.map(c => <option key={c} value={c}>{c}</option>)}
                                </select>
                            </div>
                             <div>
                                <label className="text-xs font-semibold text-slate-500 block mb-1">Niveau de Gravité (1-5)</label>
                                <div className="relative">
                                    <Activity size={16} className="absolute left-3 top-3 text-slate-400"/>
                                    <select value={formData.niveau_gravite || 1} onChange={e => setFormData({...formData, niveau_gravite: Number(e.target.value)})} className="w-full pl-9 p-2.5 border border-slate-200 rounded-lg bg-white outline-none">
                                        <option value={1}>1 - Bénin</option>
                                        <option value={2}>2 - Modéré</option>
                                        <option value={3}>3 - Sérieux</option>
                                        <option value={4}>4 - Grave (Urgence)</option>
                                        <option value={5}>5 - Vital (Critique)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        {/* CONTEXTE & PREVALENCE */}
                        <section className="bg-emerald-50/50 p-5 rounded-xl border border-emerald-100">
                             <h3 className="text-xs font-bold text-emerald-800 uppercase tracking-wide mb-4 flex items-center gap-2"><Globe size={16}/> Contexte local</h3>
                             <div>
                                <label className="text-xs font-semibold text-slate-500 block mb-1">Prévalence au Cameroun</label>
                                <input type="text" value={String(formData.prevalence_cameroun || '')} onChange={e => setFormData({...formData, prevalence_cameroun: e.target.value})} className="w-full p-2.5 border border-emerald-200 rounded-lg bg-white outline-none focus:ring-2 focus:ring-emerald-500" placeholder="ex: Endémique en zone forestière, 45% des consultations..."/>
                             </div>
                        </section>

                        {/* DESCRIPTIONS */}
                        <div className="space-y-4">
                            <div>
                                <label className="text-xs font-semibold text-slate-500 block mb-1">Description & Clinique</label>
                                <textarea rows={3} value={formData.description || ''} onChange={e => setFormData({...formData, description: e.target.value})} className="w-full p-3 border border-slate-200 rounded-xl text-sm" placeholder="Signes cliniques principaux..."></textarea>
                            </div>
                            <div>
                                <label className="text-xs font-semibold text-slate-500 block mb-1">Physiopathologie (Moteur Expert)</label>
                                <textarea rows={3} value={formData.physiopathologie || ''} onChange={e => setFormData({...formData, physiopathologie: e.target.value})} className="w-full p-3 border border-slate-200 rounded-xl text-sm font-mono bg-slate-50" placeholder="Mécanisme explicatif pour le tuteur..."></textarea>
                            </div>
                        </div>

                    </div>
                    {/* Fake Submit pour valider avec entrée */}
                    <button type="submit" className="hidden"></button>
                </form>

                {/* Footer Actions */}
                <div className="p-6 bg-slate-50 border-t border-slate-100 flex justify-end gap-3 rounded-b-2xl">
                    <Button variant="outline" onClick={onClose} disabled={isLoading}>Annuler</Button>
                    <Button 
                        onClick={handleSubmit as any} 
                        className={`text-white shadow-lg min-w-[150px] ${mode === 'create' ? 'bg-[#052648] hover:bg-blue-900' : 'bg-orange-500 hover:bg-orange-600'}`}
                        disabled={isLoading}
                    >
                        {isLoading ? "Enregistrement..." : mode === 'create' ? "Ajouter Pathologie" : "Sauvegarder"}
                    </Button>
                </div>
            </div>
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\media\ImageUploadModal.tsx
================================================================================

'use client';
import React, { useState, useEffect } from 'react';
import { X, UploadCloud, FileImage, Tag, Activity, AlertCircle, Check } from 'lucide-react';
import Image from 'next/image';
import { Button } from '@/components/ui/Button';
import { CustomSelect } from '../ui/CustomSelect'; // Réutilisez votre composant si dispo, sinon select natif
import { BackendDisease } from '@/types/backend';
import { getDiseases } from '@/services/expertService'; // Pour lier à une patho
import toast from 'react-hot-toast';
import { uploadMedicalImage } from '@/services/expertService';

interface UploadProps {
    file: File | null;
    isOpen: boolean;
    onClose: () => void;
    onSuccess: () => void;
}

const TYPES_EXAMEN = [
    { label: "Radiographie (RX)", value: "Radiographie" },
    { label: "Scanner (CT)", value: "Scanner" },
    { label: "IRM", value: "IRM" },
    { label: "Échographie", value: "Echographie" },
    { label: "Photo Dermatologique", value: "Dermato" },
    { label: "Autre", value: "Autre" }
];

export default function ImageUploadModal({ file, isOpen, onClose, onSuccess }: UploadProps) {
    const [previewUrl, setPreviewUrl] = useState<string | null>(null);
    const [diseases, setDiseases] = useState<BackendDisease[]>([]);
    const [isLoading, setIsLoading] = useState(false);
    
    // Form State
    const [type, setType] = useState("Radiographie");
    const [sousType, setSousType] = useState("");
    const [desc, setDesc] = useState("");
    const [pathoId, setPathoId] = useState<number | string>("");
    const [quality, setQuality] = useState(3);
    const [difficulty, setDifficulty] = useState(1);

    // Initialisation : Preview Image & Chargement Pathologies
    useEffect(() => {
        if (file) {
            const url = URL.createObjectURL(file);
            setPreviewUrl(url);
            
            // Reset form
            setType("Radiographie");
            setSousType("");
            setDesc("");
            setQuality(3);
            setPathoId("");
            
            return () => URL.revokeObjectURL(url);
        }
    }, [file]);

    useEffect(() => {
        if(isOpen) {
             getDiseases().then(setDiseases).catch(() => {});
        }
    }, [isOpen]);

    const handleUpload = async () => {
        if (!file) return;
        setIsLoading(true);
        const toastId = toast.loading("Envoi de l'imagerie au PACS...");
        
        try {
            await uploadMedicalImage(file, {
                type_examen: type,
                sous_type: sousType,
                description: desc,
                pathologie_id: Number(pathoId) || undefined,
                niveau_difficulte: difficulty,
                qualite_image: quality
            });
            toast.success("Image archivée avec succès", { id: toastId });
            onSuccess();
            onClose();
        } catch (e: any) {
            console.error(e);
            toast.error("Erreur Upload : " + e.message, { id: toastId });
        } finally {
            setIsLoading(false);
        }
    };

    if (!isOpen || !file) return null;

    return (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-[#052648]/60 backdrop-blur-sm p-4 animate-in fade-in duration-300">
            <div className="bg-white rounded-3xl shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col md:flex-row h-[85vh] md:h-auto md:max-h-[800px]">
                
                {/* GAUCHE: Preview visuelle */}
                <div className="md:w-5/12 bg-slate-900 relative flex items-center justify-center p-6 border-r border-slate-700">
                     <div className="relative w-full h-full min-h-[300px] flex flex-col items-center justify-center">
                        {previewUrl ? (
                            <img src={previewUrl} alt="Preview" className="max-w-full max-h-[400px] object-contain rounded-lg shadow-lg border border-slate-600"/>
                        ) : (
                            <div className="text-slate-500 flex flex-col items-center">
                                <FileImage size={48} className="mb-2"/>
                                <span>Aperçu indisponible</span>
                            </div>
                        )}
                        <div className="mt-4 text-center">
                            <p className="text-white font-mono text-sm truncate w-64 mx-auto">{file.name}</p>
                            <p className="text-slate-400 text-xs">{(file.size / 1024).toFixed(1)} Ko • {file.type}</p>
                        </div>
                     </div>
                </div>

                {/* DROITE: Formulaire de qualification */}
                <div className="md:w-7/12 flex flex-col">
                    <div className="p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                        <div>
                            <h2 className="text-xl font-bold text-[#052648] flex items-center gap-2">
                                <UploadCloud className="text-blue-600"/> Qualification Médicale
                            </h2>
                            <p className="text-xs text-slate-500 mt-0.5">Renseignez les métadonnées pour l'indexation.</p>
                        </div>
                        <button onClick={onClose} className="p-2 hover:bg-white rounded-full text-slate-400 hover:text-red-500 transition-colors">
                            <X size={20}/>
                        </button>
                    </div>

                    <div className="flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar">
                        
                        <div className="grid grid-cols-2 gap-4">
                             <div>
                                 <label className="text-xs font-bold text-slate-500 uppercase tracking-wide block mb-2">Type d'examen</label>
                                 <select value={type} onChange={e => setType(e.target.value)} className="w-full p-2.5 border border-slate-200 rounded-lg text-sm bg-white outline-none focus:border-blue-500 transition-all">
                                    {TYPES_EXAMEN.map(t => <option key={t.value} value={t.value}>{t.label}</option>)}
                                 </select>
                             </div>
                             <div>
                                 <label className="text-xs font-bold text-slate-500 uppercase tracking-wide block mb-2">Sous-type (Région)</label>
                                 <input type="text" value={sousType} onChange={e => setSousType(e.target.value)} placeholder="ex: Thorax, Poignet" className="w-full p-2.5 border border-slate-200 rounded-lg text-sm outline-none focus:border-blue-500"/>
                             </div>
                        </div>

                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase tracking-wide block mb-2">Lien Pathologique</label>
                            <div className="relative">
                                <Activity className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" size={16}/>
                                <select 
                                    value={pathoId} 
                                    onChange={e => setPathoId(e.target.value)} 
                                    className="w-full pl-9 p-2.5 border border-slate-200 rounded-lg text-sm bg-white outline-none focus:border-blue-500 appearance-none"
                                >
                                    <option value="">-- Aucune pathologie liée (Image saine) --</option>
                                    {diseases.map(d => <option key={d.id} value={d.id}>{d.nom_fr} ({d.code_icd10})</option>)}
                                </select>
                            </div>
                        </div>

                        <div className="grid grid-cols-2 gap-6">
                            <div>
                                <label className="text-xs font-bold text-slate-500 uppercase tracking-wide block mb-2">Qualité Image (1-5)</label>
                                <input type="range" min="1" max="5" value={quality} onChange={e => setQuality(Number(e.target.value))} className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-[#052648]"/>
                                <div className="flex justify-between text-[10px] text-slate-400 px-1 mt-1"><span>Floue</span><span>Excellente</span></div>
                            </div>
                             <div>
                                <label className="text-xs font-bold text-slate-500 uppercase tracking-wide block mb-2">Difficulté Interprétation</label>
                                <input type="range" min="1" max="5" value={difficulty} onChange={e => setDifficulty(Number(e.target.value))} className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-orange-500"/>
                                <div className="flex justify-between text-[10px] text-slate-400 px-1 mt-1"><span>Evident</span><span>Subtil</span></div>
                            </div>
                        </div>

                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase tracking-wide block mb-2">Description Radiologique</label>
                            <textarea 
                                rows={3} 
                                value={desc} 
                                onChange={e => setDesc(e.target.value)} 
                                className="w-full p-3 border border-slate-200 rounded-xl text-sm leading-relaxed outline-none focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500"
                                placeholder="Décrivez les lésions observées : foyer de condensation, fracture..."
                            ></textarea>
                        </div>
                    </div>

                    <div className="p-5 border-t border-slate-100 bg-slate-50 flex justify-end gap-3 rounded-br-3xl">
                        <Button variant="ghost" onClick={onClose} disabled={isLoading}>Annuler</Button>
                        <Button onClick={handleUpload} disabled={isLoading} className="bg-[#052648] hover:bg-blue-900 text-white min-w-[150px]">
                            {isLoading ? 'Téléchargement...' : (
                                <>Valider & Upload <Check size={18} className="ml-2"/></>
                            )}
                        </Button>
                    </div>
                </div>
            </div>
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\Analytics.tsx
================================================================================

// app/expert/analytics/page.tsx
'use client';

import React from 'react';
import { TrendingUp, Target, AlertTriangle, Clock, Eye } from 'lucide-react';

// Importez vos types et données mock
import { SessionLog } from '@/types/expert/types';
import { useCases } from '@/types/simulation/constant';
import { services } from '@/types/simulation/constant';

/**
 * Composant réutilisable pour afficher une carte de statistique.
 */
const StatCard = ({ title, value, icon: Icon, color }: { title: string, value: string, icon: React.FC<any>, color: string }) => (
  <div className="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow flex items-center gap-4">
    <div className={`w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0 ${color}`}>
      <Icon className="w-6 h-6 text-white" />
    </div>
    <div>
      <p className="text-2xl font-bold text-primary">{value}</p>
      <p className="text-sm text-slate-500">{title}</p>
    </div>
  </div>
);

// Données "mock" pour simuler les logs de sessions des apprenants.
// À terme, ces données viendront de votre base de données via une API.
const mockSessionLogs: SessionLog[] = [
    { sessionId: 'S1-XYZ', caseId: 'neuro-001', studentId: 'Apprenant-A1B2', success: false, score: 45, timeSpent: 25, date: new Date(Date.now() - 1 * 60 * 60 * 1000).toISOString(), isFlagged: true },
    { sessionId: 'S2-ABC', caseId: 'cardio-001', studentId: 'Apprenant-C3D4', success: true, score: 90, timeSpent: 15, date: new Date(Date.now() - 3 * 60 * 60 * 1000).toISOString(), isFlagged: false },
    { sessionId: 'S3-LMN', caseId: 'neuro-001', studentId: 'Apprenant-E5F6', success: false, score: 55, timeSpent: 30, date: new Date(Date.now() - 5 * 60 * 60 * 1000).toISOString(), isFlagged: false },
    { sessionId: 'S4-PQR', caseId: 'orl-001', studentId: 'Apprenant-G7H8', success: true, score: 95, timeSpent: 8, date: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString(), isFlagged: false },
    { sessionId: 'S5-IJK', caseId: 'pneumo-001', studentId: 'Apprenant-I9J0', success: false, score: 65, timeSpent: 22, date: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(), isFlagged: true },
];

const flaggedCases = mockSessionLogs.filter(s => s.isFlagged);

/**
 * La page principale d'analyse des performances.
 */
const Analytics: React.FC = () => {
    return (
        <div className="space-y-8">
            {/* En-tête de la page */}
            <div>
                <h1 className="text-3xl font-bold text-primary">Analyse des Performances</h1>
                <p className="text-slate-600 mt-1">Suivez les résultats des apprenants et identifiez les points d'amélioration.</p>
            </div>
            
            {/* Cartes de statistiques clés */}
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <StatCard title="Taux de Succès Global" value="78%" icon={TrendingUp} color="bg-green-500" />
                <StatCard title="Score Moyen" value="82/100" icon={Target} color="bg-blue-500" />
                <StatCard title="Cas 'Hors-Piste' à Examiner" value={flaggedCases.length.toString()} icon={AlertTriangle} color="bg-red-500" />
                <StatCard title="Temps Moyen par Cas" value="18 min" icon={Clock} color="bg-yellow-500" />
            </div>

            {/* Section des cas "hors-piste" / escaladés */}
            <div className="bg-white rounded-xl shadow-md">
                <div className="p-6 border-b border-slate-200">
                    <h2 className="text-xl font-bold text-primary flex items-center gap-2"><AlertTriangle className="text-red-500"/> Sessions Escaladées ("Hors-Piste")</h2>
                    <p className="text-sm text-slate-500 mt-1">Ces sessions ont été marquées car l'apprenant a suivi un chemin de diagnostic inattendu.</p>
                </div>
                <div className="p-4 space-y-2">
                    {/* En-têtes de la liste */}
                    <div className="grid grid-cols-6 gap-4 px-4 text-xs font-semibold text-slate-500 uppercase">
                        <p className="col-span-2">Cas Clinique</p>
                        <p>Apprenant</p>
                        <p>Score</p>
                        <p>Temps</p>
                        <p className="text-right">Action</p>
                    </div>
                    {/* Liste des sessions */}
                    {flaggedCases.map(log => {
                        const useCase = useCases.find(c => c.id === log.caseId);
                        const service = services.find(s => s.id === useCase?.serviceId);
                        return (
                            <div key={log.sessionId} className="grid grid-cols-6 gap-4 items-center p-4 rounded-lg hover:bg-slate-50 transition-colors">
                                <div className="col-span-2 flex items-center gap-3">
                                    {service && <div className="w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center flex-shrink-0"><service.icon className="w-4 h-4 text-primary" /></div>}
                                    <div>
                                        <p className="font-semibold text-primary text-sm">{useCase?.patient.nom}</p>
                                        <p className="text-xs text-slate-500">{service?.name}</p>
                                    </div>
                                </div>
                                <p className="text-sm text-slate-600">{log.studentId}</p>
                                <p className={`text-sm font-semibold ${log.score < 60 ? 'text-red-600' : 'text-yellow-600'}`}>{log.score}/100</p>
                                <p className="text-sm text-slate-600">{log.timeSpent} min</p>
                                <div className="flex justify-end">
                                    <button className="flex items-center gap-1.5 text-sm font-semibold text-primary hover:text-blue-700">
                                        <Eye size={16}/> Analyser
                                    </button>
                                </div>
                            </div>
                        )
                    })}
                </div>
            </div>
        </div>
    );
}

export default Analytics;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\Create.tsx
================================================================================

'use client';

import React, { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { PlusCircle, FileText, User, HeartPulse, Stethoscope, Search, Loader2 } from 'lucide-react';
import toast from 'react-hot-toast';
import { getDiseases, getSymptoms, createClinicalCase } from '@/services/expertService';
import { BackendDisease, BackendSymptom, BackendClinicalCaseCreate } from '@/types/backend';

// Définition de difficulté simplifiée pour mapper avec le backend (entier ou string)
const DIFFICULTY_MAP = {
    'Profane': 1,
    'Débutant': 2,
    'Intermédiaire': 3,
    'Confirmé': 4,
    'Expert': 5
};

const FormField = ({ id, label, children }: { id: string, label: string, children: React.ReactNode }) => (
    <div>
        <label htmlFor={id} className="block text-sm font-semibold text-slate-700 mb-1.5">{label}</label>
        {children}
    </div>
);

const CreateCase: React.FC = () => {
    const router = useRouter();
    const [isLoading, setIsLoading] = useState(true);
    const [diseases, setDiseases] = useState<BackendDisease[]>([]);
    const [symptomsList, setSymptomsList] = useState<BackendSymptom[]>([]);
    
    // Pour gérer la sélection multiple de symptômes (simple pour l'exemple)
    const [selectedSymptoms, setSelectedSymptoms] = useState<string[]>([]); 

    // Chargement des données référentielles
    useEffect(() => {
        const loadRefs = async () => {
            try {
                // Requête GET parallèle vers le backend
                const [dData, sData] = await Promise.all([
                    getDiseases(),
                    getSymptoms()
                ]);
                setDiseases(dData);
                setSymptomsList(sData);
            } catch (err) {
                console.error(err);
                toast.error("Erreur de connexion au module Expert Backend");
            } finally {
                setIsLoading(false);
            }
        };
        loadRefs();
    }, []);

    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {
        e.preventDefault();
        
        const form = e.currentTarget;
        const formData = new FormData(form);
        const formValues = Object.fromEntries(formData.entries());

        // Construction de l'objet conforme à 'BackendClinicalCaseCreate' (Schema OpenAPI)
        // Note: Le backend attend pathologie_principale_id (int)
        
        // Récupération des symptômes cochés (mock simplifié : on prend le champ texte pour l'histoire, et un tableau vide d'objets ID pour l'instant si pas de UI multiselect complexe)
        const formattedCase: BackendClinicalCaseCreate = {
            code_fultang: `CS-${Date.now()}`,
            pathologie_principale_id: parseInt(formValues.diseaseId as string), 
            niveau_difficulte: parseInt(formValues.difficulty as string),
            
            // Structure JSON complexe demandée par votre Backend
            presentation_clinique: {
                histoire_maladie: formValues.histoire as string,
                // Dans une vraie implém, on mapperait les IDs sélectionnés dans une liste déroulante multiple
                symptomes_patient: [], // On laisse vide pour ce test rapide, ou on ajouterait une UI de sélection multiple
                antecedents: {
                    details: formValues.antecedents
                }
            },
            
            // Stockage des infos patients brutes dans des champs JSON flexibles (si le backend le permet dans presentation_clinique) ou ignoré si schéma strict.
            // Vu le schéma strict OpenAPI, "nom", "age" n'apparaissent pas dans ClinicalCaseCreate racine. 
            // On suppose qu'ils vont dans "presentation_clinique.antecedents" ou similaire.
            donnees_paracliniques: {
               examen_clinique: formValues.examenClinique,
               signes_vitaux: formValues.signesVitaux
            }
        };

        // Si le backend nécessite "symptomes_patient" obligatoirement non vide :
        // formattedCase.presentation_clinique.symptomes_patient = [{ symptome_id: 1, details: "Douleur simulée" }];

        await toast.promise(
            createClinicalCase(formattedCase),
            {
                loading: 'Communication avec le Backend STI...',
                success: (data) => {
                    console.log("Success Data Backend:", data);
                    form.reset();
                    return "Cas clinique enregistré dans la base experte !";
                },
                error: (err) => `Erreur Backend: ${err.message}`,
            }
        );
    };

    if (isLoading) {
        return <div className="flex h-64 items-center justify-center text-primary"><Loader2 className="animate-spin mr-2"/> Chargement du référentiel médical...</div>;
    }

    return (
        <form onSubmit={handleSubmit} className="space-y-8 animate-fade-in">
            <div>
                <h1 className="text-3xl font-bold text-primary">Créer un Nouveau Cas (Connecté Backend)</h1>
                <p className="text-slate-600 mt-1">Créez un cas qui sera stocké dans l'encyclopédie du module expert.</p>
            </div>

            {/* Pathologie et Difficulté (REQUIS PAR SCHEMA) */}
            <div className="bg-white p-6 rounded-xl shadow-md border-l-4 border-blue-500">
                <h2 className="text-xl font-bold text-primary flex items-center gap-2 mb-4"><FileText size={20}/> Référentiel</h2>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <FormField id="diseaseId" label="Pathologie Principale (Base de Données)">
                        <select id="diseaseId" name="diseaseId" required className="w-full p-2 border rounded-md bg-slate-50">
                            <option value="">Sélectionnez une pathologie...</option>
                            {diseases.map(d => (
                                <option key={d.id} value={d.id}>{d.nom_fr} ({d.code_icd10})</option>
                            ))}
                        </select>
                        {diseases.length === 0 && <span className="text-xs text-red-500">Aucune maladie trouvée via GET /diseases</span>}
                    </FormField>
                    
                    <FormField id="difficulty" label="Niveau de Difficulté">
                        <select name="difficulty" id="difficulty" required className="w-full p-2 border rounded-md bg-slate-50">
                            {Object.entries(DIFFICULTY_MAP).map(([label, val]) => (
                                <option key={val} value={val}>{label}</option>
                            ))}
                        </select>
                    </FormField>
                </div>
            </div>

            {/* Identité Simulée (Dans un vrai cas réel, le patient est une entité séparée, ici on le met dans le texte histoire) */}
            <div className="bg-white p-6 rounded-xl shadow-md">
                 <h2 className="text-xl font-bold text-primary flex items-center gap-2 mb-4"><User size={20}/> Contexte Clinique</h2>
                 <div className="space-y-4">
                    <FormField id="histoire" label="Histoire de la maladie & Patient (Description textuelle)">
                        <textarea id="histoire" name="histoire" rows={4} required 
                        placeholder="Ex: M. Dupont, 58 ans, consulte pour..." 
                        className="w-full p-2 border rounded-md bg-slate-50 focus:border-primary focus:ring-primary"></textarea>
                    </FormField>
                    <FormField id="antecedents" label="Antécédents">
                        <textarea id="antecedents" name="antecedents" rows={2} required className="w-full p-2 border rounded-md bg-slate-50"></textarea>
                    </FormField>
                 </div>
            </div>

            {/* Paraclinique */}
             <div className="bg-white p-6 rounded-xl shadow-md">
                 <h2 className="text-xl font-bold text-primary flex items-center gap-2 mb-4"><Stethoscope size={20}/> Données Paracliniques (Stockage JSONB)</h2>
                 <div className="space-y-4">
                    <FormField id="signesVitaux" label="Signes Vitaux">
                        <input type="text" name="signesVitaux" id="signesVitaux" placeholder="TA, FC, SpO2..." className="w-full p-2 border rounded-md bg-slate-50" />
                    </FormField>
                     <FormField id="examenClinique" label="Examen Clinique Détaillé">
                        <textarea name="examenClinique" id="examenClinique" rows={2} className="w-full p-2 border rounded-md bg-slate-50"></textarea>
                    </FormField>
                 </div>
            </div>

            <div className="flex justify-end pt-4">
                <button type="submit" className="px-6 py-3 bg-[#052648] text-white font-semibold rounded-lg hover:bg-blue-800 transition-colors shadow-lg flex items-center gap-2">
                    <PlusCircle size={20}/> Créer Cas dans Backend
                </button>
            </div>
        </form>
    );
}

export default CreateCase;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\Validation.tsx
================================================================================

// app/expert/validation/page.tsx
'use client';

import React from 'react';
import { useCases } from '@/contexts/CaseContext';
import { services } from '@/types/simulation/constant';
import Link from 'next/link';
import { Eye, AlertCircle } from 'lucide-react';

const ValidationList: React.FC = () => {
    const { cases } = useCases();
    const pendingCases = cases.filter(c => c.status === 'pending');

    return (
        <div className="space-y-6">
             <div>
                <h1 className="text-3xl font-bold text-primary">Validation en Attente</h1>
                <p className="text-slate-600 mt-1">Liste de tous les cas générés par l'IA en attente d'approbation.</p>
            </div>
            <div className="bg-white rounded-xl shadow-md p-4 space-y-2">
                {/* En-têtes */}
                <div className="grid grid-cols-5 gap-4 px-4 text-xs font-semibold text-slate-500 uppercase">
                    <p className="col-span-2">Patient</p>
                    <p>Difficulté</p>
                    <p>Soumis par</p>
                    <p className="text-right">Action</p>
                </div>
                {pendingCases.length > 0 ? (
                    pendingCases.map(c => {
                        const service = services.find(s => s.id === c.serviceId);
                        return (
                             <div key={c.id} className="grid grid-cols-5 gap-4 items-center p-4 rounded-lg hover:bg-slate-50">
                                <div className="col-span-2">
                                    <p className="font-semibold text-primary">{c.patient.nom}</p>
                                    <p className="text-xs text-slate-500">{service?.name}</p>
                                </div>
                                <p className="text-sm text-slate-600">{c.difficulty}</p>
                                <p className="text-sm text-slate-600">{c.submittedBy}</p>
                                <div className="flex justify-end">
                                    <Link href={`/expert/validation/${c.id}`} className="flex items-center gap-1.5 text-sm font-semibold text-primary hover:text-blue-700">
                                        <Eye size={16}/> Examiner
                                    </Link>
                                </div>
                            </div>
                        )
                    })
                ) : (
                     <div className="text-center py-12">
                        <AlertCircle className="mx-auto w-12 h-12 text-green-500" />
                        <h2 className="mt-4 font-semibold text-primary">File d'attente vide !</h2>
                        <p className="text-sm text-slate-500 mt-1">Tous les cas ont été traités. Excellent travail !</p>
                    </div>
                )}
            </div>
        </div>
    );
}

export default ValidationList ;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\Symptom.tsx
================================================================================

'use client';

import React, { useState, useEffect, useMemo } from 'react';
import { 
  Activity, AlertTriangle, Search, Plus, Trash2, Edit2, 
  HelpCircle, Thermometer, Brain, Stethoscope, ChevronRight, X, Pill, Link2, ListPlus
} from 'lucide-react';
import toast from 'react-hot-toast';
import { Button } from '@/components/ui/Button';
import { 
    getAllSymptoms, getDiseasesForSymptom, getTreatmentsForSymptom
} from '@/services/expertService';
// Import correct des types mis à jour
import { BackendSymptom, DiseaseForSymptom, TreatmentForSymptom } from '@/types/backend';
import SymptomManagerModal, { ManagerMode } from './SymptomModal';


const CATEGORY_COLORS: Record<string, string> = {
    'Signe Vital': 'bg-blue-100 text-blue-700 border-blue-200',
    'Douleur': 'bg-red-50 text-red-700 border-red-100',
    'Respiratoire': 'bg-cyan-50 text-cyan-700 border-cyan-100',
    'Digestif': 'bg-orange-50 text-orange-700 border-orange-100',
    'Neurologique': 'bg-purple-50 text-purple-700 border-purple-100',
    'Autre': 'bg-slate-100 text-slate-700 border-slate-200',
};

// Utilitaire de formatage %
const formatProb = (val: string | number) => {
    const num = Number(val);
    return isNaN(num) ? '?' : `${Math.round(num * 100)}%`;
};

export default function SymptomLibrary() {
    // --- ÉTATS ---
    const [symptoms, setSymptoms] = useState<BackendSymptom[]>([]);
    const [isLoading, setIsLoading] = useState(true);
    
    // Panel Latéral
    const [selectedSymptom, setSelectedSymptom] = useState<BackendSymptom | null>(null);
    const [detailLoading, setDetailLoading] = useState(false);
    const [relatedDiseases, setRelatedDiseases] = useState<DiseaseForSymptom[]>([]);
    const [symptomaticTreatments, setSymptomaticTreatments] = useState<TreatmentForSymptom[]>([]);

    // Filtres
    const [search, setSearch] = useState("");
    const [filterCategory, setFilterCategory] = useState("Tous");

    // Modale Manager
    const [managerConfig, setManagerConfig] = useState<{isOpen: boolean, mode: ManagerMode, data: BackendSymptom | null}>({
        isOpen: false,
        mode: 'create',
        data: null
    });

    const openManager = (mode: ManagerMode, data: BackendSymptom | null = null) => {
        setManagerConfig({ isOpen: true, mode, data });
    };

    // --- CHARGEMENT ---
    useEffect(() => {
        loadData();
    }, []);

    const loadData = async () => {
        setIsLoading(true);
        try {
            const data = await getAllSymptoms();
            setSymptoms(data);
        } catch (e) {
            toast.error("Erreur chargement symptômes");
        } finally {
            setIsLoading(false);
        }
    };

    const handleSymptomClick = async (sym: BackendSymptom) => {
        setSelectedSymptom(sym);
        setDetailLoading(true);
        setRelatedDiseases([]);
        setSymptomaticTreatments([]);

        try {
            // Requêtes parallèles
            const [diseases, treatments] = await Promise.all([
                getDiseasesForSymptom(sym.id),
                getTreatmentsForSymptom(sym.id)
            ]);
            
            // Pas de transformation complexe ici, on passe les données brutes typées
            setRelatedDiseases(diseases || []);
            setSymptomaticTreatments(treatments || []);

        } catch (e) {
            console.error("Erreur détails:", e);
        } finally {
            setDetailLoading(false);
        }
    };

    const handleDelete = async (id: number, e: React.MouseEvent) => {
        e.stopPropagation(); 
        const sym = symptoms.find(s => s.id === id);
        if(sym) openManager('delete', sym);
    };

    // --- FILTRAGE ---
    const categories = useMemo(() => ["Tous", ...Array.from(new Set(symptoms.map(s => s.categorie || "Autre")))], [symptoms]);
    
    const filteredSymptoms = useMemo(() => {
        return symptoms.filter(s => {
            const matchSearch = s.nom.toLowerCase().includes(search.toLowerCase()) || 
                              s.description?.toLowerCase().includes(search.toLowerCase());
            const matchCat = filterCategory === "Tous" || (s.categorie || "Autre") === filterCategory;
            return matchSearch && matchCat;
        });
    }, [symptoms, search, filterCategory]);

    const getBadgeStyle = (cat?: string) => CATEGORY_COLORS[cat || ''] || CATEGORY_COLORS['Autre'];

    return (
        <div className="flex h-[calc(100vh-100px)] gap-6 relative">
            
            {/* 1. LISTE GAUCHE (Inchangée visuellement) */}
            <div className={`flex-1 flex flex-col bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden transition-all duration-300 ${selectedSymptom ? 'w-2/3' : 'w-full'}`}>
                
                {/* Header */}
                <div className="p-5 border-b border-slate-100 flex flex-col md:flex-row justify-between items-center gap-4">
                    <div>
                        <h2 className="text-xl font-bold text-[#052648] flex items-center gap-2">
                            <Activity className="text-blue-500" /> Séméiologie & Symptômes
                        </h2>
                        <p className="text-slate-500 text-sm">{filteredSymptoms.length} éléments</p>
                    </div>
                    <div className="flex items-center gap-2 w-full md:w-auto">
                         <div className="relative group flex-1 md:flex-none">
                            <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 h-4 w-4" />
                            <input 
                                type="text" placeholder="Rechercher..." 
                                className="pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none w-full md:w-64"
                                value={search}
                                onChange={(e) => setSearch(e.target.value)}
                            />
                         </div>
                         <Button onClick={() => openManager('create')} className="bg-[#052648] text-white">
                             <Plus size={16} className="mr-2"/> Nouveau
                         </Button>
                    </div>
                </div>

                {/* Filtres Catégories */}
                <div className="px-5 py-3 border-b border-slate-50 flex gap-2 overflow-x-auto scrollbar-hide">
                    {categories.map(cat => (
                        <button 
                            key={cat}
                            onClick={() => setFilterCategory(cat)}
                            className={`px-3 py-1 rounded-full text-xs font-medium transition-colors whitespace-nowrap ${
                                filterCategory === cat 
                                ? 'bg-[#052648] text-white' 
                                : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
                            }`}
                        >
                            {cat}
                        </button>
                    ))}
                </div>

                {/* ScrollView Liste */}
                <div className="flex-1 overflow-y-auto p-4 space-y-2 bg-slate-50/50 custom-scrollbar">
                    {isLoading ? (
                        <div className="flex items-center justify-center h-full text-slate-400">Chargement...</div>
                    ) : (
                        filteredSymptoms.map((sym) => (
                            <div 
                                key={sym.id} 
                                onClick={() => handleSymptomClick(sym)}
                                className={`
                                    group flex items-center justify-between p-4 bg-white rounded-xl border cursor-pointer transition-all duration-200
                                    ${selectedSymptom?.id === sym.id 
                                        ? 'border-blue-500 shadow-md ring-1 ring-blue-500/20 bg-blue-50/10' 
                                        : 'border-slate-200 hover:border-blue-300 hover:shadow-sm'
                                    }
                                `}
                            >
                                <div className="flex items-start gap-4">
                                    <div className={`
                                        w-10 h-10 rounded-full flex items-center justify-center shrink-0 
                                        ${sym.signes_alarme ? 'bg-red-100 text-red-600' : 'bg-slate-100 text-slate-500'}
                                    `}>
                                        {sym.signes_alarme ? <AlertTriangle size={20}/> : <Thermometer size={20}/>}
                                    </div>
                                    <div>
                                        <h3 className={`font-bold ${selectedSymptom?.id === sym.id ? 'text-blue-800' : 'text-slate-800'}`}>
                                            {sym.nom}
                                        </h3>
                                        <div className="flex items-center gap-2 mt-1">
                                            <span className={`text-[10px] px-2 py-0.5 rounded-full border ${getBadgeStyle(sym.categorie)}`}>
                                                {sym.categorie || "Général"}
                                            </span>
                                            {sym.type_symptome && <span className="text-xs text-slate-400">• {sym.type_symptome}</span>}
                                        </div>
                                    </div>
                                </div>
                                <div className="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <ChevronRight size={20} className="text-slate-300"/>
                                </div>
                            </div>
                        ))
                    )}
                </div>
            </div>

            {/* 2. SIDEBAR DETAIL FIXE */}
            {selectedSymptom && (
                <div className="w-[400px] xl:w-[450px] flex flex-col bg-white rounded-2xl border border-slate-200 shadow-xl overflow-hidden animate-in slide-in-from-right-10 duration-300">
                    
                    {/* Toolbar */}
                    <div className="h-12 border-b border-slate-100 flex items-center justify-between px-4 bg-slate-50/80 backdrop-blur-sm">
                        <span className="text-xs font-bold text-slate-400 uppercase tracking-widest">Détail Fiche</span>
                        <button onClick={() => setSelectedSymptom(null)} className="text-slate-400 hover:text-slate-800 transition-colors">
                            <X size={18} />
                        </button>
                    </div>

                    <div className="flex-1 overflow-y-auto p-6 custom-scrollbar">
                        {/* En-tête */}
                        <div className="mb-6">
                             <div className="flex justify-between items-start">
                                <h1 className="text-2xl font-bold text-[#052648] leading-tight mb-2">
                                    {selectedSymptom.nom}
                                </h1>
                                {selectedSymptom.signes_alarme && (
                                    <div className="flex flex-col items-center justify-center p-2 bg-red-50 border border-red-100 rounded-lg text-red-600 shrink-0">
                                        <AlertTriangle size={24}/>
                                        <span className="text-[9px] font-bold uppercase mt-1">Alarme</span>
                                    </div>
                                )}
                             </div>
                             
                             <div className="prose prose-sm text-slate-600 bg-blue-50/50 p-4 rounded-xl border border-blue-50 leading-relaxed mt-2">
                                {selectedSymptom.description || "Aucune description clinique."}
                             </div>
                        </div>

                        {/* Relations Maladies */}
                        <div className="mb-8">
                             <div className="flex items-center justify-between mb-3 border-b pb-2">
                                 <h3 className="text-sm font-bold text-slate-800 flex items-center gap-2">
                                     <Brain className="text-indigo-500" size={16}/> Évocateur de
                                 </h3>
                                 <span className="bg-indigo-50 text-indigo-700 text-xs px-2 py-0.5 rounded-full font-bold">
                                     {relatedDiseases.length}
                                 </span>
                             </div>
                             
                             {detailLoading ? (
                                 <div className="space-y-2 animate-pulse">
                                     <div className="h-8 bg-slate-100 rounded w-full"/>
                                     <div className="h-8 bg-slate-100 rounded w-2/3"/>
                                 </div>
                             ) : (
                                 <div className="space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar">
                                     {relatedDiseases.length > 0 ? relatedDiseases.map((rel, idx) => (
                                         <div key={idx} className="flex items-center justify-between p-2 rounded-lg bg-indigo-50/30 hover:bg-indigo-50 border border-transparent hover:border-indigo-100 transition-colors">
                                             <div className="flex items-center gap-2 min-w-0">
                                                <Link2 size={12} className="text-indigo-400 shrink-0"/>
                                                <div className="flex flex-col min-w-0">
                                                    {/* ACCES CORRECT : rel.pathologie.nom_fr */}
                                                    <span className="text-sm font-semibold text-slate-800 truncate" title={rel.pathologie?.nom_fr}>
                                                        {rel.pathologie?.nom_fr || "Pathologie Inconnue"}
                                                    </span>
                                                    <span className="text-xs text-slate-500 font-mono">
                                                        CIM-10: {rel.pathologie?.code_icd10 || "?"}
                                                    </span>
                                                </div>
                                             </div>
                                             <span className={`text-xs font-bold px-2 py-1 rounded ${Number(rel.probabilite) > 0.5 ? 'bg-indigo-100 text-indigo-700' : 'bg-slate-100 text-slate-600'}`}>
                                                {formatProb(rel.probabilite)}
                                             </span>
                                         </div>
                                     )) : (
                                         <p className="text-xs text-slate-400 italic">Aucune association trouvée.</p>
                                     )}
                                 </div>
                             )}
                        </div>

                         {/* Traitements */}
                         <div className="mb-6">
                             <div className="flex items-center justify-between mb-3 border-b pb-2">
                                 <h3 className="text-sm font-bold text-slate-800 flex items-center gap-2">
                                     <Pill className="text-emerald-500" size={16}/> Traitement Symptomatique
                                 </h3>
                             </div>

                             {detailLoading ? (
                                <div className="h-12 bg-slate-100 rounded w-full animate-pulse"/>
                             ) : (
                                <div className="space-y-3">
                                    {symptomaticTreatments.length > 0 ? symptomaticTreatments.map((treat, idx) => (
                                        <div key={idx} className="p-3 bg-white border border-slate-200 rounded-xl shadow-sm hover:shadow-md transition-shadow relative overflow-hidden">
                                            <div className="absolute top-0 left-0 w-1 h-full bg-emerald-500"></div>
                                            <div className="flex justify-between items-start mb-1">
                                                <span className="font-bold text-slate-800 text-sm">
                                                    {treat.medicament_nom || `Médicament #${treat.medicament_id}`}
                                                </span>
                                            </div>
                                            <p className="text-xs text-slate-500">Efficacité: {treat.efficacite || "Non spécifiée"}</p>
                                        </div>
                                    )) : (
                                        <div className="p-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl text-center">
                                            <Stethoscope className="mx-auto text-slate-300 mb-1" size={24} />
                                            <p className="text-xs text-slate-400">Aucun traitement direct associé.</p>
                                        </div>
                                    )}
                                </div>
                             )}
                         </div>

                    </div>
                    
                    <div className="p-4 bg-slate-50 border-t border-slate-200 flex justify-between">
                         <Button variant="destructive" onClick={(e: any) => handleDelete(selectedSymptom.id, e)} className="text-xs">
                             <Trash2 size={16}/>
                         </Button>
                         <div className="flex gap-2">
                            <Button variant="outline" className="text-xs" onClick={() => openManager('edit', selectedSymptom)}>
                                 Modifier
                            </Button>
                            <Button className="text-xs bg-[#052648] hover:bg-blue-800">
                                 + Traitement
                            </Button>
                         </div>
                    </div>
                </div>
            )}

            {/* Modale Manager inchangée, elle est réutilisée telle quelle */}
            <SymptomManagerModal 
                isOpen={managerConfig.isOpen}
                onClose={() => setManagerConfig({...managerConfig, isOpen: false})}
                mode={managerConfig.mode}
                initialData={managerConfig.data}
                onSuccess={() => {
                    loadData();
                    if(selectedSymptom && managerConfig.mode !== 'delete') handleSymptomClick(selectedSymptom);
                    if(managerConfig.mode === 'delete') setSelectedSymptom(null);
                }}
            />
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\SymptomModal.tsx
================================================================================

'use client';

import React, { useState, useEffect } from 'react';
import { X, Save, AlertTriangle, Syringe, Plus, Activity, Tag, FileText } from 'lucide-react';
import toast from 'react-hot-toast';
import { Button } from '@/components/ui/Button';
import { createSymptom, updateSymptom, deleteSymptom, addTreatmentToSymptom } from '@/services/expertService';
import { BackendSymptom, BackendSymptomCreate } from '@/types/backend';

export type ManagerMode = 'create' | 'edit' | 'delete' | 'add_treatment';

interface SymptomManagerModalProps {
    isOpen: boolean;
    onClose: () => void;
    mode: ManagerMode;
    initialData?: BackendSymptom | null; // Pour edit/delete/add_treatment
    onSuccess: () => void; // Pour rafraichir la liste parente
}

const CATEGORIES = ["Signe Vital", "Douleur", "Respiratoire", "Digestif", "Neurologique", "Autre"];

export default function SymptomManagerModal({ 
    isOpen, onClose, mode, initialData, onSuccess 
}: SymptomManagerModalProps) {
    
    const [isLoading, setIsLoading] = useState(false);
    
    // État du formulaire Symptôme (Create/Edit)
    const [formData, setFormData] = useState<Partial<BackendSymptomCreate>>({
        nom: '',
        nom_local: '',
        categorie: 'Autre',
        type_symptome: 'Subjectif',
        description: '',
        signes_alarme: false
    });

    // État du formulaire Traitement (Add Treatment)
    const [treatmentData, setTreatmentData] = useState({
        medicament_id: '',
        efficacite: 'Forte', // Par défaut
        rang_preference: 1
    });

    // Reset à l'ouverture
    useEffect(() => {
        if (isOpen && initialData && (mode === 'edit' || mode === 'create')) {
            setFormData({
                nom: initialData.nom || '',
                nom_local: initialData.nom_local || '',
                categorie: initialData.categorie || 'Autre',
                type_symptome: initialData.type_symptome || 'Subjectif',
                description: initialData.description || '',
                signes_alarme: initialData.signes_alarme || false
            });
        } else if (mode === 'create') {
            setFormData({
                nom: '', nom_local: '', categorie: 'Autre', 
                type_symptome: 'Subjectif', description: '', signes_alarme: false
            });
        }
        
        // Reset traitement
        setTreatmentData({ medicament_id: '', efficacite: 'Forte', rang_preference: 1 });
    }, [isOpen, mode, initialData]);

    if (!isOpen) return null;

    // --- TITRES ET STYLES DYNAMIQUES ---
    const config = {
        create: { title: "Nouveau Symptôme", icon: Plus, color: "text-[#052648]" },
        edit: { title: "Modifier le Symptôme", icon: FileText, color: "text-blue-600" },
        delete: { title: "Supprimer le Symptôme", icon: AlertTriangle, color: "text-red-600" },
        add_treatment: { title: "Prescrire un Traitement", icon: Syringe, color: "text-emerald-600" }
    }[mode];

    const Icon = config.icon;

    // --- LOGIQUE DE SOUMISSION ---
    const handleSubmit = async () => {
        setIsLoading(true);
        try {
            if (mode === 'create') {
                await createSymptom(formData as BackendSymptomCreate);
                toast.success("Symptôme créé avec succès");
            } 
            else if (mode === 'edit' && initialData) {
                await updateSymptom(initialData.id, formData);
                toast.success("Mise à jour réussie");
            } 
            else if (mode === 'delete' && initialData) {
                await deleteSymptom(initialData.id);
                toast.success("Symptôme supprimé");
            } 
            else if (mode === 'add_treatment' && initialData) {
                if(!treatmentData.medicament_id) throw new Error("ID Médicament requis");
                
                await addTreatmentToSymptom(initialData.id, {
                    medicament_id: parseInt(treatmentData.medicament_id),
                    efficacite: treatmentData.efficacite
                });
                toast.success("Traitement associé !");
            }

            onSuccess(); // Recharge la liste
            onClose();   // Ferme la modale
        } catch (e: any) {
            console.error(e);
            toast.error(e.message || "Une erreur est survenue");
        } finally {
            setIsLoading(false);
        }
    };

    // ================== RENDU FORMULAIRES ==================

    const renderSymptomForm = () => (
        <div className="space-y-4 animate-in fade-in zoom-in-95">
            <div className="grid grid-cols-2 gap-4">
                <div>
                    <label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Nom Scientifique</label>
                    <input 
                        type="text" required 
                        className="w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-900 focus:border-transparent outline-none bg-slate-50 font-medium text-slate-800"
                        placeholder="Ex: Céphalée de tension"
                        value={formData.nom}
                        onChange={(e) => setFormData({...formData, nom: e.target.value})}
                    />
                </div>
                <div>
                    <label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Appellation Locale (Argot)</label>
                    <input 
                        type="text" 
                        className="w-full p-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-900 outline-none"
                        placeholder="Ex: Mal de tête"
                        value={formData.nom_local}
                        onChange={(e) => setFormData({...formData, nom_local: e.target.value})}
                    />
                </div>
            </div>

            <div className="grid grid-cols-2 gap-4">
                 <div>
                    <label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Catégorie</label>
                    <div className="relative">
                        <Tag className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" size={16} />
                        <select 
                            className="w-full pl-9 p-2.5 border border-slate-200 rounded-lg outline-none appearance-none bg-white cursor-pointer"
                            value={formData.categorie}
                            onChange={(e) => setFormData({...formData, categorie: e.target.value})}
                        >
                            {CATEGORIES.map(c => <option key={c} value={c}>{c}</option>)}
                        </select>
                    </div>
                </div>
                 <div>
                    <label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Type</label>
                    <div className="relative">
                        <Activity className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" size={16} />
                        <select 
                            className="w-full pl-9 p-2.5 border border-slate-200 rounded-lg outline-none appearance-none bg-white cursor-pointer"
                            value={formData.type_symptome}
                            onChange={(e) => setFormData({...formData, type_symptome: e.target.value})}
                        >
                            <option value="Subjectif">Subjectif (Senti)</option>
                            <option value="Objectif">Objectif (Observé/Mesuré)</option>
                        </select>
                    </div>
                </div>
            </div>

            <div>
                <label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Description Clinique</label>
                <textarea 
                    rows={4}
                    className="w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-900 outline-none text-sm leading-relaxed"
                    placeholder="Décrivez les caractéristiques du symptôme pour le système expert..."
                    value={formData.description}
                    onChange={(e) => setFormData({...formData, description: e.target.value})}
                />
            </div>

            <div className="flex items-center gap-3 p-3 bg-red-50 border border-red-100 rounded-lg cursor-pointer hover:bg-red-100 transition-colors"
                 onClick={() => setFormData({...formData, signes_alarme: !formData.signes_alarme})}>
                <div className={`w-5 h-5 rounded flex items-center justify-center border ${formData.signes_alarme ? 'bg-red-500 border-red-600' : 'bg-white border-slate-300'}`}>
                    {formData.signes_alarme && <span className="text-white text-xs font-bold">✓</span>}
                </div>
                <div>
                    <span className="text-sm font-bold text-red-700">Marquer comme Signe d'Alarme (Red Flag)</span>
                    <p className="text-xs text-red-500">Ce symptôme nécessite une attention urgente s'il est détecté.</p>
                </div>
            </div>
        </div>
    );

    const renderDeleteConfirm = () => (
        <div className="flex flex-col items-center justify-center p-4 text-center space-y-4">
             <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center animate-bounce">
                <AlertTriangle className="w-8 h-8 text-red-600" />
             </div>
             <div>
                <h3 className="text-lg font-bold text-slate-800">Êtes-vous absolument sûr ?</h3>
                <p className="text-sm text-slate-500 mt-2">
                    Vous êtes sur le point de supprimer le symptôme <span className="font-bold text-red-600">"{initialData?.nom}"</span>.
                    Cette action est irréversible et pourrait impacter les cas cliniques liés.
                </p>
             </div>
        </div>
    );

    const renderTreatmentForm = () => (
        <div className="space-y-4 animate-in fade-in zoom-in-95">
             <div className="p-3 bg-emerald-50 text-emerald-800 text-sm rounded-lg border border-emerald-100 mb-4">
                 Associer un traitement symptomatique à : <strong>{initialData?.nom}</strong>
             </div>
             
             <div>
                <label className="text-xs font-bold text-slate-500 uppercase mb-1 block">ID Médicament (Backend)</label>
                <div className="relative">
                    <input 
                        type="number" autoFocus
                        className="w-full pl-3 pr-10 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none font-mono"
                        placeholder="Ex: 1045"
                        value={treatmentData.medicament_id}
                        onChange={(e) => setTreatmentData({...treatmentData, medicament_id: e.target.value})}
                    />
                    <Syringe className="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400" size={18}/>
                </div>
                <p className="text-[10px] text-slate-400 mt-1 italic">Entrez l'ID unique du médicament (table `medicaments`)</p>
            </div>

            <div>
                <label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Niveau d'Efficacité attendue</label>
                <select 
                     className="w-full p-3 border border-slate-200 rounded-lg outline-none bg-white"
                     value={treatmentData.efficacite}
                     onChange={(e) => setTreatmentData({...treatmentData, efficacite: e.target.value})}
                >
                    <option value="Faible">Faible / Adjuvant</option>
                    <option value="Moyenne">Moyenne</option>
                    <option value="Forte">Forte / 1ère Intention</option>
                    <option value="Curatif">Spécifique (Curatif)</option>
                </select>
            </div>
        </div>
    );

    // ================== RENDU PRINCIPAL ==================

    return (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-[#052648]/40 backdrop-blur-sm p-4 animate-fade-in">
             <div className={`relative bg-white w-full rounded-2xl shadow-2xl overflow-hidden flex flex-col transition-all duration-300 ${mode === 'delete' ? 'max-w-md' : 'max-w-xl'}`}>
                
                {/* Header */}
                <div className={`px-6 py-5 border-b border-slate-100 flex items-center justify-between bg-white`}>
                     <h2 className={`text-lg font-bold flex items-center gap-2 ${config.color}`}>
                         <Icon size={20} /> {config.title}
                     </h2>
                     <button onClick={onClose} className="text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full p-1 transition">
                        <X size={20}/>
                     </button>
                </div>

                {/* Body */}
                <div className="p-6 overflow-y-auto max-h-[70vh]">
                     {mode === 'delete' ? renderDeleteConfirm() : 
                      mode === 'add_treatment' ? renderTreatmentForm() :
                      renderSymptomForm()
                     }
                </div>

                {/* Footer */}
                <div className="px-6 py-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3">
                     <Button variant="outline" onClick={onClose} disabled={isLoading}>
                         Annuler
                     </Button>
                     
                     <Button 
                        onClick={handleSubmit} 
                        disabled={isLoading}
                        className={`shadow-lg text-white font-medium
                             ${mode === 'delete' ? 'bg-red-600 hover:bg-red-700' : 
                               mode === 'add_treatment' ? 'bg-emerald-600 hover:bg-emerald-700' :
                               'bg-[#052648] hover:bg-blue-900'}
                        `}
                    >
                         {isLoading ? 'Traitement...' : 
                          mode === 'create' ? 'Créer le symptôme' : 
                          mode === 'delete' ? 'Confirmer suppression' :
                          'Sauvegarder'}
                     </Button>
                </div>

             </div>
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\Header.tsx
================================================================================

// components/expert/Header.tsx
'use client';
import React from 'react';
import { Search, Bell, Mail } from 'lucide-react';

const ExpertHeader = () => {
  return (
    <header className="h-20 bg-white border-b border-slate-100 flex items-center justify-between px-8 sticky top-0 z-20">
      
      {/* Search Bar Modernisée */}
      <div className="hidden md:flex items-center bg-slate-50 rounded-full px-4 py-2.5 w-96 border border-transparent focus-within:border-blue-200 focus-within:bg-white transition-all">
        <Search className="text-slate-400 w-5 h-5 mr-2" />
        <input 
          type="text" 
          placeholder="Rechercher un cas, un étudiant..." 
          className="bg-transparent outline-none w-full text-sm text-slate-700 placeholder:text-slate-400"
        />
      </div>

      <div className="flex items-center gap-4">
        <button className="relative p-2 rounded-full hover:bg-slate-50 transition-colors text-slate-500 hover:text-[#052648]">
          <Mail className="w-6 h-6" />
          <span className="absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border border-white"></span>
        </button>
        <button className="relative p-2 rounded-full hover:bg-slate-50 transition-colors text-slate-500 hover:text-[#052648]">
          <Bell className="w-6 h-6" />
          <span className="absolute top-1.5 right-2 w-2 h-2 bg-blue-500 rounded-full border border-white animate-pulse"></span>
        </button>
        
        {/* User Mini Profile */}
        <div className="flex items-center gap-3 pl-4 border-l border-slate-200">
            <div className="text-right hidden sm:block">
                <p className="text-sm font-bold text-[#052648]">Pr. Bahebec</p>
                <p className="text-xs text-slate-500">Administrateur</p>
            </div>
            <div className="w-10 h-10 rounded-full bg-gradient-to-tr from-[#052648] to-blue-600 flex items-center justify-center text-white font-bold border-2 border-white shadow-sm">
                JB
            </div>
        </div>
      </div>
    </header>
  );
};

export default ExpertHeader;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\Sidebar.tsx
================================================================================

// components/expert/Sidebar.tsx
'use client';
import React, { useState } from 'react';
import { usePathname, useRouter } from 'next/navigation';
import { 
  LayoutDashboard, FileText, Activity, Bug, Syringe, 
  ImageIcon, LogOut, ChevronRight, HeartPulse, Home
} from 'lucide-react';
import Link from 'next/link';

const menuItems = [
  { name: 'Vue d\'ensemble', icon: LayoutDashboard, path: '/expert' },
  { name: 'Cas Cliniques', icon: FileText, path: '/expert/cas' },
  { name: 'Symptômes', icon: Activity, path: '/expert/symptom' },
  { name: 'Pathologies', icon: Bug, path: '/expert/pathologies' }, // route hypothétique
  { name: 'Traitement', icon: Syringe, path: '/expert/traitements' },
  { name: 'Images Médicales', icon: ImageIcon, path: '/expert/media' },
];

export default function ExpertSidebar() {
  const [isHovered, setIsHovered] = useState(false);
  const pathname = usePathname();
  const router = useRouter();

  return (
    <>
      {/* --- DESKTOP SIDEBAR (HOVER EXPAND) --- */}
      <aside 
        className={`hidden md:flex flex-col h-screen bg-[#052648] text-white fixed left-0 top-0 z-30 transition-all duration-500 ease-in-out border-r border-blue-900/50 shadow-2xl ${
          isHovered ? 'w-64' : 'w-20'
        }`}
        onMouseEnter={() => setIsHovered(true)}
        onMouseLeave={() => setIsHovered(false)}
      >
        {/* Logo Area */}
        <div className="h-20 flex items-center justify-center relative">
           <div className={`flex items-center gap-3 transition-all duration-300 ${isHovered ? 'px-6 w-full justify-start' : ''}`}>
                <div className="w-10 h-10 bg-white/10 rounded-xl flex items-center justify-center flex-shrink-0 backdrop-blur-sm">
                    <HeartPulse className="text-blue-400" />
                </div>
                <div className={`overflow-hidden transition-all duration-300 ${isHovered ? 'w-auto opacity-100' : 'w-0 opacity-0'}`}>
                    <span className="font-bold text-lg whitespace-nowrap">The Good<span className="text-blue-400">Doctor</span> Expert</span>
                </div>
           </div>
        </div>

        {/* Navigation Items */}
        <nav className="flex-1 py-6 space-y-2 overflow-y-auto overflow-x-hidden no-scrollbar">
          {menuItems.map((item) => {
            const isActive = pathname === item.path;
            const Icon = item.icon;
            
            return (
              <Link 
                key={item.path}
                href={item.path}
                className={`relative flex items-center h-12 px-6 transition-all duration-200 group ${
                  isActive ? 'text-white' : 'text-slate-400 hover:text-white'
                }`}
                onClick={() => setIsHovered(false)}
              >
                {/* Active Indicator Line */}
                {isActive && (
                    <div className="absolute left-0 top-0 bottom-0 w-1 bg-blue-500 rounded-r-full shadow-[0_0_15px_rgba(59,130,246,0.6)]" />
                )}

                <div className={`relative z-10 flex items-center gap-4 ${isHovered ? 'justify-start w-full' : 'justify-center w-full'}`}>
                    <Icon className={`w-5 h-5 transition-transform duration-300 ${isActive ? 'text-blue-400' : ''} ${!isHovered && 'group-hover:scale-110'}`} />
                    
                    <span className={`font-medium whitespace-nowrap transition-all duration-300 origin-left ${
                      isHovered ? 'opacity-100 translate-x-0' : 'opacity-0 -translate-x-10 w-0'
                    }`}>
                      {item.name}
                    </span>
                    
                    {/* Hover Chevron (Only visible when expanded) */}
                    {isHovered && (
                       <ChevronRight className="w-4 h-4 ml-auto opacity-0 group-hover:opacity-100 transition-opacity text-slate-500" />
                    )}
                </div>
                
                {/* Background hover effect */}
                <div className={`absolute inset-0 bg-white/5 mx-3 rounded-lg transition-opacity duration-200 ${isActive || (isHovered && 'group-hover:opacity-100') ? '' : 'opacity-0 group-hover:opacity-100'} ${!isHovered && 'mx-2'}`}></div>
              </Link>
            );
          })}
        </nav>

        {/* Footer / Logout */}
        <div className="p-4 border-t border-white/10">
            <button className={`w-full flex items-center h-12 rounded-xl hover:bg-red-500/20 text-slate-300 hover:text-red-400 transition-all group px-2 ${isHovered ? '' : 'justify-center'}`}
                onClick={() => router.push('/')}
            >
                <div className={`${isHovered ? 'mr-4' : ''}`}>
                    {pathname === '/' ? <Home className="w-5 h-5" /> : <LogOut className="w-5 h-5" />}
                </div>
                <span className={`font-medium whitespace-nowrap transition-all duration-300 overflow-hidden ${isHovered ? 'w-auto opacity-100' : 'w-0 opacity-0'}`}>
                    Retour Accueil
                </span>
            </button>
        </div>
      </aside>

      {/* --- MOBILE NAVIGATION (BOTTOM BAR) --- */}
      <nav className="md:hidden fixed bottom-0 left-0 right-0 bg-[#052648] text-white p-2 flex justify-between items-center z-50 rounded-t-2xl shadow-[0_-5px_20px_rgba(0,0,0,0.1)]">
          {menuItems.slice(0, 5).map((item) => (
              <Link 
                key={item.path} 
                href={item.path}
                className={`p-3 rounded-xl flex flex-col items-center justify-center transition-all ${
                    pathname === item.path ? 'bg-blue-600 shadow-lg -translate-y-3' : 'text-slate-400'
                }`}
              >
                  <item.icon size={20} />
              </Link>
          ))}
      </nav>
    </>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\Overview.tsx
================================================================================

'use client';

import React, { useEffect, useState } from 'react';
import Image from 'next/image';
import {
  Users, Activity, Plus, TrendingUp, AlertCircle, FileText, ArrowRight, Brain, Eye, Edit, Trash2
} from 'lucide-react';
import {
  PieChart, Pie, Cell, ResponsiveContainer, BarChart, Bar, XAxis, YAxis, Tooltip, CartesianGrid,
  LineChart, Line, ComposedChart
} from 'recharts';
import { useRouter } from 'next/navigation';
import { getExpertDashboardStats, DashboardStats } from '@/services/dashboardService';
import { Skeleton } from '@/components/ui/Skeleton'; // Vérifiez le chemin, SkeletonCard est le nom que j'avais créé avant, ou adaptez. 

// Image locale du professeur
const PROF_IMG = "/images/avatar.jpg";

// Fonction pour déterminer le niveau de difficulté
const getDifficultyLevel = (niveau: number): { label: string; color: string } => {
  if (niveau >= 0 && niveau <= 10) return { label: 'Débutant', color: 'bg-emerald-100 text-emerald-700 border-emerald-200' };
  if (niveau >= 11 && niveau <= 20) return { label: 'Intermédiaire', color: 'bg-blue-100 text-blue-700 border-blue-200' };
  return { label: 'Avancé', color: 'bg-orange-100 text-orange-700 border-orange-200' };
};

// Fonction pour formater la date
const formatDate = (dateString: string): string => {
  try {
    if(!dateString) return "-";
    const date = new Date(dateString);
    if (isNaN(date.getTime())) {
      return "-"; // Fallback plus propre
    }
    return new Intl.DateTimeFormat('fr-FR', {
        day: '2-digit', month: '2-digit', year: 'numeric'
    }).format(date);
  } catch {
    return "-";
  }
};

export default function Overview() {
  const router = useRouter();
  const [stats, setStats] = useState<DashboardStats | null>(null);
  const [loading, setLoading] = useState(true);

  // Pour le diagramme de Pareto (Symptomes vs Cas)
  const [paretoData, setParetoData] = useState<any[]>([]);

  useEffect(() => {
    async function load() {
      const data = await getExpertDashboardStats();
      setStats(data);
      
      // Construction données réelles pour Pareto
      // Simulation pour l'exemple car les stats "count" seules ne suffisent pas pour croiser symptomes/traitements
      // On va créer une distribution plausible basée sur les stats réelles
      const rawPareto = [
         { name: 'Symptômes', val: data.symptomsCount || 0 },
         { name: 'Traitements', val: data.treatmentsCount || 0 },
         { name: 'Pathologies', val: data.pathologiesCount || 0 },
         { name: 'Cas Cliniques', val: data.clinicalCasesCount || 0 },
         // Ajout fake pour courbe
         { name: 'Images', val: (data.clinicalCasesCount || 10) * 2 } 
      ].sort((a,b) => b.val - a.val);

      const total = rawPareto.reduce((acc, i) => acc + i.val, 0);
      let acc = 0;
      const computedPareto = rawPareto.map(item => {
         acc += item.val;
         return {
            name: item.name,
            volume: item.val,
            cumulative: total > 0 ? Math.round((acc / total) * 100) : 0
         }
      });
      
      setParetoData(computedPareto);
      setLoading(false);
    }
    load();
  }, []);


  return (
    <div className="flex h-full min-h-screen bg-slate-50/50">
      <style jsx global>{`
        /* Masquer les scrollbars */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      `}</style>

      {/* 
        ZONE DROITE (PANEL EXPERT)
        Positionnée en "fixed right-0 top-0 h-screen" pour couvrir toute la hauteur
        z-index élevé pour passer au-dessus du header standard
       */}
      <div className="hidden xl:flex flex-col w-[320px] fixed top-0 right-0 h-screen bg-white border-l border-slate-200 shadow-2xl z-50 overflow-y-auto no-scrollbar py-6 px-5 gap-6">
        
        {/* Profil Expert */}
        <div className="text-center w-full pt-4">
          <div className="relative mx-auto w-24 h-24 mb-4 cursor-pointer group">
            <div className="absolute inset-0 rounded-full border-2 border-dashed border-blue-300 animate-spin-slow group-hover:border-[#052648]"></div>
            <img 
              src={PROF_IMG} 
              alt="Pr Jean Bahebec" 
              className="rounded-full object-cover w-full h-full border-4 border-white shadow-lg relative z-10"
              onError={(e) => { e.currentTarget.src = "https://ui-avatars.com/api/?name=Jean+Bahebec&background=052648&color=fff"; }} 
            />
            <div className="absolute bottom-1 right-1 w-5 h-5 bg-emerald-500 border-2 border-white rounded-full z-20"></div>
          </div>
          
          <h3 className="text-lg font-bold text-[#052648] leading-tight">Pr. Jean Bahebec</h3>
          <p className="text-xs text-slate-500 mt-1 font-medium">Chirurgien Orthopédiste • Yaoundé I</p>
          
          {/* Mini KPI Expert */}
          <div className="mt-6 flex justify-center divide-x divide-slate-100 bg-slate-50 p-3 rounded-xl border border-slate-100">
             <div className="px-4 text-center">
                 <span className="block text-xl font-bold text-[#052648]">{loading ? "-" : stats?.clinicalCasesCount}</span>
                 <span className="text-[9px] uppercase tracking-wider text-slate-400 font-bold">Cas</span>
             </div>
             <div className="px-4 text-center">
                 <span className="block text-xl font-bold text-emerald-600">{loading ? "-" : stats?.learnersCount}</span>
                 <span className="text-[9px] uppercase tracking-wider text-slate-400 font-bold">Élèves</span>
             </div>
          </div>
        </div>

        {/* Separateur */}
        <div className="w-full border-b border-dashed border-slate-200"></div>

        {/* Diagramme Circulaire (Donut) */}
        <div className="flex-1 min-h-[220px] flex flex-col">
            <h4 className="font-bold text-[#052648] text-xs uppercase tracking-wide mb-2 flex items-center gap-2">
                <AlertCircle size={14} className="text-blue-500"/> Répartition
            </h4>
            
            {loading ? <Skeleton className="w-full h-48 rounded-xl" /> : (
            <div className="relative flex-1 w-full h-48">
                <ResponsiveContainer width="100%" height="100%">
                    <PieChart>
                        <Pie
                            data={stats?.categoriesDistribution}
                            cx="50%" cy="50%"
                            innerRadius={55} outerRadius={75}
                            paddingAngle={4}
                            dataKey="value"
                            stroke="none"
                        >
                            {stats?.categoriesDistribution.map((entry, index) => (
                                <Cell key={`cell-${index}`} fill={entry.color} />
                            ))}
                        </Pie>
                        <Tooltip 
                            contentStyle={{ borderRadius: '12px', border: 'none', boxShadow: '0 4px 20px rgba(0,0,0,0.1)' }} 
                            itemStyle={{ fontSize: '12px', fontWeight: 'bold' }}
                        />
                    </PieChart>
                </ResponsiveContainer>
                {/* Centre Donut */}
                <div className="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
                     <span className="text-2xl font-bold text-[#052648]">{stats?.clinicalCasesCount}</span>
                     <span className="text-[10px] text-slate-400 uppercase font-bold">Total</span>
                </div>
            </div>
            )}
            
            {/* Légende Compacte */}
            <div className="flex flex-wrap justify-center gap-2 mt-2">
                {stats?.categoriesDistribution.slice(0, 3).map((cat, idx) => (
                    <div key={idx} className="flex items-center gap-1.5 px-2 py-1 bg-slate-50 rounded-md border border-slate-100">
                        <div className="w-2 h-2 rounded-full" style={{backgroundColor: cat.color}}></div>
                        <span className="text-[10px] font-semibold text-slate-600 truncate max-w-[60px]">{cat.name}</span>
                    </div>
                ))}
            </div>
        </div>
        
        {/* Actions Rapides en bas */}
        <div className="mt-auto space-y-2">
             <button className="w-full py-3 bg-[#052648] hover:bg-blue-900 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg shadow-blue-900/10 transition-all flex items-center justify-center gap-2 group">
                 <Activity size={14} className="group-hover:rotate-12 transition-transform"/>
                 Console Admin
             </button>
             <button className="w-full py-3 bg-white border border-slate-200 text-slate-600 hover:text-[#052648] hover:bg-slate-50 rounded-xl text-xs font-bold uppercase tracking-wider transition-colors">
                 Gestion Utilisateurs
             </button>
        </div>

      </div>

      {/* ---- ZONE GAUCHE (CONTENU) ---- */}
      {/* 
        Ajout de padding-right "xl:pr-[340px]" pour éviter que le contenu ne passe sous la sidebar fixe sur grand écran 
       */}
      <div className="flex-1 p-6 md:p-8 space-y-8 overflow-y-auto no-scrollbar xl:pr-[360px]">
        
        {/* 1. HERO (CTA) */}
        {loading ? (
          <Skeleton className="h-64 w-full rounded-3xl" />
        ) : (
          <div className="relative bg-white rounded-3xl p-8 md:p-10 shadow-sm border border-slate-100 overflow-hidden group">
            {/* Décoration BG */}
            <div className="absolute top-0 right-0 w-2/5 h-full opacity-10 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-blue-400 via-transparent to-transparent"></div>
            
            <div className="absolute -right-4 bottom-0 w-72 h-94 hidden lg:block opacity-90 ">
              <img 
                src="/images/fond.jpg" 
                alt="Medical Illustration" 
                className="object-contain w-full h-full drop-shadow-xl"
              />
            </div>

            <div className="relative z-10 max-w-xl">
              <div className="inline-flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-[11px] font-extrabold uppercase tracking-wider mb-4 border border-blue-100 shadow-sm">
                 <Brain size={12}/> Génération Expert v2.0
              </div>
              <h1 className="text-3xl md:text-4xl font-extrabold text-[#052648] mb-4 leading-tight tracking-tight">
                Pilotez la pédagogie médicale de précision.
              </h1>
              <p className="text-slate-500 mb-8 text-base md:text-lg leading-relaxed">
                Le module expert vous permet de générer, valider et superviser les cas cliniques en temps réel. Accédez à la base de données unifiée.
              </p>
              <button 
                onClick={() => router.push('/expert/create')}
                className="bg-[#052648] text-white pl-6 pr-5 py-3.5 rounded-xl font-bold text-sm shadow-lg shadow-blue-500/30 hover:bg-blue-700 hover:shadow-blue-600/40 hover:-translate-y-0.5 transition-all flex items-center gap-3 active:scale-95"
              >
                Générer un scénario <ArrowRight size={18} strokeWidth={2.5}/>
              </button>
            </div>
          </div>
        )}

        {/* 2. STATS & DIAGRAMME PARETO */}
        <div>
          <div className="flex items-center gap-3 mb-6">
              <div className="p-2 bg-indigo-50 rounded-lg text-indigo-600"><Activity size={20}/></div>
              <div>
                  <h2 className="text-xl font-bold text-[#052648]">Vue d'ensemble Analytique</h2>
                  <p className="text-slate-400 text-xs font-medium">Volumes de données & Diagramme de Pareto</p>
              </div>
          </div>

          {loading ? (
            <Skeleton className="h-80 w-full rounded-2xl" />
          ) : (
            <div className="bg-white p-6 rounded-2xl border border-slate-100 shadow-sm">
              <div className="h-[300px] w-full">
                <ResponsiveContainer width="100%" height="100%">
                  <ComposedChart data={paretoData} margin={{ top: 20, right: 30, left: 0, bottom: 5 }} barGap={2}>
                    <CartesianGrid strokeDasharray="3 3" stroke="#f1f5f9" vertical={false} />
                    <XAxis 
                      dataKey="name" 
                      tick={{ fill: '#94a3b8', fontSize: 12, fontWeight: 500 }} 
                      tickLine={false}
                      axisLine={{ stroke: '#e2e8f0' }}
                      dy={10}
                    />
                    <YAxis 
                      yAxisId="left"
                      tick={{ fill: '#94a3b8', fontSize: 11 }} 
                      tickLine={false}
                      axisLine={false}
                    />
                    <YAxis 
                      yAxisId="right"
                      orientation="right"
                      tick={{ fill: '#f59e0b', fontSize: 11, fontWeight: 'bold' }} 
                      tickLine={false}
                      axisLine={false}
                      domain={[0, 100]}
                      unit="%"
                    />
                    <Tooltip 
                      cursor={{fill: '#f8fafc', opacity: 0.6}}
                      contentStyle={{ borderRadius: '12px', border: 'none', boxShadow: '0 10px 15px -3px rgba(0,0,0,0.1)' }}
                    />
                    {/* Barres Volumes */}
                    <Bar yAxisId="left" dataKey="volume" radius={[4, 4, 0, 0]} barSize={50} name="Quantité">
                        {paretoData.map((entry, index) => (
                           <Cell key={`cell-${index}`} fill={index % 2 === 0 ? '#052648' : '#0c204b'} /> 
                        ))}
                    </Bar>
                    {/* Courbe Pareto */}
                    <Line 
                      yAxisId="right" 
                      type="monotone" 
                      dataKey="cumulative" 
                      name="Cumul (%)"
                      stroke="#f59e0b" 
                      strokeWidth={3}
                      dot={{ fill: '#fff', stroke: '#f59e0b', strokeWidth: 2, r: 4 }}
                      activeDot={{ r: 6, strokeWidth: 0, fill:'#f59e0b' }}
                    />
                  </ComposedChart>
                </ResponsiveContainer>
              </div>
            </div>
          )}
        </div>

        {/* 3. TABLEAU DERNIERS CAS (Moderne) */}
        <div>
          <h3 className="text-lg font-bold text-[#052648] mb-5 pl-3 border-l-4 border-blue-500 flex items-center justify-between">
              <span>Activités Récentes</span>
              <button className="text-xs text-blue-600 font-semibold hover:bg-blue-50 px-3 py-1.5 rounded-lg transition-colors">Tout voir</button>
          </h3>

          <div className="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
            {loading ? (
              <div className="p-4 space-y-3">
                {[1,2,3].map(k => <Skeleton key={k} className="h-12 w-full rounded-xl" />)}
              </div>
            ) : (
              <table className="w-full text-sm text-left border-collapse">
                <thead className="bg-slate-50/80 border-b border-slate-100">
                  <tr>
                    <th className="px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider w-2/5">Identité Cas</th>
                    <th className="px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider text-center">Niveau</th>
                    <th className="px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider text-center hidden sm:table-cell">Média</th>
                    <th className="px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider">Création</th>
                    <th className="px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider text-right">Actions</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-slate-50">
                  {stats?.recentCases.map((c) => {
                    const diffInfo = getDifficultyLevel(c.niveau_difficulte);
                    const name = c.pathologie_principale?.nom_fr || "Pathologie non définie";
                    const code = c.code_fultang || `CAS-${c.id}`;

                    return (
                      <tr key={c.id} className="hover:bg-slate-50/80 transition-colors group">
                        
                        <td className="px-6 py-4">
                          <div className="flex items-center gap-3">
                            <div className="p-2.5 rounded-xl bg-blue-50 text-blue-600 border border-blue-100 shrink-0">
                                <FileText size={18} strokeWidth={2}/>
                            </div>
                            <div className="flex flex-col max-w-[200px] xl:max-w-[250px]">
                              <span className="font-bold text-[#052648] text-sm truncate" title={name}>{name}</span>
                              <span className="text-[11px] font-mono text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded w-fit mt-0.5 border border-slate-200">{code}</span>
                            </div>
                          </div>
                        </td>
                        
                        <td className="px-6 py-4 text-center">
                          <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-[10px] font-bold border uppercase tracking-wide ${diffInfo.color} border-opacity-30`}>
                            {diffInfo.label}
                          </span>
                        </td>

                        <td className="px-6 py-4 text-center hidden sm:table-cell">
                             {c.nb_images + c.nb_sons > 0 ? (
                                <div className="inline-flex gap-1">
                                    {c.nb_images > 0 && <span className="px-2 py-1 bg-slate-100 rounded text-slate-500 text-xs font-medium border border-slate-200">Img:{c.nb_images}</span>}
                                    {c.nb_sons > 0 && <span className="px-2 py-1 bg-slate-100 rounded text-slate-500 text-xs font-medium border border-slate-200">Son:{c.nb_sons}</span>}
                                </div>
                             ) : <span className="text-slate-300 text-xs">-</span>}
                        </td>
                        
                        <td className="px-6 py-4 text-slate-500 text-xs font-medium tabular-nums">
                          {formatDate(c.created_at)}
                        </td>
                        
                        <td className="px-6 py-4 text-right">
                          <div className="flex items-center justify-end gap-1 opacity-60 group-hover:opacity-100 transition-opacity">
                            <button className="p-2 text-blue-600 hover:bg-blue-100 hover:text-blue-800 rounded-lg transition-colors" title="Détails">
                              <Eye size={16} strokeWidth={2.5}/>
                            </button>
                            <button className="p-2 text-amber-500 hover:bg-amber-50 hover:text-amber-700 rounded-lg transition-colors" title="Éditer">
                              <Edit size={16} strokeWidth={2.5}/>
                            </button>
                            <button className="p-2 text-rose-500 hover:bg-rose-50 hover:text-rose-700 rounded-lg transition-colors" title="Supprimer">
                              <Trash2 size={16} strokeWidth={2.5}/>
                            </button>
                          </div>
                        </td>

                      </tr>
                    );
                  })}
                </tbody>
              </table>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\CaseLybrary.tsx
================================================================================

// components/expert/CaseLibrary.tsx
'use client';

import React, { useState, useEffect, useMemo, useCallback } from 'react';
import { 
  Search, ChevronRight, Activity, 
  ArrowLeft, User, LayoutGrid,
  ImageIcon, Pill, ListPlus,
  Calendar, FileDigit, Stethoscope, Layers, Hash,
  Thermometer, AlertTriangle, Syringe,
  ArrowRight, FileText
} from 'lucide-react';
import { useRouter } from 'next/navigation';
import Image from 'next/image';
import { Skeleton } from '@/components/ui/Skeleton'; 
// Assurez-vous d'importer ou de corriger ce service pour qu'il accepte 'limit' en paramètre !
import { getAllClinicalCases, getClinicalCaseById } from '@/services/expertService';
import type { BackendClinicalCaseSimple, BackendClinicalCase } from '@/types/backend';
import { Button } from '@/components/ui/Button';
// AJOUTEZ CES IMPORTS:
import { deleteClinicalCase } from '@/services/expertService';
import { ActionMenu } from './ui/ActionMenu';
import ClinicalCaseModal from './ui/ClinicalCaseModal';
import { ConfirmDeleteModal } from './ui/ConfirmDeleteModal'; // Le petit modal de confirm
import toast from 'react-hot-toast';

// --- STYLES ---
const stylesGlobal = `
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
  /* Barre fine et élégante pour la navigation interne */
  .custom-scrollbar::-webkit-scrollbar { width: 5px; }
  .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
  .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 10px; }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover { background-color: #94a3b8; }
`;

// --- TYPES (Adaptés aux données JSON réelles) ---
interface SymptomData {
    symptome_id: number;
    details: string; 
    symptome?: {
        nom: string;
        categorie?: string;
        type_symptome?: string;
        signes_alarme?: boolean;
    }
}

interface RichCaseData extends Omit<BackendClinicalCase, 'donnees_paracliniques' | 'presentation_clinique'> {
    // Structure détaillée optionnelle venant de la vue complexe
    presentation_clinique_detail?: {
        histoire_maladie: string;
        antecedents?: string | null;
        symptomes_patient: SymptomData[];
    };
    presentation_clinique: {
        histoire_maladie: string;
    };
    medicaments_prescrits: Array<{ 
        medicament_id: number; 
        nom: string; 
        dose: string;
    }>;
    pathologies_secondaires: Array<{ 
        nom_fr: string; 
        code_icd10: string;
        categorie?: string;
    }>;
    images_associees: Array<{
        id: number;
        fichier_url: string;
        type_examen: string;
        description?: string;
    }>;
    donnees_paracliniques: {
        lab_results?: any[]; 
        examen_clinique?: string;
    };
}

// --- UTILS ---
const formatDate = (d: string) => {
    try {
        return new Date(d).toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' });
    } catch { return "Date inconnue"; }
};

const cleanValue = (val: string) => val ? val.replace(/^Valeur:\s*/i, '').trim() : '';

const getDiffColor = (level?: number) => {
    if (!level) return 'bg-gray-100 text-gray-600 border-gray-200';
    if (level <= 3) return 'bg-emerald-50 text-emerald-700 border-emerald-100';
    if (level <= 7) return 'bg-blue-50 text-blue-700 border-blue-100';
    return 'bg-amber-50 text-amber-700 border-amber-100';
};

export default function CaseLibrary() {
    const router = useRouter();

    // -- STATES --
    const [viewMode, setViewMode] = useState<'grid' | 'detail'>('grid');
    const [casesList, setCasesList] = useState<BackendClinicalCaseSimple[]>([]);
    
    // Etats de chargement
    const [loadingList, setLoadingList] = useState(true);
    const [loadingDetail, setLoadingDetail] = useState(false);
    
    // Recherche et Filtres
    const [search, setSearch] = useState("");
    const [selectedCategory, setSelectedCategory] = useState("Tous");
    
    // Le Cas en cours de lecture
    const [currentCase, setCurrentCase] = useState<RichCaseData | null>(null);
        // Gestion Menu Contextuel
    const [contextMenu, setContextMenu] = useState<{ x: number, y: number, id: number } | null>(null);
    
    // Gestion Modals
    const [modalState, setModalState] = useState<{ 
        type: 'create' | 'edit' | 'delete' | null, 
        caseData?: any 
    }>({ type: null });

        // ==============================================================
    // 1. CHARGEMENT DES DONNÉES (CORRECTION LIMIT 25 -> 500)
    // ==============================================================
    
    // Définition stable de loadList pour éviter les erreurs de référence
    const loadList = useCallback(async () => {
        setLoadingList(true);
        try {
            // Note importante : Les APIs Backend limitent souvent à 25 ou 50 par défaut (pagination).
            // On ajoute '?limit=500' pour récupérer tous vos cas cliniques.
            // Si la méthode service n'accepte pas d'argument, modifiez la dans services/expertService.ts
            const data = await getAllClinicalCases(); // Supposant que getAllClinicalCases gère params, ou est patchée
            
            // Si getAllClinicalCases n'accepte pas de param, allez modifier le service pour : return await apiClient(`/clinical-cases/?limit=500`);
            
            setCasesList(Array.isArray(data) ? data : []);
        } catch (e) {
            console.error("Erreur chargement:", e);
        } finally {
            setLoadingList(false);
        }
    }, []);

    useEffect(() => {
        loadList();
    }, [loadList]);

    // -- INIT : Charge tous les cas --
    useEffect(() => {
        const fetchAll = async () => {
            setLoadingList(true);
            try {
                // CORRECTION : Ici, l'appel API doit inclure ?limit=200 ou plus. 
                // Si votre fonction de service ne le permet pas, elle chargera par défaut 25 éléments.
                // En théorie: await getAllClinicalCases({ limit: 500 });
                const data = await getAllClinicalCases(); 
                setCasesList(Array.isArray(data) ? data : []);
            } catch (e) {
                console.error("Erreur chargement:", e);
            } finally {
                setLoadingList(false);
            }
        };
        fetchAll();
    }, []);

    // -- SELECTION D'UN CAS --
    const handleSelectCase = async (id: number) => {
        setLoadingDetail(true);
        setViewMode('detail');
        // On ne reset pas immédiatement currentCase pour éviter un flash blanc complet, on montre un loading par dessus ou on switch
        try {
            // Force le scroll en haut de l'article à chaque changement
            const articleDiv = document.getElementById('main-article-area');
            if (articleDiv) articleDiv.scrollTop = 0;

            const detail = await getClinicalCaseById(id) as unknown as RichCaseData;
            setCurrentCase(detail);
        } catch (e) {
            console.error(e);
        } finally {
            setLoadingDetail(false);
        }
    };

    // -- MEMO: FILTRES --
    const filteredCases = useMemo(() => {
        return casesList.filter(c => {
            const term = search.toLowerCase();
            const matchSearch = (c.code_fultang?.toLowerCase() || '').includes(term) || 
                                (c.pathologie_principale?.nom_fr?.toLowerCase() || '').includes(term);
            const cat = c.pathologie_principale?.categorie || "Autres";
            const matchCat = selectedCategory === "Tous" || cat === selectedCategory;
            return matchSearch && matchCat;
        });
    }, [casesList, search, selectedCategory]);

    const otherCases = useMemo(() => {
        if(!currentCase) return filteredCases;
        return filteredCases.filter(c => c.id !== currentCase.id);
    }, [filteredCases, currentCase]);

    const categories = useMemo(() => ["Tous", ...Array.from(new Set(casesList.map(c => c.pathologie_principale?.categorie || "Autres")))], [casesList]);

        // -- HANDLERS CRUD --

    // Ouvre le menu contextuel au bon endroit
    const handleContextMenu = (e: React.MouseEvent, id: number) => {
        e.preventDefault(); // Bloque le menu natif du navigateur
        // Calcule la position pour qu'il reste dans l'écran
        setContextMenu({ x: e.clientX, y: e.clientY, id });
    };

    // Ferme le menu
    const closeContextMenu = () => setContextMenu(null);

    // Déclencheurs actions
    const openCreate = () => setModalState({ type: 'create' });
    
    const openEdit = async (id: number) => {
        closeContextMenu();
        const toastId = toast.loading("Chargement des données...");
        try {
            const data = await getClinicalCaseById(id); // Récupère les données fraiches pour edit
            setModalState({ type: 'edit', caseData: data });
            toast.dismiss(toastId);
        } catch(e) {
            toast.error("Erreur récupération", {id: toastId});
        }
    };

    const openDelete = (id: number) => {
        closeContextMenu();
        // Pour supprimer on a juste besoin de l'ID, pas tout l'objet
        setModalState({ type: 'delete', caseData: { id } });
    };

    const confirmDelete = async () => {
        if (!modalState.caseData?.id) return;
        const toastId = toast.loading("Suppression...");
        try {
            await deleteClinicalCase(modalState.caseData.id);
            toast.success("Cas supprimé définitivement.", { id: toastId });
            loadList(); // Rafraichir
        } catch (e) {
            toast.error("Erreur suppression", { id: toastId });
        } finally {
            setModalState({ type: null });
        }
    };

    // Rafraichir après create/edit
    const handleSuccess = () => {
        loadList();
    };

    // ==============================================================
    // MODE DETAIL : LAYOUT 2 COLONNES (ARTICLE + LISTE DÉROULANTE)
    // ==============================================================
    if (viewMode === 'detail') {
        
    // 1. Récupération robuste du titre
    // On vérifie d'abord l'objet joint pathologie_principale, sinon on cherche dans le détail clinique
    const title = currentCase?.pathologie_principale?.nom_fr || 
                  currentCase?.presentation_clinique_detail?.histoire_maladie?.split(':')[0] || 
                  "Détail du cas clinique";
    
    // 2. Préparation de la date formatée
    const displayDate = currentCase?.created_at ? formatDate(currentCase.created_at) : "Date non renseignée";

    let storyText = currentCase?.presentation_clinique_detail?.histoire_maladie 
        || currentCase?.presentation_clinique?.histoire_maladie 
        || "Histoire indisponible.";
        storyText = storyText.replace(/Admission pour\s?:\s?/i, ''); // Nettoyage prefix

        const symptomsList = currentCase?.presentation_clinique_detail?.symptomes_patient || [];
        const comorbidities = currentCase?.pathologies_secondaires || [];
        const treatments = currentCase?.medicaments_prescrits || [];
        const images = currentCase?.images_associees || [];

        return (
            <div className="flex h-screen bg-white text-slate-900 font-sans overflow-hidden">
                <style>{stylesGlobal}</style>

                {/* ZONE GAUCHE : L'ARTICLE MÉDICAL (Scrollable) */}
                <div id="main-article-area" className="flex-1 h-full overflow-y-auto custom-scrollbar relative bg-slate-50/30">
                    
                    {/* Header Sticky au dessus de l'article */}
                    <div className="sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-slate-100 py-3 px-6 md:px-12 flex justify-between items-center transition-all">
                        <button 
                            onClick={() => setViewMode('grid')}
                            className="group flex items-center gap-2 text-sm font-semibold text-slate-500 hover:text-[#052648] transition-colors"
                        >
                            <span className="p-1.5 rounded-full bg-slate-100 group-hover:bg-[#052648] group-hover:text-white transition-colors">
                                <ArrowLeft size={16}/>
                            </span>
                            <span>Retour Grille</span>
                        </button>
                        
                        {!loadingDetail && currentCase && (
                            <div className="hidden md:flex items-center gap-3">
                                {/* Affichage de la date avec l'utilitaire formatDate */}
                                <div className="flex items-center gap-1.5 px-3 py-1 bg-slate-100 rounded-full text-slate-500 text-xs font-medium">
                                    <Calendar size={14}/>
                                    <span>{displayDate}</span>
                                </div>
                                
                                <span className="text-xs font-mono bg-[#052648]/5 px-2 py-1 rounded text-[#052648] border border-[#052648]/10">
                                    {currentCase.code_fultang}
                                </span>
                                
                                <span className={`text-[10px] font-bold px-2 py-0.5 rounded border uppercase ${getDiffColor(currentCase.niveau_difficulte)}`}>
                                    Niveau {currentCase.niveau_difficulte}
                                </span>
                            </div>
                        )}
                    </div>

                    {loadingDetail || !currentCase ? (
                        <div className="max-w-5xl mx-auto p-12 space-y-8 animate-pulse">
                            <Skeleton className="h-80 w-full rounded-2xl" />
                            <div className="space-y-4">
                                <Skeleton className="h-10 w-2/3" />
                                <Skeleton className="h-4 w-full" />
                                <Skeleton className="h-4 w-full" />
                            </div>
                        </div>
                    ) : (
                        // -- CONTENU EXACT DE VOTRE VUE QUI EST EXCELLENTE --
                        <main className="max-w-6xl mx-auto p-6 md:p-12 animate-in fade-in duration-500 pb-20">
                            
                            {/* COVER IMAGE */}
                            <div className="relative w-full h-[380px] md:h-[480px] rounded-3xl overflow-hidden group shadow-lg bg-slate-900 mb-10">
                                {images.length > 0 ? (
                                    <Image 
                                        src={images[0].fichier_url} 
                                        alt="Illustration Clinique" 
                                        fill 
                                        className="object-cover opacity-80 group-hover:scale-105 transition-transform duration-700"
                                        unoptimized
                                    />
                                ) : (
                                    <div className="absolute inset-0 bg-gradient-to-tr from-[#052648] to-blue-600 opacity-90" />
                                )}
                                <div className="absolute inset-0 bg-gradient-to-t from-black via-black/30 to-transparent"></div>
                                <div className="absolute bottom-0 left-0 w-full p-8 md:p-12 text-white">
                                    <h1 className="text-4xl md:text-5xl font-extrabold leading-tight mb-4 font-serif drop-shadow-sm">
                                        {title}
                                    </h1>
                                    <p className="text-blue-50 text-lg md:text-xl font-light line-clamp-2 max-w-4xl opacity-90">
                                        Présentation : {storyText}
                                    </p>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 lg:grid-cols-3 gap-10">
                                {/* MAIN CONTENT (2/3 width on large screens) */}
                                <div className="lg:col-span-2 space-y-12">
                                    
                                    {/* 1. TEXTE INTRO */}
                                    <section className="prose prose-lg prose-slate text-slate-600 leading-relaxed">
                                        <h3 className="flex items-center gap-2 text-[#052648] text-xl font-bold not-prose mb-4 border-b border-slate-200 pb-2">
                                            <FileText size={20}/> Anamnèse
                                        </h3>
                                        <p>{storyText}</p>
                                        <p className="italic text-sm text-slate-400 mt-2">ID: {currentCase.id} • Import MIMIC-III</p>
                                    </section>

                                    {/* 2. TABLEAU SYMPTOMATIQUE (Détail + Valeur) */}
                                    {symptomsList.length > 0 && (
                                        <section className="bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm">
                                            <div className="bg-slate-50 px-5 py-3 border-b border-slate-200">
                                                <h4 className="font-bold text-[#052648] flex items-center gap-2 text-sm uppercase tracking-wide">
                                                    <Stethoscope size={16}/> Relevé Sémiologique & Paraclinique
                                                </h4>
                                            </div>
                                            <div className="divide-y divide-slate-100">
                                                {symptomsList.map((s, idx) => (
                                                    <div key={idx} className="flex flex-col sm:flex-row sm:items-center justify-between p-4 hover:bg-slate-50 transition-colors gap-2">
                                                        <div className="flex flex-col">
                                                            <span className="font-semibold text-slate-800 text-sm">
                                                                {s.symptome?.nom || `Signe non listé (${s.symptome_id})`}
                                                            </span>
                                                            <span className="text-[10px] uppercase text-slate-400 font-medium">
                                                                {s.symptome?.categorie || "Observation"}
                                                            </span>
                                                        </div>
                                                        <div className="text-right">
                                                            <span className="inline-block px-2.5 py-1 bg-blue-50 text-blue-800 border border-blue-100 rounded text-sm font-mono font-medium shadow-sm">
                                                                {cleanValue(s.details) || "Positif"}
                                                            </span>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </section>
                                    )}

                                    {/* 3. GALERIE D'IMAGES COMPLÈTE */}
                                    {images.length > 0 && (
                                        <section>
                                            <h3 className="flex items-center gap-2 text-[#052648] text-xl font-bold mb-4">
                                                <ImageIcon size={20}/> Documentation Imagerie
                                            </h3>
                                            <div className="grid grid-cols-2 gap-4">
                                                {images.map((img, i) => (
                                                    <div key={i} className="group relative rounded-xl overflow-hidden bg-slate-900 border border-slate-200 cursor-pointer shadow-md aspect-video">
                                                        <Image
                                                            src={img.fichier_url}
                                                            alt={img.description || 'Medical Img'}
                                                            fill
                                                            className="object-cover transition-transform duration-500 group-hover:scale-105 opacity-90 group-hover:opacity-100"
                                                            unoptimized
                                                        />
                                                        <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity p-4 flex items-end">
                                                            <span className="text-white text-xs font-medium truncate w-full">{img.type_examen}</span>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </section>
                                    )}
                                </div>

                                {/* RIGHT COLUMN: INFO CARDS */}
                                <aside className="lg:col-span-1 space-y-8">
                                    
                                    {/* Pathologies Secondaires */}
                                    <div className="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                        <h4 className="font-bold text-red-700 flex items-center gap-2 text-sm uppercase tracking-wider mb-4 border-b border-red-50 pb-2">
                                            <AlertTriangle size={16}/> Comorbidités Actives
                                        </h4>
                                        <div className="space-y-3">
                                            {comorbidities.length > 0 ? comorbidities.map((patho, idx) => (
                                                <div key={idx} className="flex items-start gap-2 text-sm text-slate-700 group cursor-default">
                                                    <div className="mt-1.5 w-1.5 h-1.5 rounded-full bg-red-400 group-hover:bg-red-600 transition-colors shrink-0"></div>
                                                    <div>
                                                        <p className="font-medium leading-snug">{patho.nom_fr}</p>
                                                        {patho.code_icd10 && <span className="text-[10px] text-slate-400 bg-slate-100 px-1.5 rounded mt-0.5 inline-block">ICD: {patho.code_icd10}</span>}
                                                    </div>
                                                </div>
                                            )) : <p className="text-sm text-slate-400 italic">Aucune comorbidité relevée.</p>}
                                        </div>
                                    </div>

                                    {/* Traitements */}
                                    <div className="bg-[#052648] p-5 rounded-xl text-white shadow-lg relative overflow-hidden">
                                        <div className="absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -translate-y-10 translate-x-10 blur-xl"></div>
                                        <h4 className="font-bold text-blue-200 flex items-center gap-2 text-sm uppercase tracking-wider mb-4 relative z-10">
                                            <Pill size={16}/> Protocole
                                        </h4>
                                        <div className="space-y-2 relative z-10">
                                            {treatments.length > 0 ? treatments.map((med, i) => (
                                                <div key={i} className="flex justify-between items-center text-sm py-1 border-b border-white/10 last:border-0 hover:bg-white/5 transition px-2 -mx-2 rounded">
                                                    <span className="font-semibold">{med.nom}</span>
                                                    <span className="text-emerald-300 font-mono text-xs">{med.dose}</span>
                                                </div>
                                            )) : <p className="text-sm text-blue-200/50 italic">Pas de médicaments listés.</p>}
                                        </div>
                                    </div>

                                    {/* Action Rapide */}
                                    <div className="pt-4 border-t border-slate-200">
                                        <p className="text-xs text-slate-400 mb-2 text-center">Vous analysez un cas validé par le système expert.</p>
                                        <Button className="w-full bg-[#052648] hover:bg-blue-800" onClick={() => router.push(`/simulation?caseId=${currentCase.id}`)}>
                                            Lancer la Simulation <ArrowRight size={16} className="ml-2"/>
                                        </Button>
                                    </div>

                                </aside>
                            </div>
                        </main>
                    )}
                </div>

                {/* ZONE DROITE : SIDEBAR DE NAVIGATION (LISTE FIXE) */}
                <div className="w-80 md:w-96 bg-white border-l border-slate-200 flex flex-col z-20 h-full shadow-2xl shrink-0">
                    {/* Header Sidebar */}
                    <div className="p-5 border-b border-slate-200 bg-white sticky top-0 z-20">
                        <div className="flex items-center justify-between mb-4">
                            <h3 className="font-bold text-[#052648] uppercase tracking-wide text-xs flex items-center gap-2">
                                <ListPlus size={14}/> Index des Cas
                            </h3>
                            <span className="bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full text-[10px] font-bold border border-blue-100">
                                {otherCases.length} trouvés
                            </span>
                        </div>
                        
                        {/* Barre recherche Sidebar */}
                        <div className="relative group">
                            <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4" />
                            <input 
                                type="text"
                                placeholder="Filtrer la liste..."
                                className="w-full pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-[#052648]/20 focus:border-[#052648] outline-none transition-all"
                                value={search}
                                onChange={(e) => setSearch(e.target.value)}
                            />
                        </div>
                    </div>

                    {/* Liste Défilable */}
                    <div className="flex-1 overflow-y-auto custom-scrollbar p-3 space-y-3 bg-slate-50/50">
                        {loadingList ? (
                            Array.from({ length: 6 }).map((_, i) => <Skeleton key={i} className="h-20 w-full rounded-lg bg-white"/>)
                        ) : (
                            otherCases.map((c) => (
                                <div 
                                    key={c.id}
                                    onClick={() => handleSelectCase(c.id)}
                                    className={`
                                        group relative p-3 rounded-lg border transition-all cursor-pointer hover:shadow-md
                                        ${currentCase?.id === c.id 
                                            ? 'bg-blue-50 border-blue-500 ring-1 ring-blue-500/20' 
                                            : 'bg-white border-slate-200 hover:border-blue-300'
                                        }
                                    `}
                                >
                                    <div className="flex justify-between items-start mb-1">
                                        <div className="flex items-center gap-1.5">
                                            <span className={`w-2 h-2 rounded-full ${c.niveau_difficulte <= 3 ? 'bg-green-500' : 'bg-orange-500'}`}></span>
                                            <span className="text-[10px] font-mono text-slate-400 uppercase">{c.code_fultang}</span>
                                        </div>
                                        <ChevronRight size={14} className="text-slate-300 group-hover:text-blue-500 transition-colors" />
                                    </div>
                                    <h4 className="font-bold text-slate-800 text-sm leading-snug group-hover:text-[#052648] line-clamp-2">
                                        {c.pathologie_principale?.nom_fr || "Diagnostic non renseigné"}
                                    </h4>
                                    <div className="flex gap-2 mt-2 pt-2 border-t border-slate-100 border-dashed text-[10px] font-medium text-slate-500">
                                        {c.nb_images > 0 && <span className="flex items-center gap-1 text-blue-600"><ImageIcon size={10}/> Img</span>}
                                        {c.nb_sons > 0 && <span className="flex items-center gap-1 text-purple-600"><Activity size={10}/> Audio</span>}
                                        <span className="ml-auto">{new Date(c.created_at).toLocaleDateString('fr-FR', {month: 'short', year: '2-digit'})}</span>
                                    </div>
                                </div>
                            ))
                        )}
                        {otherCases.length === 0 && !loadingList && (
                            <div className="text-center p-8 text-slate-400 text-xs">
                                Aucune autre correspondance.
                            </div>
                        )}
                    </div>
                </div>

            </div>
        );
    }

    // ============================================
    // VUE 2 : MODE GRILLE (Liste initiale)
    // ============================================
    return (
        <div className="flex flex-col h-screen bg-slate-50 font-sans">
             
             <div className="bg-white border-b border-slate-200 px-8 py-5 flex items-center justify-between sticky top-0 z-30 shadow-sm/50">
                 <div>
                     <h1 className="text-2xl font-bold text-[#052648] flex items-center gap-2">
                        <LayoutGrid className="text-blue-500"/> Encyclopédie Clinique
                     </h1>
                     <p className="text-slate-500 text-sm mt-1">
                        Explorez les {filteredCases.length} cas cliniques existants. 
                     </p>
                 </div>
                 
                 <div className="flex gap-4">
                     <div className="relative w-80">
                         <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4" />
                         <input 
                            type="text"
                            placeholder="Rechercher par pathologie ou code..."
                            value={search}
                            onChange={(e) => setSearch(e.target.value)}
                            className="w-full bg-slate-100 pl-10 pr-4 py-2.5 rounded-xl text-sm focus:bg-white focus:ring-2 focus:ring-[#052648]/20 focus:border-[#052648] outline-none transition-all"
                         />
                     </div>
                     <Button onClick={openCreate} className="bg-[#052648] hover:bg-blue-900">
                         Nouveau
                     </Button>
                 </div>
             </div>

             <div className="flex-1 overflow-y-auto p-8 custom-scrollbar">
                 <style>{stylesGlobal}</style>

                 {loadingList ? (
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        {[1,2,3,4,5,6].map(n => <Skeleton key={n} className="h-72 rounded-2xl bg-white" />)}
                    </div>
                 ) : (
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20">
                        {filteredCases.map(c => {
                             const name = c.pathologie_principale?.nom_fr || "Diagnostic Inconnu";
                             const cat = c.pathologie_principale?.categorie || "Général";

                             return (
                                <div 
                                    key={c.id}
                                    onClick={() => handleSelectCase(c.id)}
                                    className="group bg-white rounded-2xl border border-slate-200 hover:border-blue-400 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer overflow-hidden h-[300px] flex flex-col"
                                >
                                    {/* Cover Visual */}
                                    <div className="h-36 bg-gradient-to-br from-slate-50 to-slate-200 relative flex items-center justify-center border-b border-slate-100 overflow-hidden">
                                        <div className="absolute top-0 right-0 w-16 h-16 bg-[#052648]/5 rounded-full blur-2xl transform translate-x-4 -translate-y-4"></div>
                                        <div className="absolute top-2 left-3 bg-white/90 backdrop-blur text-[9px] font-bold text-slate-500 uppercase px-2 py-0.5 rounded shadow-sm border border-slate-100">{cat}</div>
                                        
                                        <FileText size={36} className="text-slate-300 group-hover:scale-110 group-hover:text-blue-400 transition duration-500"/>
                                    </div>
                                    
                                    <div className="p-5 flex-1 flex flex-col">
                                        <div className="flex justify-between items-center mb-2">
                                            <span className={`px-2 py-0.5 rounded text-[9px] font-bold border uppercase ${getDiffColor(c.niveau_difficulte)}`}>Niveau {c.niveau_difficulte}</span>
                                            <span className="text-[10px] text-slate-400 font-mono bg-slate-50 px-1 rounded">{new Date(c.created_at).toLocaleDateString()}</span>
                                        </div>
                                        
                                        <h3 className="font-bold text-[#052648] text-base leading-snug mb-1 line-clamp-2 group-hover:text-blue-600 transition-colors" title={name}>
                                            {name}
                                        </h3>
                                        <p className="text-xs text-slate-400 font-mono mb-4">{c.code_fultang}</p>

                                        <div className="mt-auto pt-3 border-t border-slate-50 flex items-center justify-between text-[10px] text-slate-500 font-semibold uppercase tracking-wide">
                                             <div className="flex gap-2">
                                                <span className="flex items-center gap-1 text-blue-600"> {c.nb_images} Images <ImageIcon size={12}/></span>
                                                 <span className="flex items-center gap-1 text-purple-600"> {c.nb_sons} Audio <Activity size={12}/></span>
                                             </div>
                                             <div className="group-hover:translate-x-1 transition-transform text-[#052648]">
                                                 Ouvrir <ArrowRight size={10} className="inline ml-0.5"/>
                                             </div>
                                        </div>
                                    </div>
                                </div>
                             )
                        })}

                        {filteredCases.length === 0 && (
                            <div className="col-span-full h-60 flex flex-col items-center justify-center text-slate-400">
                                <Search size={32} className="mb-2 opacity-50"/>
                                <p className="text-sm">Aucun résultat trouvé pour votre recherche.</p>
                            </div>
                        )}
                    </div>
                 )}
             </div>
                          {/* 
                === INTEGRATION DES MODALES ICI EN BAS DE RETOUR ===
             */}
             
             {/* 1. Menu Contextuel Flottant */}
             {contextMenu && (
                 <ActionMenu 
                    x={contextMenu.x} 
                    y={contextMenu.y}
                    onClose={closeContextMenu}
                    onDetails={() => { handleSelectCase(contextMenu.id); closeContextMenu(); }}
                    onEdit={() => openEdit(contextMenu.id)}
                    onDelete={() => openDelete(contextMenu.id)}
                 />
             )}

             {/* 2. Modal Formulaire (Create/Edit) */}
             <ClinicalCaseModal 
                isOpen={modalState.type === 'create' || modalState.type === 'edit'}
                mode={modalState.type === 'edit' ? 'edit' : 'create'}
                onClose={() => setModalState({ type: null })}
                onSuccess={handleSuccess}
                caseId={modalState.caseData?.id}
                initialData={modalState.caseData}
             />

             {/* 3. Modal Delete Confirm */}
             <ConfirmDeleteModal 
                isOpen={modalState.type === 'delete'}
                isLoading={false} // Vous pouvez gérer un état local loading si vous voulez
                onClose={() => setModalState({ type: null })}
                onConfirm={confirmDelete}
             />
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\Disease.tsx
================================================================================

// components/expert/Disease.tsx
'use client';

import React, { useState, useEffect, useMemo } from 'react';
import { 
  Bug, Search, Plus, Filter, Activity, 
  MoreVertical, Edit2, Trash2, MapPin, Globe, BookOpen, Layers,
  X, ChevronLeft, ChevronRight, ChevronFirst, ChevronLast 
} from 'lucide-react';
import toast from 'react-hot-toast';
import { getAllDiseases, deleteDisease } from '@/services/expertService';
import type { BackendDisease } from '@/types/backend';
import DiseaseModal from './disease/DiseaseModal'; 
import { Skeleton } from '@/components/ui/Skeleton';
import { Button } from '@/components/ui/Button';

// --- STYLES & HELPERS ---
const styles = `
  .custom-scrollbar::-webkit-scrollbar { width: 5px; height: 5px; }
  .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 4px; }
  .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
  .no-scrollbar::-webkit-scrollbar { display: none; }
  
  @supports(padding: max(0px)) {
    .safe-area-bottom {
      padding-bottom: max(1rem, env(safe-area-inset-bottom));
    }
  }
`;

// Helper couleur sévérité
const getSeverityBadge = (level?: number) => {
    switch (level) {
        case 1: return { label: 'Bénin', class: 'bg-green-100 text-green-700 border-green-200' };
        case 2: return { label: 'Modéré', class: 'bg-blue-100 text-blue-700 border-blue-200' };
        case 3: return { label: 'Sérieux', class: 'bg-amber-100 text-amber-700 border-amber-200' };
        case 4: return { label: 'Grave', class: 'bg-orange-100 text-orange-700 border-orange-200' };
        case 5: return { label: 'Critique', class: 'bg-red-100 text-red-700 border-red-200' };
        default: return { label: 'Inconnu', class: 'bg-slate-100 text-slate-600 border-slate-200' };
    }
};

export default function DiseaseLibrary() {
    // -- ETATS DONNÉES --
    const [diseases, setDiseases] = useState<BackendDisease[]>([]);
    const [loading, setLoading] = useState(true);
    const [search, setSearch] = useState('');
    
    // Pagination
    const [currentPage, setCurrentPage] = useState(1);
    const itemsPerPage = 10;

    // Selection & UI
    const [selectedDisease, setSelectedDisease] = useState<BackendDisease | null>(null);
    const [contextMenuId, setContextMenuId] = useState<number | null>(null);
    
    // Modal
    const [showModal, setShowModal] = useState(false);
    const [modalMode, setModalMode] = useState<'create'|'edit'>('create');

    // -- CHARGEMENT --
    useEffect(() => {
        loadData();
    }, []);

    const loadData = async () => {
        setLoading(true);
        try {
            const data = await getAllDiseases();
            setDiseases(Array.isArray(data) ? data : []);
        } catch (e) {
            console.error(e);
            toast.error("Impossible de charger le référentiel pathologies");
        } finally {
            setLoading(false);
        }
    };

    // -- HANDLERS --
    const handleDelete = async (id: number) => {
        if (!confirm("Attention : supprimer une pathologie peut casser les cas cliniques associés. Continuer ?")) return;
        
        const tid = toast.loading("Suppression du registre...");
        try {
            await deleteDisease(id);
            if(selectedDisease?.id === id) setSelectedDisease(null);
            loadData();
            toast.success("Pathologie retirée", {id: tid});
        } catch(e) {
            toast.error("Erreur technique suppression", {id: tid});
        }
    };

    const handleEdit = (d: BackendDisease) => {
        setSelectedDisease(d); 
        setModalMode('edit');
        setShowModal(true);
        setContextMenuId(null);
    };

    const handleCreate = () => {
        setModalMode('create');
        setShowModal(true);
    };

    // -- FILTER --
    const filteredDiseases = useMemo(() => {
        const lowerS = search.toLowerCase();
        return diseases.filter(d => 
            d.nom_fr.toLowerCase().includes(lowerS) || 
            d.code_icd10.toLowerCase().includes(lowerS) ||
            d.categorie?.toLowerCase().includes(lowerS)
        );
    }, [diseases, search]);

    // -- PAGINATION LOGIC --
    useEffect(() => {
        setCurrentPage(1);
    }, [search]);

    const totalPages = Math.ceil(filteredDiseases.length / itemsPerPage);
    const startIndex = (currentPage - 1) * itemsPerPage;
    const paginatedDiseases = filteredDiseases.slice(startIndex, startIndex + itemsPerPage);

    const goToPage = (page: number) => {
        if (page >= 1 && page <= totalPages) {
            setCurrentPage(page);
        }
    };

    return (
        <div className="flex h-[calc(100vh-80px)] bg-slate-50 font-sans overflow-hidden text-slate-800 relative w-full">
            <style>{styles}</style>

            {/* FOND DE CLIC POUR FERMER MENU CONTEXTUEL */}
            {contextMenuId !== null && <div className="fixed inset-0 z-20" onClick={() => setContextMenuId(null)}></div>}

            {/* === COLONNE GAUCHE (LISTE PRINCIPALE) === */}
            <div className={`
                flex flex-col h-full bg-slate-50 w-full transition-all duration-300
                ${selectedDisease ? 'hidden lg:flex lg:flex-1' : 'flex'} 
            `}>
                
                {/* Header Actions - Optimisé mobile */}
                <div className="px-3 sm:px-4 md:px-6 lg:px-8 py-3 sm:py-4 lg:py-5 flex flex-col gap-3 sticky top-0 bg-slate-50 z-10 border-b border-slate-200/50">
                    {/* Titre */}
                    <div className="flex items-center justify-between gap-2">
                        <div className="min-w-0 flex-1">
                            <h1 className="text-lg sm:text-xl md:text-2xl font-bold text-[#052648] flex items-center gap-1.5 sm:gap-2">
                                <Bug className="text-red-500 shrink-0 w-5 h-5 sm:w-6 sm:h-6"/> 
                                <span className="truncate">Référentiel Pathologies</span>
                            </h1>
                            <p className="text-slate-500 text-[10px] sm:text-xs md:text-sm mt-0.5 sm:mt-1 line-clamp-1">
                                Gérez les maladies et codes CIM-10.
                            </p>
                        </div>
                        
                        {/* Bouton Add - Mobile compact */}
                        <Button 
                            onClick={handleCreate} 
                            className="bg-[#052648] hover:bg-blue-900 text-white rounded-lg sm:rounded-xl shadow-md flex items-center gap-1 sm:gap-1.5 h-9 sm:h-10 px-2.5 sm:px-3 md:px-4 shrink-0"
                        >
                            <Plus size={16} className="sm:w-[18px] sm:h-[18px]"/>
                            <span className="text-xs sm:text-sm font-medium">Ajouter</span>
                        </Button>
                    </div>
                    
                    {/* Barre de recherche */}
                    <div className="relative group w-full">
                        <Search className="absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors w-3.5 h-3.5 sm:w-4 sm:h-4"/>
                        <input 
                            type="text" 
                            placeholder="Rechercher pathologie, code CIM-10..." 
                            value={search}
                            onChange={(e) => setSearch(e.target.value)}
                            className="w-full bg-white border border-slate-200 rounded-lg sm:rounded-xl pl-8 sm:pl-9 pr-3 py-2 sm:py-2.5 text-xs sm:text-sm focus:ring-2 focus:ring-[#052648]/20 focus:border-[#052648] outline-none shadow-sm transition-all"
                        />
                    </div>
                </div>

                {/* Table Header Row - Adaptatif */}
                <div className="hidden sm:flex px-3 sm:px-4 md:px-6 lg:px-8 py-2 text-[10px] sm:text-xs font-bold text-slate-500 uppercase tracking-wider items-center gap-2 md:gap-4 bg-slate-50 shrink-0">
                    <div className="w-[15%] sm:w-[12%] pl-1">Code</div>
                    <div className="flex-1 sm:w-[35%] md:w-[30%]">Pathologie</div>
                    <div className="hidden md:block w-[18%]">Catégorie</div>
                    <div className="w-[18%] md:w-[15%] text-center">Gravité</div>
                    <div className="hidden lg:block w-[15%] text-center">Prévalence</div>
                    <div className="w-6 sm:w-8 ml-auto"></div>
                </div>

                {/* LISTE DÉFILABLE - Optimisée mobile */}
                <div className="flex-1 overflow-y-auto px-2 sm:px-3 md:px-6 lg:px-8 custom-scrollbar space-y-1.5 sm:space-y-2 pt-1 pb-2">
                     {loading ? (
                         [1,2,3,4,5,6,7].map(i => <Skeleton key={i} className="h-16 sm:h-14 w-full rounded-lg sm:rounded-xl bg-white mb-2"/>)
                     ) : paginatedDiseases.length > 0 ? (
                         paginatedDiseases.map((d) => {
                             const severity = getSeverityBadge(d.niveau_gravite);
                             
                             return (
                                 <div 
                                    key={d.id}
                                    onClick={() => setSelectedDisease(d)}
                                    className={`
                                        flex items-center gap-2 sm:gap-3 md:gap-4 px-2.5 sm:px-3 md:px-4 py-2.5 sm:py-3 bg-white border rounded-lg sm:rounded-xl cursor-pointer transition-all shadow-sm active:scale-[0.98]
                                        ${selectedDisease?.id === d.id 
                                            ? 'border-l-4 border-l-[#052648] border-y-slate-200 border-r-slate-200 bg-slate-50 ring-1 ring-[#052648]/10' 
                                            : 'border-slate-200 border-l-transparent hover:border-blue-300'
                                        }
                                    `}
                                 >
                                    {/* Code CIM-10 */}
                                    <div className="w-[18%] sm:w-[15%] md:w-[12%] font-mono font-bold text-[#052648] bg-slate-100/80 rounded px-1 sm:px-1.5 py-1 text-[9px] sm:text-[10px] md:text-xs text-center shrink-0">
                                        {d.code_icd10}
                                    </div>
                                    
                                    {/* Nom Pathologie */}
                                    <div className="flex-1 min-w-0">
                                        <div className="font-semibold text-slate-800 text-xs sm:text-sm truncate" title={d.nom_fr}>
                                            {d.nom_fr}
                                        </div>
                                        {/* Mobile: infos sous le nom */}
                                        <div className="sm:hidden flex flex-wrap gap-1.5 mt-1">
                                            <span className={`text-[8px] px-1.5 py-0.5 rounded-full border font-bold ${severity.class}`}>
                                                {severity.label}
                                            </span>
                                            {d.categorie && (
                                                <span className="text-[8px] text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded-full truncate max-w-[120px]">
                                                    {d.categorie}
                                                </span>
                                            )}
                                        </div>
                                    </div>

                                    {/* Categorie (Tablette+) */}
                                    <div className="hidden md:flex w-[18%] items-center gap-1.5 min-w-0">
                                        <span className="p-1 bg-blue-50 text-blue-600 rounded-md shrink-0">
                                            <Activity size={12}/>
                                        </span>
                                        <span className="text-xs text-slate-600 truncate">{d.categorie || "Général"}</span>
                                    </div>

                                    {/* Gravité (Tablette+) */}
                                    <div className="hidden sm:flex w-[18%] md:w-[15%] justify-center">
                                        <span className={`px-2 sm:px-2.5 py-0.5 rounded-full text-[9px] sm:text-[10px] font-bold border uppercase tracking-wide whitespace-nowrap ${severity.class}`}>
                                            {severity.label}
                                        </span>
                                    </div>

                                    {/* Prévalence (Desktop) */}
                                    <div className="hidden lg:flex w-[15%] justify-center text-xs text-slate-500 truncate px-2">
                                        {d.prevalence_cameroun ? (
                                            <span className="flex items-center gap-1 truncate" title={String(d.prevalence_cameroun)}>
                                                <MapPin size={12} className="shrink-0"/> 
                                                <span className="truncate">{d.prevalence_cameroun}</span>
                                            </span>
                                        ) : <span className="text-slate-300">-</span>}
                                    </div>

                                    {/* Actions */}
                                    <div className="ml-auto w-6 sm:w-8 flex justify-end relative shrink-0">
                                         <button 
                                            onClick={(e) => { e.stopPropagation(); setContextMenuId(contextMenuId === d.id ? null : d.id); }}
                                            className="p-1 sm:p-1.5 text-slate-400 hover:text-slate-700 hover:bg-slate-100 rounded-full transition"
                                         >
                                             <MoreVertical size={14} className="sm:w-4 sm:h-4"/>
                                         </button>
                                         
                                         {/* Menu Contextuel */}
                                         {contextMenuId === d.id && (
                                            <div className="absolute top-8 right-0 w-32 sm:w-36 bg-white border border-slate-200 rounded-lg sm:rounded-xl shadow-xl py-1 z-30 animate-in fade-in zoom-in-95 origin-top-right">
                                                <button onClick={(e) => { e.stopPropagation(); handleEdit(d); }} className="w-full text-left px-3 sm:px-4 py-2 sm:py-3 text-[11px] sm:text-xs font-semibold text-slate-700 hover:bg-blue-50 flex items-center gap-2">
                                                    <Edit2 size={12} className="sm:w-[14px] sm:h-[14px] text-blue-500"/> Éditer
                                                </button>
                                                <div className="h-px bg-slate-100 my-1"/>
                                                <button onClick={(e) => { e.stopPropagation(); handleDelete(d.id); }} className="w-full text-left px-3 sm:px-4 py-2 sm:py-3 text-[11px] sm:text-xs font-semibold text-red-600 hover:bg-red-50 flex items-center gap-2">
                                                    <Trash2 size={12} className="sm:w-[14px] sm:h-[14px]"/> Supprimer
                                                </button>
                                            </div>
                                         )}
                                    </div>
                                 </div>
                             );
                         })
                     ) : (
                         <div className="flex flex-col items-center justify-center h-48 sm:h-64 text-slate-400 px-4">
                             <Search size={32} className="sm:w-10 sm:h-10 mb-3 sm:mb-4 opacity-50"/>
                             <p className="text-sm sm:text-base text-center">Aucune pathologie trouvée.</p>
                             {search && (
                                 <button 
                                    onClick={() => setSearch('')}
                                    className="mt-3 text-xs text-blue-600 hover:text-blue-700 underline"
                                 >
                                    Réinitialiser la recherche
                                 </button>
                             )}
                         </div>
                     )}
                </div>

                {/* PAGINATION - Responsive */}
                {!loading && filteredDiseases.length > itemsPerPage && (
                    <div className="border-t border-slate-200 p-2 sm:p-3 md:p-4 bg-white/50 flex justify-center items-center gap-1 sm:gap-2 shrink-0 z-10 sticky bottom-0">
                        <button 
                            onClick={() => goToPage(1)} 
                            disabled={currentPage === 1}
                            className="p-1.5 sm:p-2 text-slate-500 hover:text-[#052648] hover:bg-slate-100 rounded-md sm:rounded-lg disabled:opacity-30 disabled:hover:bg-transparent transition-all"
                            aria-label="Première page"
                        >
                            <ChevronFirst size={14} className="sm:w-4 sm:h-4" />
                        </button>
                        <button 
                            onClick={() => goToPage(currentPage - 1)} 
                            disabled={currentPage === 1}
                            className="p-1.5 sm:p-2 text-slate-500 hover:text-[#052648] hover:bg-slate-100 rounded-md sm:rounded-lg disabled:opacity-30 disabled:hover:bg-transparent transition-all"
                            aria-label="Page précédente"
                        >
                            <ChevronLeft size={14} className="sm:w-4 sm:h-4" />
                        </button>
                        
                        <span className="text-[11px] sm:text-sm text-slate-600 font-medium px-1.5 sm:px-2 min-w-[100px] sm:min-w-[120px] text-center">
                           Page {currentPage} / {totalPages}
                        </span>

                        <button 
                            onClick={() => goToPage(currentPage + 1)} 
                            disabled={currentPage === totalPages}
                            className="p-1.5 sm:p-2 text-slate-500 hover:text-[#052648] hover:bg-slate-100 rounded-md sm:rounded-lg disabled:opacity-30 disabled:hover:bg-transparent transition-all"
                            aria-label="Page suivante"
                        >
                            <ChevronRight size={14} className="sm:w-4 sm:h-4" />
                        </button>
                        <button 
                            onClick={() => goToPage(totalPages)} 
                            disabled={currentPage === totalPages}
                            className="p-1.5 sm:p-2 text-slate-500 hover:text-[#052648] hover:bg-slate-100 rounded-md sm:rounded-lg disabled:opacity-30 disabled:hover:bg-transparent transition-all"
                            aria-label="Dernière page"
                        >
                            <ChevronLast size={14} className="sm:w-4 sm:h-4" />
                        </button>
                    </div>
                )}
            </div>

            {/* === PANEL DETAIL (RESPONSIVE) === */}
            {selectedDisease && (
                <aside className={`
                    fixed inset-0 z-40 bg-white flex flex-col
                    lg:static lg:w-[380px] xl:w-[420px] lg:border-l lg:border-slate-200 lg:shadow-xl
                    animate-in slide-in-from-right duration-300
                `}>
                    
                    {/* Panel Header */}
                    <div className="p-4 sm:p-5 md:p-6 border-b border-slate-100 bg-[#052648] text-white shrink-0">
                         <div className="flex justify-between items-start mb-3 sm:mb-4">
                             {/* Bouton retour Mobile */}
                             <button 
                                onClick={() => setSelectedDisease(null)} 
                                className="flex items-center gap-1 text-white/80 hover:text-white lg:hidden transition-colors active:scale-95"
                             >
                                 <ChevronLeft size={16} className="sm:w-[18px] sm:h-[18px]"/>
                                 <span className="text-xs sm:text-sm font-bold">Retour</span>
                             </button>
                             
                             {/* Badge catégorie Desktop */}
                             <span className="hidden lg:block bg-white/20 px-2.5 py-1 rounded text-[10px] uppercase font-bold tracking-widest">
                                {selectedDisease.categorie || "GENERAL"}
                             </span>
                             
                             {/* Bouton fermer Desktop */}
                             <button 
                                onClick={() => setSelectedDisease(null)} 
                                className="hidden lg:block text-white/70 hover:text-white transition bg-white/10 hover:bg-white/20 p-1.5 rounded-full active:scale-95"
                                aria-label="Fermer"
                             >
                                <X size={16} />
                             </button>
                         </div>

                         <h2 className="text-xl sm:text-2xl md:text-3xl font-bold leading-tight mt-2 break-words">
                            {selectedDisease.nom_fr}
                         </h2>
                         
                         <div className="flex flex-wrap gap-2 mt-3">
                            {selectedDisease.nom_en && (
                                <span className="text-[10px] sm:text-xs text-blue-200 italic px-2 py-0.5 sm:py-1 bg-blue-900/30 rounded border border-blue-500/30 truncate max-w-full">
                                    En: {selectedDisease.nom_en}
                                </span>
                            )}
                            {selectedDisease.nom_local && (
                                <span className="text-[10px] sm:text-xs text-emerald-300 bg-emerald-900/40 px-2 py-0.5 sm:py-1 rounded-full border border-emerald-500/30 truncate max-w-full">
                                    Loc: {selectedDisease.nom_local}
                                </span>
                            )}
                         </div>
                    </div>

                    {/* Panel Content (Scrollable) */}
                    <div className="flex-1 overflow-y-auto p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-5 md:space-y-6 custom-scrollbar bg-slate-50/30">
                        
                        {/* Info Grid */}
                        <div className="grid grid-cols-2 gap-2 sm:gap-3">
                             <div className="p-3 sm:p-3.5 md:p-4 bg-white border border-slate-200 rounded-lg sm:rounded-xl shadow-sm text-center">
                                 <span className="text-[9px] sm:text-[10px] font-bold text-slate-400 uppercase block mb-1">Code CIM-10</span>
                                 <p className="text-base sm:text-lg md:text-xl font-mono font-bold text-[#052648] break-all">
                                    {selectedDisease.code_icd10}
                                 </p>
                             </div>
                             <div className="p-3 sm:p-3.5 md:p-4 bg-white border border-slate-200 rounded-lg sm:rounded-xl shadow-sm text-center flex flex-col items-center justify-center">
                                 <span className="text-[9px] sm:text-[10px] font-bold text-slate-400 uppercase block mb-1">Gravité</span>
                                 {(() => {
                                     const badge = getSeverityBadge(selectedDisease.niveau_gravite);
                                     return (
                                        <span className={`text-[10px] sm:text-xs px-2 py-0.5 sm:py-1 rounded font-bold uppercase inline-block ${badge.class}`}>
                                            {badge.label}
                                        </span>
                                     )
                                 })()}
                             </div>
                        </div>

                        {/* Description */}
                        <div className="bg-white p-4 sm:p-5 rounded-lg sm:rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                             <div className="absolute top-0 left-0 w-1 h-full bg-blue-500"></div>
                             <h3 className="text-xs sm:text-sm font-bold text-[#052648] uppercase mb-2 flex items-center gap-2">
                                <BookOpen size={14} className="sm:w-4 sm:h-4"/> Description
                             </h3>
                             <p className="text-xs sm:text-sm text-slate-700 leading-relaxed text-justify">
                                 {selectedDisease.description || (
                                    <span className="italic text-slate-400">Aucune description disponible.</span>
                                 )}
                             </p>
                        </div>

                        {/* Physiopathologie */}
                        <div className="bg-white p-4 sm:p-5 rounded-lg sm:rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                             <div className="absolute top-0 left-0 w-1 h-full bg-emerald-500"></div>
                             <h3 className="text-xs sm:text-sm font-bold text-[#052648] uppercase mb-2 flex items-center gap-2">
                                <Layers size={14} className="sm:w-4 sm:h-4"/> Physiopathologie
                             </h3>
                             <div className="bg-slate-50 p-3 rounded-lg border border-slate-100">
                                 <p className="text-[11px] sm:text-xs text-slate-600 font-mono leading-relaxed break-words">
                                     {selectedDisease.physiopathologie || "Donnée manquante pour le moteur expert."}
                                 </p>
                             </div>
                        </div>
                        
                        {/* Contexte Local */}
                        <div className="bg-orange-50 p-3 sm:p-4 rounded-lg sm:rounded-xl border border-orange-100 flex flex-col sm:flex-row items-start gap-2.5 sm:gap-3">
                             <div className="p-2 bg-orange-100 text-orange-600 rounded-lg shrink-0">
                                <Globe size={16} className="sm:w-[18px] sm:h-[18px]" />
                             </div>
                             <div className="flex-1 min-w-0">
                                 <h4 className="text-[10px] sm:text-xs font-bold text-orange-800 uppercase mb-1">
                                    Contexte Cameroun
                                 </h4>
                                 <p className="text-[11px] sm:text-xs text-orange-900 leading-relaxed">
                                     {selectedDisease.prevalence_cameroun || "Données épidémiologiques non renseignées pour cette région."}
                                 </p>
                             </div>
                        </div>
                    </div>
                    
                    {/* Panel Footer */}
                    <div className="p-3 sm:p-4 border-t border-slate-200 bg-white flex justify-between gap-2 sm:gap-3 shrink-0 safe-area-bottom">
                         <Button 
                            variant="outline" 
                            onClick={() => handleDelete(selectedDisease.id)} 
                            className="bg-red-50 hover:bg-red-100 text-red-600 border-red-100 px-3 sm:px-4 h-10 sm:h-11"
                         >
                             <Trash2 size={16} className="sm:w-[18px] sm:h-[18px]"/>
                         </Button>
                         <Button 
                            onClick={() => handleEdit(selectedDisease)} 
                            className="flex-1 bg-[#052648] hover:bg-blue-900 text-white font-bold">
                             Modifier la fiche
                         </Button>
                    </div>

                </aside>
            )}

            {/* --- MODAL FORM --- */}
            <DiseaseModal 
                isOpen={showModal}
                onClose={() => setShowModal(false)}
                mode={modalMode}
                initialData={selectedDisease}
                onSuccess={() => { loadData(); if(selectedDisease) setSelectedDisease(null); }} 
            />
            
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\Drug.tsx
================================================================================

'use client';

import React, { useState, useEffect, useMemo } from 'react';
import { 
  Pill, Search, Plus, Filter, Syringe, Tablets, 
  Info, AlertTriangle, MoreVertical, Edit2, Trash2, 
  MapPin, FlaskConical, Stethoscope, FileText, X
} from 'lucide-react';
import toast from 'react-hot-toast';
import { getAllMedications, deleteMedication } from '@/services/expertService';
import type { BackendMedication } from '@/types/backend';
import MedicationModal from './medication/MedicationModal';
import { Button } from '@/components/ui/Button'; // Utilisation cohérente de vos composants UI

// --- CONFIG STYLES ---
const styles = `
  .custom-scrollbar::-webkit-scrollbar { width: 5px; height: 5px; }
  .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 4px; }
  .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
`;

// Helper pour badges de disponibilité
const AvailabilityBadge = ({ status }: { status?: string }) => {
    if (!status || status === 'Disponible') {
        return <span className="px-2.5 py-1 rounded-full text-[10px] font-bold bg-emerald-50 text-emerald-600 border border-emerald-100 whitespace-nowrap">Disponible</span>;
    }
    if (status.includes('Indisponible') || status.includes('Rupture')) {
        return <span className="px-2.5 py-1 rounded-full text-[10px] font-bold bg-red-50 text-red-600 border border-red-100 whitespace-nowrap">Rupture</span>;
    }
    return <span className="px-2.5 py-1 rounded-full text-[10px] font-bold bg-orange-50 text-orange-600 border border-orange-100 whitespace-nowrap">{status}</span>;
};

export default function DrugLibrary() {
    // États Données
    const [medications, setMedications] = useState<BackendMedication[]>([]);
    const [loading, setLoading] = useState(true);
    const [search, setSearch] = useState('');
    const [selectedMed, setSelectedMed] = useState<BackendMedication | null>(null);

    // États UI
    const [showModal, setShowModal] = useState(false);
    const [modalMode, setModalMode] = useState<'create'|'edit'>('create');
    const [contextMenuId, setContextMenuId] = useState<number | null>(null); 

    // Chargement initial
    useEffect(() => {
        loadMeds();
    }, []);

    const loadMeds = async () => {
        setLoading(true);
        try {
            const data = await getAllMedications();
            setMedications(Array.isArray(data) ? data : []);
        } catch (e) {
            console.error(e);
            toast.error("Erreur de chargement du référentiel");
        } finally {
            setLoading(false);
        }
    };

    // Actions
    const handleDelete = async (id: number) => {
        if (!confirm("Voulez-vous vraiment supprimer ce médicament du référentiel ?")) return;
        const tid = toast.loading("Suppression...");
        try {
            await deleteMedication(id);
            if(selectedMed?.id === id) setSelectedMed(null);
            loadMeds();
            toast.success("Médicament supprimé", {id: tid});
        } catch(e) {
            toast.error("Erreur technique", {id: tid});
        }
    };

    const handleEdit = (med: BackendMedication) => {
        setSelectedMed(med);
        setModalMode('edit');
        setShowModal(true);
        setContextMenuId(null);
    };

    // Filtrage
    const filteredMeds = useMemo(() => {
        const lowerSearch = search.toLowerCase();
        return medications.filter(m => 
            (m.nom_commercial && m.nom_commercial.toLowerCase().includes(lowerSearch)) || 
            (m.dci && m.dci.toLowerCase().includes(lowerSearch)) ||
            (m.classe_therapeutique && m.classe_therapeutique.toLowerCase().includes(lowerSearch))
        );
    }, [medications, search]);

    return (
        <div className="flex h-[calc(100vh-80px)] bg-slate-50 font-sans overflow-hidden text-slate-800">
            <style>{styles}</style>
            
            {/* Overlay pour fermer le menu contextuel si clic extérieur */}
            {contextMenuId !== null && <div className="fixed inset-0 z-20" onClick={() => setContextMenuId(null)}></div>}

            {/* --- COLONNE PRINCIPALE (TABLEAU) --- */}
            {/* Si un médicament est sélectionné, on réduit la largeur sur grand écran pour laisser place au panel */}
            <div className={`flex-1 flex flex-col min-w-0 transition-all duration-300 ${selectedMed ? 'xl:mr-[400px]' : ''}`}>
                
                {/* Header Page */}
                <div className="px-8 py-5 flex flex-col md:flex-row items-start md:items-center justify-between gap-4 sticky top-0 bg-slate-50 z-10 border-b border-slate-200/50">
                    <div>
                        <h1 className="text-2xl font-bold text-[#052648] flex items-center gap-2">
                            <FlaskConical className="text-blue-600" strokeWidth={2.5}/> Pharmacopée
                        </h1>
                        <p className="text-slate-500 text-sm mt-1">{filteredMeds.length} références disponibles.</p>
                    </div>
                    
                    <div className="flex gap-3 w-full md:w-auto">
                        <div className="relative group flex-1 md:w-72">
                            <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors w-4 h-4"/>
                            <input 
                                type="text" 
                                placeholder="Rechercher par DCI, Nom ou Classe..." 
                                value={search}
                                onChange={(e) => setSearch(e.target.value)}
                                className="w-full bg-white border border-slate-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:ring-2 focus:ring-[#052648]/20 focus:border-[#052648] outline-none shadow-sm transition-all"
                            />
                        </div>
                        <Button 
                            onClick={() => { setSelectedMed(null); setModalMode('create'); setShowModal(true); }}
                            className="bg-[#052648] hover:bg-blue-900 text-white shadow-md gap-2"
                        >
                            <Plus size={18}/> <span className="hidden md:inline">Ajouter</span>
                        </Button>
                    </div>
                </div>

                {/* Table Header Row (Desktop Only) */}
                <div className="hidden md:grid grid-cols-12 gap-4 px-8 py-3 bg-slate-100 text-xs font-bold text-slate-500 uppercase tracking-wider sticky top-0 border-b border-slate-200">
                     <div className="col-span-4 pl-2">Médicament</div>
                     <div className="col-span-2">DCI</div>
                     <div className="col-span-2">Classe</div>
                     <div className="col-span-2">Dosage</div>
                     <div className="col-span-2 text-right pr-4">Action</div>
                </div>

                {/* Liste des Médicaments */}
                <div className="flex-1 overflow-y-auto px-4 md:px-8 pb-20 custom-scrollbar pt-2 space-y-2">
                     {loading ? (
                        <div className="space-y-3 p-4">
                            {[1,2,3,4,5].map(i => <div key={i} className="h-16 w-full bg-slate-200 rounded-xl animate-pulse"/>)}
                        </div>
                     ) : filteredMeds.length > 0 ? (
                         filteredMeds.map((med) => {
                             // Déterminer l'icone selon la forme galénique
                             const isInjection = med.forme_galenique?.toLowerCase().includes('inj') || med.forme_galenique?.toLowerCase().includes('vial') || med.forme_galenique?.toLowerCase().includes('syringe');
                             
                             return (
                                 <div 
                                    key={med.id} 
                                    onClick={() => setSelectedMed(med)}
                                    className={`
                                        group grid grid-cols-1 md:grid-cols-12 gap-2 md:gap-4 px-4 py-4 md:py-3 bg-white rounded-xl border cursor-pointer transition-all shadow-sm
                                        ${selectedMed?.id === med.id ? 'border-blue-500 ring-1 ring-blue-500/20 bg-blue-50/10' : 'border-slate-200 hover:border-blue-300 hover:shadow-md'}
                                    `}
                                 >
                                     {/* 1. Nom & Icone */}
                                     <div className="col-span-12 md:col-span-4 flex items-center gap-3 overflow-hidden">
                                         <div className={`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${isInjection ? 'bg-purple-50 text-purple-600' : 'bg-blue-50 text-blue-600'}`}>
                                            {isInjection ? <Syringe size={18}/> : <Tablets size={18}/>}
                                         </div>
                                         <div className="min-w-0">
                                             <p className="font-bold text-[#052648] text-sm truncate" title={med.nom_commercial}>{med.nom_commercial}</p>
                                             {/* Affichage conditionnel mobile : le DCI passe sous le nom en petit */}
                                             <p className="text-[10px] text-slate-500 md:hidden font-mono truncate">{med.dci}</p>
                                         </div>
                                     </div>

                                     {/* 2. DCI (Substance) */}
                                     <div className="hidden md:flex col-span-2 items-center">
                                        <span className="text-sm font-mono text-slate-600 bg-slate-100 px-2 py-0.5 rounded truncate" title={med.dci}>
                                            {med.dci}
                                        </span>
                                     </div>

                                     {/* 3. Classe Thérapeutique */}
                                     <div className="col-span-6 md:col-span-2 flex items-center md:items-center">
                                         {med.classe_therapeutique ? (
                                            <span className="text-xs font-semibold text-slate-500 truncate bg-slate-50 border border-slate-200 px-2 py-0.5 rounded">
                                                {med.classe_therapeutique}
                                            </span>
                                         ) : <span className="text-xs text-slate-300">-</span>}
                                     </div>

                                     {/* 4. Dosage */}
                                     <div className="col-span-6 md:col-span-2 flex items-center justify-end md:justify-start">
                                         <span className="text-sm font-medium text-slate-700">{med.dosage || "N/A"}</span>
                                     </div>

                                     {/* 5. Actions */}
                                     <div className="col-span-12 md:col-span-2 flex items-center justify-end relative pt-2 md:pt-0 border-t md:border-0 border-slate-100 mt-2 md:mt-0">
                                         <div className="md:opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1">
                                             <button onClick={(e) => { e.stopPropagation(); handleEdit(med); }} className="p-1.5 hover:bg-slate-100 rounded text-slate-400 hover:text-blue-600 transition">
                                                 <Edit2 size={16}/>
                                             </button>
                                             <button onClick={(e) => { e.stopPropagation(); handleDelete(med.id); }} className="p-1.5 hover:bg-red-50 rounded text-slate-400 hover:text-red-600 transition">
                                                 <Trash2 size={16}/>
                                             </button>
                                         </div>
                                         <button className="md:hidden ml-auto" onClick={(e) => {e.stopPropagation(); setContextMenuId(med.id);}}>
                                             <MoreVertical size={16} className="text-slate-400"/>
                                         </button>
                                         
                                          {/* Menu Mobile Only */}
                                          {contextMenuId === med.id && (
                                             <div className="absolute top-8 right-0 z-30 bg-white shadow-xl rounded-lg border border-slate-200 p-1 min-w-[120px]" onClick={(e) => e.stopPropagation()}>
                                                 <button onClick={() => handleEdit(med)} className="flex w-full items-center gap-2 px-3 py-2 text-xs font-bold text-slate-700 hover:bg-slate-50 rounded"><Edit2 size={12}/> Editer</button>
                                                 <button onClick={() => handleDelete(med.id)} className="flex w-full items-center gap-2 px-3 py-2 text-xs font-bold text-red-600 hover:bg-red-50 rounded"><Trash2 size={12}/> Supprimer</button>
                                             </div>
                                          )}
                                     </div>

                                 </div>
                             );
                         })
                     ) : (
                         <div className="h-64 flex flex-col items-center justify-center text-slate-400 border-2 border-dashed border-slate-300 rounded-2xl bg-slate-50">
                             <Pill size={48} className="opacity-20 mb-3"/>
                             <p>Aucun médicament trouvé pour cette recherche.</p>
                         </div>
                     )}
                </div>
            </div>

            {/* --- PANEL DÉTAIL --- */}
            {selectedMed && (
                <aside className="fixed top-[80px] right-0 h-[calc(100vh-80px)] w-[400px] bg-white border-l border-slate-200 shadow-2xl flex flex-col z-40 animate-in slide-in-from-right-10 duration-300">
                    
                    {/* Header Panel */}
                    <div className="p-6 border-b border-slate-100 bg-[#052648] text-white">
                        <div className="flex justify-between items-start mb-4">
                            <span className="bg-white/20 px-2 py-0.5 rounded text-[10px] uppercase font-bold tracking-wider backdrop-blur-sm">
                                {selectedMed.classe_therapeutique || 'Non Classé'}
                            </span>
                            <button onClick={() => setSelectedMed(null)} className="text-white/60 hover:text-white transition bg-white/10 p-1 rounded-full">
                                <X size={16}/>
                            </button>
                        </div>
                        <h2 className="text-2xl font-bold leading-tight break-words">{selectedMed.nom_commercial}</h2>
                        <div className="flex items-center gap-2 mt-2">
                             <span className="font-mono text-sm text-blue-200 bg-blue-900/30 px-2 py-0.5 rounded border border-blue-500/30">
                                 {selectedMed.dci}
                             </span>
                        </div>
                    </div>

                    {/* Content Panel */}
                    <div className="flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar bg-slate-50/50">
                        
                        {/* Disponibilité & Prix */}
                        <div className="grid grid-cols-2 gap-4">
                             <div className="p-4 bg-white border border-slate-200 rounded-xl shadow-sm text-center">
                                 <p className="text-[10px] uppercase text-slate-400 font-bold mb-2">État du stock</p>
                                 <AvailabilityBadge status={selectedMed.disponibilite_cameroun} />
                             </div>
                             <div className="p-4 bg-white border border-slate-200 rounded-xl shadow-sm text-center flex flex-col justify-center">
                                 <p className="text-[10px] uppercase text-slate-400 font-bold mb-1">Coût Estimatif</p>
                                 <p className="font-bold text-slate-800 text-lg">
                                     {selectedMed.cout_moyen_fcfa ? selectedMed.cout_moyen_fcfa.toLocaleString() : '-'} 
                                     <span className="text-xs font-normal text-slate-400 ml-1">FCFA</span>
                                 </p>
                             </div>
                        </div>

                        {/* Caractéristiques Techniques */}
                        <div className="bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm">
                            <div className="px-4 py-2 bg-slate-50 border-b border-slate-200 font-bold text-xs text-[#052648] uppercase tracking-wide">
                                Spécifications
                            </div>
                            <div className="p-4 space-y-3 text-sm">
                                <div className="flex justify-between border-b border-dashed border-slate-100 pb-2">
                                    <span className="text-slate-500">Dosage</span>
                                    <span className="font-medium text-slate-800">{selectedMed.dosage}</span>
                                </div>
                                <div className="flex justify-between border-b border-dashed border-slate-100 pb-2">
                                    <span className="text-slate-500">Forme Galénique</span>
                                    <span className="font-medium text-slate-800">{selectedMed.forme_galenique || 'N/A'}</span>
                                </div>
                                <div className="flex justify-between border-b border-dashed border-slate-100 pb-2">
                                    <span className="text-slate-500">Voie d'administration</span>
                                    <span className="font-medium text-slate-800">{selectedMed.voie_administration || 'Orale'}</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-slate-500">Prescription</span>
                                    <span className="font-medium text-slate-800">{selectedMed.statut_prescription || 'Libre accès'}</span>
                                </div>
                            </div>
                        </div>

                        {/* Note Clinique */}
                        <div className="space-y-2">
                             <h3 className="font-bold text-sm text-[#052648] flex items-center gap-2">
                                 <Info size={16}/> Informations Cliniques
                             </h3>
                             <div className="p-4 bg-amber-50 border border-amber-100 rounded-xl text-xs text-amber-900 leading-relaxed text-justify">
                                {selectedMed.precautions_emploi 
                                    ? selectedMed.precautions_emploi 
                                    : <span className="italic text-amber-700/60">Aucune précaution spécifique enregistrée pour ce produit.</span>
                                }
                             </div>
                        </div>

                        {/* Méta-données JSON si existantes */}
                        {/* Affiche si le backend envoie du JSON pour effets secondaires par exemple */}
                        {(selectedMed.effets_secondaires || selectedMed.contre_indications) && (
                            <div className="bg-red-50 p-4 rounded-xl border border-red-100">
                                <h4 className="font-bold text-red-700 text-xs uppercase mb-2 flex items-center gap-1"><AlertTriangle size={14}/> Points de Vigilance</h4>
                                <ul className="text-xs text-red-800 list-disc pl-4 space-y-1">
                                    {/* Ceci est un affichage simplifié, ajustez selon le format JSON réel */}
                                    {typeof selectedMed.contre_indications === 'string' && <li>CI: {selectedMed.contre_indications}</li>}
                                    {typeof selectedMed.effets_secondaires === 'string' && <li>EI: {selectedMed.effets_secondaires}</li>}
                                </ul>
                            </div>
                        )}

                    </div>

                    {/* Footer Actions */}
                    <div className="p-5 border-t border-slate-200 bg-white flex gap-3">
                         <Button variant="outline" className="text-red-600 border-red-200 hover:bg-red-50" onClick={() => handleDelete(selectedMed.id)}>
                             <Trash2 size={18}/>
                         </Button>
                         <Button className="flex-1 bg-[#052648] hover:bg-blue-900 text-white font-bold shadow-md" onClick={() => handleEdit(selectedMed)}>
                             Modifier la fiche
                         </Button>
                    </div>
                </aside>
            )}

            {/* Modal de Création / Edition */}
            <MedicationModal 
                isOpen={showModal}
                onClose={() => setShowModal(false)}
                mode={modalMode}
                initialData={selectedMed}
                onSuccess={loadMeds}
            />

        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\expert\MediaLybrary.tsx
================================================================================

// components/expert/MediaLibrary.tsx
'use client';

import React, { useState, useEffect, useMemo, useRef } from 'react';
import { 
  ImageIcon, Search, Filter, Trash2, Eye, Download, UploadCloud,
  X, CheckCircle2, Maximize2, AlertTriangle, FileDigit, Calendar,
  FileText
} from 'lucide-react';
import toast from 'react-hot-toast';
import { getAllImages, deleteImage } from '@/services/expertService';
import type { BackendImage } from '@/types/backend';
import { Button } from '@/components/ui/Button';
import { Skeleton } from '@/components/ui/Skeleton';
import ImageUploadModal from './media/ImageUploadModal';
import Image from 'next/image';

const styles = `
    .custom-scrollbar::-webkit-scrollbar { width: 5px; height: 5px; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 4px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
`;

export default function MediaLibrary() {
    // États Données
    const [images, setImages] = useState<BackendImage[]>([]);
    const [loading, setLoading] = useState(true);
    const [selectedImage, setSelectedImage] = useState<BackendImage | null>(null);
    const [filterType, setFilterType] = useState("Tous");
    
    // Drag & Drop States
    const [isDragging, setIsDragging] = useState(false);
    const [fileToUpload, setFileToUpload] = useState<File | null>(null);
    
    // Init
    useEffect(() => {
        loadData();
    }, []);

    const loadData = async () => {
        setLoading(true);
        try {
            const data = await getAllImages();
            setImages(Array.isArray(data) ? data : []);
        } catch (e) {
            console.error(e);
            toast.error("Impossible de charger la médiathèque");
        } finally {
            setLoading(false);
        }
    };

    // --- LOGIQUE DRAG & DROP ---
    const handleDragEnter = (e: React.DragEvent) => { e.preventDefault(); e.stopPropagation(); setIsDragging(true); };
    const handleDragLeave = (e: React.DragEvent) => { e.preventDefault(); e.stopPropagation(); setIsDragging(false); };
    const handleDragOver = (e: React.DragEvent) => { e.preventDefault(); e.stopPropagation(); }; // Crucial pour drop
    const handleDrop = (e: React.DragEvent) => {
        e.preventDefault(); e.stopPropagation();
        setIsDragging(false);
        const files = e.dataTransfer.files;
        if (files && files.length > 0) {
            const file = files[0];
            if (!file.type.startsWith('image/')) return toast.error("Seules les images sont acceptées");
            setFileToUpload(file); // Déclenche l'ouverture du modal
        }
    };
    
    // --- FILTER ---
    const uniqueTypes = useMemo(() => ["Tous", ...Array.from(new Set(images.map(i => i.type_examen || "Autre")))], [images]);
    const filteredImages = useMemo(() => {
        if (filterType === "Tous") return images;
        return images.filter(i => (i.type_examen || "Autre") === filterType);
    }, [images, filterType]);

    // --- ACTIONS ---
    const handleDelete = async (id: number) => {
        if(!confirm("Supprimer définitivement cette image ?")) return;
        const t = toast.loading("Suppression...");
        try {
            await deleteImage(id);
            setImages(prev => prev.filter(img => img.id !== id));
            if(selectedImage?.id === id) setSelectedImage(null);
            toast.success("Image supprimée", {id: t});
        } catch(e) {
            toast.error("Erreur technique", {id: t});
        }
    }

    return (
        <div className="flex h-[calc(100vh-80px)] bg-slate-50 font-sans overflow-hidden relative"
             onDragEnter={handleDragEnter} // Global Drag listener
        >
            <style>{styles}</style>

            {/* OVERLAY DE DRAG & DROP GLOBAL */}
            {isDragging && (
                <div 
                    className="absolute inset-0 z-[100] bg-blue-500/80 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in duration-200 border-8 border-dashed border-white m-4 rounded-3xl"
                    onDragLeave={handleDragLeave}
                    onDragOver={handleDragOver}
                    onDrop={handleDrop}
                >
                    <UploadCloud size={80} className="text-white mb-4 animate-bounce"/>
                    <h2 className="text-3xl font-bold text-white">Relâchez pour ajouter l'image</h2>
                    <p className="text-white/80 mt-2 text-lg">Qualification automatique à l'étape suivante</p>
                </div>
            )}

            {/* === COLONNE PRINCIPALE : GRILLE & HEADER === */}
            <div className={`flex-1 flex flex-col min-w-0 transition-all duration-300 ${selectedImage ? 'xl:mr-[420px] hidden md:flex' : ''}`}>
                
                {/* Header */}
                <div className="px-6 md:px-8 py-5 flex items-center justify-between gap-4 sticky top-0 bg-slate-50 z-10">
                    <div>
                        <h1 className="text-2xl font-bold text-[#052648] flex items-center gap-2">
                            <ImageIcon className="text-emerald-500"/> PACS & Imagerie
                        </h1>
                        <p className="text-slate-500 text-sm mt-1">{images.length} clichés disponibles dans le cloud sécurisé.</p>
                    </div>
                    
                    <div className="flex gap-2">
                        {/* Hidden Input pour Upload bouton */}
                        <label htmlFor="file-upload" className="cursor-pointer bg-[#052648] hover:bg-blue-900 text-white px-5 py-2.5 rounded-xl font-bold text-sm shadow-md flex items-center gap-2 transition-all hover:-translate-y-0.5 active:scale-95">
                            <UploadCloud size={18}/> <span>Importer</span>
                            <input 
                                id="file-upload" type="file" accept="image/*" className="hidden" 
                                onChange={(e) => {
                                    if(e.target.files?.[0]) setFileToUpload(e.target.files[0]);
                                    e.target.value = ''; // Reset input
                                }}
                            />
                        </label>
                    </div>
                </div>

                {/* Filtres Tags */}
                <div className="px-6 md:px-8 pb-4 flex gap-2 overflow-x-auto no-scrollbar">
                     {uniqueTypes.map(type => (
                         <button
                            key={type}
                            onClick={() => setFilterType(type)}
                            className={`px-3 py-1.5 rounded-full text-xs font-bold border transition-all whitespace-nowrap
                                ${filterType === type 
                                    ? 'bg-[#052648] text-white border-[#052648] shadow-md' 
                                    : 'bg-white text-slate-600 border-slate-200 hover:border-slate-300'}
                            `}
                         >
                             {type}
                         </button>
                     ))}
                </div>

                {/* GRILLE D'IMAGES */}
                <div className="flex-1 overflow-y-auto px-6 md:px-8 pb-20 custom-scrollbar">
                    {loading ? (
                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
                            {[1,2,3,4,5,6,7,8,9,10].map(i => <Skeleton key={i} className="aspect-square rounded-2xl bg-white/50" />)}
                        </div>
                    ) : filteredImages.length > 0 ? (
                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 auto-rows-[200px]">
                             {filteredImages.map((img) => (
                                 <div 
                                    key={img.id}
                                    onClick={() => setSelectedImage(img)}
                                    className={`
                                        group relative rounded-2xl overflow-hidden cursor-pointer bg-black border transition-all duration-300 shadow-sm hover:shadow-xl
                                        ${selectedImage?.id === img.id ? 'ring-4 ring-[#052648] border-transparent scale-[0.98]' : 'border-slate-100 hover:-translate-y-1'}
                                    `}
                                 >
                                     <Image 
                                        src={img.fichier_url} 
                                        alt="Thumbnail" 
                                        fill 
                                        className={`object-cover transition-transform duration-700 ${selectedImage?.id === img.id ? 'opacity-100 scale-105' : 'opacity-80 group-hover:opacity-100 group-hover:scale-110'}`}
                                        unoptimized // Crucial pour urls externes
                                     />
                                     
                                     {/* Overlay Information au survol ou actif */}
                                     <div className={`
                                        absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent p-4 flex flex-col justify-end
                                        transition-opacity duration-300
                                        ${selectedImage?.id === img.id ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'}
                                     `}>
                                         <p className="text-white font-bold text-sm leading-snug line-clamp-1">{img.type_examen}</p>
                                         <p className="text-slate-300 text-xs font-medium">{img.sous_type || "Standard"}</p>
                                     </div>

                                     {/* Validation Badge */}
                                     {img.valide_expert && (
                                         <div className="absolute top-2 right-2 bg-emerald-500 text-white rounded-full p-1 shadow-lg transform scale-0 group-hover:scale-100 transition-transform">
                                             <CheckCircle2 size={12}/>
                                         </div>
                                     )}
                                 </div>
                             ))}
                        </div>
                    ) : (
                        <div className="h-64 flex flex-col items-center justify-center text-slate-400 border-2 border-dashed border-slate-300 rounded-3xl">
                            <ImageIcon size={48} className="opacity-30 mb-2"/>
                            <p>Aucune image pour ce filtre.</p>
                        </div>
                    )}
                </div>
            </div>

            {/* === SIDEBAR DETAILS (FIXED RIGHT) === */}
            {selectedImage && (
                <aside className={`
                    fixed inset-y-0 right-0 z-40 w-full md:w-[420px] bg-white shadow-2xl border-l border-slate-200 
                    transform transition-transform duration-300 ease-in-out flex flex-col
                    ${selectedImage ? 'translate-x-0' : 'translate-x-full'}
                `}>
                    
                    {/* TOP: Image Zoom Preview */}
                    <div className="relative w-full h-[40vh] bg-slate-950 flex items-center justify-center shrink-0 group">
                        <Image
                            src={selectedImage.fichier_url}
                            alt="Full"
                            fill
                            className="object-contain"
                            unoptimized
                        />
                        <button 
                            className="absolute top-4 left-4 p-2 bg-black/40 text-white hover:bg-black/60 rounded-full transition md:hidden"
                            onClick={() => setSelectedImage(null)}
                        >
                            <X size={20}/>
                        </button>
                         {/* Close Button Desktop */}
                        <button 
                             className="absolute top-4 right-4 p-2 bg-white/20 text-white hover:bg-white hover:text-black rounded-full transition shadow-lg backdrop-blur"
                             onClick={() => setSelectedImage(null)}
                        >
                             <X size={18}/>
                        </button>
                    </div>

                    {/* BOTTOM: Scrollable Metadata */}
                    <div className="flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6">
                        
                        <div className="flex justify-between items-start border-b border-slate-100 pb-4">
                            <div>
                                <h2 className="text-2xl font-bold text-[#052648]">{selectedImage.type_examen}</h2>
                                <p className="text-slate-500 font-medium text-sm flex items-center gap-2 mt-1">
                                    <MapPinBadge label={selectedImage.sous_type || "Zone non spécifiée"} />
                                    <span>• {selectedImage.format_image?.toUpperCase() || "JPEG"}</span>
                                </p>
                            </div>
                            <div className="flex flex-col items-end">
                                <span className={`text-[10px] font-bold px-2 py-0.5 rounded border uppercase tracking-wider mb-1 ${selectedImage.valide_expert ? 'bg-green-100 text-green-700 border-green-200' : 'bg-orange-50 text-orange-600 border-orange-200'}`}>
                                    {selectedImage.valide_expert ? 'Validé' : 'À revoir'}
                                </span>
                                <span className="text-[10px] text-slate-400 font-mono">#{selectedImage.id}</span>
                            </div>
                        </div>

                        {/* Qualité */}
                        <div className="bg-slate-50 p-4 rounded-xl flex items-center justify-between border border-slate-200">
                             <div className="text-xs font-bold uppercase text-slate-400">Qualité</div>
                             <div className="flex gap-1">
                                 {[1,2,3,4,5].map(i => (
                                     <div key={i} className={`w-3 h-3 rounded-full ${i <= selectedImage.qualite_image ? 'bg-[#052648]' : 'bg-slate-200'}`}></div>
                                 ))}
                             </div>
                        </div>

                        {/* Description / Rapport */}
                        <div className="space-y-2">
                             <h3 className="font-bold text-[#052648] flex items-center gap-2 text-sm"><FileText size={16}/> Rapport Radiologique</h3>
                             <p className="text-sm text-slate-700 bg-white p-4 border border-slate-200 rounded-xl leading-relaxed shadow-sm">
                                 {selectedImage.description || <span className="italic text-slate-400">Aucune description saisie.</span>}
                             </p>
                        </div>

                        {/* Technical Metadata */}
                        <div className="grid grid-cols-2 gap-4 text-xs">
                             <MetaRow icon={FileDigit} label="Poids" value={`${(selectedImage.taille_ko || 0).toFixed(1)} Ko`} />
                             <MetaRow icon={Maximize2} label="Résolution" value={selectedImage.resolution || "Inconnue"} />
                             <MetaRow icon={AlertTriangle} label="Difficulté" value={`Niveau ${selectedImage.niveau_difficulte}`} />
                             <MetaRow icon={Calendar} label="Date" value={new Date(selectedImage.created_at).toLocaleDateString()} />
                        </div>
                        
                        <div className="border-t border-slate-200 my-4"></div>

                        {/* Action Buttons */}
                        <div className="grid grid-cols-2 gap-3">
                             <Button variant="outline" className="text-slate-600" onClick={() => window.open(selectedImage.fichier_url, '_blank')}>
                                 <Download size={16} className="mr-2"/> Télécharger
                             </Button>
                             <Button variant="destructive" className="bg-red-50 text-red-600 hover:bg-red-600 hover:text-white border-transparent" onClick={() => handleDelete(selectedImage.id)}>
                                 <Trash2 size={16} className="mr-2"/> Supprimer
                             </Button>
                        </div>

                    </div>

                </aside>
            )}

            {/* MODAL UPLOAD QUI POP AU DROP/CLICK */}
            <ImageUploadModal 
                file={fileToUpload}
                isOpen={!!fileToUpload}
                onClose={() => setFileToUpload(null)}
                onSuccess={loadData}
            />

        </div>
    );
}

// Mini composants utilitaires pour le détail
const MapPinBadge = ({ label }: { label: string }) => <span className="bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-xs border border-slate-200">{label}</span>;
const MetaRow = ({ icon: Icon, label, value }: any) => (
    <div className="flex flex-col p-3 bg-slate-50 rounded-lg border border-slate-100">
        <div className="flex items-center gap-1.5 text-slate-400 mb-1 font-semibold uppercase tracking-wider text-[10px]">
            <Icon size={12}/> {label}
        </div>
        <div className="font-mono font-bold text-[#052648] truncate" title={value}>{value}</div>
    </div>
);


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\Button.tsx
================================================================================

import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"
import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center whitespace-nowrap rounded-sm text-sm font-semibold ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
  {
    variants: {
      variant: {
        default: "bg-[#052648] text-white hover:bg-primary/90 shadow-md hover:shadow-lg",
        destructive: "bg-red-600 text-white hover:bg-red-600/90 shadow-md hover:shadow-lg",
        outline: "border border-slate-300 bg-white hover:bg-slate-100 text-slate-800",
        secondary: "bg-slate-100 text-slate-900 hover:bg-slate-200",
        ghost: "hover:bg-slate-100 text-slate-900",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-lg px-8 text-base",
        icon: "h-10 w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, ...props }, ref) => {
    return (
      <button
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\Card.tsx
================================================================================

// components/ui/Card.tsx
import * as React from "react"
import { cn } from "@/lib/utils"

const Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn("rounded-xl bg-white text-slate-900 shadow-md", className)}
      {...props}
    />
  )
)
Card.displayName = "Card"

const CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn("flex flex-col space-y-1.5 p-6", className)}
      {...props}
    />
  )
)
CardHeader.displayName = "CardHeader"

const CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(
  ({ className, ...props }, ref) => (
    <h3
      ref={ref}
      className={cn("text-xl font-bold leading-none tracking-tight text-primary", className)}
      {...props}
    />
  )
)
CardTitle.displayName = "CardTitle"

const CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(
  ({ className, ...props }, ref) => (
    <p
      ref={ref}
      className={cn("text-sm text-slate-500", className)}
      {...props}
    />
  )
)
CardDescription.displayName = "CardDescription"

const CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
  )
)
CardContent.displayName = "CardContent"

const CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn("flex items-center p-6 pt-0", className)}
      {...props}
    />
  )
)
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\CaseCard.tsx
================================================================================

'use client';

import React from 'react';
import Link from 'next/link';
import { ArrowRight } from 'lucide-react';
import { Card, CardContent, CardFooter } from '@/components/ui/Card';
import type { UseCase, Service } from '@/types/simulation/types';
import { startCaseForUser } from '@/services/caseService'; // <-- Importer la fonction
import { useRouter } from 'next/navigation';
import toast from 'react-hot-toast';
import { useAuth } from '@/contexts/AuthContext'; // <-- AJOUT : Importer le hook d'authentification


interface CaseCardProps {
  useCase: UseCase;
  service?: Service;
}

// ✨ AMÉLIORATION : Palette de couleurs plus riche pour les badges de difficulté
const difficultyStyles: Record<string, { bg: string, text: string, border: string }> = {
  'Profane': { bg: 'bg-slate-500/10', text: 'text-slate-600', border: 'border-slate-300/50' },
  'Débutant': { bg: 'bg-green-500/10', text: 'text-green-600', border: 'border-green-300/50' },
  'Intermédiaire': { bg: 'bg-blue-500/10', text: 'text-blue-600', border: 'border-blue-300/50' },
  'Confirmé': { bg: 'bg-yellow-500/10', text: 'text-yellow-600', border: 'border-yellow-300/50' },
  'Expert': { bg: 'bg-red-500/10', text: 'text-red-600', border: 'border-red-300/50' },
};

export function CaseCard({ useCase, service }: CaseCardProps) {
  const styles = difficultyStyles[useCase.difficulty] || difficultyStyles['Profane'];
  const { user } = useAuth();
  const router = useRouter(); // <-- Initialiser le routeur
  const handleStartCase = async () => {
    // AJOUT : Vérification pour s'assurer que l'utilisateur est bien connecté
    if (!user) {
        toast.error("Veuillez vous connecter pour lancer un cas.");
        router.push('/connexion');
        return;
    }

    const toastId = toast.loading("Lancement de la simulation...");
    try {
      // MODIFIÉ : On passe maintenant l'ID de l'utilisateur au service
      await startCaseForUser(useCase.id, user.id);
      
      router.push(`/simulation?caseId=${useCase.id}`);
      toast.dismiss(toastId);
    } catch (error) {
      toast.error("Impossible de lancer le cas. Réessayez.", { id: toastId });
      console.error(error);
    }
  };
  return (
    <>
      {/* ✨ AMÉLIORATION : Balise <style> pour les animations personnalisées sans config tailwind */}
      <style jsx>{`
        @keyframes shine {
          from {
            transform: translateX(-100%) skewX(-20deg);
          }
          to {
            transform: translateX(200%) skewX(-20deg);
          }
        }

        .group-hover\\/button .animate-shine-on-hover {
          animation: shine 1.2s ease-out;
        }
      `}</style>
      
      {/* 
        ✨ AMÉLIORATION : 
        - `group` pour contrôler les animations sur les enfants
        - Effet d'élévation plus prononcé `hover:-translate-y-2`
      */}
      <div className="group relative transition-transform duration-300 ease-out hover:-translate-y-2">
        <Card className="h-full flex flex-col overflow-hidden bg-white/60 backdrop-blur-xl border-slate-200 shadow-lg group-hover:shadow-2xl transition-shadow duration-300">
          

          <CardContent className="p-6 flex-grow">
            {/* En-tête de la carte */}
            <div className="flex justify-between items-start mb-6">
              <div className="flex items-center gap-4">
                {service && (
                  // ✨ AMÉLIORATION : Icône 3D avec effet de "glow" au survol
                  <div className="relative w-12 h-12 rounded-lg bg-gradient-to-br from-[#052648] to-[#0a4d8f] flex-shrink-0 flex items-center justify-center border-b-4 border-[#031a31] shadow-lg transition-transform duration-300 group-hover:-translate-y-1 group-hover:shadow-cyan-400/30 group-hover:shadow-2xl">
                    <service.icon className="w-6 h-6 text-white transition-transform duration-300 group-hover:-rotate-12" />
                    <div className="absolute inset-0 bg-cyan-400 rounded-lg blur-xl opacity-0 group-hover:opacity-30 transition-opacity duration-300" />
                  </div>
                )}
                <div>
                  <h3 className="text-lg font-bold text-[#052648]">{service?.name || 'Service'}</h3>
                  <p className="text-sm text-slate-500">{useCase.patient.nom}, {useCase.patient.age} ans</p>
                </div>
              </div>
            </div>
            
            {/* ✨ AMÉLIORATION : Section "Motif" avec hiérarchie visuelle claire */}
            <div className="relative mt-4 rounded-lg bg-gradient-to-br from-slate-50 to-slate-100 p-4 border border-slate-200">
              <p className="text-sm text-slate-500 mb-1 pl-2">Motif de consultation :</p>
              <p className="font-semibold text-slate-800 leading-relaxed pl-2">
                {useCase.patient.motif}
              </p>
            </div>
          </CardContent>

          {/* ✨ AMÉLIORATION : CTA avec dégradé, animation et effet de brillance */}
          <CardFooter className="p-4 mt-auto">
                    {/* MODIFIÉ : <Link> est remplacé par <button> */}
                    <button 
                        onClick={handleStartCase}
                        className="relative group/button w-full h-12 flex items-center justify-center gap-2 text-base font-bold text-white rounded-lg shadow-lg overflow-hidden bg-slate-500 transition-all duration-300 ease-out hover:from-[#0a4d8f] hover:to-[#052648] hover:shadow-xl active:scale-95 transform"
                    >
                        <span className="z-10">Lancer le cas</span>
                        <ArrowRight className="z-10 w-5 h-5 transition-transform duration-300 group-hover/button:translate-x-1" />
                    </button>
          </CardFooter>
        </Card>
      </div>
    </>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\Input.tsx
================================================================================

// components/ui/Input.tsx
import * as React from "react"
import { cn } from "@/lib/utils"

export interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}

const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-10 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Input.displayName = "Input"

export { Input }


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\Label.tsx
================================================================================

// components/ui/Label.tsx
import * as React from "react"
import { cn } from "@/lib/utils"

const Label = React.forwardRef<
  HTMLLabelElement,
  React.LabelHTMLAttributes<HTMLLabelElement>
>(({ className, ...props }, ref) => (
  <label
    ref={ref}
    className={cn(
      "block text-sm font-semibold text-slate-700 mb-1.5",
      className
    )}
    {...props}
  />
))
Label.displayName = "Label"

export { Label }


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\Modal.tsx
================================================================================

'use client'
import * as React from 'react'
import { X } from 'lucide-react'
import { cn } from '@/lib/utils'
import { Button } from './Button'

interface ModalProps {
  isOpen: boolean
  onClose: () => void
  onConfirm: () => void
  title: string
  children: React.ReactNode
  confirmText?: string
  cancelText?: string
  variant?: 'default' | 'destructive'
}

export function Modal({
  isOpen,
  onClose,
  onConfirm,
  title,
  children,
  confirmText = "Confirmer",
  cancelText = "Annuler",
  variant = "default"
}: ModalProps) {
  if (!isOpen) return null

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm">
      <div 
        className="relative m-4 bg-white rounded-2xl shadow-2xl w-full max-w-md animate-fade-in-up"
        role="dialog"
        aria-modal="true"
        aria-labelledby="modal-title"
      >
        <div className="flex items-center justify-between p-6 border-b">
          <h2 id="modal-title" className="text-lg font-bold text-primary">{title}</h2>
          <Button variant="ghost" size="icon" className="h-8 w-8 rounded-full" onClick={onClose}>
            <X className="h-4 w-4" />
            <span className="sr-only">Fermer</span>
          </Button>
        </div>
        
        <div className="p-6 text-sm text-slate-600">
          {children}
        </div>
        
        <div className="flex justify-end gap-3 p-6 border-t bg-slate-50 rounded-b-2xl">
          <Button variant="outline" onClick={onClose}>
            {cancelText}
          </Button>
          <Button variant={variant} onClick={onConfirm}>
            {confirmText}
          </Button>
        </div>
      </div>
    </div>
  )
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\Select.tsx
================================================================================

import * as React from "react"
import { ChevronDown } from "lucide-react"
import { cn } from "@/lib/utils"

export interface SelectProps extends React.SelectHTMLAttributes<HTMLSelectElement> {}

const Select = React.forwardRef<HTMLSelectElement, SelectProps>(
  ({ className, children, ...props }, ref) => {
    return (
      <div className="relative">
        <select
          className={cn(
            "flex h-10 w-full items-center justify-between rounded-md border border-slate-300 bg-slate-50 px-3 py-2 text-sm placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none",
            className
          )}
          ref={ref}
          {...props}
        >
          {children}
        </select>
        <ChevronDown className="absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 opacity-50 pointer-events-none" />
      </div>
    )
  }
)
Select.displayName = "Select"

export { Select }


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\Sign.tsx
================================================================================

// components/ui/sign.tsx
'use client';
import React, { useRef, useEffect, useState } from 'react';
import { Eraser } from 'lucide-react';
import { Button } from './Button';

const SignaturePad = () => {
  // On utilise une référence pour accéder directement à l'élément canvas du DOM
  const canvasRef = useRef<HTMLCanvasElement>(null);
  // Un état pour savoir si l'utilisateur est en train de dessiner
  const [isDrawing, setIsDrawing] = useState(false);
  // Un état pour savoir si quelque chose a été dessiné (pour masquer le placeholder)
  const [isSigned, setIsSigned] = useState(false);

  // Cet effet s'exécute après le premier rendu du composant
  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;

    // Le contexte 2D est l'objet sur lequel on dessine
    const ctx = canvas.getContext('2d');
    if (!ctx) return;
    
    // -- Configuration du style du "pinceau" --
    ctx.strokeStyle = '#052648'; // Couleur du trait (bleu foncé)
    ctx.lineWidth = 2;           // Épaisseur du trait
    ctx.lineCap = 'round';       // Extrémités des traits arrondies
    ctx.lineJoin = 'round';      // Jonctions entre les traits arrondies

    // --- Gestion du redimensionnement ---
    // C'est crucial pour que la signature ne soit pas déformée si la fenêtre change de taille
    const handleResize = () => {
        // On donne au canvas une taille explicite en pixels, basée sur sa taille d'affichage CSS
        // Cela évite les déformations et le flou.
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;
        // Re-appliquer les styles après redimensionnement, car le contexte est réinitialisé
        ctx.strokeStyle = '#052648';
        ctx.lineWidth = 2;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
    };

    handleResize(); // Appel initial
    window.addEventListener('resize', handleResize);

    // Fonction de nettoyage pour enlever l'écouteur d'événement
    return () => {
        window.removeEventListener('resize', handleResize);
    };
  }, []);

  // --- Fonctions de dessin ---

  const getCoordinates = (event: React.MouseEvent | React.TouchEvent): { x: number, y: number } | undefined => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    
    const rect = canvas.getBoundingClientRect();
    if ('touches' in event) { // Événement tactile
      return {
        x: event.touches[0].clientX - rect.left,
        y: event.touches[0].clientY - rect.top
      };
    }
    // Événement souris
    return {
      x: event.clientX - rect.left,
      y: event.clientY - rect.top
    };
  }

  const startDrawing = (event: React.MouseEvent | React.TouchEvent) => {
    const coords = getCoordinates(event);
    if (!coords) return;
    
    const ctx = canvasRef.current?.getContext('2d');
    if (!ctx) return;
    
    ctx.beginPath();
    ctx.moveTo(coords.x, coords.y);
    setIsDrawing(true);
    if(!isSigned) setIsSigned(true);
  };

  const draw = (event: React.MouseEvent | React.TouchEvent) => {
    if (!isDrawing) return;

    const coords = getCoordinates(event);
    if (!coords) return;
    
    const ctx = canvasRef.current?.getContext('2d');
    if (!ctx) return;
    
    ctx.lineTo(coords.x, coords.y);
    ctx.stroke();
  };

  const stopDrawing = () => {
    const ctx = canvasRef.current?.getContext('2d');
    if (!ctx) return;
    ctx.closePath();
    setIsDrawing(false);
  };
  
  const clearSignature = () => {
    const canvas = canvasRef.current;
    const ctx = canvas?.getContext('2d');
    if (canvas && ctx) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      setIsSigned(false);
    }
  };
  
  // Dans une vraie application, cette fonction enverrait les données de l'image
  const saveSignature = () => {
      const canvas = canvasRef.current;
      if (canvas) {
          const dataUrl = canvas.toDataURL('image/png');
          // Vous pouvez maintenant utiliser cette dataUrl (ex: l'envoyer à un serveur, l'afficher ailleurs)
          console.log('Signature sauvegardée:', dataUrl);
          alert('Signature capturée ! (Vérifiez la console)');
      }
  }

  return (
    <div className="relative w-full">
      <canvas
        ref={canvasRef}
        className="bg-slate-100 rounded-lg border-2 border-dashed border-slate-300 w-full h-20 cursor-crosshair"
        onMouseDown={startDrawing}
        onMouseMove={draw}
        onMouseUp={stopDrawing}
        onMouseLeave={stopDrawing} // Important pour arrêter le dessin si la souris sort du canvas
        onTouchStart={startDrawing}
        onTouchMove={draw}
        onTouchEnd={stopDrawing}
      />
      
      {/* Placeholder qui s'affiche uniquement si rien n'est dessiné */}
      {!isSigned && (
        <p className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-slate-400 italic pointer-events-none">
          Dessinez votre signature ici
        </p>
      )}

      {/* Bouton pour effacer */}
      {isSigned && (
        <div className="absolute top-2 right-2">
            <Button variant="ghost" size="sm" onClick={clearSignature} title="Effacer la signature">
                <Eraser className="w-4 h-4 mr-2" /> Effacer
            </Button>
            {/* Vous pouvez ajouter un bouton de sauvegarde ici si nécessaire */}
            {/* 
            <Button size="sm" onClick={saveSignature} className="ml-2">
                Sauvegarder
            </Button> 
            */}
        </div>
      )}
    </div>
  );
};

export default SignaturePad;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\SkeletonDashboard.tsx
================================================================================

// components/dashboard/DashboardSkeleton.tsx
'use client';

import React from 'react';
import Sidebar from '@/components/dashboard/Sidebar'; // Nous réutilisons la vraie sidebar

// Petit composant pour un bloc de squelette animé
const SkeletonBlock: React.FC<{ className?: string }> = ({ className }) => (
    <div className={`bg-slate-200 animate-pulse rounded-md ${className}`} />
);

const DashboardSkeleton = () => {
    return (
        <div className="flex h-screen bg-slate-100 overflow-hidden">
            {/* On peut afficher la vraie sidebar car elle n'attend pas de données */}
            <Sidebar activeTab="overview" setActiveTab={() => {}} />

            <div className="flex-1 flex flex-col overflow-hidden">
                {/* Squelette du Header */}
                <header className="flex-shrink-0 h-20 flex items-center justify-between px-8 border-b border-slate-200 bg-white">
                    <div>
                        <SkeletonBlock className="h-7 w-64 mb-2" />
                        <SkeletonBlock className="h-4 w-48" />
                    </div>
                    <div className="flex items-center gap-6">
                        <SkeletonBlock className="h-6 w-6 rounded-full" />
                        <div className="flex items-center gap-3">
                            <SkeletonBlock className="w-10 h-10 rounded-full" />
                            <div>
                                <SkeletonBlock className="h-5 w-24 mb-1" />
                                <SkeletonBlock className="h-3 w-16" />
                            </div>
                        </div>
                    </div>
                </header>

                {/* Squelette du Contenu Principal */}
                <main className="flex-1 overflow-y-auto p-8 space-y-8">
                    {/* Squelette des StatCards */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <SkeletonBlock className="h-24 rounded-xl" />
                        <SkeletonBlock className="h-24 rounded-xl" />
                        <SkeletonBlock className="h-24 rounded-xl" />
                    </div>

                    {/* Squelette de la table d'activité récente */}
                    <div className="bg-white p-6 rounded-xl border border-slate-200/80">
                        <SkeletonBlock className="h-6 w-40 mb-6" />
                        <div className="space-y-4">
                            <div className="flex justify-between items-center">
                                <SkeletonBlock className="h-10 w-2/3" />
                                <SkeletonBlock className="h-6 w-1/5" />
                            </div>
                            <div className="flex justify-between items-center">
                                <SkeletonBlock className="h-10 w-2/3" />
                                <SkeletonBlock className="h-6 w-1/5" />
                            </div>
                            <div className="flex justify-between items-center">
                                <SkeletonBlock className="h-10 w-2/3" />
                                <SkeletonBlock className="h-6 w-1/5" />
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    );
};

export default DashboardSkeleton;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\StatCard.tsx
================================================================================

import React from 'react';
import { cn } from '@/lib/utils';
import { Card, CardHeader, CardContent } from './Card';

interface StatCardProps {
  icon: React.ElementType;
  title: string;
  value: string | number;
  color?: string; // ex: "#00c758" ou une couleur tailwind comme "bg-green-500"
  className?: string;
}

export function StatCard({ icon: Icon, title, value, color = '#052648', className }: StatCardProps) {
  // Détecter si la couleur est une classe Tailwind (commence par bg-, text-, etc.)
  const isTailwindColor = /^(bg|text|border)-/.test(color);
  
  const iconBgStyle = isTailwindColor ? {} : { backgroundColor: `${color}1A` }; // ex: #00c7581A for 10% opacity
  const iconColorStyle = isTailwindColor ? {} : { color: color };
  const iconBgClass = isTailwindColor ? color.replace('bg-', 'bg-').replace(/-\d+$/, (match) => `-${parseInt(match.substring(1)) / 10}`) : ''; // bg-green-500 -> bg-green-50
  const iconColorClass = isTailwindColor ? color.replace('bg-', 'text-') : '';

  return (
    <Card className={cn("flex flex-row items-center gap-4 p-4 hover:-translate-y-1", className)}>
        <div 
          className={cn("flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg", iconBgClass)} 
          style={iconBgStyle}
        >
          <Icon className={cn("h-6 w-6", iconColorClass)} style={iconColorStyle} />
        </div>
        <div>
          <p className="text-2xl font-bold text-primary">{value}</p>
          <p className="text-sm text-slate-500">{title}</p>
        </div>
    </Card>
  );
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\Textarea.tsx
================================================================================

import * as React from "react"
import { cn } from "@/lib/utils"

export interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}

const Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(
  ({ className, ...props }, ref) => {
    return (
      <textarea
        className={cn(
          "flex min-h-[80px] w-full rounded-md border border-slate-300 bg-slate-50 px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Textarea.displayName = "Textarea"

export { Textarea }


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\ui\Skeleton.tsx
================================================================================

// components/ui/SkeletonCard.tsx
import React from 'react';

interface SkeletonProps {
  className?: string;
}

export const Skeleton: React.FC<SkeletonProps> = ({ className }) => (
  <div className={`animate-pulse bg-slate-200 rounded-lg ${className}`} />
);

export const CardSkeleton = () => {
  return (
    <div className="bg-white p-6 rounded-2xl border border-slate-100 shadow-sm space-y-4">
      <div className="flex items-center gap-4">
        <Skeleton className="w-12 h-12 rounded-full" />
        <div className="space-y-2">
          <Skeleton className="h-4 w-32" />
          <Skeleton className="h-3 w-20" />
        </div>
      </div>
      <div className="space-y-2">
        <Skeleton className="h-3 w-full" />
        <Skeleton className="h-3 w-5/6" />
      </div>
    </div>
  );
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\common\FunFactLoader.tsx
================================================================================

// /src/components/common/FunFactLoader.tsx
import React, { useEffect, useState } from 'react';
import { funFacts } from '@/lib/constants'; // Importer vos fun facts

export default function FunFactLoader() {
  const [currentFact, setCurrentFact] = useState<{ image: string; text: string } | null>(null);

  useEffect(() => {
    // Choisir un fait au hasard
    const randomIndex = Math.floor(Math.random() * funFacts.length);
    setCurrentFact(funFacts[randomIndex]);
    
    // Possibilité de changer de fait après quelques secondes (facultatif)
    // const interval = setInterval(() => ... ); 
    // return () => clearInterval(interval);

  }, []); // Pas de dépendance pour qu'il s'exécute uniquement au montage

  if (!currentFact) return null; // Ne rien afficher tant qu'un fait n'est pas sélectionné (très rapide)

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-white">
      {/* --- Décorations en arrière-plan (cercles flous animés) --- */}
      <div className="absolute inset-0 pointer-events-none overflow-hidden">
        <div className="absolute top-[-50px] left-[-50px] w-64 h-64 bg-blue-100 rounded-full opacity-60 animate-bounce-slow filter blur-3xl"></div>
        <div className="absolute bottom-[-20px] right-[-30px] w-52 h-52 bg-green-50 rounded-full opacity-70 animate-bounce-slow-alt filter blur-3xl"></div>
      </div>

      {/* --- Contenu du chargement --- */}
      <div className="z-10 flex flex-col items-center justify-center space-y-6 max-w-md p-6 text-center">
        
        {/* Loader Icon / Image thématique */}
        <div className="relative">
          <img 
            src={currentFact.image || '/assets/icons/loading-placeholder.svg'} // Fallback icon
            alt="Medical Icon" 
            className="w-32 h-32 mx-auto animate-pulse" 
          />
        </div>

        {/* Le fait amusant */}
        <div className="space-y-2">
            <h3 className="text-xl font-bold text-indigo-700 font-mono tracking-wide animate-fade-in-up">LE SAVIEZ-VOUS ?</h3>
            <p className="text-gray-700 text-lg leading-relaxed font-sans opacity-0 animate-fade-in delay-200">
               {currentFact.text}
            </p>
        </div>
      </div>

      {/* Spinner technique discret (Optionnel pour indiquer clairement que ça travaille) */}
      <div className="absolute bottom-8 text-gray-400 flex flex-col items-center">
           <div className="loader border-t-blue-500 rounded-full w-8 h-8 border-4 border-slate-200 animate-spin mb-2"></div>
           <p className="text-sm font-light">Préparation de votre parcours...</p>
      </div>

    </div>
  );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\components\common\OnBoardingTutorial.tsx
================================================================================

// /src/components/common/OnboardingTutorial.tsx
import React, { useState } from 'react';
import { Lightbulb, CheckCircle2, Trophy, Brain } from 'lucide-react'; // Example d'icônes

// --- Liste des étapes ---
const tutorialSteps = [
    {
        title: "Bienvenue dans votre simulation médicale",
        content: "Nous utilisons l'intelligence artificielle pour recréer des interactions patients réalistes.",
        icon: Brain,
        color: "text-purple-600"
    },
    {
        title: "Discutez naturellement",
        content: "Vous pouvez poser vos questions en langage naturel au patient, ou réaliser des examens via le panneau latéral.",
        icon: Lightbulb,
        color: "text-yellow-500"
    },
    {
        title: "Recevez des feedback précis",
        content: "Après chaque diagnostic, un expert virtuel évaluera votre raisonnement, votre démarche et vos conclusions.",
        icon: CheckCircle2,
        color: "text-green-600"
    },
     {
        title: "Suivez vos progrès",
        content: "Accédez au tableau de bord pour voir vos statistiques et les domaines à améliorer.",
        icon: Trophy,
        color: "text-blue-600"
    }
];

export default function OnboardingTutorial({ onClose }: { onClose: () => void }) {
    const [step, setStep] = useState(0);

    const handleNext = () => {
        if (step < tutorialSteps.length - 1) {
            setStep(s => s + 1);
        } else {
            onClose(); // Fin du tutoriel
        }
    };
    
    const StepIcon = tutorialSteps[step].icon;
    const isLast = step === tutorialSteps.length - 1;

    return (
        <div className="fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300">
            <div className="bg-white rounded-3xl w-full max-w-lg shadow-2xl p-8 relative flex flex-col items-center text-center">
                
                {/* Icône principale */}
                <div className={`p-6 rounded-full bg-slate-50 mb-6 border-4 border-white shadow-md animate-bounce-slow`}>
                     <StepIcon size={64} className={tutorialSteps[step].color} strokeWidth={1.5} />
                </div>

                <h2 className="text-2xl font-bold text-slate-800 mb-4 transition-all ease-in-out duration-300">
                   {tutorialSteps[step].title}
                </h2>

                <p className="text-gray-600 leading-relaxed mb-8 h-20 transition-opacity duration-300">
                   {tutorialSteps[step].content}
                </p>

                {/* Points de navigation */}
                <div className="flex gap-2 mb-8">
                    {tutorialSteps.map((_, idx) => (
                        <div 
                           key={idx} 
                           className={`w-2.5 h-2.5 rounded-full transition-all duration-300 ${idx === step ? 'bg-slate-800 w-6' : 'bg-slate-300'}`} 
                        />
                    ))}
                </div>

                <button 
                  onClick={handleNext}
                  className="w-full py-4 rounded-xl bg-slate-900 text-white font-semibold text-lg hover:bg-slate-800 transition-colors shadow-lg active:scale-[0.98]"
                >
                   {isLast ? "C'est parti !" : "Suivant"}
                </button>
            </div>
        </div>
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\types\simulation\constant.ts
================================================================================

// types/simulation/constant.ts
import { Heart, Baby, Ear, Brain, Eye, Bone, Wind, Activity, Droplet, Shield, Microscope, TestTube, Users, Thermometer, Syringe, CloudDrizzle } from 'lucide-react';
import { Service, PatientsData, UseCase, ClinicalExam } from '@/types/simulation/types';
export const MAIN_COLOR = '#052648';

export const services: Service[] = [
  { id: 'cardio', name: 'Cardiologie', icon: Heart, bgImage: '/images/services/cardiologie.jpeg' },
  { id: 'pediatrie', name: 'Pédiatrie', icon: Baby, bgImage: '/images/services/pediatrie.jpeg' },
  { id: 'orl', name: 'ORL', icon: Ear, bgImage: '/images/services/orl.jpeg' },
  { id: 'neuro', name: 'Neurologie', icon: Brain, bgImage: '/images/services/neuro.jpeg' },
  { id: 'ophtalmo', name: 'Ophtalmologie', icon: Eye, bgImage: '/images/services/ophtalmo.jpeg' },
  { id: 'ortho', name: 'Orthopédie', icon: Bone, bgImage: '/images/services/ortho.jpeg' },
  { id: 'pneumo', name: 'Pneumologie', icon: Wind, bgImage: '/images/services/pneumo.jpeg' },
  { id: 'urgence', name: 'Urgences', icon: Activity, bgImage: '/images/services/urgences.jpeg' },
];

export const difficultyLevels = ['Profane', 'Débutant', 'Intermédiaire', 'Confirmé', 'Expert'];

// Base de données statique riche
export const patientsData: PatientsData = {
  'cardio': {
    nom: 'M. Kamdem Jean',
    age: 58,
    sexe: 'Masculin',
    motif: 'Douleur thoracique constrictive',
    antecedents: 'HTA mal suivie, Tabagisme actif (20 PA)',
    modeDeVie: 'Sédentaire, alimentation riche en sel',
    histoireMaladie: 'Douleur apparue brutalement au repos il y a 2h, irradiant dans la mâchoire.',
    symptomes: 'Douleur rétro-sternale, angoisse, sueurs froides, légère nausée.',
    signesVitaux: 'TA: 160/95 mmHg, FC: 110 bpm, SpO2: 96% AA',
    temperature: '37.1°C',
    pressionArterielle: '160/95 mmHg',
    saturationOxygene: '96%',
    examenClinique: 'Bruits du cœur réguliers, pas de souffle. Poumons libres. Pas d\'OMI.',
    analyseBiologique: 'ECG: Sus-décalage ST en DII, DIII, aVF (Territoire inférieur). Troponines positives.',
    diagnostic: 'Infarctus du Myocarde (SCA ST+ inférieur)',
    traitementAttendu: 'Aspirine, Clopidogrel/Ticagrelor, Héparine, Appel cardiologie interventionnelle (Coronarographie).'
  },
  'pneumo': {
    nom: 'Mme. Sarah Nguemo',
    age: 34,
    sexe: 'Féminin',
    motif: 'Essoufflement et toux sèche persistante',
    antecedents: 'Rhinite allergique',
    modeDeVie: 'Non fumeuse, travaille dans une boulangerie (exposition farine)',
    histoireMaladie: 'Toux nocturne depuis 3 semaines. Crises de dyspnée sifflante à l\'effort.',
    symptomes: 'Dyspnée expiratoire, sensation d\'oppression thoracique, réveils nocturnes.',
    signesVitaux: 'TA: 120/70, FC: 88, SpO2: 97%, FR: 22/min',
    temperature: '37.0°C',
    pressionArterielle: '120/70 mmHg',
    saturationOxygene: '97%',
    examenClinique: 'Sibilants expiratoires bilatéraux diffus. Temps expiratoire allongé.',
    analyseBiologique: 'EFR: Syndrome obstructif réversible sous Beta-2. NFS: Hyperéosinophilie modérée.',
    diagnostic: 'Asthme Bronchique',
    traitementAttendu: 'Bronchodilatateurs courte action (Ventoline) si crise + Corticostéroïdes inhalés de fond.'
  },
  'fallback': {
    nom: 'Patient Standard', age: 30, sexe: 'Masculin', motif: 'Fièvre', antecedents: 'Rien',
    symptomes: 'Mal de tête, fièvre', signesVitaux: 'Normal', temperature: '38',
    pressionArterielle: '120/80', saturationOxygene: '99', examenClinique: 'Normal',
    analyseBiologique: 'Normale', diagnostic: 'Grippe', traitementAttendu: 'Repos, paracétamol'
  }
};

export const exampleExams: ClinicalExam[] = [
  { name: "Goutte épaisse (Paludisme)", icon: Syringe, resultat: "Positive ++" },
  { name: "Test rapide VIH", icon: Shield, resultat: "Négatif" },
  { name: "Examen des crachats (Tuberculose)", icon: Microscope, resultat: "BAAR Négatif" },
  { name: "Glycémie à jeun", icon: TestTube, resultat: "0.95 g/L" },
  { name: "Tension Artérielle", icon: Activity, resultat: "125/80 mmHg" },
  { name: "Examen des selles", icon: CloudDrizzle, resultat: "Kystes d'amibes" },
  { name: "NFS (Numération Formule Sanguine)", icon: Thermometer, resultat: "Anémie légère" }
];


// NOUVELLE STRUCTURE CORRIGÉE : AJOUT DE traitementAttendu
export const useCases: UseCase[] = [
  {
    id: 'cardio-001',
    serviceId: 'cardio', 
    difficulty: 'Intermédiaire',
    patient: {
      nom: 'M. Kamdem Jean', age: 58, sexe: 'Masculin', motif: 'Douleur thoracique et essoufflement', antecedents: 'Hypertension artérielle, tabagisme', symptomes: 'Douleur oppressive rétrosternale irradiant vers le bras gauche, dyspnée, sueurs',
      signesVitaux: 'TA: 160/95 mmHg, FC: 98 bpm, FR: 22/min, SpO2: 94%',
      temperature: '37.1°C', pressionArterielle: '160/95 mmHg', saturationOxygene: '94%', examenClinique: 'Ausculation cardiaque: Bruits du cœur réguliers, pas de souffle. Auscultation pulmonaire: murmure vésiculaire conservé.', analyseBiologique: 'Troponine élevée.',
      diagnostic: 'Syndrome coronarien aigu',
      traitementAttendu: 'MONA (Morphine, Oxygène, Nitrés, Aspirine) et Coro'
    }
  },
  {
    id: 'pediatrie-001',
    serviceId: 'pediatrie',
    difficulty: 'Confirmé',
    patient: {
      nom: 'Bébé Ngo\'o Marie', age: 2, sexe: 'Féminin', motif: 'Fièvre et difficultés respiratoires', antecedents: 'Prématurée, vaccination à jour', symptomes: 'Fièvre 39.5°C, toux productive, geignement expiratoire, tirage intercostal',
      signesVitaux: 'T: 39.5°C, FC: 145 bpm, FR: 55/min, SpO2: 89%',
      temperature: '39.5°C', pressionArterielle: '90/60 mmHg', saturationOxygene: '89%', examenClinique: 'Râles crépitants à l\'auscultation du poumon droit.', analyseBiologique: 'Hyperleucocytose à polynucléaires neutrophiles.',
      diagnostic: 'Pneumonie aiguë',
      traitementAttendu: 'Antibiotiques (Amoxicilline) et antipyrétiques'
    }
  },
  {
    id: 'neuro-001',
    serviceId: 'neuro',
    difficulty: 'Expert',
    patient: {
      nom: 'Mme. Fotso Aline', age: 67, sexe: 'Féminin', motif: 'Apparition brutale d\'une faiblesse du côté droit du corps', antecedents: 'Fibrillation auriculaire, Diabète de type 2', symptomes: 'Hémiplégie droite, aphasie d\'expression, paralysie faciale droite.',
      signesVitaux: 'TA: 175/100 mmHg, FC: 110 bpm (irrégulier), FR: 18/min, SpO2: 97%',
      temperature: '37.0°C', pressionArterielle: '175/100 mmHg', saturationOxygene: '97%', examenClinique: 'Score de Glasgow à 13. NIHSS élevé. Souffle carotidien gauche.', analyseBiologique: 'Glycémie élevée.',
      diagnostic: 'Accident Vasculaire Cérébral (AVC) ischémique',
      traitementAttendu: 'Thrombolyse si délai respecté'
    }
  },
  {
    id: 'pneumo-001',
    serviceId: 'pneumo',
    difficulty: 'Intermédiaire',
    patient: {
      nom: 'M. Abega Luc', age: 24, sexe: 'Masculin', motif: 'Toux sèche et essoufflement à l\'effort', antecedents: 'Asthme infantile', symptomes: 'Toux nocturne, sibilants à l\'expiration, oppression thoracique, surtout après un effort ou exposition à l\'air froid.',
      signesVitaux: 'TA: 120/80 mmHg, FC: 80 bpm, FR: 16/min, SpO2: 98%',
      temperature: '37.0°C', pressionArterielle: '120/80 mmHg', saturationOxygene: '98%', examenClinique: 'Présence de sibilants expiratoires bilatéraux à l\'auscultation pulmonaire.', analyseBiologique: 'Aucune anomalie significative.',
      diagnostic: 'Crise d\'asthme',
      traitementAttendu: 'Salbutamol en spray'
    }
  },
  {
    id: 'orl-001',
    serviceId: 'orl',
    difficulty: 'Débutant',
    patient: {
      nom: 'Enfant Mbida Pierre', age: 6, sexe: 'Masculin', motif: 'Douleur intense à l\'oreille droite', antecedents: 'Rhinopharyngites fréquentes', symptomes: 'Otalgie droite pulsatile, fièvre à 38.5°C, pleurs, irritabilité, légère baisse de l\'audition.',
      signesVitaux: 'T: 38.5°C, FC: 110 bpm, FR: 25/min, SpO2: 99%',
      temperature: '38.5°C', pressionArterielle: '100/65 mmHg', saturationOxygene: '99%', examenClinique: 'Otoscopie : tympan droit rouge, bombé, avec disparition des reliefs osseux.', analyseBiologique: 'Non requis pour le diagnostic initial.',
      diagnostic: 'Otite moyenne aiguë (OMA)',
      traitementAttendu: 'Antalgiques et Antibiotiques si bactérien'
    }
  }
];

export const hints = [
  "Avez-vous pensé à demander les antécédents cardiovasculaires ?",
  "Regardez bien les signes vitaux, une tachycardie est présente.",
  "La biologie montre une anomalie spécifique, comparez avec les symptômes.",
  "Ce type de douleur est caractéristique d'une urgence vitale."
];


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\types\simulation\types.ts
================================================================================

import { LucideProps } from 'lucide-react';
import React from 'react';

// Type pour une icône de lucide-react
export type Icon = React.ForwardRefExoticComponent<Omit<LucideProps, "ref"> & React.RefAttributes<SVGSVGElement>>;

export interface Service {
  id: string;
  name: string;
  icon: Icon;
  bgImage: string;
}

export interface Patient {
  nom: string;
  age: number;
  sexe: 'Masculin' | 'Féminin';
  motif: string;
  antecedents: string;
  modeDeVie?: string; // Ajout pour le social (Tabac, alcool)
  histoireMaladie?: string; // Contexte pour l'IA
  symptomes: string;
  // Données physiologiques
  signesVitaux: string; // Utilisé par l'IA pour répondre aux questions simples
  temperature: string;
  pressionArterielle: string;
  saturationOxygene: string;
  // Résultats d'examens (cachés initialement)
  examenClinique: string;
  analyseBiologique: string;
  // La solution
  diagnostic: string;
  traitementAttendu: string; 
}

// Étapes logiques du jeu
export type GameState = 'asking' | 'diagnosing' | 'treating' | 'grading' | 'finished';

export type PatientsData = Record<string, Patient>;

export interface Message {
  sender: 'doctor' | 'patient' | 'system' | 'tutor';
  text: string;
  time: string;
  icon?: Icon;
  isAction?: boolean; // Pour différencier une question orale d'une action physique (auscultation)
    // Ajout pour le feedback immédiat du tuteur (rouge si mauvais)
  quality?: 'good' | 'bad' | 'neutral'; 
  feedback?: string; // Texte justificatif
}

export interface DiagnosticTool {
    name: string;
    icon: Icon;
    key: keyof Patient; 
    patientValue: string | number | undefined;
}

export interface ClinicalExam {
  name: string;
  icon: React.ElementType; 
  resultat: string;
}

export interface UseCase {
  id: string;
  serviceId: string;
  difficulty: 'Profane' | 'Débutant' | 'Intermédiaire' | 'Confirmé' | 'Expert';
  patient: Patient;
}

// Structure pour le retour de correction
export interface GameResult {
  score: number; // Sur 20
  feedback: string;
  missedSteps?: string[];
  diagnosisStatus: 'correct' | 'incorrect' | 'partial';
  finalGrade?: string; // ex: "A", "B"
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\types\simulation\grosmot.ts
================================================================================

// types/simulation/gros-mots.ts

export const PROFANITY_LIST2 = [
    "merde",
    "putain",
    "oh la vache",
    "oh purée",
    "fait chier",
    "sa mère",
    "tu fais chier",
    "j'en ai marre",
    "ras-le-bol",
    "ras-la-casquette",
    "débile",
    "imbécile",
    "crétin",
    "à la con",
    "rien à dire",
    "emmerde",
    "casse-toi",
    "barre-toi",
    "rien dans le crâne",
    "enculer",
    "enculé",
    "foutre",
    "abruti",
    "con", 
    "connard", 
    "connasse",
    "sale con", 
    "vieux con", 
    "jeune con", 
    "gros con",
    "ta gueule",
    "ferme-la",
    "salope",
    "salaud",
    "ras-le-cul",
    "je m'en fous",
    "je m'en fiche",
    "rien à carrer",
    "bâtard",
    "fils de chien",
    "fils de pute",
    "trou du cul",
    "trou de balle"
  ];

export const PROFANITY_LIST = [
    "merde",
    "putain",
  ];


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\types\dashboard\mockData.ts
================================================================================

// lib/mockData.ts
import { DashboardData } from "@/types/dashboard/dashboard";
import { Milestone } from "@/types/dashboard/dashboard";
export const MOCK_DASHBOARD_DATA: DashboardData = {
  user: {
    id: 'user_123',
    firstName: 'Alex',
    lastName: 'Morel',
    email: 'alex.morel@etudiant.med',
    dateOfBirth: '1998-07-22',
    gender: 'Masculin',
    profilePictureUrl: 'https://i.pravatar.cc/150?u=a042581f4e29026704d',
  },
  stats: {
    casesCompleted: 24,
    successRate: 75, // en pourcentage
    currentLevel: 'Interne Débutant',
  },
  cases: [
    { id: 'case_01', title: 'Syndrome coronarien aigu', specialty: 'Cardiologie', dateCompleted: '2023-10-15', score: 92, status: 'réussi' },
    { id: 'case_02', title: 'Pneumonie aiguë chez l\'enfant', specialty: 'Pédiatrie', dateCompleted: '2023-10-12', score: 45, status: 'échec' },
    { id: 'case_03', title: 'Gestion d\'une crise d\'asthme', specialty: 'Pneumologie', dateCompleted: '2023-10-10', score: 85, status: 'réussi' },
    { id: 'case_04', title: 'Otite moyenne aiguë', specialty: 'ORL', dateCompleted: '2023-10-08', score: 78, status: 'réussi' },
    { id: 'case_05', title: 'Diagnostic de la méningite', specialty: 'Neurologie', dateCompleted: '2023-10-05', score: 55, status: 'échec' },
  ],
};

export const milestones: Milestone[] = [
  { id: 0, level: 0, title: 'Début de l\'aventure', status: 'completed', score: 20, position: { x: '5%', y: '85%' } },
  // Segment 1
  { id: 1, level: 1, title: 'Introduction à la Cardiologie', status: 'completed', score: 18, position: { x: '5%', y: '15%' } },
  { id: 2, level: 2, title: 'Anatomie du Cœur', status: 'completed', score: 15, position: { x: '18%', y: '25%' } },
  { id: 3, level: 3, title: 'ECG : Les Bases', status: 'completed', score: 19, position: { x: '10%', y: '40%' } },
  { id: 4, level: 4, title: 'Valvulopathies', status: 'completed', score: 14, position: { x: '22%', y: '55%' } },
  { id: 5, level: 5, title: 'Insuffisance Cardiaque', status: 'current', score: null, position: { x: '12%', y: '70%' } },
  // Segment 2
  { id: 6, level: 6, title: 'Cas Clinique : Infarctus', status: 'locked', score: null, position: { x: '35%', y: '80%' } },
  { id: 7, level: 7, title: 'Pharmacologie Cardiovasculaire', status: 'locked', score: null, position: { x: '48%', y: '70%' } },
  { id: 8, level: 8, title: 'Arythmies', status: 'locked', score: null, position: { x: '40%', y: '50%' } },
  { id: 9, level: 9, title: 'Imagerie Cardiaque', status: 'locked', score: null, position: { x: '52%', y: '35%' } },
  { id: 10, level: 10, title: 'Cas Clinique : HTA', status: 'locked', score: null, position: { x: '45%', y: '20%' } },
  // Segment 3
  { id: 11, level: 11, title: 'Cardiopathies Congénitales', status: 'locked', score: null, position: { x: '65%', y: '15%' } },
  { id: 12, level: 12, title: 'Prévention Cardiovasculaire', status: 'locked', score: null, position: { x: '78%', y: '28%' } },
  { id: 13, level: 13, title: 'Urgences Cardiologiques', status: 'locked', score: null, position: { x: '70%', y: '45%' } },
  { id: 14, level: 14, title: 'Synthèse Clinique', status: 'locked', score: null, position: { x: '82%', y: '60%' } },
  { id: 15, level: 15, title: 'Examen Final de Cardiologie', status: 'locked', score: null, position: { x: '95%', y: '75%' } },
];


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\types\dashboard\dashboard.ts
================================================================================

// types/dashboard.ts
import { LucideIcon } from 'lucide-react';

export interface User {
  id: string;
  firstName: string;
  lastName: string;
  email: string;
  dateOfBirth: string;
  gender: 'Masculin' | 'Féminin' | 'Autre';
  profilePictureUrl: string;
}

export interface ClinicalCase {
  id: string;
  title: string;
  specialty: string;
  dateCompleted: string;
  score: number; // Score de 0 à 100
  status: 'réussi' | 'échec';
}

export interface Stats {
  casesCompleted: number;
  successRate: number;
  currentLevel: string;
}

export interface DashboardData {
  user: User;
  stats: Stats;
  cases: ClinicalCase[];
}

export interface NavItem {
  id: 'overview' | 'journey' | 'redo' | 'settings'| 'lib';
  label: string;
  icon: LucideIcon;
}

// types/dashboard.ts (à ajouter)

export interface Milestone {
  id: number;
  level: number;
  title: string;
  status: 'completed' | 'current' | 'locked';
  score: number | null; // Score sur 20
  position: {
    x: string; // En pourcentage pour le positionnement responsive
    y: string;
  };
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\types\expert\constant.ts
================================================================================

// types/expert/constant.ts
import { ExpertUseCase } from './types';

export const pendingCases: ExpertUseCase[] = [
  {
    id: 'neuro-001',
    serviceId: 'neuro',
    difficulty: 'Expert',
    status: 'pending',
    submittedAt: new Date().toISOString(),
    submittedBy: "IA Générative",
    patient: {
      nom: 'Mme. Fotso Aline', age: 67, sexe: 'Féminin', motif: 'Apparition brutale d\'une faiblesse du côté droit du corps', antecedents: 'Fibrillation auriculaire, Diabète de type 2', symptomes: 'Hémiplégie droite, aphasie d\'expression, paralysie faciale droite.',
      signesVitaux: 'TA: 175/100 mmHg, FC: 110 bpm (irrégulier), FR: 18/min, SpO2: 97%',
      temperature: '37.0°C', pressionArterielle: '175/100 mmHg', saturationOxygene: '97%', examenClinique: 'Score de Glasgow à 13. NIHSS élevé. Souffle carotidien gauche.', analyseBiologique: 'Glycémie élevée.',
      diagnostic: 'Accident Vasculaire Cérébral (AVC) ischémique',
      // AJOUT DU CHAMP MANQUANT
      traitementAttendu: 'Thrombolyse intraveineuse et admission en unité neuro-vasculaire.'
    }
  },
  {
    id: 'cardio-002',
    serviceId: 'cardio',
    difficulty: 'Intermédiaire',
    status: 'pending',
    submittedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(), // Il y a 2 heures
    submittedBy: "IA Générative",
    patient: {
      nom: 'M. Onana Paul', age: 45, sexe: 'Masculin', motif: 'Palpitations et vertiges', antecedents: 'Aucun notable', symptomes: 'Sensation de cœur qui bat très vite et de manière irrégulière, survenant par épisodes.',
      signesVitaux: 'TA: 120/80 mmHg, FC: 150 bpm (pendant la crise), FR: 18/min, SpO2: 99%',
      temperature: '37.2°C', pressionArterielle: '120/80 mmHg', saturationOxygene: '99%', examenClinique: 'ECG montre une tachycardie supraventriculaire.', analyseBiologique: 'Bilan thyroïdien normal.',
      diagnostic: 'Tachycardie de Bouveret',
      // AJOUT DU CHAMP MANQUANT
      traitementAttendu: 'Manoeuvres vagales puis Adénosine si échec.'
    }
  }
];


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\types\expert\types.ts
================================================================================

// types/expert/types.ts
import { UseCase } from '../simulation/types';

// Statut de validation pour un cas clinique
export type CaseStatus = 'pending' | 'approved' | 'rejected';

// Nouveaux types pour les cas d'utilisation avancés
export type PatientPersona = 'standard' | 'anxieux' | 'coopératif' | 'pressé' | 'silencieux';

export interface GoldenPathItem {
  id: string;
  type: 'question' | 'examen' | 'action';
  description: string; // Ex: "Demander les antécédents de diabète", "Faire un ECG"
  isCritical: boolean; // Est-ce une étape indispensable ?
}

// Un cas clinique enrichi avec toutes les métadonnées pour l'expert
export interface ExpertUseCase extends UseCase {
  status: CaseStatus;
  submittedAt: string; 
  submittedBy: string; 
  feedback?: string; 
  
  // Champs pour l'enrichissement pédagogique
  annotations?: string; // Notes de l'expert, pièges à éviter
  persona?: PatientPersona;
  goldenPath?: GoldenPathItem[];
}

// Type pour l'analyse des sessions des apprenants
export interface SessionLog {
    sessionId: string;
    caseId: string;
    studentId: string; // Anonymisé, ex: "Student-1A4B"
    success: boolean;
    score: number; // Sur 100
    timeSpent: number; // en minutes
    date: string;
    isFlagged: boolean; // Pour les cas "hors-piste"
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\types\user\profile.ts
================================================================================

export type UserLevel = 'student' | 'intern' | 'resident' | 'doctor' | 'specialist';
export type PracticeFrequency = 'daily' | 'weekly' | 'occasional';
export type DifficultyLevel = 'beginner' | 'intermediate' | 'advanced';

export interface UserProfile {
  // Identité
  id?: string;
  name: string;
  email: string;
  username: string;
  avatar?: string;
  
  // Académique
  level: UserLevel;
  yearOfStudy?: number;
  university?: string;
  
  // Spécialisation
  specialty?: string;
  areasOfInterest: string[];
  
  // Objectifs
  learningGoals: string[];
  targetExam?: string;
  practiceFrequency: PracticeFrequency;
  
  // Préférences
  difficultyPreference: DifficultyLevel;
  preferredCaseTypes: string[];
  
  // Statistiques
  totalCasesCompleted?: number;
  averageScore?: number;
  currentStreak?: number;
  joinedDate?: Date;
}

export const SPECIALTIES = [
  'Cardiologie',
  'Pédiatrie',
  'Chirurgie',
  'Médecine Interne',
  'Neurologie',
  'Psychiatrie',
  'Gynécologie-Obstétrique',
  'Dermatologie',
  'Ophtalmologie',
  'ORL',
  'Radiologie',
  'Anesthésie-Réanimation',
  'Médecine d\'Urgence',
  'Autre'
];

export const LEARNING_GOALS = [
  'Préparation aux examens',
  'Perfectionnement clinique',
  'Découverte de nouvelles spécialités',
  'Révision des connaissances',
  'Formation continue',
  'Préparation aux concours'
];

export const CASE_TYPES = [
  'Cas cliniques standards',
  'Cas d\'urgence',
  'Cas complexes',
  'Cas pédiatriques',
  'Cas gériatriques',
  'Cas chirurgicaux',
  'Imagerie médicale'
];



================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\types\backend\index.ts
================================================================================

// types/backend/index.ts

/**
 * 📘 Ref: Dictionnaire de Données - MODULE EXPERT
 * Table: cas_cliniques_enrichis
 */

// Représentation de la pathologie (Table: pathologies)
export interface BackendDisease {
  id: number;
  nom_fr: string;
  code_icd10: string;
  categorie?: string;
  prevalence_cameroun?: string | number; // Float 0.0-1.0 stocké en string ou number
  niveau_gravite?: number; // 1-5
  description?: string;
}

export interface BackendSymptom {
  id: number;
  nom: string;
  categorie?: string;
  signes_alarme?: boolean;
}

// Structure JSON complexe pour presentation_clinique
export interface PresentationClinique {
  histoire_maladie: string;
  // Anamnèse et signes physiques
  anamnese?: string | Record<string, any>; 
  symptomes_patient: Array<{
    symptome_id: number;
    details: string; // ex: "Depuis 3 jours, intensité 7/10"
  }>;
  antecedents?: string | {
    details: string;
    personnels?: string[];
    familiaux?: string[];
  };
}

// Structure JSON pour donnees_paracliniques
export interface DonneesParacliniques {
  signes_vitaux?: string | Record<string, any>;
  examen_clinique?: string; // Observations physiques
  analyses_biologiques?: Record<string, any>; // Résultats labo
  imagerie?: Record<string, any>;
}


// Schema de Réponse (Ce qu'on reçoit du GET)
export interface BackendClinicalCase extends BackendClinicalCaseCreate {
  id: number;
  created_at: string;
  updated_at: string;
  // La jointure est faite par FastAPI/Pydantic
  pathologie_principale: BackendDisease;
  // Les images jointes
  images_associees?: Array<{
      id: number;
      fichier_url: string;
      type_examen: string;
  }>;
}

// Version simplifiée pour les listes (Lightweight)
export interface BackendClinicalCaseSimple {
    id: number;
    code_fultang: string;
    niveau_difficulte: number;
    pathologie_principale: {
        nom_fr: string;
        code_icd10: string;
        categorie: string;
    };
    created_at: string;
    nb_images: number;
    nb_sons: number;
}

// ... existants ...

// --- TYPES SYMPTOMES & RELATIONS ---

export interface BackendSymptom {
  id: number;
  nom: string;
  nom_local?: string; // ex: "Mal de ventre" vs "Douleur abdominale"
  categorie?: string; // "Signe vital", "Général", "Digestif"
  type_symptome?: string; // "Subjectif", "Objectif"
  description?: string;
  // Le JSON des questions peut être flexible, on le type génériquement
  questions_anamnese?: Record<string, any> | null; 
  signes_alarme: boolean;
  created_at?: string;
  updated_at?: string;
}

export interface DiseaseForSymptom {
  pathologie_id: number; // L'API pourrait renvoyer l'objet complet ou l'ID
  pathologie_nom?: string; // Si le backend fait le join, sinon on devra peut-être le récupérer
  probabilite: number | string; // % de chance d'avoir cette maladie
  importance_diagnostique: number;
}

export interface TreatmentForSymptom {
    medicament_id: number;
    medicament_dci?: string;
    medicament_nom?: string;
    efficacite: string;
    rang_preference: number;
}

// Pour la création/update
export type BackendSymptomCreate = Omit<BackendSymptom, 'id' | 'created_at' | 'updated_at'>;

// types/backend/index.ts (Ajouter ou mettre à jour)

export interface BackendMedication {
    id: number;
    dci: string; // Dénomination Commune Internationale
    nom_commercial: string;
    classe_therapeutique: string;
    forme_galenique: string;
    dosage: string;
    voie_administration: string;
    mecanisme_action?: string;
    // Les champs JSONB : on les type en Record<string, any> ou any pour la flexibilité
    indications?: Record<string, any> | string; 
    contre_indications?: Record<string, any> | string;
    effets_secondaires?: Record<string, any> | string;
    interactions_medicamenteuses?: Record<string, any> | string;
    precautions_emploi?: string;
    posologie_standard?: Record<string, any> | string;
    disponibilite_cameroun?: string;
    cout_moyen_fcfa?: number;
    statut_prescription?: string; // ex: "Ordonnance simple", "Stupéfiant"
    created_at?: string;
    updated_at?: string;
}

export type BackendMedicationCreate = Omit<BackendMedication, 'id' | 'created_at' | 'updated_at'>;

// types/backend/index.ts

export interface BackendDisease {
  id: number;
  nom_fr: string;
  code_icd10: string;
  nom_en?: string;
  nom_local?: string;
  categorie?: string; // ex: Cardiologie
  prevalence_cameroun?: string | number; // "0.5%" ou "Fréquent"
  niveau_gravite?: number; // 1 à 5
  description?: string;
  physiopathologie?: string;
  
  // Champs JSON pour futures extensions
  complications?: Record<string, any> | string;
  facteurs_risque?: Record<string, any> | string;
  
  created_at?: string;
  updated_at?: string;
}

export type BackendDiseaseCreate = Omit<BackendDisease, 'id' | 'created_at' | 'updated_at'>;


// types/backend/index.ts

// ... (autres interfaces)

export interface BackendImage {
    id: number;
    // Métadonnées médicales
    type_examen: string; // "Radio", "Scanner", "IRM", "Echographie"
    sous_type?: string;  // "Thorax", "Genou"
    pathologie_id?: number;
    description?: string;
    
    // Analyses
    signes_radiologiques?: Record<string, any> | string; // JSONB
    annotations?: any[]; // JSONB
    interpretation_experte?: string;
    diagnostic_differentiel?: string[]; // Array
    
    // Validation
    niveau_difficulte: number; // 1-5
    qualite_image: number; // 1-5
    valide_expert: boolean;
    expert_validateur?: string;
    date_validation?: string;
    
    // Technique
    fichier_url: string;
    fichier_miniature_url?: string; // Optional si le backend le génère
    format_image: string; // "jpg", "dicom"
    taille_ko: number;
    resolution?: string; // "1920x1080"
    created_at: string;
}

// Pour l'envoi (FormData gère le fichier, mais on type les champs textes ici)
export interface ImageMetadata {
    type_examen: string;
    sous_type?: string;
    pathologie_id?: number;
    description?: string;
    niveau_difficulte: number;
    qualite_image: number;
}

export interface BackendClinicalCaseCreate {
  code_fultang: string;
  pathologie_principale_id: number;
  pathologies_secondaires_ids: number[];
  presentation_clinique: {
    histoire_maladie: string;
    symptomes_patient: Array<{ symptome_id: number; details: string }>;
    antecedents: Record<string, any>;
  };
  donnees_paracliniques: Record<string, any>;
  evolution_patient: string;
  images_associees_ids: number[];
  sons_associes_ids: number[];
  medicaments_prescrits: any[]; 
  niveau_difficulte: number;
  duree_estimee_resolution_min: number;
  objectifs_apprentissage: string[];
  competences_requises: Record<string, any>;
}








================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\contexts\CaseContext.tsx
================================================================================

// contexts/CaseContext.tsx
'use client';

import React, { createContext, useState, useContext, ReactNode } from 'react';
import { ExpertUseCase } from '@/types/expert/types';
import { pendingCases as initialPendingCases } from '@/types/expert/constant'; // Données initiales

// Définir la structure du contexte
interface CaseContextType {
  cases: ExpertUseCase[];
  approveCase: (caseId: string) => void;
  rejectCase: (caseId: string, feedback: string) => void;
  getCaseById: (caseId: string) => ExpertUseCase | undefined;
}

// Créer le contexte avec une valeur par défaut (pour l'autocomplétion)
const CaseContext = createContext<CaseContextType | undefined>(undefined);

// Créer le fournisseur (Provider) qui contiendra la logique
export const CaseProvider = ({ children }: { children: ReactNode }) => {
  const [cases, setCases] = useState<ExpertUseCase[]>(initialPendingCases);

  const getCaseById = (caseId: string): ExpertUseCase | undefined => {
    return cases.find(c => c.id === caseId);
  };

  const approveCase = (caseId: string) => {
    setCases(prevCases => 
      prevCases.map(c => 
        c.id === caseId ? { ...c, status: 'approved' } : c
      )
    );
    console.log(`Case ${caseId} approved.`);
  };

  const rejectCase = (caseId: string, feedback: string) => {
    setCases(prevCases => 
      prevCases.map(c => 
        c.id === caseId ? { ...c, status: 'rejected', feedback } : c
      )
    );
    console.log(`Case ${caseId} rejected with feedback: ${feedback}`);
  };

  return (
    <CaseContext.Provider value={{ cases, approveCase, rejectCase, getCaseById }}>
      {children}
    </CaseContext.Provider>
  );
};

// Créer un hook personnalisé pour utiliser facilement le contexte
export const useCases = (): CaseContextType => {
  const context = useContext(CaseContext);
  if (!context) {
    throw new Error('useCases must be used within a CaseProvider');
  }
  return context;
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\contexts\AuthContext.tsx
================================================================================

// contexts/AuthContext.tsx
'use client';

import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';
import { useRouter } from 'next/navigation';
import { 
  LearnerResponse, 
  LearnerCreate, 
  loginLearner, 
  createLearner, 
  getLearnerMe 
} from '@/services/learnerService';
import toast from 'react-hot-toast';

// Type pour les données temporaires (ce qu'on remplit dans AuthForm)
interface TempData {
  nom: string;
  email: string;
  // Le reste sera rempli dans Onboarding
}

interface AuthContextType {
  user: LearnerResponse | null;
  isAuthenticated: boolean;
  isLoading: boolean;
  
  // Stockage temporaire inscription (Etape 1 -> Etape 2)
  tempRegistrationData: TempData | null;
  saveTempRegistration: (data: TempData) => void;
  
  // Actions
  finalizeRegistration: (completeData: LearnerCreate) => Promise<void>;
  login: (email: string, matricule: string) => Promise<void>;
  logout: () => void;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider = ({ children }: { children: ReactNode }) => {
  const router = useRouter();
  const [user, setUser] = useState<LearnerResponse | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  
  // Données temporaires conservées dans l'état (ou LocalStorage si on veut persistance au refresh)
  const [tempRegistrationData, setTempDataState] = useState<TempData | null>(null);

  // --- Initialisation : Vérifier si déjà connecté ---
  useEffect(() => {
    const initAuth = async () => {
      // Restaurer temp data si refresh page
      const savedTemp = localStorage.getItem('temp_reg_data');
      if (savedTemp) setTempDataState(JSON.parse(savedTemp));

      const token = localStorage.getItem('access_token');
      if (token) {
        try {
          const userData = await getLearnerMe(token);
          setUser(userData);
        } catch {
          logout(); // Token invalide
        }
      }
      setIsLoading(false);
    };
    initAuth();
  }, []);

  // 1. Sauvegarder nom/email temporairement
  const saveTempRegistration = (data: TempData) => {
    setTempDataState(data);
    localStorage.setItem('temp_reg_data', JSON.stringify(data));
  };

  // 2. Finaliser inscription (Appelé à la fin du Onboarding)
  const finalizeRegistration = async (completeData: LearnerCreate) => {
    try {
      setIsLoading(true);
      // a. Créer l'apprenant en base
      await createLearner(completeData);
      
      // b. Auto-login pour récupérer le token
      await login(completeData.email, completeData.matricule);
      
      // c. Nettoyer
      localStorage.removeItem('temp_reg_data');
      setTempDataState(null);
      
      // Pas de redirection ici, on laisse le composant UI gérer l'affichage du succès
    } catch (error: any) {
      console.error(error);
      throw error;
    } finally {
      setIsLoading(false);
    }
  };

  const login = async (email: string, matricule: string) => {
    try {
      setIsLoading(true);
      const { access_token } = await loginLearner({ email, matricule });
      
      // Stockage Token
      localStorage.setItem('access_token', access_token);
      
      // Chargement profil
      const userProfile = await getLearnerMe(access_token);
      setUser(userProfile);
      
      toast.success(`Bienvenue, Dr. ${userProfile.nom} !`);
      router.push('/dashboard');
    } catch (error: any) {
      console.error("Login failed:", error);
      throw error;
    } finally {
      setIsLoading(false);
    }
  };

  const logout = () => {
    localStorage.removeItem('access_token');
    setUser(null);
    router.push('/connexion');
  };

  return (
    <AuthContext.Provider value={{ 
      user, 
      isAuthenticated: !!user, 
      isLoading,
      tempRegistrationData,
      saveTempRegistration,
      finalizeRegistration, 
      login, 
      logout 
    }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (context === undefined) throw new Error('useAuth must be used within an AuthProvider');
  return context;
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\lib\supabaseClient.ts
================================================================================

// lib/supabaseClient.ts

import { createBrowserClient } from '@supabase/ssr'

export function createClient() {
    // Crée un client Supabase pour le navigateur
    return createBrowserClient(
        process.env.NEXT_PUBLIC_SUPABASE_URL!,
        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
    );
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\lib\utils.ts
================================================================================

// lib/utils.ts
import { type ClassValue, clsx } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\lib\OpenRouteurClient.ts
================================================================================

// lib/openRouterClient.ts
import OpenAI from 'openai';

/**
 * Configuration pour OpenRouter avec modèle gratuit
 * Modèle recommandé : meta-llama/llama-3.1-8b-instruct:free
 * Excellent pour le roleplay médical et gratuit
 */
export const openRouterClient = new OpenAI({
  apiKey: process.env.OPENROUTER_API_KEY!,
  baseURL: "https://openrouter.ai/api/v1",
  defaultHeaders: {
    "HTTP-Referer": process.env.NEXT_PUBLIC_SITE_URL || "http://localhost:3000",
    "X-Title": "FullTang Medical Simulator",
  }
});

// Configuration des modèles disponibles
export const MODELS = {
  // Modèle GRATUIT pour simulation patient (roleplay)
  PATIENT_SIMULATION: "meta-llama/llama-3.1-8b-instruct:free",
  
  // Modèle GRATUIT pour correction (raisonnement)
  GRADING: "meta-llama/llama-3.1-8b-instruct:free",
  
  // Alternative premium si budget disponible
  PREMIUM: "anthropic/claude-3.5-sonnet"
};

export default openRouterClient;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\lib\apiClient.ts
================================================================================

// lib/apiClient.ts

// URL de base de votre backend déployé sur Render
const BASE_URL = "/api/backend"; 

/**
 * Wrapper générique pour fetch avec logging complet dans la console
 */
export async function apiClient<T>(
  endpoint: string,
  options: RequestInit = {}
): Promise<T> {
  const url = `${BASE_URL}${endpoint}`;
  
  const headers = {
    "Content-Type": "application/json",
    "Accept": "application/json",
    ...options.headers,
  };

  const config = {
    ...options,
    headers,
  };

  // --- LOG REQUEST ---
  console.group(`🚀 [API REQUEST] ${config.method || 'GET'} ${endpoint}`);
  console.log("URL:", url);
  console.log("Headers:", headers);
  if (config.body) {
    try {
      console.log("Body:", JSON.parse(config.body as string));
    } catch {
      console.log("Body (Raw):", config.body);
    }
  }
  console.groupEnd();

  try {
    const response = await fetch(url, config);

    // --- LOG RESPONSE ---
    // On clone la réponse pour pouvoir lire le JSON sans "consommer" le flux principal
    const responseClone = response.clone();
    let data;
    try {
        data = await responseClone.json();
    } catch (e) {
        data = await responseClone.text();
    }

    console.group(`✅ [API RESPONSE] ${response.status} ${endpoint}`);
    console.log("Data:", data);
    console.groupEnd();

    if (!response.ok) {
        // Gestion basique d'erreur renvoyée par FastAPI (HTTPValidationError)
        const errorDetail = typeof data === 'object' && data.detail 
            ? JSON.stringify(data.detail) 
            : "Une erreur est survenue";
        throw new Error(errorDetail);
    }

    return data as T;
  } catch (error) {
    console.error(`wm [API ERROR] ${endpoint}`, error);
    throw error;
  }
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\lib\constants.ts
================================================================================

export const funFacts = [
  // --- Spécial Cameroun & Afrique ---
  {
    image: 'https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le Professeur Leke, originaire du Cameroun, a reçu le prix Kwame Nkrumah de l\'Union africaine pour ses recherches pionnières sur le paludisme gestationnel.',
  },
  {
    image: 'https://images.unsplash.com/photo-1505751172876-fa1923c5c528?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Au Cameroun, l\'écorce de l\'arbre Enantia chlorantha (Moambé jaune) est traditionnellement utilisée pour traiter le paludisme et la fièvre typhoïde.',
  },
  {
    image: 'https://images.unsplash.com/photo-1581093458791-9f3c3900df4b?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'L\'Hôpital Central de Yaoundé a été fondé en 1933, ce qui en fait l\'un des plus anciens établissements de santé modernes du Cameroun.',
  },
  {
    image: 'https://images.unsplash.com/photo-1559757175-0eb30cd8c063?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'La toute première greffe cardiaque en Afrique (et l\'une des premières au monde) a été réalisée en 1967 par Christiaan Barnard en Afrique du Sud.',
  },
  {
    image: 'https://images.unsplash.com/photo-1542736667-06af9bee5ade?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le Pr. Victor Anomah Ngu du Cameroun a développé le Vassanox, un médicament expérimental à base de plantes contre le VIH/SIDA.',
  },
  {
    image: 'https://images.unsplash.com/photo-1555633514-abfab4aa13a7?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le Centre Pasteur du Cameroun est une référence en Afrique centrale pour la recherche biomédicale et la santé publique depuis 1959.',
  },
  {
    image: 'https://images.unsplash.com/photo-1596541223130-5d31a73fb6c6?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'En Afrique, la drépanocytose (anémie falciforme) est particulièrement fréquente, une adaptation génétique qui confère une résistance partielle au paludisme.',
  },
  {
    image: 'https://images.unsplash.com/photo-1629909613654-28e377c37b09?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le Kinkéliba est une plante ouest-africaine reconnue pour ses propriétés diurétiques et désinfectantes des voies urinaires.',
  },
  {
    image: 'https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Au Cameroun, la prévalence du VIH chez les adultes a considérablement diminué grâce aux programmes nationaux, passant sous la barre des 3%.',
  },
  {
    image: 'https://images.unsplash.com/photo-1626490334814-2c262e3d36b8?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le Pr. Gottlieb Lobe Monekosso du Cameroun a été Directeur régional de l\'OMS pour l\'Afrique pendant plus de 10 ans.',
  },
  {
    image: 'https://images.unsplash.com/photo-1526256262350-7da7584cf5eb?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le manioc, aliment de base au Cameroun, contient du cyanure à l\'état brut mais devient une excellente source d\'énergie une fois bien cuisiné.',
  },
  {
    image: 'https://images.unsplash.com/photo-1533230491871-3bc63df6d899?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'L\'Afrique compte plus de 2000 langues, ce qui représente un défi unique mais enrichissant pour la communication médicale interculturelle.',
  },
  {
    image: 'https://images.unsplash.com/photo-1666214280557-f1b5022eb634?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'L\'application "GiftedMom", créée au Cameroun par Alain Nteff, aide à réduire la mortalité maternelle et infantile grâce au suivi par SMS.',
  },
  {
    image: 'https://images.unsplash.com/photo-1563814674681-dc0b30cb6467?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le Moringa, surnommé "l\'arbre miracle" en Afrique, contient 7 fois plus de vitamine C que les oranges et 4 fois plus de calcium que le lait.',
  },
  {
    image: 'https://images.unsplash.com/photo-1643441584852-c67b2d5a3f29?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le Cardiopad, la première tablette médicale d\'Afrique permettant des examens cardiaques à distance, a été inventée par l\'ingénieur camerounais Arthur Zang.',
  },

  // --- Faits Médicaux Généraux & Corporels ---
  {
    image: 'https://images.unsplash.com/photo-1579684385127-1ef15d508118?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le saviez-vous ? Le stéthoscope a été inventé en 1816 par René Laennec pour des raisons de pudeur.',
  },
  {
    image: 'https://images.unsplash.com/photo-1628348068343-c6a848d2b6dd?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le cœur humain bat environ 100 000 fois par jour et pompe environ 7 500 litres de sang.',
  },
  {
    image: 'https://images.unsplash.com/photo-1631558778643-575db448b111?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Vos vaisseaux sanguins mis bout à bout feraient deux fois et demie le tour de la Terre.',
  },
  {
    image: 'https://images.unsplash.com/photo-1606771032394-a4b52c00a623?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le foie est le seul organe interne capable de se régénérer complètement à partir de 25% de sa masse originale.',
  },
  {
    image: 'https://images.unsplash.com/photo-1559087867-ce4c91325525?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'La cornée est la seule partie du corps sans apport sanguin direct; elle tire l\'oxygène directement de l\'air.',
  },
  {
    image: 'https://images.unsplash.com/photo-1594921932371-d640243e8647?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le plus petit os du corps humain est l\'étrier, situé dans l\'oreille moyenne. Il est plus petit qu\'un grain de riz.',
  },
  {
    image: 'https://images.unsplash.com/photo-1523999942470-df8398b58a18?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Les bébés ont environ 300 os à la naissance, mais les adultes n\'en ont que 206, car beaucoup fusionnent avec la croissance.',
  },
  {
    image: 'https://images.unsplash.com/photo-1626244686311-b84789df50e9?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'La vitesse de l\'influx nerveux vers le cerveau peut atteindre 400 km/h.',
  },
  {
    image: 'https://images.unsplash.com/photo-1534062635999-e68d0d5b4a5d?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'L\'acide gastrique est assez fort pour dissoudre du métal, mais l\'estomac se régénère constamment pour ne pas se digérer.',
  },
  {
    image: 'https://images.unsplash.com/photo-1634599981881-bd699f8e02d8?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Environ 50% de la structure de votre main se trouve en réalité dans le poignet.',
  },
  {
    image: 'https://images.unsplash.com/photo-1555562114-1e0f06a92842?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Les femmes clignent des yeux deux fois plus souvent que les hommes.',
  },
  {
    image: 'https://images.unsplash.com/photo-1579738012015-d9154dc8e9eb?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le fémur (os de la cuisse) est plus solide que le béton à poids égal.',
  },
  {
    image: 'https://images.unsplash.com/photo-1616715424564-9dfc13636f33?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Vous produisez assez de salive au cours de votre vie pour remplir deux piscines.',
  },
  {
    image: 'https://images.unsplash.com/photo-1623916664219-c07a0c7ce2c8?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Les empreintes de langue sont uniques, tout comme les empreintes digitales.',
  },
  {
    image: 'https://images.unsplash.com/photo-1633519808605-e1a3df3d526e?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Un éternuement peut voyager à plus de 160 km/h.',
  },
  {
    image: 'https://images.unsplash.com/photo-1615598687258-29ec1e07502c?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'La mâchoire est le muscle le plus puissant du corps humain en termes de pression exercée.',
  },
  {
    image: 'https://images.unsplash.com/photo-1611756586071-70e2a39281a4?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Il est physiquement impossible de se lécher le coude (même si vous venez d\'essayer !).',
  },
  {
    image: 'https://images.unsplash.com/photo-1630138908866-e8d98d24b6f7?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Les dents sont la seule partie du corps humain qui ne peut pas se guérir toute seule.',
  },
  {
    image: 'https://images.unsplash.com/photo-1549429571-08ec9e59d9c2?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le nez humain peut se souvenir de 50 000 odeurs différentes.',
  },
  {
    image: 'https://images.unsplash.com/photo-1522204523234-8729aa6e3d5f?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le corps humain contient suffisamment de carbone pour fabriquer 900 mines de crayons.',
  },
  {
    image: 'https://images.unsplash.com/photo-1615714771618-3568846c4f09?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Votre peau pèse deux fois plus que votre cerveau.',
  },
  {
    image: 'https://images.unsplash.com/photo-1587391993427-ec6d814c81fa?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Quand vous rougissez, la muqueuse de votre estomac rougit aussi.',
  },
  {
    image: 'https://images.unsplash.com/photo-1517524949504-20b12071221b?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Vous êtes plus grand le matin que le soir car le cartilage de la colonne se tasse dans la journée.',
  },
  {
    image: 'https://images.unsplash.com/photo-1615671043818-84224c6d3663?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le sang parcourt une distance totale de 19 000 km chaque jour dans votre corps.',
  },
  {
    image: 'https://images.unsplash.com/photo-1618844574971-89e49c7193dc?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Les êtres humains perdent environ 600 000 particules de peau par heure.',
  },
  {
    image: 'https://images.unsplash.com/photo-1526322830948-43d93a6df912?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Il y a plus de bactéries dans votre bouche qu\'il n\'y a d\'êtres humains sur Terre.',
  },
  {
    image: 'https://images.unsplash.com/photo-1555020108-6511394017f9?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le muscle oculaire est le muscle le plus rapide du corps, capable de contracter en moins de 1/100e de seconde.',
  },
  {
    image: 'https://images.unsplash.com/photo-1577789123891-ccb00b0e35f9?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Les antibiotiques ne combattent que les bactéries, ils sont inefficaces contre les virus (rhume, grippe).',
  },
  {
    image: 'https://images.unsplash.com/photo-1554522956-654dbdbb59c7?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Les globules rouges peuvent faire le tour de votre corps en moins de 20 secondes.',
  },
  {
    image: 'https://images.unsplash.com/photo-1634629472600-4d4367b6eb8b?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'Le premier antibiotique, la pénicilline, a été découvert par hasard par Alexander Fleming en 1928.',
  },
  {
    image: 'https://images.unsplash.com/photo-1563603417743-34e8f7df8b1c?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'En moyenne, une personne passera 6 mois de sa vie à attendre aux feux rouges.',
  },
  {
    image: 'https://images.unsplash.com/photo-1596726148386-db8a49c6934c?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'La grippe espagnole de 1918 a infecté un tiers de la population mondiale de l\'époque.',
  },
  {
    image: 'https://images.unsplash.com/photo-1628109673967-df5d9193f412?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'L\'anesthésie moderne n\'a été utilisée couramment qu\'à partir du milieu du 19ème siècle. Avant, on utilisait de l\'alcool ou de l\'opium.',
  },
  {
    image: 'https://images.unsplash.com/photo-1634599981881-bd699f8e02d8?auto=format&fit=crop&q=80&w=200&h=200',
    text: 'La main humaine contient 27 os, 29 articulations et au moins 123 ligaments.',
  },
];


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\services\authService.ts
================================================================================

// services/authService.ts

import { createClient } from '@/lib/supabaseClient';
import type { AuthError, AuthResponse } from '@supabase/supabase-js';
import type { UserProfile } from '@/types/user/profile';

const supabase = createClient();

// 1. Interface stricte pour l'Inscription (Email)
export interface SignUpCredentials {
  email: string;
  password: string;
  options?: {
    data: {
      username?: string;
      [key: string]: any;
    }
    emailRedirectTo?: string;
  }
}

// 2. Interface stricte pour la Connexion (Email uniquement pour notre app)
export interface SignInCredentials {
  email: string;
  password: string;
}

// --- Fonction d'Inscription ---
export const signUp = async (credentials: SignUpCredentials): Promise<AuthResponse> => {
  const { email, password, options } = credentials;

  if (!email || !password) {
    throw new Error('Email et mot de passe sont requis.');
  }

  const response = await supabase.auth.signUp({
    email,
    password,
    options 
  });
  return response;
};

// --- Fonction de Connexion (CORRIGÉE) ---
export const signIn = async (credentials: SignInCredentials): Promise<AuthResponse> => {
    // TypeScript sait maintenant que 'email' existe obligatoirement dans SignInCredentials
    const { email, password } = credentials;

    if (!email || !password) {
        throw new Error('Email et mot de passe sont requis.');
    }

    // On passe l'objet à Supabase (qui est compatible avec la structure {email, password})
    const response = await supabase.auth.signInWithPassword(credentials);
    return response;
};

// --- Fonction de Déconnexion ---
export const signOut = async (): Promise<{ error: AuthError | null }> => {
    const response = await supabase.auth.signOut();
    return response;
};

// --- Fonction Utilitaires ---
export const getCurrentUser = async () => {
    const { data: { session } } = await supabase.auth.getSession();
    return session?.user ?? null;
};

// --- Mise à jour du Profil ---
export const updateProfile = async (userId: string, profileData: Partial<UserProfile>) => {
  if (!userId) throw new Error("L'ID de l'utilisateur est manquant.");

  const updateData = {
    ...profileData,
    id: userId,
    updated_at: new Date().toISOString(),
  };

  const { data, error } = await supabase
    .from('profiles')
    .upsert(updateData)
    .select()
    .single();

  if (error) {
    console.error("Erreur lors de la mise à jour du profil:", error);
    throw error;
  }

  return data;
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\services\caseService.ts
================================================================================

// services/caseService.ts
import { apiClient } from '@/lib/apiClient';
// SUPPRESSION DE L'IMPORT SUPABASE

/**
 * Version API : On utilise maintenant directement l'API Expert pour charger les cas
 * plus besoin de Supabase ici.
 */

// On garde une fonction wrapper simple si nécessaire, 
// mais on utilisera surtout simulationService pour la logique active.
export const fetchCaseById = async (id: number) => {
   // Redirection vers le service expert existant
   return apiClient(`/clinical-cases/${id}`);
}


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\services\SimulationService.ts
================================================================================

// services/SimulationService.ts
import { apiClient } from '@/lib/apiClient';

// ================= TYPES API BACKEND =================

export interface StartSessionResponse {
    session_id: string;
    session_type: 'diagnostic' | 'training' | 'evaluation';
    current_step: number;
    total_steps: number;
    hints_allowed: number;
    max_messages: number;
    clinical_case: {
        id: number;
        code_fultang: string;
        presentation_clinique: any;
        donnees_paracliniques: any;
        pathologie_principale: any;
    };
}

export interface ActionRequest {
    action_type: 'question' | 'examen_complementaire' | 'consulter_image' | 'parametres_vitaux' | 'biologie';
    action_name: string;
    content?: string;
    justification?: string;
    parameters?: any;
}

export interface ActionResponse {
    action_type: string;
    action_name: string;
    content?: string;
    result?: {
        type_resultat?: string;
        rapport_complet?: string;
        conclusion?: string;
        valeurs_cles?: any;
        text?: string;
        data?: any;
    };
    feedback?: string;
    meta?: {
        virtual_cost?: number;
        virtual_duration?: number;
        impact_score?: number | null;
    };
    timestamp?: string;
}

export interface SubmitRequest {
    diagnosed_pathology_id: number;
    details_text?: string;
    prescribed_medication_ids?: number[];
    comment?: string;
}

export interface SubmitResponse {
    session_id: string;
    score: number;
    feedback_global: string;
    evaluation: {
        score_total: number;
        score_diagnostic?: number;
        score_therapeutique?: number;
        score_demarche?: number;
        details: any;
    };
    next_action: 'next_case' | 'retry_level' | 'module_completed';
    recommendation_next_step?: string;
}

export interface GoalStatus {
    category: string;
    level_name: string;
    phase: 'diagnostic' | 'training' | 'evaluation';
    cas_completed: number;
    total_cases_phase: number;
    score_avg: number;
    locked: boolean;
}

// Feedback Tuteur
export interface TutorFeedback {
    chronology_check?: string;
    interpretation_guide?: string;
    better_question?: string;
    general?: string;
}

export interface SimulationMessage {
    id: number;
    sender: 'learner' | 'patient' | 'system' | 'tutor' | 'Patient' | 'Learner';
    content: string;
    timestamp: string;
    message_metadata?: {
        tutor_feedback?: TutorFeedback;
        latencies?: any;
        is_action?: boolean;
        generated_by?: string;
    };
}

export interface SessionHistoryCategory {
    categorie: string;
    moyenne_categorie: number;
    progression_percentage?: number;
    sessions: Array<{
        session_id: string;
        date: string;
        etat: string;
        note: number;
        cas_titre: string;
    }>;
}

export interface DetailedHistoryResponse {
    learner_id: number;
    historique_par_categorie: SessionHistoryCategory[];
}

export interface HintResponse {
    hint_text: string;
    content: string;
    hints_remaining: number;
}

export interface ChatMessagePayload {
    sender: "learner";
    content: string;
    message_metadata?: Record<string, any>;
}

// ================= ENDPOINTS =================

/**
 * Démarre une nouvelle session
 */
export const startSimulationSession = async (
    learnerId: number,
    caseId: number | null = null,
    category: string,
    forceMode?: 'diagnostic' | 'training' | 'evaluation'
): Promise<StartSessionResponse> => {
    const payload: any = {
        learner_id: learnerId,
        category: category
    };

    if (caseId) payload.case_id = caseId;
    if (forceMode) payload.force_mode = forceMode;

    console.group('🚀 [API] Starting Session');
    console.log('📤 Payload:', JSON.stringify(payload, null, 2));
    console.log('⏰', new Date().toISOString());

    const start = performance.now();

    try {
        const response = await apiClient<StartSessionResponse>(
            '/simulation/sessions/start',
            {
                method: 'POST',
                body: JSON.stringify(payload)
            }
        );

        console.log(`✅ Success (${(performance.now() - start).toFixed(2)}ms)`);
        console.log('📥 Response:', JSON.stringify(response, null, 2));
        console.groupEnd();

        return response;
    } catch (error) {
        console.error('❌ Failed:', error);
        console.groupEnd();
        throw error;
    }
};

/**
 * Envoyer un message dans le chat (NOUVELLE FONCTION)
 */
export const sendChatMessage = async (
    sessionId: string,
    payload: ChatMessagePayload
): Promise<SimulationMessage> => {
    console.group('💬 [API] Send Chat Message');
    console.log('📍 Session:', sessionId);
    console.log('📤 Payload:', JSON.stringify(payload, null, 2));
    console.log('⏰', new Date().toISOString());

    const start = performance.now();

    try {
        const response = await apiClient<SimulationMessage>(
            `/chat/sessions/${sessionId}/messages`,
            {
                method: 'POST',
                body: JSON.stringify(payload)
            }
        );

        console.log(`✅ Success (${(performance.now() - start).toFixed(2)}ms)`);
        console.log('📥 Response:', JSON.stringify(response, null, 2));
        console.groupEnd();

        return response;
    } catch (error) {
        console.error('❌ Failed:', error);
        console.groupEnd();
        throw error;
    }
};

/**
 * Récupérer l'historique détaillé
 */
export const getLearnerHistoryDetailed = async (learnerId: number): Promise<DetailedHistoryResponse> => {
    const start = performance.now();
    console.group(`📚 [API] Get History - Learner ${learnerId}`);
    
    try {
        const data = await apiClient<DetailedHistoryResponse>(`/simulation/learners/${learnerId}/history`);
        
        console.log(`✅ Success (${(performance.now() - start).toFixed(2)}ms)`);
        console.log('📥 Response:', JSON.stringify(data, null, 2));
        console.groupEnd();
        
        return data;
    } catch (error) {
        console.error('❌ Failed:', error);
        console.groupEnd();
        throw error;
    }
};

/**
 * Envoyer une action (Examen, Paramètres)
 */
export const sendSimulationAction = async (
    sessionId: string,
    action: ActionRequest
): Promise<ActionResponse> => {
    const start = performance.now();
    console.group(`💉 [API] Action - ${action.action_type}`);
    console.log('📍 Session:', sessionId);
    console.log('📤 Request:', JSON.stringify(action, null, 2));
    console.log('⏰', new Date().toISOString());
    
    try {
        const response = await apiClient<ActionResponse>(
            `/simulation/sessions/${sessionId}/actions`,
            {
                method: 'POST',
                body: JSON.stringify(action)
            }
        );

        console.log(`✅ Success (${(performance.now() - start).toFixed(2)}ms)`);
        console.log('📥 Response:', JSON.stringify(response, null, 2));
        console.groupEnd();

        return response;
    } catch (error) {
        console.error('❌ Failed:', error);
        console.groupEnd();
        throw error;
    }
};

/**
 * Récupérer les messages d'une session
 */
export const getSessionMessages = async (
    sessionId: string,
    limit?: number
): Promise<SimulationMessage[]> => {
    const start = performance.now();
    console.group(`📨 [API] Get Messages - ${sessionId}`);
    
    const url = limit 
        ? `/chat/sessions/${sessionId}/messages?limit=${limit}`
        : `/chat/sessions/${sessionId}/messages`;
    
    console.log('📍 URL:', url);
    
    try {
        const messages = await apiClient<SimulationMessage[]>(url);
        
        console.log(`✅ Success (${(performance.now() - start).toFixed(2)}ms)`);
        console.log(`📨 Count: ${messages.length}`);
        console.log('📥 Messages:', JSON.stringify(messages, null, 2));
        console.groupEnd();
        
        return messages;
    } catch (error) {
        console.error('❌ Failed:', error);
        console.groupEnd();
        throw error;
    }
};

/**
 * Demander un indice
 */
export const requestSimulationHint = async (sessionId: string): Promise<HintResponse> => {
    const start = performance.now();
    console.group(`💡 [API] Request Hint - ${sessionId}`);
    console.log('⏰', new Date().toISOString());
    
    try {
        const response = await apiClient<HintResponse>(
            `/simulation/sessions/${sessionId}/request-hint`,
            { method: 'POST' }
        );

        console.log(`✅ Success (${(performance.now() - start).toFixed(2)}ms)`);
        console.log('📥 Response:', JSON.stringify(response, null, 2));
        console.groupEnd();

        return response;
    } catch (error) {
        console.error('❌ Failed:', error);
        console.groupEnd();
        throw error;
    }
};

/**
 * Soumettre le diagnostic final
 */
export const submitSimulationDiagnosis = async (
    sessionId: string,
    diagnosisText: string,
    prescriptionText: string
): Promise<SubmitResponse> => {
    console.group('🎓 [API] Submit Diagnosis');
    console.log('📍 Session:', sessionId);
    console.log('📋 Diagnosis:', diagnosisText);
    console.log('💊 Prescription:', prescriptionText);
    console.log('⏰', new Date().toISOString());
    
    const payload: SubmitRequest = {
        diagnosed_pathology_id: 0,
        details_text: diagnosisText,
        prescribed_medication_ids: [],
        comment: prescriptionText
    };
    
    console.log('📤 Payload:', JSON.stringify(payload, null, 2));
    
    const start = performance.now();
    
    try {
        const response = await apiClient<SubmitResponse>(
            `/simulation/sessions/${sessionId}/submit`,
            {
                method: 'POST',
                body: JSON.stringify(payload)
            }
        );
        
        console.log(`✅ Success (${(performance.now() - start).toFixed(2)}ms)`);
        console.log('📊 Score:', response.score);
        console.log('💬 Feedback:', response.feedback_global);
        console.log('➡️ Next:', response.next_action);
        console.log('📥 Response:', JSON.stringify(response, null, 2));
        console.groupEnd();
        
        return response;
        
    } catch (error) {
        console.error('❌ Failed:', error);
        console.groupEnd();
        throw error;
    }
};

/**
 * Récupérer le statut de progression
 */
export const getLearnerGoalsStatus = async (
    learnerId: number
): Promise<GoalStatus[]> => {
    console.log(`🎯 [API] Get Goals - Learner ${learnerId}`);
    
    try {
        // Mock temporaire - remplacer par vrai endpoint
        return new Promise(resolve => {
            setTimeout(() => {
                resolve([
                    { category: 'Cardiologie', phase: 'diagnostic', cas_completed: 0, total_cases_phase: 1, score_avg: 0, locked: false, level_name: 'Novice' },
                    { category: 'Pneumologie', phase: 'training', cas_completed: 1, total_cases_phase: 3, score_avg: 14, locked: true, level_name: 'Apprenti' },
                    { category: 'Neurologie', phase: 'diagnostic', cas_completed: 0, total_cases_phase: 1, score_avg: 0, locked: false, level_name: 'Novice' },
                ]);
            }, 500);
        });
    } catch (error) {
        console.warn('⚠️ Goals warning:', error);
        return [];
    }
};

/**
 * Récupérer les détails d'une session
 */
export const getSessionDetails = async (sessionId: string) => {
    console.log(`📄 [API] Get Session Details - ${sessionId}`);
    return await apiClient(`/simulation/sessions/${sessionId}`);
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\services\expertService.ts
================================================================================

// services/expertService.ts
import { apiClient } from '@/lib/apiClient';
import { BackendDisease, BackendSymptom, BackendClinicalCase, BackendClinicalCaseCreate, BackendClinicalCaseSimple, TreatmentForSymptom, DiseaseForSymptom, BackendSymptomCreate } from '@/types/backend';

// === PATHOLOGIES ===
export const getDiseases = async (): Promise<BackendDisease[]> => {
  return await apiClient<BackendDisease[]>('/diseases/');
};

// === SYMPTOMES ===
export const getSymptoms = async (): Promise<BackendSymptom[]> => {
  return await apiClient<BackendSymptom[]>('/symptoms/');
};

export const getAllClinicalCases = async (): Promise<BackendClinicalCaseSimple[]> => {
  return await apiClient<BackendClinicalCaseSimple[]>('/clinical-cases/?limit=120');
  // Comme vous l'avez fait pour getAllDiseases (ligne 150)
};

// CREATE cas
export const createClinicalCase = async (caseData: BackendClinicalCaseCreate): Promise<BackendClinicalCase> => {
  // Ici aussi, attention aux types JSON qui doivent correspondre au schéma Pydantic backend
  return await apiClient<BackendClinicalCase>('/clinical-cases/', {
    method: 'POST',
    body: JSON.stringify(caseData),
  });
};

// 2. Lire un cas spécifique (Détail complet)
export const getClinicalCaseById = async (caseId: number): Promise<BackendClinicalCase> => {
  return await apiClient<BackendClinicalCase>(`/clinical-cases/${caseId}`);
};

// === MEDIA ===
export const uploadImage = async (file: File, type: string = "Radiographie"): Promise<any> => {
  const formData = new FormData();
  formData.append('file', file);
  formData.append('type_examen', type);

  // Note: Pour FormData avec fetch, on ne met PAS 'Content-Type': 'application/json'
  // Le navigateur le gère automatiquement. On utilise donc un fetch direct ici pour simplifier.
  const response = await fetch("https://expert-cmck.onrender.com/api/v1/media/images/upload", {
    method: "POST",
    body: formData,
    headers: {
        'Accept': 'application/json',
    }
  });
  
  if(!response.ok) throw new Error("Upload Failed");
  return await response.json();
}

// ================= SYMPTOMES =================

// 1. Lire tous les symptômes (Liste)
export const getAllSymptoms = async (): Promise<BackendSymptom[]> => {
  return await apiClient<BackendSymptom[]>('/symptoms/');
};

// 2. Lire un symptôme unique
export const getSymptomById = async (id: number): Promise<BackendSymptom> => {
  return await apiClient<BackendSymptom>(`/symptoms/${id}`);
};

// 3. Créer un symptôme
export const createSymptom = async (data: BackendSymptomCreate): Promise<BackendSymptom> => {
  return await apiClient<BackendSymptom>('/symptoms/', {
    method: 'POST',
    body: JSON.stringify(data)
  });
};

// 4. Mettre à jour
export const updateSymptom = async (id: number, data: Partial<BackendSymptomCreate>): Promise<BackendSymptom> => {
  return await apiClient<BackendSymptom>(`/symptoms/${id}`, {
    method: 'PATCH',
    body: JSON.stringify(data)
  });
};

// 5. Supprimer
export const deleteSymptom = async (id: number): Promise<void> => {
  return await apiClient<void>(`/symptoms/${id}`, {
    method: 'DELETE'
  });
};

// ================= RELATIONS SYMPTOMES =================

// 6. Maladies liées au symptôme (Diagnostic Différentiel Inversé)
export const getDiseasesForSymptom = async (id: number): Promise<DiseaseForSymptom[]> => {
    // Le endpoint attendu selon ta spec : GET /api/v1/symptoms/{id}/diseases
    return await apiClient<DiseaseForSymptom[]>(`/symptoms/${id}/diseases`);
};

// 7. Traitements Symptomatiques
export const getTreatmentsForSymptom = async (id: number): Promise<TreatmentForSymptom[]> => {
    return await apiClient<TreatmentForSymptom[]>(`/symptoms/${id}/treatments`);
};

// 8. Ajouter un Traitement au Symptôme
export const addTreatmentToSymptom = async (symptomId: number, data: { medicament_id: number, efficacite?: string }): Promise<any> => {
    return await apiClient(`/symptoms/${symptomId}/treatments`, {
        method: 'POST',
        body: JSON.stringify(data)
    });
};

// UPDATE (PATCH)
export const updateClinicalCase = async (id: number, data: Partial<BackendClinicalCaseCreate>): Promise<BackendClinicalCase> => {
    // Note: Pour un PATCH, on envoie uniquement les champs modifiés
    return await apiClient<BackendClinicalCase>(`/clinical-cases/${id}`, {
        method: 'PATCH',
        body: JSON.stringify(data)
    });
};

// DELETE
export const deleteClinicalCase = async (id: number): Promise<void> => {
    return await apiClient<void>(`/clinical-cases/${id}`, {
        method: 'DELETE'
    });
};

// services/expertService.ts
// ... imports existants ...
import { BackendMedication, BackendMedicationCreate } from '@/types/backend';

// ... (fonctions existantes) ...

// === MEDICATIONS ===

// GET ALL
export const getAllMedications = async (): Promise<BackendMedication[]> => {
    return await apiClient<BackendMedication[]>('/medications/');
};

// GET ONE
export const getMedicationById = async (id: number): Promise<BackendMedication> => {
    return await apiClient<BackendMedication>(`/medications/${id}`);
};

// CREATE
export const createMedication = async (data: BackendMedicationCreate): Promise<BackendMedication> => {
    return await apiClient<BackendMedication>('/medications/', {
        method: 'POST',
        body: JSON.stringify(data)
    });
};

// UPDATE
export const updateMedication = async (id: number, data: Partial<BackendMedicationCreate>): Promise<BackendMedication> => {
    return await apiClient<BackendMedication>(`/medications/${id}`, {
        method: 'PATCH',
        body: JSON.stringify(data)
    });
};

// DELETE
export const deleteMedication = async (id: number): Promise<void> => {
    return await apiClient<void>(`/medications/${id}`, {
        method: 'DELETE'
    });
};

// services/expertService.ts

// ... imports existants ...
import { BackendDiseaseCreate } from '@/types/backend';

// === PATHOLOGIES (DISEASES) ===

// GET ALL
export const getAllDiseases = async (): Promise<BackendDisease[]> => {
    return await apiClient<BackendDisease[]>('/diseases/?limit=1000'); // On charge tout pour la liste
};

// GET ONE
export const getDiseaseById = async (id: number): Promise<BackendDisease> => {
    return await apiClient<BackendDisease>(`/diseases/${id}`);
};

// CREATE
export const createDisease = async (data: BackendDiseaseCreate): Promise<BackendDisease> => {
    return await apiClient<BackendDisease>('/diseases/', {
        method: 'POST',
        body: JSON.stringify(data)
    });
};

// UPDATE
export const updateDisease = async (id: number, data: Partial<BackendDiseaseCreate>): Promise<BackendDisease> => {
    return await apiClient<BackendDisease>(`/diseases/${id}`, {
        method: 'PATCH',
        body: JSON.stringify(data)
    });
};

// DELETE
export const deleteDisease = async (id: number): Promise<void> => {
    return await apiClient<void>(`/diseases/${id}`, {
        method: 'DELETE'
    });
};

// services/expertService.ts
// ... imports ...
import { BackendImage, ImageMetadata } from '@/types/backend';

// === MEDIA / IMAGES ===

// 1. Lire toutes les images (avec pagination théorique)
export const getAllImages = async (): Promise<BackendImage[]> => {
    // Si votre API a besoin de pagination, ajoutez ?limit=...
    return await apiClient<BackendImage[]>('/media/images/?limit=100'); 
};

// 2. Upload avec métadonnées
export const uploadMedicalImage = async (file: File, metadata: ImageMetadata): Promise<BackendImage> => {
    const formData = new FormData();
    formData.append('file', file);
    
    // Ajout des champs textuels au FormData
    formData.append('type_examen', metadata.type_examen);
    if(metadata.sous_type) formData.append('sous_type', metadata.sous_type);
    if(metadata.description) formData.append('description', metadata.description);
    if(metadata.pathologie_id) formData.append('pathologie_id', metadata.pathologie_id.toString());
    formData.append('niveau_difficulte', metadata.niveau_difficulte.toString());
    formData.append('qualite_image', metadata.qualite_image.toString());

    // NOTE: On utilise fetch natif pour gérer le multipart/form-data correctement (le boundary est géré par le navigateur)
    const API_URL = "https://expert-cmck.onrender.com/api/v1"; // Adaptez selon votre configuration apiClient

    const response = await fetch(`${API_URL}/media/images/upload`, {
        method: "POST",
        body: formData,
        // Ne PAS mettre de header Content-Type ici, fetch le fait automatiquement
        headers: {
            'Accept': 'application/json',
        }
    });
    
    if(!response.ok) {
        const err = await response.json();
        throw new Error(err.detail || "Erreur upload image");
    }
    
    return await response.json();
};

// 3. Delete
export const deleteImage = async (id: number): Promise<void> => {
    return await apiClient<void>(`/media/images/${id}`, {
        method: 'DELETE'
    });
};














================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\services\dashboardService.ts
================================================================================

// services/dashboardService.ts
import { apiClient } from '@/lib/apiClient';

// Types pour le dashboard
export interface DashboardStats {
  clinicalCasesCount: number;
  symptomsCount: number;
  pathologiesCount: number;
  treatmentsCount: number;
  learnersCount: number;
  categoriesDistribution: { name: string; value: number; color: string }[];
  recentCases: any[];
}

const LEARNERS_API_URL = "https://appren-docker.onrender.com/learners/"; // URL Externe

export const getExpertDashboardStats = async (): Promise<DashboardStats> => {
  try {
    // 1. Récupération parallèle des données du Backend Expert
    const [cases, symptoms, pathologies, treatments] = await Promise.all([
      apiClient<any[]>('/clinical-cases/'),
      apiClient<any[]>('/symptoms/'),
      apiClient<any[]>('/diseases/'),
      apiClient<any[]>('/medications/') // ou /treatments/ selon l'API
    ]);

    // 2. Récupération des Apprenants (API Externe)
    let learnersCount = 0;
    try {
        const learnersRes = await fetch(LEARNERS_API_URL);
        const learners = await learnersRes.json();
        learnersCount = Array.isArray(learners) ? learners.length : 0;
    } catch (e) {
        console.warn("Learner API inaccessible:", e);
    }

    // 3. Calcul de la distribution par catégorie (Logique Frontend si le backend ne le fait pas)
    const categoryMap: Record<string, number> = {};
    cases.forEach((c: any) => {
        // Fallback si la catégorie est dans la pathologie liée ou directe
        const cat = c.pathologie_principale?.categorie || c.service || "Général"; 
        categoryMap[cat] = (categoryMap[cat] || 0) + 1;
    });

    const colors = ['#052648', '#3b82f6', '#10b981', '#f59e0b', '#ef4444'];
    const categoriesDistribution = Object.keys(categoryMap).map((key, index) => ({
        name: key,
        value: categoryMap[key],
        color: colors[index % colors.length]
    }));

    return {
      clinicalCasesCount: cases.length,
      symptomsCount: symptoms.length,
      pathologiesCount: pathologies.length,
      treatmentsCount: treatments.length,
      learnersCount: learnersCount,
      categoriesDistribution,
      recentCases: cases.slice(-5).reverse() // Les 5 derniers
    };
  } catch (error) {
    console.error("Dashboard Data Error", error);
    // Retourne des données vides pour ne pas casser l'UI
    return {
        clinicalCasesCount: 0, symptomsCount: 0, pathologiesCount: 0, treatmentsCount: 0, learnersCount: 0, categoriesDistribution: [], recentCases: []
    };
  }
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\services\learnerService.ts
================================================================================

// services/learnerService.ts
'use client';

const BASE_URL = "https://appren-docker.onrender.com";

// --- TYPES (Basés sur l'OpenAPI fournie) ---

export interface LoginRequest {
  email: string;
  matricule: string;
}

export interface TokenResponse {
  access_token: string;
  token_type: string;
}

export interface LearnerCreate {
  matricule: string;
  nom: string;
  email: string;
  niveau_etudes: string;
  specialite_visee: string;
  langue_preferee: string;
  date_inscription: string;
}

export interface LearnerResponse extends LearnerCreate {
  id: number;
}

// Structures des Traces (Profil Complet)
export interface CognitiveProfile {
  vitesse_assimilation: number;
  capacite_memoire_travail: number;
  tendance_impulsivite: number;
  prefer_visual: boolean;
}

export interface AffectiveState {
  session_id: string;
  timestamp: string;
  stress_level: number;
  confidence_level: number;
  motivation_level: number;
  frustration_level: number;
}

export interface CompetencyMastery {
  competence_id: number;
  mastery_level: number;
  nb_success: number;
  nb_failures: number;
}

export interface LearningGoal {
  id?: number;
  type_objectif: string;
  statut: string; 
}

export interface TraceProfile {
  identification: Partial<LearnerResponse>;
  cognitive_dimension: {
    cognitive_profile: CognitiveProfile;
  };
  affective_state: AffectiveState;
  competencies: {
    mastery_levels: CompetencyMastery[];
  };
  behavioral_dimension: {
    strategies: any[]; 
  };
  learning_history: {
    goals: LearningGoal[];
    sessions?: Array<{ date: string; score: number }>; 
  };
}

export interface LearnerTrace {
  id: string;
  profile: TraceProfile;
}

export interface TraceResponse {
  learners: LearnerTrace[];
}

// --- LOGGING HELPER ---
function logApiCall(method: string, endpoint: string, body?: any, response?: any, error?: any) {
  const groupLabel = `📡 API [${method}] ${endpoint}`;
  
  if (error) {
    console.group(groupLabel); 
  } else {
    console.groupCollapsed(groupLabel);
  }

  console.log("%cRequest:", "color: #3b82f6; font-weight: bold;");
  console.log({ endpoint, body });

  if (error) {
    console.log("%cError:", "color: #ef4444; font-weight: bold;", error);
  } else {
    console.log("%cResponse:", "color: #10b981; font-weight: bold;", response);
  }
  
  console.groupEnd();
}

/**
 * Wrapper fetch générique avec Auth automatique et Logs
 */
async function learnerFetch<T>(endpoint: string, options: RequestInit = {}): Promise<T> {
  const url = `${BASE_URL}${endpoint}`;
  // Récupération token (uniquement côté client)
  const token = typeof window !== 'undefined' ? localStorage.getItem('access_token') : null;

  const headers: any = {
    'Content-Type': 'application/json',
    'Accept': 'application/json',
    ...options.headers,
  };

  // Ajout conditionnel du token (sauf si déjà présent)
  if (token && !headers['Authorization']) {
    headers['Authorization'] = `Bearer ${token}`;
  }

  try {
    const response = await fetch(url, { ...options, headers });
    
    const textResponse = await response.text();
    let data;
    try {
        data = textResponse ? JSON.parse(textResponse) : {};
    } catch {
        data = textResponse;
    }

    logApiCall(options.method || 'GET', endpoint, options.body ? JSON.parse(options.body as string) : null, data);

    if (!response.ok) {
      throw new Error(data?.detail || response.statusText || "Erreur serveur");
    }

    return data as T;
  } catch (error) {
    logApiCall(options.method || 'GET', endpoint, options.body, null, error);
    throw error;
  }
}

// ================= MÉTHODES AUTONOMES (Crucial pour la compatibilité AuthContext) =================

export const createLearner = async (data: LearnerCreate): Promise<LearnerResponse> => {
  return await learnerFetch<LearnerResponse>('/learners/', {
    method: 'POST',
    body: JSON.stringify(data),
  });
};

export const loginLearner = async (credentials: LoginRequest): Promise<TokenResponse> => {
  const response = await learnerFetch<TokenResponse>('/learner/auth/login', {
    method: 'POST',
    body: JSON.stringify(credentials),
  });
  if (response.access_token && typeof window !== 'undefined') {
    localStorage.setItem('access_token', response.access_token);
  }
  return response;
};

// C'EST ICI LA CORRECTION : Cette fonction doit être exportée individuellement
export const getLearnerMe = async (token?: string): Promise<LearnerResponse> => {
  const options: RequestInit = { method: 'GET' };
  // Si un token spécifique est passé (cas d'usage lors du SSR ou init AuthContext), on surcharge
  if (token) {
    options.headers = { 'Authorization': `Bearer ${token}` };
  }
  return await learnerFetch<LearnerResponse>('/learner/auth/me', options);
};

// ================= OBJET SERVICE GLOBAL (Pour le Dashboard) =================

export const LearnerService = {
  login: loginLearner, 
  getMe: getLearnerMe,

  /**
   * Récupère un apprenant spécifique par ID
   */
  getLearnerById: async (learner_id: number): Promise<LearnerResponse> => {
    return await learnerFetch<LearnerResponse>(`/learners/${learner_id}`, { method: 'GET' });
  },

  /**
   * Récupère les TRACES complètes (Profil Cognitif, Historique, Affectif...)
   * Endpoint OpenAPI: /learner/traces?learner_id={id}
   */
  getTraces: async (learner_id: number): Promise<TraceResponse> => {
    return await learnerFetch<TraceResponse>(`/learner/traces?learner_id=${learner_id}&limit=10`, { method: 'GET' });
  },

  // On ajoute cette méthode spécifique pour les "maîtrises de compétences" demandées par l'onglet Skills
  getListMastery: async (learner_id: number): Promise<any[]> => {
       // Cette route correspond à /competency-mastery/learner/{learner_id} dans votre OpenAPI
      return await learnerFetch<any[]>(`/competency-mastery/learner/${learner_id}`, { method: 'GET' });
  },
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\services\ChatService.ts
================================================================================

// services/ChatService.ts
import { apiClient } from '@/lib/apiClient';

// ================= TYPES POUR LE CHAT =================

export interface ChatMessageRequest {
    sender: 'learner' | 'patient' | 'system' | 'tutor';
    content: string;
    message_metadata?: {
        [key: string]: any;
    };
}

export interface ChatMessageResponse {
    id: number;
    session_id: string;
    sender: 'learner' | 'patient' | 'system' | 'tutor';
    content: string;
    timestamp: string;
    message_metadata?: {
        [key: string]: any;
    };
}

export interface ChatHistory {
    messages: ChatMessageResponse[];
    total: number;
}

// ================= ENDPOINTS CHAT =================

/**
 * 🔥 ENDPOINT PRINCIPAL: Envoie un message et récupère la réponse du Patient (IA)
 * ATTENTION: Cet endpoint est SYNCHRONE et BLOQUANT
 * Il peut prendre quelques secondes car il déclenche l'IA Patient
 */
export const sendChatMessage = async (
    sessionId: string,
    content: string,
    sender: 'learner' | 'patient' | 'system' | 'tutor' = 'learner',
    metadata?: { [key: string]: any }
): Promise<ChatMessageResponse> => {
    
    console.log('💬 [CHAT] Sending message:', { sessionId, sender, content });

    const payload: ChatMessageRequest = {
        sender,
        content,
        message_metadata: metadata
    };

    const response = await apiClient<ChatMessageResponse>(
        `/chat/sessions/${sessionId}/messages`,
        {
            method: 'POST',
            body: JSON.stringify(payload)
        }
    );

    console.log('✅ [CHAT] Response received:', response);

    return response;
};

/**
 * Récupère l'historique complet des messages d'une session
 */
export const getChatHistory = async (
    sessionId: string,
    limit?: number,
    offset?: number
): Promise<ChatHistory> => {
    const params = new URLSearchParams();
    if (limit) params.append('limit', limit.toString());
    if (offset) params.append('offset', offset.toString());

    const queryString = params.toString() ? `?${params.toString()}` : '';

    return await apiClient<ChatHistory>(
        `/chat/sessions/${sessionId}/messages${queryString}`
    );
};

/**
 * 🤖 FONCTION WRAPPER pour envoyer un message étudiant et attendre la réponse du Patient
 * Cette fonction simplifie l'appel pour le composant
 */
export const askPatient = async (
    sessionId: string,
    question: string
): Promise<{ 
    userMessage: ChatMessageResponse; 
    patientResponse: ChatMessageResponse | null;
}> => {
    console.group('🗣️ [CHAT FLOW] Ask Patient');
    
    try {
        // 1. Envoyer le message de l'étudiant
        const userMessage = await sendChatMessage(sessionId, question, 'learner');
        console.log('✅ User message posted:', userMessage);

        // 2. Récupérer l'historique pour obtenir la réponse du patient
        // (L'IA a déjà répondu de manière synchrone, donc on récupère le dernier message)
        const history = await getChatHistory(sessionId, 10); // Les 10 derniers messages
        
        // 3. Trouver la réponse du patient qui suit notre message
        const patientResponse = history.messages.find(
            msg => msg.sender === 'patient' && 
                   new Date(msg.timestamp) > new Date(userMessage.timestamp)
        );

        console.log('✅ Patient response:', patientResponse);
        console.groupEnd();

        return {
            userMessage,
            patientResponse: patientResponse || null
        };

    } catch (error) {
        console.error('❌ Error in chat flow:', error);
        console.groupEnd();
        throw error;
    }
};

/**
 * ALTERNATIVE: Si le backend retourne directement la réponse du patient dans l'objet
 * (à vérifier selon votre implémentation exacte)
 */
export const sendMessageAndGetResponse = async (
    sessionId: string,
    question: string
): Promise<string> => {
    try {
        // L'endpoint étant synchrone, il retourne peut-être directement la réponse IA
        const response = await sendChatMessage(sessionId, question, 'learner');
        
        // Si la réponse contient déjà le message du patient
        if (response.sender === 'patient') {
            return response.content;
        }

        // Sinon, on fait une requête supplémentaire pour récupérer la réponse
        const history = await getChatHistory(sessionId, 5);
        const lastPatientMessage = history.messages
            .filter(m => m.sender === 'patient')
            .sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime())[0];

        return lastPatientMessage?.content || "Le patient ne répond pas.";

    } catch (error: any) {
        console.error('Error sending message:', error);
        throw new Error(error.message || 'Erreur communication chat');
    }
};


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\eslint.config.mjs
================================================================================

import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals.js";
import nextTs from "eslint-config-next/typescript.js";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;



================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\postcss.config.mjs
================================================================================

const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;



================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\next.config.ts
================================================================================

// next.config.ts
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  // Configuration pour autoriser les images Cloudinary, UI-Avatars et Unsplash
  images: {
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'res.cloudinary.com',
        pathname: '/**', // Autorise tous les dossiers Cloudinary
      },
      {
        protocol: 'https',
        hostname: 'ui-avatars.com',
        pathname: '/**',
      },
      // Correction ici : ajout d'Unsplash comme un objet pattern, pas comme une propriété "domains"
      {
        protocol: 'https',
        hostname: 'images.unsplash.com',
        pathname: '/**',
      },
    ],
  },
  webpack: (config) => {
    config.externals = config.externals || {};
    // Ces lignes sont généralement utilisées pour le Server-Side Rendering avec certaines bibliothèques qui
    // s'attendent à ce que React soit disponible globalement ou géré différemment.
    // Assurez-vous que cela est nécessaire pour votre projet (ex: pour React Three Fiber).
    config.externals['react'] = 'react';
    config.externals['react-dom'] = 'react-dom';
    return config;
  },
  // Transpilation nécessaire pour l'écosystème React Three Fiber
  transpilePackages: ['three', '@react-three/fiber', '@react-three/drei'],
};

export default nextConfig;


================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\next-env.d.ts
================================================================================

/// <reference types="next" />
/// <reference types="next/image-types/global" />
/// <reference path="./.next/types/routes.d.ts" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.



================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\tsconfig.json
================================================================================

{
  "compilerOptions": {
    "target": "ES2017",
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./*"
      ]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": [
    "node_modules"
  ]
}



================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\README.md
================================================================================

<<<<<<< HEAD
=======
<<<<<<< HEAD
>>>>>>> origin/Elsa
This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
<<<<<<< HEAD
=======
=======
# Frontend
>>>>>>> 1a58f05b86c50654ae1798b1903877ab4ac53b3c
>>>>>>> origin/Elsa



================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\package-lock.json
================================================================================

{
  "name": "fulltang-sti",
  "version": "0.1.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "fulltang-sti",
      "version": "0.1.0",
      "dependencies": {
        "@react-three/drei": "^9.0.0",
        "@react-three/fiber": "^8.0.0",
        "@supabase/ssr": "^0.7.0",
        "@supabase/supabase-js": "^2.81.1",
        "axios": "^1.13.2",
        "bytez.js": "^3.0.0",
        "class-variance-authority": "^0.7.1",
        "clsx": "^2.1.1",
        "framer-motion": "^12.27.1",
        "lucide-react": "^0.552.0",
        "next": "15.5.9",
        "openai": "^6.15.0",
        "react": "19.2.0",
        "react-dom": "19.2.0",
        "react-hot-toast": "^2.6.0",
        "recharts": "^3.6.0",
        "tailwind-merge": "^3.3.1",
        "three": "^0.128.0",
        "zod": "^4.2.1"
      },
      "devDependencies": {
        "@tailwindcss/postcss": "^4",
        "@types/node": "^20",
        "@types/react": "^19",
        "@types/react-dom": "^19",
        "@types/recharts": "^1.8.29",
        "@types/three": "^0.182.0",
        "eslint": "^9",
        "eslint-config-next": "16.0.1",
        "tailwindcss": "^4",
        "typescript": "^5"
      }
    },
    "node_modules/@alloc/quick-lru": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@alloc/quick-lru/-/quick-lru-5.2.0.tgz",
      "integrity": "sha512-UrcABB+4bUrFABwbluTIBErXwvbsU/V7TZWfmbgJfbkwiBuziS9gxdODUyuiecfdGQ85jglMW6juS3+z5TsKLw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.5.tgz",
      "integrity": "sha512-6uFXyCayocRbqhZOB+6XcuZbkMNimwfVGFji8CTZnCzOHVGvDqzvitu1re2AU5LROliz7eQPhB8CpAMvnx9EjA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.5.tgz",
      "integrity": "sha512-e7jT4DxYvIDLk1ZHmU/m/mB19rex9sv0c2ftBtjSBv+kVM/902eh0fINUzD7UwLLNR+jU585GxUJ8/EBfAM5fw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.5.tgz",
      "integrity": "sha512-3EwLFhZ38J4VyIP6WNtt2kUdW9dokXA9Cr4IVIFHuCpZ3H8/YFOl5JjZHisrn1fATPBmKKqXzDFvh9fUwHz6CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.28.5.tgz",
      "integrity": "sha512-qSs4ifwzKJSV39ucNjsvc6WVHs6b7S03sOh2OcHF9UHfVPqWWALUsNUVzhSBiItjRZoLHx7nIarVjqKVusUZ1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.5.tgz",
      "integrity": "sha512-KKBU1VGYR7ORr3At5HAtUQ+TV3SzRCXmA/8OdDZiLDBIZxVyzXuztPjfLd3BV1PRAQGCMWWSHYhL0F8d5uHBDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.5"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/runtime": {
      "version": "7.28.6",
      "resolved": "https://registry.npmjs.org/@babel/runtime/-/runtime-7.28.6.tgz",
      "integrity": "sha512-05WQkdpL9COIMz4LjTxGpPNCdlpyimKppYNoJ5Di5EUObifl8t4tuLuUBBZEpoLYOmfvIWrsp9fCl0HoPRVTdA==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.5.tgz",
      "integrity": "sha512-TCCj4t55U90khlYkVV/0TfkJkAkUg3jZFA3Neb7unZT8CPok7iiRfaX0F+WnqWqt7OxhOn0uBKXCw4lbL8W0aQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.5",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.5.tgz",
      "integrity": "sha512-qQ5m48eI/MFLQ5PxQj4PFaprjyCTLI37ElWMmNs0K8Lk3dVeOdNpB3ks8jc7yM5CDmVC73eMVk/trk3fgmrUpA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@dimforge/rapier3d-compat": {
      "version": "0.12.0",
      "resolved": "https://registry.npmjs.org/@dimforge/rapier3d-compat/-/rapier3d-compat-0.12.0.tgz",
      "integrity": "sha512-uekIGetywIgopfD97oDL5PfeezkFpNhwlzlaEYNOA0N6ghdsOvh/HYjSMek5Q2O1PYvRSDFcqFVJl4r4ZBwOow==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/@emnapi/core": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/@emnapi/core/-/core-1.6.0.tgz",
      "integrity": "sha512-zq/ay+9fNIJJtJiZxdTnXS20PllcYMX3OE23ESc4HK/bdYu3cOWYVhsOhVnXALfU/uqJIxn5NBPd9z4v+SfoSg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/wasi-threads": "1.1.0",
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@emnapi/runtime": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/@emnapi/runtime/-/runtime-1.6.0.tgz",
      "integrity": "sha512-obtUmAHTMjll499P+D9A3axeJFlhdjOWdKUNs/U6QIGT7V5RjcUW1xToAzjvmgTSQhDbYn/NwfTRoJcQ2rNBxA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@emnapi/wasi-threads": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@emnapi/wasi-threads/-/wasi-threads-1.1.0.tgz",
      "integrity": "sha512-WI0DdZ8xFSbgMjR1sFsKABJ/C5OnRrjT06JXbZKexJGrDuPTzZdDYfFlsgcCXCyf+suG5QU2e/y1Wo2V/OapLQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.0.tgz",
      "integrity": "sha512-ayVFHdtZ+hsq1t2Dy24wCmGXGe4q9Gu3smhLYALJrr473ZH27MsnSL+LKUlimp4BWJqMDMLmPpx/Q9R3OAlL4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils/node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.2",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.2.tgz",
      "integrity": "sha512-EriSTlt5OC9/7SXkRSCAhfSxxoSUgBm33OH+IkwbdpgoqsSsUg7y3uh+IICI/Qg4BBWr3U2i39RpmycbxMq4ew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/config-array": {
      "version": "0.21.1",
      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.21.1.tgz",
      "integrity": "sha512-aw1gNayWpdI/jSYVgzN5pL0cfzU02GT3NBpeT/DXbx1/1x7ZKxFPd9bwrzygx/qiwIQiJ1sw/zD8qY/kRvlGHA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/object-schema": "^2.1.7",
        "debug": "^4.3.1",
        "minimatch": "^3.1.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/config-helpers": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.4.2.tgz",
      "integrity": "sha512-gBrxN88gOIf3R7ja5K9slwNayVcZgK6SOUORm2uBzTeIEfeVaIhOpCtTox3P6R7o2jLFwLFTLnC7kU/RGcYEgw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/core": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.17.0.tgz",
      "integrity": "sha512-yL/sLrpmtDaFEiUj1osRP4TI2MDz1AddJL+jZ7KSqvBuliN4xqYY54IfdN8qD8Toa6g1iloph1fxQNkjOxrrpQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@types/json-schema": "^7.0.15"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.1.tgz",
      "integrity": "sha512-gtF186CXhIl1p4pJNGZw8Yc6RlshoePRvE0X91oPGb3vZ8pM3qOS9W9NGPat9LziaBV7XrJWGylNQXkGcnM3IQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^10.0.1",
        "globals": "^14.0.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/js": {
      "version": "9.39.0",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.39.0.tgz",
      "integrity": "sha512-BIhe0sW91JGPiaF1mOuPy5v8NflqfjIcDNpC+LbW9f609WVRX1rArrhi6Z2ymvrAry9jw+5POTj4t2t62o8Bmw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      }
    },
    "node_modules/@eslint/object-schema": {
      "version": "2.1.7",
      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.7.tgz",
      "integrity": "sha512-VtAOaymWVfZcmZbp6E2mympDIHvyjXs/12LqWYjVw6qjrfF+VK+fyG33kChz3nnK+SU5/NeHOqrTEHS8sXO3OA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/plugin-kit": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.4.1.tgz",
      "integrity": "sha512-43/qtrDUokr7LJqoF2c3+RInu/t4zfrpYdoSDfYyhg52rwLV6TnOvdG4fXm7IkSB3wErkcmJS9iEhjVtOSEjjA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0",
        "levn": "^0.4.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@humanfs/core": {
      "version": "0.19.1",
      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node": {
      "version": "0.16.7",
      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.7.tgz",
      "integrity": "sha512-/zUx+yOsIrG4Y43Eh2peDeKCxlRt/gET6aHfaKpuq267qXdYDFViVHfMaLyygZOnl0kGWxFIgsBy8QFuTLUXEQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanfs/core": "^0.19.1",
        "@humanwhocodes/retry": "^0.4.0"
      },
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/retry": {
      "version": "0.4.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
      "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@img/colour": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/@img/colour/-/colour-1.0.0.tgz",
      "integrity": "sha512-A5P/LfWGFSl6nsckYtjw9da+19jB8hkJ6ACTGcDfEJ0aE+l2n2El7dsVM7UVHZQ9s2lmYMWlrS21YLy2IR1LUw==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@img/sharp-darwin-arm64": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-darwin-arm64/-/sharp-darwin-arm64-0.34.4.tgz",
      "integrity": "sha512-sitdlPzDVyvmINUdJle3TNHl+AG9QcwiAMsXmccqsCOMZNIdW2/7S26w0LyU8euiLVzFBL3dXPwVCq/ODnf2vA==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-darwin-arm64": "1.2.3"
      }
    },
    "node_modules/@img/sharp-darwin-x64": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-darwin-x64/-/sharp-darwin-x64-0.34.4.tgz",
      "integrity": "sha512-rZheupWIoa3+SOdF/IcUe1ah4ZDpKBGWcsPX6MT0lYniH9micvIU7HQkYTfrx5Xi8u+YqwLtxC/3vl8TQN6rMg==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-darwin-x64": "1.2.3"
      }
    },
    "node_modules/@img/sharp-libvips-darwin-arm64": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-arm64/-/sharp-libvips-darwin-arm64-1.2.3.tgz",
      "integrity": "sha512-QzWAKo7kpHxbuHqUC28DZ9pIKpSi2ts2OJnoIGI26+HMgq92ZZ4vk8iJd4XsxN+tYfNJxzH6W62X5eTcsBymHw==",
      "cpu": [
        "arm64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "darwin"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-darwin-x64": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-x64/-/sharp-libvips-darwin-x64-1.2.3.tgz",
      "integrity": "sha512-Ju+g2xn1E2AKO6YBhxjj+ACcsPQRHT0bhpglxcEf+3uyPY+/gL8veniKoo96335ZaPo03bdDXMv0t+BBFAbmRA==",
      "cpu": [
        "x64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "darwin"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-arm": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm/-/sharp-libvips-linux-arm-1.2.3.tgz",
      "integrity": "sha512-x1uE93lyP6wEwGvgAIV0gP6zmaL/a0tGzJs/BIDDG0zeBhMnuUPm7ptxGhUbcGs4okDJrk4nxgrmxpib9g6HpA==",
      "cpu": [
        "arm"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-arm64": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm64/-/sharp-libvips-linux-arm64-1.2.3.tgz",
      "integrity": "sha512-I4RxkXU90cpufazhGPyVujYwfIm9Nk1QDEmiIsaPwdnm013F7RIceaCc87kAH+oUB1ezqEvC6ga4m7MSlqsJvQ==",
      "cpu": [
        "arm64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-ppc64": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-ppc64/-/sharp-libvips-linux-ppc64-1.2.3.tgz",
      "integrity": "sha512-Y2T7IsQvJLMCBM+pmPbM3bKT/yYJvVtLJGfCs4Sp95SjvnFIjynbjzsa7dY1fRJX45FTSfDksbTp6AGWudiyCg==",
      "cpu": [
        "ppc64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-s390x": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-s390x/-/sharp-libvips-linux-s390x-1.2.3.tgz",
      "integrity": "sha512-RgWrs/gVU7f+K7P+KeHFaBAJlNkD1nIZuVXdQv6S+fNA6syCcoboNjsV2Pou7zNlVdNQoQUpQTk8SWDHUA3y/w==",
      "cpu": [
        "s390x"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-x64": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-x64/-/sharp-libvips-linux-x64-1.2.3.tgz",
      "integrity": "sha512-3JU7LmR85K6bBiRzSUc/Ff9JBVIFVvq6bomKE0e63UXGeRw2HPVEjoJke1Yx+iU4rL7/7kUjES4dZ/81Qjhyxg==",
      "cpu": [
        "x64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linuxmusl-arm64": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-arm64/-/sharp-libvips-linuxmusl-arm64-1.2.3.tgz",
      "integrity": "sha512-F9q83RZ8yaCwENw1GieztSfj5msz7GGykG/BA+MOUefvER69K/ubgFHNeSyUu64amHIYKGDs4sRCMzXVj8sEyw==",
      "cpu": [
        "arm64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linuxmusl-x64": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-x64/-/sharp-libvips-linuxmusl-x64-1.2.3.tgz",
      "integrity": "sha512-U5PUY5jbc45ANM6tSJpsgqmBF/VsL6LnxJmIf11kB7J5DctHgqm0SkuXzVWtIY90GnJxKnC/JT251TDnk1fu/g==",
      "cpu": [
        "x64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-linux-arm": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm/-/sharp-linux-arm-0.34.4.tgz",
      "integrity": "sha512-Xyam4mlqM0KkTHYVSuc6wXRmM7LGN0P12li03jAnZ3EJWZqj83+hi8Y9UxZUbxsgsK1qOEwg7O0Bc0LjqQVtxA==",
      "cpu": [
        "arm"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-arm": "1.2.3"
      }
    },
    "node_modules/@img/sharp-linux-arm64": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm64/-/sharp-linux-arm64-0.34.4.tgz",
      "integrity": "sha512-YXU1F/mN/Wu786tl72CyJjP/Ngl8mGHN1hST4BGl+hiW5jhCnV2uRVTNOcaYPs73NeT/H8Upm3y9582JVuZHrQ==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-arm64": "1.2.3"
      }
    },
    "node_modules/@img/sharp-linux-ppc64": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-ppc64/-/sharp-linux-ppc64-0.34.4.tgz",
      "integrity": "sha512-F4PDtF4Cy8L8hXA2p3TO6s4aDt93v+LKmpcYFLAVdkkD3hSxZzee0rh6/+94FpAynsuMpLX5h+LRsSG3rIciUQ==",
      "cpu": [
        "ppc64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-ppc64": "1.2.3"
      }
    },
    "node_modules/@img/sharp-linux-s390x": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-s390x/-/sharp-linux-s390x-0.34.4.tgz",
      "integrity": "sha512-qVrZKE9Bsnzy+myf7lFKvng6bQzhNUAYcVORq2P7bDlvmF6u2sCmK2KyEQEBdYk+u3T01pVsPrkj943T1aJAsw==",
      "cpu": [
        "s390x"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-s390x": "1.2.3"
      }
    },
    "node_modules/@img/sharp-linux-x64": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-x64/-/sharp-linux-x64-0.34.4.tgz",
      "integrity": "sha512-ZfGtcp2xS51iG79c6Vhw9CWqQC8l2Ot8dygxoDoIQPTat/Ov3qAa8qpxSrtAEAJW+UjTXc4yxCjNfxm4h6Xm2A==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-x64": "1.2.3"
      }
    },
    "node_modules/@img/sharp-linuxmusl-arm64": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-arm64/-/sharp-linuxmusl-arm64-0.34.4.tgz",
      "integrity": "sha512-8hDVvW9eu4yHWnjaOOR8kHVrew1iIX+MUgwxSuH2XyYeNRtLUe4VNioSqbNkB7ZYQJj9rUTT4PyRscyk2PXFKA==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linuxmusl-arm64": "1.2.3"
      }
    },
    "node_modules/@img/sharp-linuxmusl-x64": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-x64/-/sharp-linuxmusl-x64-0.34.4.tgz",
      "integrity": "sha512-lU0aA5L8QTlfKjpDCEFOZsTYGn3AEiO6db8W5aQDxj0nQkVrZWmN3ZP9sYKWJdtq3PWPhUNlqehWyXpYDcI9Sg==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linuxmusl-x64": "1.2.3"
      }
    },
    "node_modules/@img/sharp-wasm32": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-wasm32/-/sharp-wasm32-0.34.4.tgz",
      "integrity": "sha512-33QL6ZO/qpRyG7woB/HUALz28WnTMI2W1jgX3Nu2bypqLIKx/QKMILLJzJjI+SIbvXdG9fUnmrxR7vbi1sTBeA==",
      "cpu": [
        "wasm32"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later AND MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/runtime": "^1.5.0"
      },
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-win32-arm64": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-win32-arm64/-/sharp-win32-arm64-0.34.4.tgz",
      "integrity": "sha512-2Q250do/5WXTwxW3zjsEuMSv5sUU4Tq9VThWKlU2EYLm4MB7ZeMwF+SFJutldYODXF6jzc6YEOC+VfX0SZQPqA==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-win32-ia32": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-win32-ia32/-/sharp-win32-ia32-0.34.4.tgz",
      "integrity": "sha512-3ZeLue5V82dT92CNL6rsal6I2weKw1cYu+rGKm8fOCCtJTR2gYeUfY3FqUnIJsMUPIH68oS5jmZ0NiJ508YpEw==",
      "cpu": [
        "ia32"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-win32-x64": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-win32-x64/-/sharp-win32-x64-0.34.4.tgz",
      "integrity": "sha512-xIyj4wpYs8J18sVN3mSQjwrw7fKUqRw+Z5rnHNCy5fYTxigBz81u5mOMPmFumwjcn8+ld1ppptMBCLic1nz6ig==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@napi-rs/wasm-runtime": {
      "version": "0.2.12",
      "resolved": "https://registry.npmjs.org/@napi-rs/wasm-runtime/-/wasm-runtime-0.2.12.tgz",
      "integrity": "sha512-ZVWUcfwY4E/yPitQJl481FjFo3K22D6qF0DuFH6Y/nbnE11GY5uguDxZMGXPQ8WQ0128MXQD7TnfHyK4oWoIJQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/core": "^1.4.3",
        "@emnapi/runtime": "^1.4.3",
        "@tybys/wasm-util": "^0.10.0"
      }
    },
    "node_modules/@next/env": {
      "version": "15.5.9",
      "resolved": "https://registry.npmjs.org/@next/env/-/env-15.5.9.tgz",
      "integrity": "sha512-4GlTZ+EJM7WaW2HEZcyU317tIQDjkQIyENDLxYJfSWlfqguN+dHkZgyQTV/7ykvobU7yEH5gKvreNrH4B6QgIg==",
      "license": "MIT"
    },
    "node_modules/@next/eslint-plugin-next": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/@next/eslint-plugin-next/-/eslint-plugin-next-16.0.1.tgz",
      "integrity": "sha512-g4Cqmv/gyFEXNeVB2HkqDlYKfy+YrlM2k8AVIO/YQVEPfhVruH1VA99uT1zELLnPLIeOnx8IZ6Ddso0asfTIdw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-glob": "3.3.1"
      }
    },
    "node_modules/@next/swc-darwin-arm64": {
      "version": "15.5.7",
      "resolved": "https://registry.npmjs.org/@next/swc-darwin-arm64/-/swc-darwin-arm64-15.5.7.tgz",
      "integrity": "sha512-IZwtxCEpI91HVU/rAUOOobWSZv4P2DeTtNaCdHqLcTJU4wdNXgAySvKa/qJCgR5m6KI8UsKDXtO2B31jcaw1Yw==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-darwin-x64": {
      "version": "15.5.7",
      "resolved": "https://registry.npmjs.org/@next/swc-darwin-x64/-/swc-darwin-x64-15.5.7.tgz",
      "integrity": "sha512-UP6CaDBcqaCBuiq/gfCEJw7sPEoX1aIjZHnBWN9v9qYHQdMKvCKcAVs4OX1vIjeE+tC5EIuwDTVIoXpUes29lg==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-arm64-gnu": {
      "version": "15.5.7",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-gnu/-/swc-linux-arm64-gnu-15.5.7.tgz",
      "integrity": "sha512-NCslw3GrNIw7OgmRBxHtdWFQYhexoUCq+0oS2ccjyYLtcn1SzGzeM54jpTFonIMUjNbHmpKpziXnpxhSWLcmBA==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-arm64-musl": {
      "version": "15.5.7",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-musl/-/swc-linux-arm64-musl-15.5.7.tgz",
      "integrity": "sha512-nfymt+SE5cvtTrG9u1wdoxBr9bVB7mtKTcj0ltRn6gkP/2Nu1zM5ei8rwP9qKQP0Y//umK+TtkKgNtfboBxRrw==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-x64-gnu": {
      "version": "15.5.7",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-gnu/-/swc-linux-x64-gnu-15.5.7.tgz",
      "integrity": "sha512-hvXcZvCaaEbCZcVzcY7E1uXN9xWZfFvkNHwbe/n4OkRhFWrs1J1QV+4U1BN06tXLdaS4DazEGXwgqnu/VMcmqw==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-x64-musl": {
      "version": "15.5.7",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-musl/-/swc-linux-x64-musl-15.5.7.tgz",
      "integrity": "sha512-4IUO539b8FmF0odY6/SqANJdgwn1xs1GkPO5doZugwZ3ETF6JUdckk7RGmsfSf7ws8Qb2YB5It33mvNL/0acqA==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-win32-arm64-msvc": {
      "version": "15.5.7",
      "resolved": "https://registry.npmjs.org/@next/swc-win32-arm64-msvc/-/swc-win32-arm64-msvc-15.5.7.tgz",
      "integrity": "sha512-CpJVTkYI3ZajQkC5vajM7/ApKJUOlm6uP4BknM3XKvJ7VXAvCqSjSLmM0LKdYzn6nBJVSjdclx8nYJSa3xlTgQ==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-win32-x64-msvc": {
      "version": "15.5.7",
      "resolved": "https://registry.npmjs.org/@next/swc-win32-x64-msvc/-/swc-win32-x64-msvc-15.5.7.tgz",
      "integrity": "sha512-gMzgBX164I6DN+9/PGA+9dQiwmTkE4TloBNx8Kv9UiGARsr9Nba7IpcBRA1iTV9vwlYnrE3Uy6I7Aj6qLjQuqw==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nolyfill/is-core-module": {
      "version": "1.0.39",
      "resolved": "https://registry.npmjs.org/@nolyfill/is-core-module/-/is-core-module-1.0.39.tgz",
      "integrity": "sha512-nn5ozdjYQpUCZlWGuxcJY/KpxkWQs4DcbMCmKojjyrYDEAGy4Ce19NN4v5MduafTwJlbKc99UA8YhSVqq9yPZA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.4.0"
      }
    },
    "node_modules/@react-spring/rafz": {
      "version": "9.7.5",
      "resolved": "https://registry.npmjs.org/@react-spring/rafz/-/rafz-9.7.5.tgz",
      "integrity": "sha512-5ZenDQMC48wjUzPAm1EtwQ5Ot3bLIAwwqP2w2owG5KoNdNHpEJV263nGhCeKKmuA3vG2zLLOdu3or6kuDjA6Aw==",
      "license": "MIT"
    },
    "node_modules/@react-spring/types": {
      "version": "9.7.5",
      "resolved": "https://registry.npmjs.org/@react-spring/types/-/types-9.7.5.tgz",
      "integrity": "sha512-HVj7LrZ4ReHWBimBvu2SKND3cDVUPWKLqRTmWe/fNY6o1owGOX0cAHbdPDTMelgBlVbrTKrre6lFkhqGZErK/g==",
      "license": "MIT"
    },
    "node_modules/@react-three/drei": {
      "version": "9.0.0",
      "resolved": "https://registry.npmjs.org/@react-three/drei/-/drei-9.0.0.tgz",
      "integrity": "sha512-gF1PfaiHlXog+nHsAN1Fu7wzbLHhu+4JNFa8cmbqJidPcgo9Z5xl9TE6qkOwXIFpg7EvWS7pkpNtMFuTEgl5lg==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.11.2",
        "@react-spring/three": "^9.3.1",
        "@use-gesture/react": "^10.2.0",
        "detect-gpu": "^4.0.14",
        "glsl-noise": "^0.0.0",
        "lodash.omit": "^4.5.0",
        "lodash.pick": "^4.4.0",
        "meshline": "^2.0.4",
        "react-composer": "^5.0.2",
        "react-merge-refs": "^1.1.0",
        "stats.js": "^0.17.0",
        "suspend-react": "^0.0.8",
        "three-mesh-bvh": "^0.5.7",
        "three-stdlib": "^2.8.9",
        "troika-three-text": "^0.46.3",
        "utility-types": "^3.10.0",
        "zustand": "^3.5.13"
      },
      "peerDependencies": {
        "@react-three/fiber": ">=8.0",
        "react": ">=18.0",
        "react-dom": ">=18.0",
        "three": ">=0.137"
      },
      "peerDependenciesMeta": {
        "react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/@react-three/drei/node_modules/@react-spring/three": {
      "version": "9.7.5",
      "resolved": "https://registry.npmjs.org/@react-spring/three/-/three-9.7.5.tgz",
      "integrity": "sha512-RxIsCoQfUqOS3POmhVHa1wdWS0wyHAUway73uRLp3GAL5U2iYVNdnzQsep6M2NZ994BlW8TcKuMtQHUqOsy6WA==",
      "license": "MIT",
      "dependencies": {
        "@react-spring/animated": "~9.7.5",
        "@react-spring/core": "~9.7.5",
        "@react-spring/shared": "~9.7.5",
        "@react-spring/types": "~9.7.5"
      },
      "peerDependencies": {
        "@react-three/fiber": ">=6.0",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0",
        "three": ">=0.126"
      }
    },
    "node_modules/@react-three/drei/node_modules/@react-spring/three/node_modules/@react-spring/animated": {
      "version": "9.7.5",
      "resolved": "https://registry.npmjs.org/@react-spring/animated/-/animated-9.7.5.tgz",
      "integrity": "sha512-Tqrwz7pIlsSDITzxoLS3n/v/YCUHQdOIKtOJf4yL6kYVSDTSmVK1LI1Q3M/uu2Sx4X3pIWF3xLUhlsA6SPNTNg==",
      "license": "MIT",
      "dependencies": {
        "@react-spring/shared": "~9.7.5",
        "@react-spring/types": "~9.7.5"
      },
      "peerDependencies": {
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0"
      }
    },
    "node_modules/@react-three/drei/node_modules/@react-spring/three/node_modules/@react-spring/core": {
      "version": "9.7.5",
      "resolved": "https://registry.npmjs.org/@react-spring/core/-/core-9.7.5.tgz",
      "integrity": "sha512-rmEqcxRcu7dWh7MnCcMXLvrf6/SDlSokLaLTxiPlAYi11nN3B5oiCUAblO72o+9z/87j2uzxa2Inm8UbLjXA+w==",
      "license": "MIT",
      "dependencies": {
        "@react-spring/animated": "~9.7.5",
        "@react-spring/shared": "~9.7.5",
        "@react-spring/types": "~9.7.5"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/react-spring/donate"
      },
      "peerDependencies": {
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0"
      }
    },
    "node_modules/@react-three/drei/node_modules/@react-spring/three/node_modules/@react-spring/shared": {
      "version": "9.7.5",
      "resolved": "https://registry.npmjs.org/@react-spring/shared/-/shared-9.7.5.tgz",
      "integrity": "sha512-wdtoJrhUeeyD/PP/zo+np2s1Z820Ohr/BbuVYv+3dVLW7WctoiN7std8rISoYoHpUXtbkpesSKuPIw/6U1w1Pw==",
      "license": "MIT",
      "dependencies": {
        "@react-spring/rafz": "~9.7.5",
        "@react-spring/types": "~9.7.5"
      },
      "peerDependencies": {
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0"
      }
    },
    "node_modules/@react-three/drei/node_modules/meshline": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/meshline/-/meshline-2.0.4.tgz",
      "integrity": "sha512-Jh6DJl/zLqA4xsKvGv5950jr2ukyXQE1wgxs8u94cImHrvL6soVIggqjP+2hVHZXGYaKnWszhtjuCbKNeQyYiw==",
      "license": "MIT",
      "peerDependencies": {
        "three": ">=0.137"
      }
    },
    "node_modules/@react-three/drei/node_modules/react-composer": {
      "version": "5.0.3",
      "resolved": "https://registry.npmjs.org/react-composer/-/react-composer-5.0.3.tgz",
      "integrity": "sha512-1uWd07EME6XZvMfapwZmc7NgCZqDemcvicRi3wMJzXsQLvZ3L7fTHVyPy1bZdnWXM4iPjYuNE+uJ41MLKeTtnA==",
      "license": "MIT",
      "dependencies": {
        "prop-types": "^15.6.0"
      },
      "peerDependencies": {
        "react": "^15.0.0 || ^16.0.0 || ^17.0.0 || ^18.0.0"
      }
    },
    "node_modules/@react-three/fiber": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/@react-three/fiber/-/fiber-8.0.0.tgz",
      "integrity": "sha512-k2aXHBYoIZUHBXoHNU3hia8F71qsH3rYlVv84QH2epW22sxBl/+qWZhMzXySbuC2dIkcUZ6ZDMb3R8GiD/7hIg==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.17.8",
        "@types/react-reconciler": "^0.26.4",
        "react-merge-refs": "^1.1.0",
        "react-reconciler": "^0.27.0",
        "react-use-measure": "^2.1.1",
        "scheduler": "^0.21.0",
        "suspend-react": "^0.0.8",
        "zustand": "^3.7.1"
      },
      "peerDependencies": {
        "expo": ">=43.0",
        "expo-asset": ">=8.4",
        "expo-gl": ">=11.0",
        "react": ">=18.0",
        "react-dom": ">=18.0",
        "react-native": ">=0.64",
        "three": ">=0.139"
      },
      "peerDependenciesMeta": {
        "expo": {
          "optional": true
        },
        "expo-asset": {
          "optional": true
        },
        "expo-gl": {
          "optional": true
        },
        "react-dom": {
          "optional": true
        },
        "react-native": {
          "optional": true
        }
      }
    },
    "node_modules/@react-three/fiber/node_modules/react-reconciler": {
      "version": "0.27.0",
      "resolved": "https://registry.npmjs.org/react-reconciler/-/react-reconciler-0.27.0.tgz",
      "integrity": "sha512-HmMDKciQjYmBRGuuhIaKA1ba/7a+UsM5FzOZsMO2JYHt9Jh8reCb7j1eDC95NOyUlKM9KRyvdx0flBuDvYSBoA==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0",
        "scheduler": "^0.21.0"
      },
      "engines": {
        "node": ">=0.10.0"
      },
      "peerDependencies": {
        "react": "^18.0.0"
      }
    },
    "node_modules/@react-three/fiber/node_modules/scheduler": {
      "version": "0.21.0",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.21.0.tgz",
      "integrity": "sha512-1r87x5fz9MXqswA2ERLo0EbOAU74DpIUO090gIasYTqlVoJeMcl+Z1Rg7WHz+qtPujhS/hGIt9kxZOYBV3faRQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      }
    },
    "node_modules/@reduxjs/toolkit": {
      "version": "2.11.2",
      "resolved": "https://registry.npmjs.org/@reduxjs/toolkit/-/toolkit-2.11.2.tgz",
      "integrity": "sha512-Kd6kAHTA6/nUpp8mySPqj3en3dm0tdMIgbttnQ1xFMVpufoj+ADi8pXLBsd4xzTRHQa7t/Jv8W5UnCuW4kuWMQ==",
      "license": "MIT",
      "dependencies": {
        "@standard-schema/spec": "^1.0.0",
        "@standard-schema/utils": "^0.3.0",
        "immer": "^11.0.0",
        "redux": "^5.0.1",
        "redux-thunk": "^3.1.0",
        "reselect": "^5.1.0"
      },
      "peerDependencies": {
        "react": "^16.9.0 || ^17.0.0 || ^18 || ^19",
        "react-redux": "^7.2.1 || ^8.1.3 || ^9.0.0"
      },
      "peerDependenciesMeta": {
        "react": {
          "optional": true
        },
        "react-redux": {
          "optional": true
        }
      }
    },
    "node_modules/@reduxjs/toolkit/node_modules/immer": {
      "version": "11.1.3",
      "resolved": "https://registry.npmjs.org/immer/-/immer-11.1.3.tgz",
      "integrity": "sha512-6jQTc5z0KJFtr1UgFpIL3N9XSC3saRaI9PwWtzM2pSqkNGtiNkYY2OSwkOGDK2XcTRcLb1pi/aNkKZz0nxVH4Q==",
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/immer"
      }
    },
    "node_modules/@rtsao/scc": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@rtsao/scc/-/scc-1.1.0.tgz",
      "integrity": "sha512-zt6OdqaDoOnJ1ZYsCYGt9YmWzDXl4vQdKTyJev62gFhRGKdx7mcT54V9KIjg+d2wi9EXsPvAPKe7i7WjfVWB8g==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@standard-schema/spec": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@standard-schema/spec/-/spec-1.1.0.tgz",
      "integrity": "sha512-l2aFy5jALhniG5HgqrD6jXLi/rUWrKvqN/qJx6yoJsgKhblVd+iqqU4RCXavm/jPityDo5TCvKMnpjKnOriy0w==",
      "license": "MIT"
    },
    "node_modules/@standard-schema/utils": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/@standard-schema/utils/-/utils-0.3.0.tgz",
      "integrity": "sha512-e7Mew686owMaPJVNNLs55PUvgz371nKgwsc4vxE49zsODpJEnxgxRo2y/OKrqueavXgZNMDVj3DdHFlaSAeU8g==",
      "license": "MIT"
    },
    "node_modules/@supabase/auth-js": {
      "version": "2.81.1",
      "resolved": "https://registry.npmjs.org/@supabase/auth-js/-/auth-js-2.81.1.tgz",
      "integrity": "sha512-K20GgiSm9XeRLypxYHa5UCnybWc2K0ok0HLbqCej/wRxDpJxToXNOwKt0l7nO8xI1CyQ+GrNfU6bcRzvdbeopQ==",
      "license": "MIT",
      "dependencies": {
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/functions-js": {
      "version": "2.81.1",
      "resolved": "https://registry.npmjs.org/@supabase/functions-js/-/functions-js-2.81.1.tgz",
      "integrity": "sha512-sYgSO3mlgL0NvBFS3oRfCK4OgKGQwuOWJLzfPyWg0k8MSxSFSDeN/JtrDJD5GQrxskP6c58+vUzruBJQY78AqQ==",
      "license": "MIT",
      "dependencies": {
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/postgrest-js": {
      "version": "2.81.1",
      "resolved": "https://registry.npmjs.org/@supabase/postgrest-js/-/postgrest-js-2.81.1.tgz",
      "integrity": "sha512-DePpUTAPXJyBurQ4IH2e42DWoA+/Qmr5mbgY4B6ZcxVc/ZUKfTVK31BYIFBATMApWraFc8Q/Sg+yxtfJ3E0wSg==",
      "license": "MIT",
      "dependencies": {
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/realtime-js": {
      "version": "2.81.1",
      "resolved": "https://registry.npmjs.org/@supabase/realtime-js/-/realtime-js-2.81.1.tgz",
      "integrity": "sha512-ViQ+Kxm8BuUP/TcYmH9tViqYKGSD1LBjdqx2p5J+47RES6c+0QHedM0PPAjthMdAHWyb2LGATE9PD2++2rO/tw==",
      "license": "MIT",
      "dependencies": {
        "@types/phoenix": "^1.6.6",
        "@types/ws": "^8.18.1",
        "tslib": "2.8.1",
        "ws": "^8.18.2"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/ssr": {
      "version": "0.7.0",
      "resolved": "https://registry.npmjs.org/@supabase/ssr/-/ssr-0.7.0.tgz",
      "integrity": "sha512-G65t5EhLSJ5c8hTCcXifSL9Q/ZRXvqgXeNo+d3P56f4U1IxwTqjB64UfmfixvmMcjuxnq2yGqEWVJqUcO+AzAg==",
      "license": "MIT",
      "dependencies": {
        "cookie": "^1.0.2"
      },
      "peerDependencies": {
        "@supabase/supabase-js": "^2.43.4"
      }
    },
    "node_modules/@supabase/storage-js": {
      "version": "2.81.1",
      "resolved": "https://registry.npmjs.org/@supabase/storage-js/-/storage-js-2.81.1.tgz",
      "integrity": "sha512-UNmYtjnZnhouqnbEMC1D5YJot7y0rIaZx7FG2Fv8S3hhNjcGVvO+h9We/tggi273BFkiahQPS/uRsapo1cSapw==",
      "license": "MIT",
      "dependencies": {
        "tslib": "2.8.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@supabase/supabase-js": {
      "version": "2.81.1",
      "resolved": "https://registry.npmjs.org/@supabase/supabase-js/-/supabase-js-2.81.1.tgz",
      "integrity": "sha512-KSdY7xb2L0DlLmlYzIOghdw/na4gsMcqJ8u4sD6tOQJr+x3hLujU9s4R8N3ob84/1bkvpvlU5PYKa1ae+OICnw==",
      "license": "MIT",
      "dependencies": {
        "@supabase/auth-js": "2.81.1",
        "@supabase/functions-js": "2.81.1",
        "@supabase/postgrest-js": "2.81.1",
        "@supabase/realtime-js": "2.81.1",
        "@supabase/storage-js": "2.81.1"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@swc/helpers": {
      "version": "0.5.15",
      "resolved": "https://registry.npmjs.org/@swc/helpers/-/helpers-0.5.15.tgz",
      "integrity": "sha512-JQ5TuMi45Owi4/BIMAJBoSQoOJu12oOk/gADqlcUL9JEdHB8vyjUSsxqeNXnmXHjYKMi2WcYtezGEEhqUI/E2g==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.8.0"
      }
    },
    "node_modules/@tailwindcss/node": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/node/-/node-4.1.16.tgz",
      "integrity": "sha512-BX5iaSsloNuvKNHRN3k2RcCuTEgASTo77mofW0vmeHkfrDWaoFAFvNHpEgtu0eqyypcyiBkDWzSMxJhp3AUVcw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/remapping": "^2.3.4",
        "enhanced-resolve": "^5.18.3",
        "jiti": "^2.6.1",
        "lightningcss": "1.30.2",
        "magic-string": "^0.30.19",
        "source-map-js": "^1.2.1",
        "tailwindcss": "4.1.16"
      }
    },
    "node_modules/@tailwindcss/oxide": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide/-/oxide-4.1.16.tgz",
      "integrity": "sha512-2OSv52FRuhdlgyOQqgtQHuCgXnS8nFSYRp2tJ+4WZXKgTxqPy7SMSls8c3mPT5pkZ17SBToGM5LHEJBO7miEdg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 10"
      },
      "optionalDependencies": {
        "@tailwindcss/oxide-android-arm64": "4.1.16",
        "@tailwindcss/oxide-darwin-arm64": "4.1.16",
        "@tailwindcss/oxide-darwin-x64": "4.1.16",
        "@tailwindcss/oxide-freebsd-x64": "4.1.16",
        "@tailwindcss/oxide-linux-arm-gnueabihf": "4.1.16",
        "@tailwindcss/oxide-linux-arm64-gnu": "4.1.16",
        "@tailwindcss/oxide-linux-arm64-musl": "4.1.16",
        "@tailwindcss/oxide-linux-x64-gnu": "4.1.16",
        "@tailwindcss/oxide-linux-x64-musl": "4.1.16",
        "@tailwindcss/oxide-wasm32-wasi": "4.1.16",
        "@tailwindcss/oxide-win32-arm64-msvc": "4.1.16",
        "@tailwindcss/oxide-win32-x64-msvc": "4.1.16"
      }
    },
    "node_modules/@tailwindcss/oxide-android-arm64": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-android-arm64/-/oxide-android-arm64-4.1.16.tgz",
      "integrity": "sha512-8+ctzkjHgwDJ5caq9IqRSgsP70xhdhJvm+oueS/yhD5ixLhqTw9fSL1OurzMUhBwE5zK26FXLCz2f/RtkISqHA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tailwindcss/oxide-darwin-arm64": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-darwin-arm64/-/oxide-darwin-arm64-4.1.16.tgz",
      "integrity": "sha512-C3oZy5042v2FOALBZtY0JTDnGNdS6w7DxL/odvSny17ORUnaRKhyTse8xYi3yKGyfnTUOdavRCdmc8QqJYwFKA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tailwindcss/oxide-darwin-x64": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-darwin-x64/-/oxide-darwin-x64-4.1.16.tgz",
      "integrity": "sha512-vjrl/1Ub9+JwU6BP0emgipGjowzYZMjbWCDqwA2Z4vCa+HBSpP4v6U2ddejcHsolsYxwL5r4bPNoamlV0xDdLg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tailwindcss/oxide-freebsd-x64": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-freebsd-x64/-/oxide-freebsd-x64-4.1.16.tgz",
      "integrity": "sha512-TSMpPYpQLm+aR1wW5rKuUuEruc/oOX3C7H0BTnPDn7W/eMw8W+MRMpiypKMkXZfwH8wqPIRKppuZoedTtNj2tg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tailwindcss/oxide-linux-arm-gnueabihf": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-linux-arm-gnueabihf/-/oxide-linux-arm-gnueabihf-4.1.16.tgz",
      "integrity": "sha512-p0GGfRg/w0sdsFKBjMYvvKIiKy/LNWLWgV/plR4lUgrsxFAoQBFrXkZ4C0w8IOXfslB9vHK/JGASWD2IefIpvw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tailwindcss/oxide-linux-arm64-gnu": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-linux-arm64-gnu/-/oxide-linux-arm64-gnu-4.1.16.tgz",
      "integrity": "sha512-DoixyMmTNO19rwRPdqviTrG1rYzpxgyYJl8RgQvdAQUzxC1ToLRqtNJpU/ATURSKgIg6uerPw2feW0aS8SNr/w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tailwindcss/oxide-linux-arm64-musl": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-linux-arm64-musl/-/oxide-linux-arm64-musl-4.1.16.tgz",
      "integrity": "sha512-H81UXMa9hJhWhaAUca6bU2wm5RRFpuHImrwXBUvPbYb+3jo32I9VIwpOX6hms0fPmA6f2pGVlybO6qU8pF4fzQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tailwindcss/oxide-linux-x64-gnu": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-linux-x64-gnu/-/oxide-linux-x64-gnu-4.1.16.tgz",
      "integrity": "sha512-ZGHQxDtFC2/ruo7t99Qo2TTIvOERULPl5l0K1g0oK6b5PGqjYMga+FcY1wIUnrUxY56h28FxybtDEla+ICOyew==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tailwindcss/oxide-linux-x64-musl": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-linux-x64-musl/-/oxide-linux-x64-musl-4.1.16.tgz",
      "integrity": "sha512-Oi1tAaa0rcKf1Og9MzKeINZzMLPbhxvm7rno5/zuP1WYmpiG0bEHq4AcRUiG2165/WUzvxkW4XDYCscZWbTLZw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tailwindcss/oxide-wasm32-wasi": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-wasm32-wasi/-/oxide-wasm32-wasi-4.1.16.tgz",
      "integrity": "sha512-B01u/b8LteGRwucIBmCQ07FVXLzImWESAIMcUU6nvFt/tYsQ6IHz8DmZ5KtvmwxD+iTYBtM1xwoGXswnlu9v0Q==",
      "bundleDependencies": [
        "@napi-rs/wasm-runtime",
        "@emnapi/core",
        "@emnapi/runtime",
        "@tybys/wasm-util",
        "@emnapi/wasi-threads",
        "tslib"
      ],
      "cpu": [
        "wasm32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/core": "^1.5.0",
        "@emnapi/runtime": "^1.5.0",
        "@emnapi/wasi-threads": "^1.1.0",
        "@napi-rs/wasm-runtime": "^1.0.7",
        "@tybys/wasm-util": "^0.10.1",
        "tslib": "^2.4.0"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@tailwindcss/oxide-win32-arm64-msvc": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-win32-arm64-msvc/-/oxide-win32-arm64-msvc-4.1.16.tgz",
      "integrity": "sha512-zX+Q8sSkGj6HKRTMJXuPvOcP8XfYON24zJBRPlszcH1Np7xuHXhWn8qfFjIujVzvH3BHU+16jBXwgpl20i+v9A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tailwindcss/oxide-win32-x64-msvc": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-win32-x64-msvc/-/oxide-win32-x64-msvc-4.1.16.tgz",
      "integrity": "sha512-m5dDFJUEejbFqP+UXVstd4W/wnxA4F61q8SoL+mqTypId2T2ZpuxosNSgowiCnLp2+Z+rivdU0AqpfgiD7yCBg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tailwindcss/postcss": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/@tailwindcss/postcss/-/postcss-4.1.16.tgz",
      "integrity": "sha512-Qn3SFGPXYQMKR/UtqS+dqvPrzEeBZHrFA92maT4zijCVggdsXnDBMsPFJo1eArX3J+O+Gi+8pV4PkqjLCNBk3A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@alloc/quick-lru": "^5.2.0",
        "@tailwindcss/node": "4.1.16",
        "@tailwindcss/oxide": "4.1.16",
        "postcss": "^8.4.41",
        "tailwindcss": "4.1.16"
      }
    },
    "node_modules/@tweenjs/tween.js": {
      "version": "23.1.3",
      "resolved": "https://registry.npmjs.org/@tweenjs/tween.js/-/tween.js-23.1.3.tgz",
      "integrity": "sha512-vJmvvwFxYuGnF2axRtPYocag6Clbb5YS7kLL+SO/TeVFzHqDIWrNKYtcsPMibjDx9O+bu+psAy9NKfWklassUA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@tybys/wasm-util": {
      "version": "0.10.1",
      "resolved": "https://registry.npmjs.org/@tybys/wasm-util/-/wasm-util-0.10.1.tgz",
      "integrity": "sha512-9tTaPJLSiejZKx+Bmog4uSubteqTvFrVrURwkmHixBo0G4seD0zUxp98E1DzUBJxLQ3NPwXrGKDiVjwx/DpPsg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@types/d3-array": {
      "version": "3.2.2",
      "resolved": "https://registry.npmjs.org/@types/d3-array/-/d3-array-3.2.2.tgz",
      "integrity": "sha512-hOLWVbm7uRza0BYXpIIW5pxfrKe0W+D5lrFiAEYR+pb6w3N2SwSMaJbXdUfSEv+dT4MfHBLtn5js0LAWaO6otw==",
      "license": "MIT"
    },
    "node_modules/@types/d3-color": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/@types/d3-color/-/d3-color-3.1.3.tgz",
      "integrity": "sha512-iO90scth9WAbmgv7ogoq57O9YpKmFBbmoEoCHDB2xMBY0+/KVrqAaCDyCE16dUspeOvIxFFRI+0sEtqDqy2b4A==",
      "license": "MIT"
    },
    "node_modules/@types/d3-ease": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/@types/d3-ease/-/d3-ease-3.0.2.tgz",
      "integrity": "sha512-NcV1JjO5oDzoK26oMzbILE6HW7uVXOHLQvHshBUW4UMdZGfiY6v5BeQwh9a9tCzv+CeefZQHJt5SRgK154RtiA==",
      "license": "MIT"
    },
    "node_modules/@types/d3-interpolate": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/@types/d3-interpolate/-/d3-interpolate-3.0.4.tgz",
      "integrity": "sha512-mgLPETlrpVV1YRJIglr4Ez47g7Yxjl1lj7YKsiMCb27VJH9W8NVM6Bb9d8kkpG/uAQS5AmbA48q2IAolKKo1MA==",
      "license": "MIT",
      "dependencies": {
        "@types/d3-color": "*"
      }
    },
    "node_modules/@types/d3-path": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/@types/d3-path/-/d3-path-3.1.1.tgz",
      "integrity": "sha512-VMZBYyQvbGmWyWVea0EHs/BwLgxc+MKi1zLDCONksozI4YJMcTt8ZEuIR4Sb1MMTE8MMW49v0IwI5+b7RmfWlg==",
      "license": "MIT"
    },
    "node_modules/@types/d3-scale": {
      "version": "4.0.9",
      "resolved": "https://registry.npmjs.org/@types/d3-scale/-/d3-scale-4.0.9.tgz",
      "integrity": "sha512-dLmtwB8zkAeO/juAMfnV+sItKjlsw2lKdZVVy6LRr0cBmegxSABiLEpGVmSJJ8O08i4+sGR6qQtb6WtuwJdvVw==",
      "license": "MIT",
      "dependencies": {
        "@types/d3-time": "*"
      }
    },
    "node_modules/@types/d3-shape": {
      "version": "3.1.8",
      "resolved": "https://registry.npmjs.org/@types/d3-shape/-/d3-shape-3.1.8.tgz",
      "integrity": "sha512-lae0iWfcDeR7qt7rA88BNiqdvPS5pFVPpo5OfjElwNaT2yyekbM0C9vK+yqBqEmHr6lDkRnYNoTBYlAgJa7a4w==",
      "license": "MIT",
      "dependencies": {
        "@types/d3-path": "*"
      }
    },
    "node_modules/@types/d3-time": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/@types/d3-time/-/d3-time-3.0.4.tgz",
      "integrity": "sha512-yuzZug1nkAAaBlBBikKZTgzCeA+k1uy4ZFwWANOfKw5z5LRhV0gNA7gNkKm7HoK+HRN0wX3EkxGk0fpbWhmB7g==",
      "license": "MIT"
    },
    "node_modules/@types/d3-timer": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/@types/d3-timer/-/d3-timer-3.0.2.tgz",
      "integrity": "sha512-Ps3T8E8dZDam6fUyNiMkekK3XUsaUEik+idO9/YjPtfj2qruF8tFBXS7XhtE4iIXBLxhmLjP3SXpLhVf21I9Lw==",
      "license": "MIT"
    },
    "node_modules/@types/draco3d": {
      "version": "1.4.10",
      "resolved": "https://registry.npmjs.org/@types/draco3d/-/draco3d-1.4.10.tgz",
      "integrity": "sha512-AX22jp8Y7wwaBgAixaSvkoG4M/+PlAcm3Qs4OW8yT9DM4xUpWKeFhLueTAyZF39pviAdcDdeJoACapiAceqNcw==",
      "license": "MIT"
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/json5": {
      "version": "0.0.29",
      "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
      "integrity": "sha512-dRLjCWHYg4oaA77cxO64oO+7JwCwnIzkZPdrrC71jQmQtlhM556pwKo5bUzqvZndkVbeFLIIi+9TC40JNF5hNQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/node": {
      "version": "20.19.24",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-20.19.24.tgz",
      "integrity": "sha512-FE5u0ezmi6y9OZEzlJfg37mqqf6ZDSF2V/NLjUyGrR9uTZ7Sb9F7bLNZ03S4XVUNRWGA7Ck4c1kK+YnuWjl+DA==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~6.21.0"
      }
    },
    "node_modules/@types/offscreencanvas": {
      "version": "2019.7.3",
      "resolved": "https://registry.npmjs.org/@types/offscreencanvas/-/offscreencanvas-2019.7.3.tgz",
      "integrity": "sha512-ieXiYmgSRXUDeOntE1InxjWyvEelZGP63M+cGuquuRLuIKKT1osnkXjxev9B7d1nXSug5vpunx+gNlbVxMlC9A==",
      "license": "MIT"
    },
    "node_modules/@types/phoenix": {
      "version": "1.6.6",
      "resolved": "https://registry.npmjs.org/@types/phoenix/-/phoenix-1.6.6.tgz",
      "integrity": "sha512-PIzZZlEppgrpoT2QgbnDU+MMzuR6BbCjllj0bM70lWoejMeNJAxCchxnv7J3XFkI8MpygtRpzXrIlmWUBclP5A==",
      "license": "MIT"
    },
    "node_modules/@types/react": {
      "version": "19.2.2",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-19.2.2.tgz",
      "integrity": "sha512-6mDvHUFSjyT2B2yeNx2nUgMxh9LtOWvkhIU3uePn2I2oyNymUAX1NIsdgviM4CH+JSrp2D2hsMvJOkxY+0wNRA==",
      "license": "MIT",
      "dependencies": {
        "csstype": "^3.0.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "19.2.2",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-19.2.2.tgz",
      "integrity": "sha512-9KQPoO6mZCi7jcIStSnlOWn2nEF3mNmyr3rIAsGnAbQKYbRLyqmeSc39EVgtxXVia+LMT8j3knZLAZAh+xLmrw==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "^19.2.0"
      }
    },
    "node_modules/@types/react-reconciler": {
      "version": "0.26.7",
      "resolved": "https://registry.npmjs.org/@types/react-reconciler/-/react-reconciler-0.26.7.tgz",
      "integrity": "sha512-mBDYl8x+oyPX/VBb3E638N0B7xG+SPk/EAMcVPeexqus/5aTpTphQi0curhhshOqRrc9t6OPoJfEUkbymse/lQ==",
      "license": "MIT",
      "dependencies": {
        "@types/react": "*"
      }
    },
    "node_modules/@types/recharts": {
      "version": "1.8.29",
      "resolved": "https://registry.npmjs.org/@types/recharts/-/recharts-1.8.29.tgz",
      "integrity": "sha512-ulKklaVsnFIIhTQsQw226TnOibrddW1qUQNFVhoQEyY1Z7FRQrNecFCGt7msRuJseudzE9czVawZb17dK/aPXw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/d3-shape": "^1",
        "@types/react": "*"
      }
    },
    "node_modules/@types/recharts/node_modules/@types/d3-path": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/@types/d3-path/-/d3-path-1.0.11.tgz",
      "integrity": "sha512-4pQMp8ldf7UaB/gR8Fvvy69psNHkTpD/pVw3vmEi8iZAB9EPMBruB1JvHO4BIq9QkUUd2lV1F5YXpMNj7JPBpw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/recharts/node_modules/@types/d3-shape": {
      "version": "1.3.12",
      "resolved": "https://registry.npmjs.org/@types/d3-shape/-/d3-shape-1.3.12.tgz",
      "integrity": "sha512-8oMzcd4+poSLGgV0R1Q1rOlx/xdmozS4Xab7np0eamFFUYq71AU9pOCJEFnkXW2aI/oXdVYJzw6pssbSut7Z9Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/d3-path": "^1"
      }
    },
    "node_modules/@types/stats.js": {
      "version": "0.17.4",
      "resolved": "https://registry.npmjs.org/@types/stats.js/-/stats.js-0.17.4.tgz",
      "integrity": "sha512-jIBvWWShCvlBqBNIZt0KAshWpvSjhkwkEu4ZUcASoAvhmrgAUI2t1dXrjSL4xXVLB4FznPrIsX3nKXFl/Dt4vA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/three": {
      "version": "0.182.0",
      "resolved": "https://registry.npmjs.org/@types/three/-/three-0.182.0.tgz",
      "integrity": "sha512-WByN9V3Sbwbe2OkWuSGyoqQO8Du6yhYaXtXLoA5FkKTUJorZ+yOHBZ35zUUPQXlAKABZmbYp5oAqpA4RBjtJ/Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@dimforge/rapier3d-compat": "~0.12.0",
        "@tweenjs/tween.js": "~23.1.3",
        "@types/stats.js": "*",
        "@types/webxr": ">=0.5.17",
        "@webgpu/types": "*",
        "fflate": "~0.8.2",
        "meshoptimizer": "~0.22.0"
      }
    },
    "node_modules/@types/three/node_modules/fflate": {
      "version": "0.8.2",
      "resolved": "https://registry.npmjs.org/fflate/-/fflate-0.8.2.tgz",
      "integrity": "sha512-cPJU47OaAoCbg0pBvzsgpTPhmhqI5eJjh/JIu8tPj5q+T7iLvW/JAYUqmE7KOB4R1ZyEhzBaIQpQpardBF5z8A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/use-sync-external-store": {
      "version": "0.0.6",
      "resolved": "https://registry.npmjs.org/@types/use-sync-external-store/-/use-sync-external-store-0.0.6.tgz",
      "integrity": "sha512-zFDAD+tlpf2r4asuHEj0XH6pY6i0g5NeAHPn+15wk3BV6JA69eERFXC1gyGThDkVa1zCyKr5jox1+2LbV/AMLg==",
      "license": "MIT"
    },
    "node_modules/@types/webxr": {
      "version": "0.5.24",
      "resolved": "https://registry.npmjs.org/@types/webxr/-/webxr-0.5.24.tgz",
      "integrity": "sha512-h8fgEd/DpoS9CBrjEQXR+dIDraopAEfu4wYVNY2tEPwk60stPWhvZMf4Foo5FakuQ7HFZoa8WceaWFervK2Ovg==",
      "license": "MIT"
    },
    "node_modules/@types/ws": {
      "version": "8.18.1",
      "resolved": "https://registry.npmjs.org/@types/ws/-/ws-8.18.1.tgz",
      "integrity": "sha512-ThVF6DCVhA8kUGy+aazFQ4kXQ7E1Ty7A3ypFOe0IcJV8O/M511G99AW24irKrW56Wt44yG9+ij8FaqoBGkuBXg==",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-8.46.2.tgz",
      "integrity": "sha512-ZGBMToy857/NIPaaCucIUQgqueOiq7HeAKkhlvqVV4lm089zUFW6ikRySx2v+cAhKeUCPuWVHeimyk6Dw1iY3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/regexpp": "^4.10.0",
        "@typescript-eslint/scope-manager": "8.46.2",
        "@typescript-eslint/type-utils": "8.46.2",
        "@typescript-eslint/utils": "8.46.2",
        "@typescript-eslint/visitor-keys": "8.46.2",
        "graphemer": "^1.4.0",
        "ignore": "^7.0.0",
        "natural-compare": "^1.4.0",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "@typescript-eslint/parser": "^8.46.2",
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin/node_modules/ignore": {
      "version": "7.0.5",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-7.0.5.tgz",
      "integrity": "sha512-Hs59xBNfUIunMFgWAbGX5cq6893IbWg4KnrjbYwX3tx0ztorVgTDA6B2sxf8ejHJ4wz8BqGUMYlnzNBer5NvGg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-8.46.2.tgz",
      "integrity": "sha512-BnOroVl1SgrPLywqxyqdJ4l3S2MsKVLDVxZvjI1Eoe8ev2r3kGDo+PcMihNmDE+6/KjkTubSJnmqGZZjQSBq/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/scope-manager": "8.46.2",
        "@typescript-eslint/types": "8.46.2",
        "@typescript-eslint/typescript-estree": "8.46.2",
        "@typescript-eslint/visitor-keys": "8.46.2",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/project-service": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/project-service/-/project-service-8.46.2.tgz",
      "integrity": "sha512-PULOLZ9iqwI7hXcmL4fVfIsBi6AN9YxRc0frbvmg8f+4hQAjQ5GYNKK0DIArNo+rOKmR/iBYwkpBmnIwin4wBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/tsconfig-utils": "^8.46.2",
        "@typescript-eslint/types": "^8.46.2",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-8.46.2.tgz",
      "integrity": "sha512-LF4b/NmGvdWEHD2H4MsHD8ny6JpiVNDzrSZr3CsckEgCbAGZbYM4Cqxvi9L+WqDMT+51Ozy7lt2M+d0JLEuBqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.46.2",
        "@typescript-eslint/visitor-keys": "8.46.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/tsconfig-utils": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/tsconfig-utils/-/tsconfig-utils-8.46.2.tgz",
      "integrity": "sha512-a7QH6fw4S57+F5y2FIxxSDyi5M4UfGF+Jl1bCGd7+L4KsaUY80GsiF/t0UoRFDHAguKlBaACWJRmdrc6Xfkkag==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/type-utils": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-8.46.2.tgz",
      "integrity": "sha512-HbPM4LbaAAt/DjxXaG9yiS9brOOz6fabal4uvUmaUYe6l3K1phQDMQKBRUrr06BQkxkvIZVVHttqiybM9nJsLA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.46.2",
        "@typescript-eslint/typescript-estree": "8.46.2",
        "@typescript-eslint/utils": "8.46.2",
        "debug": "^4.3.4",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-8.46.2.tgz",
      "integrity": "sha512-lNCWCbq7rpg7qDsQrd3D6NyWYu+gkTENkG5IKYhUIcxSb59SQC/hEQ+MrG4sTgBVghTonNWq42bA/d4yYumldQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-8.46.2.tgz",
      "integrity": "sha512-f7rW7LJ2b7Uh2EiQ+7sza6RDZnajbNbemn54Ob6fRwQbgcIn+GWfyuHDHRYgRoZu1P4AayVScrRW+YfbTvPQoQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/project-service": "8.46.2",
        "@typescript-eslint/tsconfig-utils": "8.46.2",
        "@typescript-eslint/types": "8.46.2",
        "@typescript-eslint/visitor-keys": "8.46.2",
        "debug": "^4.3.4",
        "fast-glob": "^3.3.2",
        "is-glob": "^4.0.3",
        "minimatch": "^9.0.4",
        "semver": "^7.6.0",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/fast-glob": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
      "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/minimatch": {
      "version": "9.0.5",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.5.tgz",
      "integrity": "sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/@typescript-eslint/utils": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-8.46.2.tgz",
      "integrity": "sha512-sExxzucx0Tud5tE0XqR0lT0psBQvEpnpiul9XbGUB1QwpWJJAps1O/Z7hJxLGiZLBKMCutjTzDgmd1muEhBnVg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.7.0",
        "@typescript-eslint/scope-manager": "8.46.2",
        "@typescript-eslint/types": "8.46.2",
        "@typescript-eslint/typescript-estree": "8.46.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-8.46.2.tgz",
      "integrity": "sha512-tUFMXI4gxzzMXt4xpGJEsBsTox0XbNQ1y94EwlD/CuZwFcQP79xfQqMhau9HsRc/J0cAPA/HZt1dZPtGn9V/7w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.46.2",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@unrs/resolver-binding-android-arm-eabi": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-android-arm-eabi/-/resolver-binding-android-arm-eabi-1.11.1.tgz",
      "integrity": "sha512-ppLRUgHVaGRWUx0R0Ut06Mjo9gBaBkg3v/8AxusGLhsIotbBLuRk51rAzqLC8gq6NyyAojEXglNjzf6R948DNw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@unrs/resolver-binding-android-arm64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-android-arm64/-/resolver-binding-android-arm64-1.11.1.tgz",
      "integrity": "sha512-lCxkVtb4wp1v+EoN+HjIG9cIIzPkX5OtM03pQYkG+U5O/wL53LC4QbIeazgiKqluGeVEeBlZahHalCaBvU1a2g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@unrs/resolver-binding-darwin-arm64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-darwin-arm64/-/resolver-binding-darwin-arm64-1.11.1.tgz",
      "integrity": "sha512-gPVA1UjRu1Y/IsB/dQEsp2V1pm44Of6+LWvbLc9SDk1c2KhhDRDBUkQCYVWe6f26uJb3fOK8saWMgtX8IrMk3g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@unrs/resolver-binding-darwin-x64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-darwin-x64/-/resolver-binding-darwin-x64-1.11.1.tgz",
      "integrity": "sha512-cFzP7rWKd3lZaCsDze07QX1SC24lO8mPty9vdP+YVa3MGdVgPmFc59317b2ioXtgCMKGiCLxJ4HQs62oz6GfRQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@unrs/resolver-binding-freebsd-x64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-freebsd-x64/-/resolver-binding-freebsd-x64-1.11.1.tgz",
      "integrity": "sha512-fqtGgak3zX4DCB6PFpsH5+Kmt/8CIi4Bry4rb1ho6Av2QHTREM+47y282Uqiu3ZRF5IQioJQ5qWRV6jduA+iGw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm-gnueabihf": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm-gnueabihf/-/resolver-binding-linux-arm-gnueabihf-1.11.1.tgz",
      "integrity": "sha512-u92mvlcYtp9MRKmP+ZvMmtPN34+/3lMHlyMj7wXJDeXxuM0Vgzz0+PPJNsro1m3IZPYChIkn944wW8TYgGKFHw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm-musleabihf": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm-musleabihf/-/resolver-binding-linux-arm-musleabihf-1.11.1.tgz",
      "integrity": "sha512-cINaoY2z7LVCrfHkIcmvj7osTOtm6VVT16b5oQdS4beibX2SYBwgYLmqhBjA1t51CarSaBuX5YNsWLjsqfW5Cw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm64-gnu/-/resolver-binding-linux-arm64-gnu-1.11.1.tgz",
      "integrity": "sha512-34gw7PjDGB9JgePJEmhEqBhWvCiiWCuXsL9hYphDF7crW7UgI05gyBAi6MF58uGcMOiOqSJ2ybEeCvHcq0BCmQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm64-musl": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm64-musl/-/resolver-binding-linux-arm64-musl-1.11.1.tgz",
      "integrity": "sha512-RyMIx6Uf53hhOtJDIamSbTskA99sPHS96wxVE/bJtePJJtpdKGXO1wY90oRdXuYOGOTuqjT8ACccMc4K6QmT3w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-ppc64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-ppc64-gnu/-/resolver-binding-linux-ppc64-gnu-1.11.1.tgz",
      "integrity": "sha512-D8Vae74A4/a+mZH0FbOkFJL9DSK2R6TFPC9M+jCWYia/q2einCubX10pecpDiTmkJVUH+y8K3BZClycD8nCShA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-riscv64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-riscv64-gnu/-/resolver-binding-linux-riscv64-gnu-1.11.1.tgz",
      "integrity": "sha512-frxL4OrzOWVVsOc96+V3aqTIQl1O2TjgExV4EKgRY09AJ9leZpEg8Ak9phadbuX0BA4k8U5qtvMSQQGGmaJqcQ==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-riscv64-musl": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-riscv64-musl/-/resolver-binding-linux-riscv64-musl-1.11.1.tgz",
      "integrity": "sha512-mJ5vuDaIZ+l/acv01sHoXfpnyrNKOk/3aDoEdLO/Xtn9HuZlDD6jKxHlkN8ZhWyLJsRBxfv9GYM2utQ1SChKew==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-s390x-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-s390x-gnu/-/resolver-binding-linux-s390x-gnu-1.11.1.tgz",
      "integrity": "sha512-kELo8ebBVtb9sA7rMe1Cph4QHreByhaZ2QEADd9NzIQsYNQpt9UkM9iqr2lhGr5afh885d/cB5QeTXSbZHTYPg==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-x64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-x64-gnu/-/resolver-binding-linux-x64-gnu-1.11.1.tgz",
      "integrity": "sha512-C3ZAHugKgovV5YvAMsxhq0gtXuwESUKc5MhEtjBpLoHPLYM+iuwSj3lflFwK3DPm68660rZ7G8BMcwSro7hD5w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-x64-musl": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-x64-musl/-/resolver-binding-linux-x64-musl-1.11.1.tgz",
      "integrity": "sha512-rV0YSoyhK2nZ4vEswT/QwqzqQXw5I6CjoaYMOX0TqBlWhojUf8P94mvI7nuJTeaCkkds3QE4+zS8Ko+GdXuZtA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-wasm32-wasi": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-wasm32-wasi/-/resolver-binding-wasm32-wasi-1.11.1.tgz",
      "integrity": "sha512-5u4RkfxJm+Ng7IWgkzi3qrFOvLvQYnPBmjmZQ8+szTK/b31fQCnleNl1GgEt7nIsZRIf5PLhPwT0WM+q45x/UQ==",
      "cpu": [
        "wasm32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@napi-rs/wasm-runtime": "^0.2.11"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@unrs/resolver-binding-win32-arm64-msvc": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-arm64-msvc/-/resolver-binding-win32-arm64-msvc-1.11.1.tgz",
      "integrity": "sha512-nRcz5Il4ln0kMhfL8S3hLkxI85BXs3o8EYoattsJNdsX4YUU89iOkVn7g0VHSRxFuVMdM4Q1jEpIId1Ihim/Uw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@unrs/resolver-binding-win32-ia32-msvc": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-ia32-msvc/-/resolver-binding-win32-ia32-msvc-1.11.1.tgz",
      "integrity": "sha512-DCEI6t5i1NmAZp6pFonpD5m7i6aFrpofcp4LA2i8IIq60Jyo28hamKBxNrZcyOwVOZkgsRp9O2sXWBWP8MnvIQ==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@unrs/resolver-binding-win32-x64-msvc": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-x64-msvc/-/resolver-binding-win32-x64-msvc-1.11.1.tgz",
      "integrity": "sha512-lrW200hZdbfRtztbygyaq/6jP6AKE8qQN2KvPcJ+x7wiD038YtnYtZ82IMNJ69GJibV7bwL3y9FgK+5w/pYt6g==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@use-gesture/core": {
      "version": "10.3.1",
      "resolved": "https://registry.npmjs.org/@use-gesture/core/-/core-10.3.1.tgz",
      "integrity": "sha512-WcINiDt8WjqBdUXye25anHiNxPc0VOrlT8F6LLkU6cycrOGUDyY/yyFmsg3k8i5OLvv25llc0QC45GhR/C8llw==",
      "license": "MIT"
    },
    "node_modules/@use-gesture/react": {
      "version": "10.3.1",
      "resolved": "https://registry.npmjs.org/@use-gesture/react/-/react-10.3.1.tgz",
      "integrity": "sha512-Yy19y6O2GJq8f7CHf7L0nxL8bf4PZCPaVOCgJrusOeFHY1LvHgYXnmnXg6N5iwAnbgbZCDjo60SiM6IPJi9C5g==",
      "license": "MIT",
      "dependencies": {
        "@use-gesture/core": "10.3.1"
      },
      "peerDependencies": {
        "react": ">= 16.8.0"
      }
    },
    "node_modules/@webgpu/types": {
      "version": "0.1.69",
      "resolved": "https://registry.npmjs.org/@webgpu/types/-/types-0.1.69.tgz",
      "integrity": "sha512-RPmm6kgRbI8e98zSD3RVACvnuktIja5+yLgDAkTmxLr90BEwdTXRQWNLF3ETTTyH/8mKhznZuN5AveXYFEsMGQ==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/aria-query": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/aria-query/-/aria-query-5.3.2.tgz",
      "integrity": "sha512-COROpnaoap1E2F000S62r6A60uHZnmlvomhfyT2DlTcrY1OrBKn2UhH7qn5wTC9zMvD0AY7csdPSNwKP+7WiQw==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/array-buffer-byte-length": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/array-buffer-byte-length/-/array-buffer-byte-length-1.0.2.tgz",
      "integrity": "sha512-LHE+8BuR7RYGDKvnrmcuSq3tDcKv9OFEXQt/HpbZhY7V6h0zlUXutnAD82GiFx9rdieCMjkvtcsPqBwgUl1Iiw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "is-array-buffer": "^3.0.5"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array-includes": {
      "version": "3.1.9",
      "resolved": "https://registry.npmjs.org/array-includes/-/array-includes-3.1.9.tgz",
      "integrity": "sha512-FmeCCAenzH0KH381SPT5FZmiA/TmpndpcaShhfgEN9eCVjnFBqq3l1xrI42y8+PPLI6hypzou4GXw00WHmPBLQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.24.0",
        "es-object-atoms": "^1.1.1",
        "get-intrinsic": "^1.3.0",
        "is-string": "^1.1.1",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.findlast": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/array.prototype.findlast/-/array.prototype.findlast-1.2.5.tgz",
      "integrity": "sha512-CVvd6FHg1Z3POpBLxO6E6zr+rSKEQ9L6rZHAaY7lLfhKsWYUBBOuMs0e9o24oopj6H+geRCX0YJ+TJLBK2eHyQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.2",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.findlastindex": {
      "version": "1.2.6",
      "resolved": "https://registry.npmjs.org/array.prototype.findlastindex/-/array.prototype.findlastindex-1.2.6.tgz",
      "integrity": "sha512-F/TKATkzseUExPlfvmwQKGITM3DGTK+vkAsCZoDc5daVygbJBnjEUCbgkAvVFsgfXfX4YIqZ/27G3k3tdXrTxQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.9",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "es-shim-unscopables": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.flat": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/array.prototype.flat/-/array.prototype.flat-1.3.3.tgz",
      "integrity": "sha512-rwG/ja1neyLqCuGZ5YYrznA62D4mZXg0i1cIskIUKSiqF3Cje9/wXAls9B9s1Wa2fomMsIv8czB8jZcPmxCXFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.flatmap": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/array.prototype.flatmap/-/array.prototype.flatmap-1.3.3.tgz",
      "integrity": "sha512-Y7Wt51eKJSyi80hFrJCePGGNo5ktJCslFuboqJsbf57CCPcm5zztluPlc4/aD8sWsKvlwatezpV4U1efk8kpjg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.tosorted": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/array.prototype.tosorted/-/array.prototype.tosorted-1.1.4.tgz",
      "integrity": "sha512-p6Fx8B7b7ZhL/gmUsAy0D15WhvDccw3mnGNbZpi3pmeJdxtWsj2jEaI4Y6oo3XiHfzuSgPwKc04MYt6KgvC/wA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.3",
        "es-errors": "^1.3.0",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/arraybuffer.prototype.slice": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/arraybuffer.prototype.slice/-/arraybuffer.prototype.slice-1.0.4.tgz",
      "integrity": "sha512-BNoCY6SXXPQ7gF2opIP4GBE+Xw7U+pHMYKuzjgCN3GwiaIR09UUeKfheyIry77QtrCBlC0KK0q5/TER/tYh3PQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-buffer-byte-length": "^1.0.1",
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "is-array-buffer": "^3.0.4"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/ast-types-flow": {
      "version": "0.0.8",
      "resolved": "https://registry.npmjs.org/ast-types-flow/-/ast-types-flow-0.0.8.tgz",
      "integrity": "sha512-OH/2E5Fg20h2aPrbe+QL8JZQFko0YZaF+j4mnQ7BGhfavO7OpSLa8a0y9sBwomHdSbkhTS8TQNayBfnW5DwbvQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/async-function": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/async-function/-/async-function-1.0.0.tgz",
      "integrity": "sha512-hsU18Ae8CDTR6Kgu9DYf0EbCr/a5iGL0rytQDobUcdpYOKokk8LEjVphnXkDkgpi0wYVsqrXuP0bZxJaTqdgoA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/available-typed-arrays": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/available-typed-arrays/-/available-typed-arrays-1.0.7.tgz",
      "integrity": "sha512-wvUjBtSGN7+7SjNpq/9M2Tg350UZD3q62IFZLbRAR1bSMlCo1ZaeW+BJ+D090e4hIIZLBcTDWe4Mh4jvUDajzQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "possible-typed-array-names": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/axe-core": {
      "version": "4.11.0",
      "resolved": "https://registry.npmjs.org/axe-core/-/axe-core-4.11.0.tgz",
      "integrity": "sha512-ilYanEU8vxxBexpJd8cWM4ElSQq4QctCLKih0TSfjIfCQTeyH/6zVrmIJfLPrKTKJRbiG+cfnZbQIjAlJmF1jQ==",
      "dev": true,
      "license": "MPL-2.0",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/axios": {
      "version": "1.13.2",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.13.2.tgz",
      "integrity": "sha512-VPk9ebNqPcy5lRGuSlKx752IlDatOjT9paPlm8A7yOuW2Fbvp4X3JznJtT4f0GzGLLiWE9W8onz51SqLYwzGaA==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.4",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/axobject-query": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/axobject-query/-/axobject-query-4.1.0.tgz",
      "integrity": "sha512-qIj0G9wZbMGNLjLmg1PT6v2mE9AH2zlnADJD/2tC6E00hgmhUOfEB6greHPAfLRSufHqROIUTkw6E+M3lH0PTQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.8.22",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.8.22.tgz",
      "integrity": "sha512-/tk9kky/d8T8CTXIQYASLyhAxR5VwL3zct1oAoVTaOUHwrmsGnfbRwNdEq+vOl2BN8i3PcDdP0o4Q+jjKQoFbQ==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/bidi-js": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/bidi-js/-/bidi-js-1.0.3.tgz",
      "integrity": "sha512-RKshQI1R3YQ+n9YJz2QQ147P66ELpa1FQEg20Dk8oW9t2KgLbpDLLp9aGZ7y8WHSshDknG0bknqGw5/tyCs5tw==",
      "license": "MIT",
      "dependencies": {
        "require-from-string": "^2.0.2"
      }
    },
    "node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.27.0",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.27.0.tgz",
      "integrity": "sha512-AXVQwdhot1eqLihwasPElhX2tAZiBjWdJ9i/Zcj2S6QYIjkx62OKSfnobkriB81C3l4w0rVy3Nt4jaTBltYEpw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "baseline-browser-mapping": "^2.8.19",
        "caniuse-lite": "^1.0.30001751",
        "electron-to-chromium": "^1.5.238",
        "node-releases": "^2.0.26",
        "update-browserslist-db": "^1.1.4"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/bytez.js": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/bytez.js/-/bytez.js-3.0.0.tgz",
      "integrity": "sha512-obwo7hcnL0LJ0d0T9yN8y6E7xY3jddOx5wyj0iEWFSq8wZqw1MKOZtOY5vCqEQHUfJSF4IgIZlaKOezwuEhnLg==",
      "license": "ISC",
      "dependencies": {
        "undici": "^7.16.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/call-bind": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/call-bind/-/call-bind-1.0.8.tgz",
      "integrity": "sha512-oKlSFMcMwpUg2ednkhQ454wfWiU/ul3CkJe/PEHcTKuiX6RpbehUiFMXu13HalGZxfUwCQzZG747YXBn1im9ww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.0",
        "es-define-property": "^1.0.0",
        "get-intrinsic": "^1.2.4",
        "set-function-length": "^1.2.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001752",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001752.tgz",
      "integrity": "sha512-vKUk7beoukxE47P5gcVNKkDRzXdVofotshHwfR9vmpeFKxmI5PBpgOMC18LUJUA/DvJ70Y7RveasIBraqsyO/g==",
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/class-variance-authority": {
      "version": "0.7.1",
      "resolved": "https://registry.npmjs.org/class-variance-authority/-/class-variance-authority-0.7.1.tgz",
      "integrity": "sha512-Ka+9Trutv7G8M6WT6SeiRWz792K5qEqIGEGzXKhAE6xOWAY6pPH8U+9IY3oCMv6kqTmLsv7Xh/2w2RigkePMsg==",
      "license": "Apache-2.0",
      "dependencies": {
        "clsx": "^2.1.1"
      },
      "funding": {
        "url": "https://polar.sh/cva"
      }
    },
    "node_modules/client-only": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/client-only/-/client-only-0.0.1.tgz",
      "integrity": "sha512-IV3Ou0jSMzZrd3pZ48nLkT9DA7Ag1pnPzaiQhpW7c3RbcqqzvzzVu+L8gfqMp/8IM2MQtSiqaCxrrcfu8I8rMA==",
      "license": "MIT"
    },
    "node_modules/clsx": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/clsx/-/clsx-2.1.1.tgz",
      "integrity": "sha512-eYm0QWBtUrBWZWG0d386OGAw16Z995PiOVo2B7bjWSbHedGl5e0ZWaq65kOGgUSNesEIDkB9ISbTg/JK9dhCZA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cookie": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-1.0.2.tgz",
      "integrity": "sha512-9Kr/j4O16ISv8zBBhJoi4bXOYNTkFLOqSL3UDB0njXxCXNezjeyVrJyGOWtgfs/q2km1gwBcfH8q1yEGoMYunA==",
      "license": "MIT",
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/csstype": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.1.3.tgz",
      "integrity": "sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==",
      "license": "MIT"
    },
    "node_modules/d3-array": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/d3-array/-/d3-array-3.2.4.tgz",
      "integrity": "sha512-tdQAmyA18i4J7wprpYq8ClcxZy3SC31QMeByyCFyRt7BVHdREQZ5lpzoe5mFEYZUWe+oq8HBvk9JjpibyEV4Jg==",
      "license": "ISC",
      "dependencies": {
        "internmap": "1 - 2"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/d3-color": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/d3-color/-/d3-color-3.1.0.tgz",
      "integrity": "sha512-zg/chbXyeBtMQ1LbD/WSoW2DpC3I0mpmPdW+ynRTj/x2DAWYrIY7qeZIHidozwV24m4iavr15lNwIwLxRmOxhA==",
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/d3-ease": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/d3-ease/-/d3-ease-3.0.1.tgz",
      "integrity": "sha512-wR/XK3D3XcLIZwpbvQwQ5fK+8Ykds1ip7A2Txe0yxncXSdq1L9skcG7blcedkOX+ZcgxGAmLX1FrRGbADwzi0w==",
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/d3-format": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/d3-format/-/d3-format-3.1.2.tgz",
      "integrity": "sha512-AJDdYOdnyRDV5b6ArilzCPPwc1ejkHcoyFarqlPqT7zRYjhavcT3uSrqcMvsgh2CgoPbK3RCwyHaVyxYcP2Arg==",
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/d3-interpolate": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/d3-interpolate/-/d3-interpolate-3.0.1.tgz",
      "integrity": "sha512-3bYs1rOD33uo8aqJfKP3JWPAibgw8Zm2+L9vBKEHJ2Rg+viTR7o5Mmv5mZcieN+FRYaAOWX5SJATX6k1PWz72g==",
      "license": "ISC",
      "dependencies": {
        "d3-color": "1 - 3"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/d3-path": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/d3-path/-/d3-path-3.1.0.tgz",
      "integrity": "sha512-p3KP5HCf/bvjBSSKuXid6Zqijx7wIfNW+J/maPs+iwR35at5JCbLUT0LzF1cnjbCHWhqzQTIN2Jpe8pRebIEFQ==",
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/d3-scale": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/d3-scale/-/d3-scale-4.0.2.tgz",
      "integrity": "sha512-GZW464g1SH7ag3Y7hXjf8RoUuAFIqklOAq3MRl4OaWabTFJY9PN/E1YklhXLh+OQ3fM9yS2nOkCoS+WLZ6kvxQ==",
      "license": "ISC",
      "dependencies": {
        "d3-array": "2.10.0 - 3",
        "d3-format": "1 - 3",
        "d3-interpolate": "1.2.0 - 3",
        "d3-time": "2.1.1 - 3",
        "d3-time-format": "2 - 4"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/d3-shape": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/d3-shape/-/d3-shape-3.2.0.tgz",
      "integrity": "sha512-SaLBuwGm3MOViRq2ABk3eLoxwZELpH6zhl3FbAoJ7Vm1gofKx6El1Ib5z23NUEhF9AsGl7y+dzLe5Cw2AArGTA==",
      "license": "ISC",
      "dependencies": {
        "d3-path": "^3.1.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/d3-time": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/d3-time/-/d3-time-3.1.0.tgz",
      "integrity": "sha512-VqKjzBLejbSMT4IgbmVgDjpkYrNWUYJnbCGo874u7MMKIWsILRX+OpX/gTk8MqjpT1A/c6HY2dCA77ZN0lkQ2Q==",
      "license": "ISC",
      "dependencies": {
        "d3-array": "2 - 3"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/d3-time-format": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/d3-time-format/-/d3-time-format-4.1.0.tgz",
      "integrity": "sha512-dJxPBlzC7NugB2PDLwo9Q8JiTR3M3e4/XANkreKSUxF8vvXKqm1Yfq4Q5dl8budlunRVlUUaDUgFt7eA8D6NLg==",
      "license": "ISC",
      "dependencies": {
        "d3-time": "1 - 3"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/d3-timer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/d3-timer/-/d3-timer-3.0.1.tgz",
      "integrity": "sha512-ndfJ/JxxMd3nw31uyKoY2naivF+r29V+Lc0svZxe1JvvIRmi8hUsrMvdOwgS1o6uBHmiz91geQ0ylPP0aj1VUA==",
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/damerau-levenshtein": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/damerau-levenshtein/-/damerau-levenshtein-1.0.8.tgz",
      "integrity": "sha512-sdQSFB7+llfUcQHUQO3+B8ERRj0Oa4w9POWMI/puGtuf7gFywGmkaLCElnudfTiKZV+NvHqL0ifzdrI8Ro7ESA==",
      "dev": true,
      "license": "BSD-2-Clause"
    },
    "node_modules/data-view-buffer": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/data-view-buffer/-/data-view-buffer-1.0.2.tgz",
      "integrity": "sha512-EmKO5V3OLXh1rtK2wgXRansaK1/mtVdTUEiEI0W8RkvgT05kfxaH29PliLnpLP73yYO6142Q72QNa8Wx/A5CqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/data-view-byte-length": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/data-view-byte-length/-/data-view-byte-length-1.0.2.tgz",
      "integrity": "sha512-tuhGbE6CfTM9+5ANGf+oQb72Ky/0+s3xKUpHvShfiz2RxMFgFPjsXuRLBVMtvMs15awe45SRb83D6wH4ew6wlQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/inspect-js"
      }
    },
    "node_modules/data-view-byte-offset": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/data-view-byte-offset/-/data-view-byte-offset-1.0.1.tgz",
      "integrity": "sha512-BS8PfmtDGnrgYdOonGZQdLZslWIeCGFP9tpan0hi1Co2Zr2NKADsvGYA8XxuG/4UWgJ6Cjtv+YJnB6MM69QGlQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/decimal.js-light": {
      "version": "2.5.1",
      "resolved": "https://registry.npmjs.org/decimal.js-light/-/decimal.js-light-2.5.1.tgz",
      "integrity": "sha512-qIMFpTMZmny+MMIitAB6D7iVPEorVw6YQRWkvarTkT4tBeSLLiHzcwj6q0MmYSFCiVpiqPJTJEYIrpcPzVEIvg==",
      "license": "MIT"
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/define-data-property": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/define-data-property/-/define-data-property-1.1.4.tgz",
      "integrity": "sha512-rBMvIzlpA8v6E+SJZoo++HAYqsLrkg7MSfIinMPFhmkorw7X+dOXVJQs+QT69zGkzMyfDnIMN2Wid1+NbL3T+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0",
        "es-errors": "^1.3.0",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/define-properties": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/define-properties/-/define-properties-1.2.1.tgz",
      "integrity": "sha512-8QmQKqEASLd5nx0U1B1okLElbUuuttJ/AnYmRXbbbGDWh6uS208EjD4Xqq/I9wK7u0v6O08XhTWnt5XtEbR6Dg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.0.1",
        "has-property-descriptors": "^1.0.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/detect-gpu": {
      "version": "4.0.50",
      "resolved": "https://registry.npmjs.org/detect-gpu/-/detect-gpu-4.0.50.tgz",
      "integrity": "sha512-T67HE5+ONONN8rPXCBJPupyCg2QT8+l2NUUMuPxAppsMJBDPG/Jg0URLs6GyDzLm2niUE+oncIHSuy3VinoPeQ==",
      "license": "MIT",
      "dependencies": {
        "webgl-constants": "^1.1.1"
      }
    },
    "node_modules/detect-libc": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.1.2.tgz",
      "integrity": "sha512-Btj2BOOO83o3WyH59e8MgXsxEQVcarkUOpEYrubB0urwnN10yQ364rsiByU11nZlqWYZm05i/of7io4mzihBtQ==",
      "devOptional": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/doctrine": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-2.1.0.tgz",
      "integrity": "sha512-35mSku4ZXK0vfCuHEDAwt55dg2jNajHZ1odvF+8SSr82EsZY4QmXfuWso8oEd8zRhVObSN18aM0CjSdoBX7zIw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "esutils": "^2.0.2"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/draco3d": {
      "version": "1.5.7",
      "resolved": "https://registry.npmjs.org/draco3d/-/draco3d-1.5.7.tgz",
      "integrity": "sha512-m6WCKt/erDXcw+70IJXnG7M3awwQPAsZvJGX5zY7beBqpELw6RDGkYVU0W43AFxye4pDZ5i2Lbyc/NNGqwjUVQ==",
      "license": "Apache-2.0"
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.244",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.244.tgz",
      "integrity": "sha512-OszpBN7xZX4vWMPJwB9illkN/znA8M36GQqQxi6MNy9axWxhOfJyZZJtSLQCpEFLHP2xK33BiWx9aIuIEXVCcw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/emoji-regex": {
      "version": "9.2.2",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
      "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/enhanced-resolve": {
      "version": "5.18.3",
      "resolved": "https://registry.npmjs.org/enhanced-resolve/-/enhanced-resolve-5.18.3.tgz",
      "integrity": "sha512-d4lC8xfavMeBjzGr2vECC3fsGXziXZQyJxD868h2M/mBI3PwAuODxAkLkq5HYuvrPYcUtiLzsTo8U3PgX3Ocww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "graceful-fs": "^4.2.4",
        "tapable": "^2.2.0"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/es-abstract": {
      "version": "1.24.0",
      "resolved": "https://registry.npmjs.org/es-abstract/-/es-abstract-1.24.0.tgz",
      "integrity": "sha512-WSzPgsdLtTcQwm4CROfS5ju2Wa1QQcVeT37jFjYzdFz1r9ahadC8B8/a4qxJxM+09F18iumCdRmlr96ZYkQvEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-buffer-byte-length": "^1.0.2",
        "arraybuffer.prototype.slice": "^1.0.4",
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "data-view-buffer": "^1.0.2",
        "data-view-byte-length": "^1.0.2",
        "data-view-byte-offset": "^1.0.1",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "es-set-tostringtag": "^2.1.0",
        "es-to-primitive": "^1.3.0",
        "function.prototype.name": "^1.1.8",
        "get-intrinsic": "^1.3.0",
        "get-proto": "^1.0.1",
        "get-symbol-description": "^1.1.0",
        "globalthis": "^1.0.4",
        "gopd": "^1.2.0",
        "has-property-descriptors": "^1.0.2",
        "has-proto": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "internal-slot": "^1.1.0",
        "is-array-buffer": "^3.0.5",
        "is-callable": "^1.2.7",
        "is-data-view": "^1.0.2",
        "is-negative-zero": "^2.0.3",
        "is-regex": "^1.2.1",
        "is-set": "^2.0.3",
        "is-shared-array-buffer": "^1.0.4",
        "is-string": "^1.1.1",
        "is-typed-array": "^1.1.15",
        "is-weakref": "^1.1.1",
        "math-intrinsics": "^1.1.0",
        "object-inspect": "^1.13.4",
        "object-keys": "^1.1.1",
        "object.assign": "^4.1.7",
        "own-keys": "^1.0.1",
        "regexp.prototype.flags": "^1.5.4",
        "safe-array-concat": "^1.1.3",
        "safe-push-apply": "^1.0.0",
        "safe-regex-test": "^1.1.0",
        "set-proto": "^1.0.0",
        "stop-iteration-iterator": "^1.1.0",
        "string.prototype.trim": "^1.2.10",
        "string.prototype.trimend": "^1.0.9",
        "string.prototype.trimstart": "^1.0.8",
        "typed-array-buffer": "^1.0.3",
        "typed-array-byte-length": "^1.0.3",
        "typed-array-byte-offset": "^1.0.4",
        "typed-array-length": "^1.0.7",
        "unbox-primitive": "^1.1.0",
        "which-typed-array": "^1.1.19"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-iterator-helpers": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/es-iterator-helpers/-/es-iterator-helpers-1.2.1.tgz",
      "integrity": "sha512-uDn+FE1yrDzyC0pCo961B2IHbdM8y/ACZsKD4dG6WqrjV53BADjwa7D+1aom2rsNVfLyDgU/eigvlJGJ08OQ4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.6",
        "es-errors": "^1.3.0",
        "es-set-tostringtag": "^2.0.3",
        "function-bind": "^1.1.2",
        "get-intrinsic": "^1.2.6",
        "globalthis": "^1.0.4",
        "gopd": "^1.2.0",
        "has-property-descriptors": "^1.0.2",
        "has-proto": "^1.2.0",
        "has-symbols": "^1.1.0",
        "internal-slot": "^1.1.0",
        "iterator.prototype": "^1.1.4",
        "safe-array-concat": "^1.1.3"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-shim-unscopables": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/es-shim-unscopables/-/es-shim-unscopables-1.1.0.tgz",
      "integrity": "sha512-d9T8ucsEhh8Bi1woXCf+TIKDIROLG5WCkxg8geBCbvk22kzwC5G2OnXVMO6FUsvQlgUUXQ2itephWDLqDzbeCw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-to-primitive": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-to-primitive/-/es-to-primitive-1.3.0.tgz",
      "integrity": "sha512-w+5mJ3GuFL+NjVtJlvydShqE1eN3h3PbI7/5LAsYJP/2qtuMXjfL2LpHSRqo4b4eSF5K/DH1JXKUAHSB2UW50g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-callable": "^1.2.7",
        "is-date-object": "^1.0.5",
        "is-symbol": "^1.0.4"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/es-toolkit": {
      "version": "1.44.0",
      "resolved": "https://registry.npmjs.org/es-toolkit/-/es-toolkit-1.44.0.tgz",
      "integrity": "sha512-6penXeZalaV88MM3cGkFZZfOoLGWshWWfdy0tWw/RlVVyhvMaWSBTOvXNeiW3e5FwdS5ePW0LGEu17zT139ktg==",
      "license": "MIT",
      "workspaces": [
        "docs",
        "benchmarks"
      ]
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "9.39.0",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-9.39.0.tgz",
      "integrity": "sha512-iy2GE3MHrYTL5lrCtMZ0X1KLEKKUjmK0kzwcnefhR66txcEmXZD2YWgR5GNdcEwkNx3a0siYkSvl0vIC+Svjmg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.8.0",
        "@eslint-community/regexpp": "^4.12.1",
        "@eslint/config-array": "^0.21.1",
        "@eslint/config-helpers": "^0.4.2",
        "@eslint/core": "^0.17.0",
        "@eslint/eslintrc": "^3.3.1",
        "@eslint/js": "9.39.0",
        "@eslint/plugin-kit": "^0.4.1",
        "@humanfs/node": "^0.16.6",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@humanwhocodes/retry": "^0.4.2",
        "@types/estree": "^1.0.6",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.6",
        "debug": "^4.3.2",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^8.4.0",
        "eslint-visitor-keys": "^4.2.1",
        "espree": "^10.4.0",
        "esquery": "^1.5.0",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^8.0.0",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      },
      "peerDependencies": {
        "jiti": "*"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-config-next": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/eslint-config-next/-/eslint-config-next-16.0.1.tgz",
      "integrity": "sha512-wNuHw5gNOxwLUvpg0cu6IL0crrVC9hAwdS/7UwleNkwyaMiWIOAwf8yzXVqBBzL3c9A7jVRngJxjoSpPP1aEhg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@next/eslint-plugin-next": "16.0.1",
        "eslint-import-resolver-node": "^0.3.6",
        "eslint-import-resolver-typescript": "^3.5.2",
        "eslint-plugin-import": "^2.32.0",
        "eslint-plugin-jsx-a11y": "^6.10.0",
        "eslint-plugin-react": "^7.37.0",
        "eslint-plugin-react-hooks": "^7.0.0",
        "globals": "16.4.0",
        "typescript-eslint": "^8.46.0"
      },
      "peerDependencies": {
        "eslint": ">=9.0.0",
        "typescript": ">=3.3.1"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-config-next/node_modules/globals": {
      "version": "16.4.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-16.4.0.tgz",
      "integrity": "sha512-ob/2LcVVaVGCYN+r14cnwnoDPUufjiYgSqRhiFD0Q1iI4Odora5RE8Iv1D24hAz5oMophRGkGz+yuvQmmUMnMw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint-import-resolver-node": {
      "version": "0.3.9",
      "resolved": "https://registry.npmjs.org/eslint-import-resolver-node/-/eslint-import-resolver-node-0.3.9.tgz",
      "integrity": "sha512-WFj2isz22JahUv+B788TlO3N6zL3nNJGU8CcZbPZvVEkBPaJdCV4vy5wyghty5ROFbCRnm132v8BScu5/1BQ8g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "^3.2.7",
        "is-core-module": "^2.13.0",
        "resolve": "^1.22.4"
      }
    },
    "node_modules/eslint-import-resolver-node/node_modules/debug": {
      "version": "3.2.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
      "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.1"
      }
    },
    "node_modules/eslint-import-resolver-typescript": {
      "version": "3.10.1",
      "resolved": "https://registry.npmjs.org/eslint-import-resolver-typescript/-/eslint-import-resolver-typescript-3.10.1.tgz",
      "integrity": "sha512-A1rHYb06zjMGAxdLSkN2fXPBwuSaQ0iO5M/hdyS0Ajj1VBaRp0sPD3dn1FhME3c/JluGFbwSxyCfqdSbtQLAHQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "@nolyfill/is-core-module": "1.0.39",
        "debug": "^4.4.0",
        "get-tsconfig": "^4.10.0",
        "is-bun-module": "^2.0.0",
        "stable-hash": "^0.0.5",
        "tinyglobby": "^0.2.13",
        "unrs-resolver": "^1.6.2"
      },
      "engines": {
        "node": "^14.18.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint-import-resolver-typescript"
      },
      "peerDependencies": {
        "eslint": "*",
        "eslint-plugin-import": "*",
        "eslint-plugin-import-x": "*"
      },
      "peerDependenciesMeta": {
        "eslint-plugin-import": {
          "optional": true
        },
        "eslint-plugin-import-x": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-module-utils": {
      "version": "2.12.1",
      "resolved": "https://registry.npmjs.org/eslint-module-utils/-/eslint-module-utils-2.12.1.tgz",
      "integrity": "sha512-L8jSWTze7K2mTg0vos/RuLRS5soomksDPoJLXIslC7c8Wmut3bx7CPpJijDcBZtxQ5lrbUdM+s0OlNbz0DCDNw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "^3.2.7"
      },
      "engines": {
        "node": ">=4"
      },
      "peerDependenciesMeta": {
        "eslint": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-module-utils/node_modules/debug": {
      "version": "3.2.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
      "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.1"
      }
    },
    "node_modules/eslint-plugin-import": {
      "version": "2.32.0",
      "resolved": "https://registry.npmjs.org/eslint-plugin-import/-/eslint-plugin-import-2.32.0.tgz",
      "integrity": "sha512-whOE1HFo/qJDyX4SnXzP4N6zOWn79WhnCUY/iDR0mPfQZO8wcYE4JClzI2oZrhBnnMUCBCHZhO6VQyoBU95mZA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@rtsao/scc": "^1.1.0",
        "array-includes": "^3.1.9",
        "array.prototype.findlastindex": "^1.2.6",
        "array.prototype.flat": "^1.3.3",
        "array.prototype.flatmap": "^1.3.3",
        "debug": "^3.2.7",
        "doctrine": "^2.1.0",
        "eslint-import-resolver-node": "^0.3.9",
        "eslint-module-utils": "^2.12.1",
        "hasown": "^2.0.2",
        "is-core-module": "^2.16.1",
        "is-glob": "^4.0.3",
        "minimatch": "^3.1.2",
        "object.fromentries": "^2.0.8",
        "object.groupby": "^1.0.3",
        "object.values": "^1.2.1",
        "semver": "^6.3.1",
        "string.prototype.trimend": "^1.0.9",
        "tsconfig-paths": "^3.15.0"
      },
      "engines": {
        "node": ">=4"
      },
      "peerDependencies": {
        "eslint": "^2 || ^3 || ^4 || ^5 || ^6 || ^7.2.0 || ^8 || ^9"
      }
    },
    "node_modules/eslint-plugin-import/node_modules/debug": {
      "version": "3.2.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
      "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.1"
      }
    },
    "node_modules/eslint-plugin-jsx-a11y": {
      "version": "6.10.2",
      "resolved": "https://registry.npmjs.org/eslint-plugin-jsx-a11y/-/eslint-plugin-jsx-a11y-6.10.2.tgz",
      "integrity": "sha512-scB3nz4WmG75pV8+3eRUQOHZlNSUhFNq37xnpgRkCCELU3XMvXAxLk1eqWWyE22Ki4Q01Fnsw9BA3cJHDPgn2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "aria-query": "^5.3.2",
        "array-includes": "^3.1.8",
        "array.prototype.flatmap": "^1.3.2",
        "ast-types-flow": "^0.0.8",
        "axe-core": "^4.10.0",
        "axobject-query": "^4.1.0",
        "damerau-levenshtein": "^1.0.8",
        "emoji-regex": "^9.2.2",
        "hasown": "^2.0.2",
        "jsx-ast-utils": "^3.3.5",
        "language-tags": "^1.0.9",
        "minimatch": "^3.1.2",
        "object.fromentries": "^2.0.8",
        "safe-regex-test": "^1.0.3",
        "string.prototype.includes": "^2.0.1"
      },
      "engines": {
        "node": ">=4.0"
      },
      "peerDependencies": {
        "eslint": "^3 || ^4 || ^5 || ^6 || ^7 || ^8 || ^9"
      }
    },
    "node_modules/eslint-plugin-react": {
      "version": "7.37.5",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react/-/eslint-plugin-react-7.37.5.tgz",
      "integrity": "sha512-Qteup0SqU15kdocexFNAJMvCJEfa2xUKNV4CC1xsVMrIIqEy3SQ/rqyxCWNzfrd3/ldy6HMlD2e0JDVpDg2qIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-includes": "^3.1.8",
        "array.prototype.findlast": "^1.2.5",
        "array.prototype.flatmap": "^1.3.3",
        "array.prototype.tosorted": "^1.1.4",
        "doctrine": "^2.1.0",
        "es-iterator-helpers": "^1.2.1",
        "estraverse": "^5.3.0",
        "hasown": "^2.0.2",
        "jsx-ast-utils": "^2.4.1 || ^3.0.0",
        "minimatch": "^3.1.2",
        "object.entries": "^1.1.9",
        "object.fromentries": "^2.0.8",
        "object.values": "^1.2.1",
        "prop-types": "^15.8.1",
        "resolve": "^2.0.0-next.5",
        "semver": "^6.3.1",
        "string.prototype.matchall": "^4.0.12",
        "string.prototype.repeat": "^1.0.0"
      },
      "engines": {
        "node": ">=4"
      },
      "peerDependencies": {
        "eslint": "^3 || ^4 || ^5 || ^6 || ^7 || ^8 || ^9.7"
      }
    },
    "node_modules/eslint-plugin-react-hooks": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-7.0.1.tgz",
      "integrity": "sha512-O0d0m04evaNzEPoSW+59Mezf8Qt0InfgGIBJnpC0h3NH/WjUAR7BIKUfysC6todmtiZ/A0oUVS8Gce0WhBrHsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.24.4",
        "@babel/parser": "^7.24.4",
        "hermes-parser": "^0.25.1",
        "zod": "^3.25.0 || ^4.0.0",
        "zod-validation-error": "^3.5.0 || ^4.0.0"
      },
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0"
      }
    },
    "node_modules/eslint-plugin-react/node_modules/resolve": {
      "version": "2.0.0-next.5",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-2.0.0-next.5.tgz",
      "integrity": "sha512-U7WjGVG9sH8tvjW5SmGbQuui75FiyjAX72HX15DwBBwF9dNiQZRQAg9nnPhYy+TUnE0+VcrttuvNI8oSxZcocA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.13.0",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/eslint-scope": {
      "version": "8.4.0",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-8.4.0.tgz",
      "integrity": "sha512-sNXOfKCn74rt8RICKMvJS7XKV/Xk9kA7DyJr8mJik3S7Cwgy3qlkkmyS2uQB3jiJg6VNdZd/pDBJu0nvG2NlTg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/espree": {
      "version": "10.4.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-10.4.0.tgz",
      "integrity": "sha512-j6PAQ2uUr79PZhBjP5C5fhl8e39FmRnOjsD5lGnWrFU8i2G776tBK7+nP8KuQUTTyAZUwfQqXAgrVH5MbH9CYQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.15.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/eventemitter3": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/eventemitter3/-/eventemitter3-5.0.1.tgz",
      "integrity": "sha512-GWkBvjiSZK87ELrYOSESUYeVIc9mvLLf/nXalMOS5dYrgZq9o5OVkbZAVM06CVxYsCwH9BDZFPlQTlPA1j4ahA==",
      "license": "MIT"
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-glob": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.1.tgz",
      "integrity": "sha512-kNFPyjhh5cKjrUltxs+wFx+ZkbRaxxmZ+X0ZU31SOsxCEtP9VPgtq2teZw1DebupL5GmDaNQ6yKMMVcM41iqDg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.4"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fastq": {
      "version": "1.19.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
      "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/fflate": {
      "version": "0.6.10",
      "resolved": "https://registry.npmjs.org/fflate/-/fflate-0.6.10.tgz",
      "integrity": "sha512-IQrh3lEPM93wVCEczc9SaAOvkmcoQn/G8Bo1e8ZPlY3X3bnAxWaBdvTdvM1hP62iZp0BXWDy4vTAy4fF0+Dlpg==",
      "license": "MIT"
    },
    "node_modules/file-entry-cache": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-8.0.0.tgz",
      "integrity": "sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^4.0.0"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/flat-cache": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-4.0.1.tgz",
      "integrity": "sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.4"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/follow-redirects": {
      "version": "1.15.11",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.11.tgz",
      "integrity": "sha512-deG2P0JfjrTxl50XGCDyfI97ZGVCxIpfKYmfyrQ54n5FO/0gfIES8C/Psl6kWVDolizcaaxZJnTS0QSMxvnsBQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/for-each": {
      "version": "0.3.5",
      "resolved": "https://registry.npmjs.org/for-each/-/for-each-0.3.5.tgz",
      "integrity": "sha512-dKx12eRCVIzqCxFGplyFKJMPvLEWgmNtUrpTiJIR5u97zEhRG8ySrtboPHZXx7daLxQVrl643cTzbab2tkQjxg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-callable": "^1.2.7"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/form-data": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.5.tgz",
      "integrity": "sha512-8RipRLol37bNs2bhoV67fiTEvdTrbMUYcFTiy3+wuuOnUog2QBHCZWXDRijWQfAkhBj2Uf5UnVaiWwA5vdd82w==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/framer-motion": {
      "version": "12.27.1",
      "resolved": "https://registry.npmjs.org/framer-motion/-/framer-motion-12.27.1.tgz",
      "integrity": "sha512-cEAqO69kcZt3gL0TGua8WTgRQfv4J57nqt1zxHtLKwYhAwA0x9kDS/JbMa1hJbwkGY74AGJKvZ9pX/IqWZtZWQ==",
      "license": "MIT",
      "dependencies": {
        "motion-dom": "^12.27.1",
        "motion-utils": "^12.24.10",
        "tslib": "^2.4.0"
      },
      "peerDependencies": {
        "@emotion/is-prop-valid": "*",
        "react": "^18.0.0 || ^19.0.0",
        "react-dom": "^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@emotion/is-prop-valid": {
          "optional": true
        },
        "react": {
          "optional": true
        },
        "react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/function.prototype.name": {
      "version": "1.1.8",
      "resolved": "https://registry.npmjs.org/function.prototype.name/-/function.prototype.name-1.1.8.tgz",
      "integrity": "sha512-e5iwyodOHhbMr/yNrc7fDYG4qlbIvI5gajyzPnb5TCwyhjApznQh1BMFou9b30SevY43gCJKXycoCBjMbsuW0Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "functions-have-names": "^1.2.3",
        "hasown": "^2.0.2",
        "is-callable": "^1.2.7"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/functions-have-names": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/functions-have-names/-/functions-have-names-1.2.3.tgz",
      "integrity": "sha512-xckBUXyTIqT97tq2x2AMb+g163b5JFysYk0x4qxNFwbfQkmNZoiRHb6sPzI9/QV33WeuvVYBUIiD4NzNIyqaRQ==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/generator-function": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/generator-function/-/generator-function-2.0.1.tgz",
      "integrity": "sha512-SFdFmIJi+ybC0vjlHN0ZGVGHc3lgE0DxPAT0djjVg+kjOnSqclqmj0KQ7ykTOLP6YxoqOvuAODGdcHJn+43q3g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/get-symbol-description": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/get-symbol-description/-/get-symbol-description-1.1.0.tgz",
      "integrity": "sha512-w9UMqWwJxHNOvoNzSJ2oPF5wvYcvP7jUvYzhp67yEhTi17ZDBBC1z9pTdGuzjD+EFIqLSYRweZjqfiPzQ06Ebg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-tsconfig": {
      "version": "4.13.0",
      "resolved": "https://registry.npmjs.org/get-tsconfig/-/get-tsconfig-4.13.0.tgz",
      "integrity": "sha512-1VKTZJCwBrvbd+Wn3AOgQP/2Av+TfTCOlE4AcRJE72W1ksZXbAx8PPBR9RzgTeSPzlPMHrbANMH3LbltH73wxQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "resolve-pkg-maps": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/privatenumber/get-tsconfig?sponsor=1"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/globals": {
      "version": "14.0.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-14.0.0.tgz",
      "integrity": "sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/globalthis": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/globalthis/-/globalthis-1.0.4.tgz",
      "integrity": "sha512-DpLKbNU4WylpxJykQujfCcwYWiV/Jhm50Goo0wrVILAv5jOr9d+H+UR3PhSCD2rCCEIg0uc+G+muBTwD54JhDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-properties": "^1.2.1",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/glsl-noise": {
      "version": "0.0.0",
      "resolved": "https://registry.npmjs.org/glsl-noise/-/glsl-noise-0.0.0.tgz",
      "integrity": "sha512-b/ZCF6amfAUb7dJM/MxRs7AetQEahYzJ8PtgfrmEdtw6uyGOr+ZSGtgjFm6mfsBkxJ4d2W7kg+Nlqzqvn3Bc0w==",
      "license": "MIT"
    },
    "node_modules/goober": {
      "version": "2.1.18",
      "resolved": "https://registry.npmjs.org/goober/-/goober-2.1.18.tgz",
      "integrity": "sha512-2vFqsaDVIT9Gz7N6kAL++pLpp41l3PfDuusHcjnGLfR6+huZkl6ziX+zgVC3ZxpqWhzH6pyDdGrCeDhMIvwaxw==",
      "license": "MIT",
      "peerDependencies": {
        "csstype": "^3.0.10"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/graceful-fs": {
      "version": "4.2.11",
      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.11.tgz",
      "integrity": "sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/graphemer": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/graphemer/-/graphemer-1.4.0.tgz",
      "integrity": "sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/has-bigints": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-bigints/-/has-bigints-1.1.0.tgz",
      "integrity": "sha512-R3pbpkcIqv2Pm3dUwgjclDRVmWpTJW2DcMzcIhEXEx1oh/CEMObMm3KLmRJOdvhM7o4uQBnwr8pzRK2sJWIqfg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-property-descriptors": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-property-descriptors/-/has-property-descriptors-1.0.2.tgz",
      "integrity": "sha512-55JNKuIW+vq4Ke1BjOTjM2YctQIvCT7GFzHwmfZPGo5wnrgkid0YQtnAleFSqumZm4az3n2BS+erby5ipJdgrg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-proto": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/has-proto/-/has-proto-1.2.0.tgz",
      "integrity": "sha512-KIL7eQPfHQRC8+XluaIw7BHUwwqL19bQn4hzNgdr+1wXoU0KKj6rufu47lhY7KbJR2C6T6+PfyN0Ea7wkSS+qQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/hermes-estree": {
      "version": "0.25.1",
      "resolved": "https://registry.npmjs.org/hermes-estree/-/hermes-estree-0.25.1.tgz",
      "integrity": "sha512-0wUoCcLp+5Ev5pDW2OriHC2MJCbwLwuRx+gAqMTOkGKJJiBCLjtrvy4PWUGn6MIVefecRpzoOZ/UV6iGdOr+Cw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/hermes-parser": {
      "version": "0.25.1",
      "resolved": "https://registry.npmjs.org/hermes-parser/-/hermes-parser-0.25.1.tgz",
      "integrity": "sha512-6pEjquH3rqaI6cYAXYPcz9MS4rY6R4ngRgrgfDshRptUZIc3lw0MCIJIGDj9++mfySOuPTHB4nrSW99BCvOPIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hermes-estree": "0.25.1"
      }
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/immer": {
      "version": "10.2.0",
      "resolved": "https://registry.npmjs.org/immer/-/immer-10.2.0.tgz",
      "integrity": "sha512-d/+XTN3zfODyjr89gM3mPq1WNX2B8pYsu7eORitdwyA2sBubnTl3laYlBk4sXY5FUa5qTZGBDPJICVbvqzjlbw==",
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/immer"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/internal-slot": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/internal-slot/-/internal-slot-1.1.0.tgz",
      "integrity": "sha512-4gd7VpWNQNB4UKKCFFVcp1AVv+FMOgs9NKzjHKusc8jTMhd5eL1NqQqOpE0KzMds804/yHlglp3uxgluOqAPLw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "hasown": "^2.0.2",
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/internmap": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/internmap/-/internmap-2.0.3.tgz",
      "integrity": "sha512-5Hh7Y1wQbvY5ooGgPbDaL5iYLAPzMTUrjMulskHLH6wnv/A+1q5rgEaiuqEjB+oxGXIVZs1FF+R/KPN3ZSQYYg==",
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/is-array-buffer": {
      "version": "3.0.5",
      "resolved": "https://registry.npmjs.org/is-array-buffer/-/is-array-buffer-3.0.5.tgz",
      "integrity": "sha512-DDfANUiiG2wC1qawP66qlTugJeL5HyzMpfr8lLK+jMQirGzNod0B12cFB/9q838Ru27sBwfw78/rdoU7RERz6A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-async-function": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-async-function/-/is-async-function-2.1.1.tgz",
      "integrity": "sha512-9dgM/cZBnNvjzaMYHVoxxfPj2QXt22Ev7SuuPrs+xav0ukGB0S6d4ydZdEiM48kLx5kDV+QBPrpVnFyefL8kkQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "async-function": "^1.0.0",
        "call-bound": "^1.0.3",
        "get-proto": "^1.0.1",
        "has-tostringtag": "^1.0.2",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-bigint": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-bigint/-/is-bigint-1.1.0.tgz",
      "integrity": "sha512-n4ZT37wG78iz03xPRKJrHTdZbe3IicyucEtdRsV5yglwc3GyUfbAfpSeD0FJ41NbUNSt5wbhqfp1fS+BgnvDFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-bigints": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-boolean-object": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/is-boolean-object/-/is-boolean-object-1.2.2.tgz",
      "integrity": "sha512-wa56o2/ElJMYqjCjGkXri7it5FbebW5usLw/nPmCMs5DeZ7eziSYZhSmPRn0txqeW4LnAmQQU7FgqLpsEFKM4A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-bun-module": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/is-bun-module/-/is-bun-module-2.0.0.tgz",
      "integrity": "sha512-gNCGbnnnnFAUGKeZ9PdbyeGYJqewpmc2aKHUEMO5nQPWU9lOmv7jcmQIv+qHD8fXW6W7qfuCwX4rY9LNRjXrkQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "semver": "^7.7.1"
      }
    },
    "node_modules/is-bun-module/node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/is-callable": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/is-callable/-/is-callable-1.2.7.tgz",
      "integrity": "sha512-1BC0BVFhS/p0qtw6enp8e+8OD0UrK0oFLztSjNzhcKA3WDuJxxAPXzPuPtKkjEY9UUoEWlX/8fgKeu2S8i9JTA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-core-module": {
      "version": "2.16.1",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
      "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-data-view": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/is-data-view/-/is-data-view-1.0.2.tgz",
      "integrity": "sha512-RKtWF8pGmS87i2D6gqQu/l7EYRlVdfzemCJN/P3UOs//x1QE7mfhvzHIApBTRf7axvT6DMGwSwBXYCT0nfB9xw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "get-intrinsic": "^1.2.6",
        "is-typed-array": "^1.1.13"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-date-object": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-date-object/-/is-date-object-1.1.0.tgz",
      "integrity": "sha512-PwwhEakHVKTdRNVOw+/Gyh0+MzlCl4R6qKvkhuvLtPMggI1WAHt9sOwZxQLSGpUaDnrdyDsomoRgNnCfKNSXXg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-finalizationregistry": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-finalizationregistry/-/is-finalizationregistry-1.1.1.tgz",
      "integrity": "sha512-1pC6N8qWJbWoPtEjgcL2xyhQOP491EQjeUo3qTKcmV8YSDDJrOepfG8pcC7h/QgnQHYSv0mJ3Z/ZWxmatVrysg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-generator-function": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/is-generator-function/-/is-generator-function-1.1.2.tgz",
      "integrity": "sha512-upqt1SkGkODW9tsGNG5mtXTXtECizwtS2kA161M+gJPc1xdb/Ax629af6YrTwcOeQHbewrPNlE5Dx7kzvXTizA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.4",
        "generator-function": "^2.0.0",
        "get-proto": "^1.0.1",
        "has-tostringtag": "^1.0.2",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-map": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-map/-/is-map-2.0.3.tgz",
      "integrity": "sha512-1Qed0/Hr2m+YqxnM09CjA2d/i6YZNfF6R2oRAOj36eUdS6qIV/huPJNSEpKbupewFs+ZsJlxsjjPbc0/afW6Lw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-negative-zero": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-negative-zero/-/is-negative-zero-2.0.3.tgz",
      "integrity": "sha512-5KoIu2Ngpyek75jXodFvnafB6DJgr3u8uuK0LEZJjrU19DrMD3EVERaR8sjz8CCGgpZvxPl9SuE1GMVPFHx1mw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/is-number-object": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-number-object/-/is-number-object-1.1.1.tgz",
      "integrity": "sha512-lZhclumE1G6VYD8VHe35wFaIif+CTy5SJIi5+3y4psDgWu4wPDoBhF8NxUOinEc7pHgiTsT6MaBb92rKhhD+Xw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-regex": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/is-regex/-/is-regex-1.2.1.tgz",
      "integrity": "sha512-MjYsKHO5O7mCsmRGxWcLWheFqN9DJ/2TmngvjKXihe6efViPqc274+Fx/4fYj/r03+ESvBdTXK0V6tA3rgez1g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-set": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-set/-/is-set-2.0.3.tgz",
      "integrity": "sha512-iPAjerrse27/ygGLxw+EBR9agv9Y6uLeYVJMu+QNCoouJ1/1ri0mGrcWpfCqFZuzzx3WjtwxG098X+n4OuRkPg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-shared-array-buffer": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/is-shared-array-buffer/-/is-shared-array-buffer-1.0.4.tgz",
      "integrity": "sha512-ISWac8drv4ZGfwKl5slpHG9OwPNty4jOWPRIhBpxOoD+hqITiwuipOQ2bNthAzwA3B4fIjO4Nln74N0S9byq8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-string": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-string/-/is-string-1.1.1.tgz",
      "integrity": "sha512-BtEeSsoaQjlSPBemMQIrY1MY0uM6vnS1g5fmufYOtnxLGUZM2178PKbhsk7Ffv58IX+ZtcvoGwccYsh0PglkAA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-symbol": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-symbol/-/is-symbol-1.1.1.tgz",
      "integrity": "sha512-9gGx6GTtCQM73BgmHQXfDmLtfjjTUDSyoxTCbp5WtoixAhfgsDirWIcVQ/IHpvI5Vgd5i/J5F7B9cN/WlVbC/w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-symbols": "^1.1.0",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-typed-array": {
      "version": "1.1.15",
      "resolved": "https://registry.npmjs.org/is-typed-array/-/is-typed-array-1.1.15.tgz",
      "integrity": "sha512-p3EcsicXjit7SaskXHs1hA91QxgTw46Fv6EFKKGS5DRFLD8yKnohjF3hxoju94b/OcMZoQukzpPpBE9uLVKzgQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "which-typed-array": "^1.1.16"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakmap": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/is-weakmap/-/is-weakmap-2.0.2.tgz",
      "integrity": "sha512-K5pXYOm9wqY1RgjpL3YTkF39tni1XajUIkawTLUo9EZEVUFga5gSQJF8nNS7ZwJQ02y+1YCNYcMh+HIf1ZqE+w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakref": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-weakref/-/is-weakref-1.1.1.tgz",
      "integrity": "sha512-6i9mGWSlqzNMEqpCp93KwRS1uUOodk2OJ6b+sq7ZPDSy2WuI5NFIxp/254TytR8ftefexkWn5xNiHUNpPOfSew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakset": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/is-weakset/-/is-weakset-2.0.4.tgz",
      "integrity": "sha512-mfcwb6IzQyOKTs84CQMrOwW4gQcaTOAWJ0zzJCl2WSPDrWk/OzDaImWFH3djXhb24g4eudZfLRozAvPGw4d9hQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/isarray": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-2.0.5.tgz",
      "integrity": "sha512-xHjhDr3cNBK0BzdUJSPXZntQUx/mwMS5Rw4A7lPJ90XGAO6ISP/ePDNuo0vhqOZU+UD5JoodwCAAoZQd3FeAKw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/iterator.prototype": {
      "version": "1.1.5",
      "resolved": "https://registry.npmjs.org/iterator.prototype/-/iterator.prototype-1.1.5.tgz",
      "integrity": "sha512-H0dkQoCa3b2VEeKQBOxFph+JAbcrQdE7KC0UkqwpLmv2EC4P41QXP+rqo9wYodACiG5/WM5s9oDApTU8utwj9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.6",
        "get-proto": "^1.0.0",
        "has-symbols": "^1.1.0",
        "set-function-name": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/jiti": {
      "version": "2.6.1",
      "resolved": "https://registry.npmjs.org/jiti/-/jiti-2.6.1.tgz",
      "integrity": "sha512-ekilCSN1jwRvIbgeg/57YFh8qQDNbwDb9xT/qu2DAHbFFZUicIl4ygVaAvzveMhMVr3LnpSKTNnwt8PoOfmKhQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jiti": "lib/jiti-cli.mjs"
      }
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/jsx-ast-utils": {
      "version": "3.3.5",
      "resolved": "https://registry.npmjs.org/jsx-ast-utils/-/jsx-ast-utils-3.3.5.tgz",
      "integrity": "sha512-ZZow9HBI5O6EPgSJLUb8n2NKgmVWTwCvHGwFuJlMjvLFqlGG6pjirPhtdsseaLZjSibD8eegzmYpUZwoIlj2cQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-includes": "^3.1.6",
        "array.prototype.flat": "^1.3.1",
        "object.assign": "^4.1.4",
        "object.values": "^1.1.6"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/language-subtag-registry": {
      "version": "0.3.23",
      "resolved": "https://registry.npmjs.org/language-subtag-registry/-/language-subtag-registry-0.3.23.tgz",
      "integrity": "sha512-0K65Lea881pHotoGEa5gDlMxt3pctLi2RplBb7Ezh4rRdLEOtgi7n4EwK9lamnUCkKBqaeKRVebTq6BAxSkpXQ==",
      "dev": true,
      "license": "CC0-1.0"
    },
    "node_modules/language-tags": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/language-tags/-/language-tags-1.0.9.tgz",
      "integrity": "sha512-MbjN408fEndfiQXbFQ1vnd+1NoLDsnQW41410oQBXiyXDMYH5z505juWa4KUE1LqxRC7DgOgZDbKLxHIwm27hA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "language-subtag-registry": "^0.3.20"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/lightningcss": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss/-/lightningcss-1.30.2.tgz",
      "integrity": "sha512-utfs7Pr5uJyyvDETitgsaqSyjCb2qNRAtuqUeWIAKztsOYdcACf2KtARYXg2pSvhkt+9NfoaNY7fxjl6nuMjIQ==",
      "dev": true,
      "license": "MPL-2.0",
      "dependencies": {
        "detect-libc": "^2.0.3"
      },
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      },
      "optionalDependencies": {
        "lightningcss-android-arm64": "1.30.2",
        "lightningcss-darwin-arm64": "1.30.2",
        "lightningcss-darwin-x64": "1.30.2",
        "lightningcss-freebsd-x64": "1.30.2",
        "lightningcss-linux-arm-gnueabihf": "1.30.2",
        "lightningcss-linux-arm64-gnu": "1.30.2",
        "lightningcss-linux-arm64-musl": "1.30.2",
        "lightningcss-linux-x64-gnu": "1.30.2",
        "lightningcss-linux-x64-musl": "1.30.2",
        "lightningcss-win32-arm64-msvc": "1.30.2",
        "lightningcss-win32-x64-msvc": "1.30.2"
      }
    },
    "node_modules/lightningcss-android-arm64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-android-arm64/-/lightningcss-android-arm64-1.30.2.tgz",
      "integrity": "sha512-BH9sEdOCahSgmkVhBLeU7Hc9DWeZ1Eb6wNS6Da8igvUwAe0sqROHddIlvU06q3WyXVEOYDZ6ykBZQnjTbmo4+A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-darwin-arm64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-darwin-arm64/-/lightningcss-darwin-arm64-1.30.2.tgz",
      "integrity": "sha512-ylTcDJBN3Hp21TdhRT5zBOIi73P6/W0qwvlFEk22fkdXchtNTOU4Qc37SkzV+EKYxLouZ6M4LG9NfZ1qkhhBWA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-darwin-x64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-darwin-x64/-/lightningcss-darwin-x64-1.30.2.tgz",
      "integrity": "sha512-oBZgKchomuDYxr7ilwLcyms6BCyLn0z8J0+ZZmfpjwg9fRVZIR5/GMXd7r9RH94iDhld3UmSjBM6nXWM2TfZTQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-freebsd-x64": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-freebsd-x64/-/lightningcss-freebsd-x64-1.30.2.tgz",
      "integrity": "sha512-c2bH6xTrf4BDpK8MoGG4Bd6zAMZDAXS569UxCAGcA7IKbHNMlhGQ89eRmvpIUGfKWNVdbhSbkQaWhEoMGmGslA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-arm-gnueabihf": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-arm-gnueabihf/-/lightningcss-linux-arm-gnueabihf-1.30.2.tgz",
      "integrity": "sha512-eVdpxh4wYcm0PofJIZVuYuLiqBIakQ9uFZmipf6LF/HRj5Bgm0eb3qL/mr1smyXIS1twwOxNWndd8z0E374hiA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-arm64-gnu": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-arm64-gnu/-/lightningcss-linux-arm64-gnu-1.30.2.tgz",
      "integrity": "sha512-UK65WJAbwIJbiBFXpxrbTNArtfuznvxAJw4Q2ZGlU8kPeDIWEX1dg3rn2veBVUylA2Ezg89ktszWbaQnxD/e3A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-arm64-musl": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-arm64-musl/-/lightningcss-linux-arm64-musl-1.30.2.tgz",
      "integrity": "sha512-5Vh9dGeblpTxWHpOx8iauV02popZDsCYMPIgiuw97OJ5uaDsL86cnqSFs5LZkG3ghHoX5isLgWzMs+eD1YzrnA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-x64-gnu": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-x64-gnu/-/lightningcss-linux-x64-gnu-1.30.2.tgz",
      "integrity": "sha512-Cfd46gdmj1vQ+lR6VRTTadNHu6ALuw2pKR9lYq4FnhvgBc4zWY1EtZcAc6EffShbb1MFrIPfLDXD6Xprbnni4w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-linux-x64-musl": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-linux-x64-musl/-/lightningcss-linux-x64-musl-1.30.2.tgz",
      "integrity": "sha512-XJaLUUFXb6/QG2lGIW6aIk6jKdtjtcffUT0NKvIqhSBY3hh9Ch+1LCeH80dR9q9LBjG3ewbDjnumefsLsP6aiA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-win32-arm64-msvc": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-win32-arm64-msvc/-/lightningcss-win32-arm64-msvc-1.30.2.tgz",
      "integrity": "sha512-FZn+vaj7zLv//D/192WFFVA0RgHawIcHqLX9xuWiQt7P0PtdFEVaxgF9rjM/IRYHQXNnk61/H/gb2Ei+kUQ4xQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/lightningcss-win32-x64-msvc": {
      "version": "1.30.2",
      "resolved": "https://registry.npmjs.org/lightningcss-win32-x64-msvc/-/lightningcss-win32-x64-msvc-1.30.2.tgz",
      "integrity": "sha512-5g1yc73p+iAkid5phb4oVFMB45417DkRevRbt/El/gKXJk4jid+vPFF/AXbxn05Aky8PapwzZrdJShv5C0avjw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MPL-2.0",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 12.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/parcel"
      }
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.omit": {
      "version": "4.5.0",
      "resolved": "https://registry.npmjs.org/lodash.omit/-/lodash.omit-4.5.0.tgz",
      "integrity": "sha512-XeqSp49hNGmlkj2EJlfrQFIzQ6lXdNro9sddtQzcJY8QaoC2GO0DT7xaIokHeyM+mIT0mPMlPvkYzg2xCuHdZg==",
      "deprecated": "This package is deprecated. Use destructuring assignment syntax instead.",
      "license": "MIT"
    },
    "node_modules/lodash.pick": {
      "version": "4.4.0",
      "resolved": "https://registry.npmjs.org/lodash.pick/-/lodash.pick-4.4.0.tgz",
      "integrity": "sha512-hXt6Ul/5yWjfklSGvLQl8vM//l3FtyHZeuelpzK6mm99pNvN9yTDruNZPEJZD1oWrqo+izBmB7oUfWgcCX7s4Q==",
      "deprecated": "This package is deprecated. Use destructuring assignment syntax instead.",
      "license": "MIT"
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/lucide-react": {
      "version": "0.552.0",
      "resolved": "https://registry.npmjs.org/lucide-react/-/lucide-react-0.552.0.tgz",
      "integrity": "sha512-g9WCjmfwqbexSnZE+2cl21PCfXOcqnGeWeMTNAOGEfpPbm/ZF4YIq77Z8qWrxbu660EKuLB4nSLggoKnCb+isw==",
      "license": "ISC",
      "peerDependencies": {
        "react": "^16.5.1 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      }
    },
    "node_modules/magic-string": {
      "version": "0.30.21",
      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.30.21.tgz",
      "integrity": "sha512-vd2F4YUyEXKGcLHoq+TEyCjxueSeHnFxyyjNp80yg0XV4vUhnDer/lvvlqM/arB5bXQN5K2/3oinyCRyx8T2CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.5"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/meshoptimizer": {
      "version": "0.22.0",
      "resolved": "https://registry.npmjs.org/meshoptimizer/-/meshoptimizer-0.22.0.tgz",
      "integrity": "sha512-IebiK79sqIy+E4EgOr+CAw+Ke8hAspXKzBd0JdgEmPHiAwmvEj2S4h1rfvo+o/BnfEYd/jAOg5IeeIjzlzSnDg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/minimist": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.8.tgz",
      "integrity": "sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/motion-dom": {
      "version": "12.27.1",
      "resolved": "https://registry.npmjs.org/motion-dom/-/motion-dom-12.27.1.tgz",
      "integrity": "sha512-V/53DA2nBqKl9O2PMJleSUb/G0dsMMeZplZwgIQf5+X0bxIu7Q1cTv6DrjvTTGYRm3+7Y5wMlRZ1wT61boU/bQ==",
      "license": "MIT",
      "dependencies": {
        "motion-utils": "^12.24.10"
      }
    },
    "node_modules/motion-utils": {
      "version": "12.24.10",
      "resolved": "https://registry.npmjs.org/motion-utils/-/motion-utils-12.24.10.tgz",
      "integrity": "sha512-x5TFgkCIP4pPsRLpKoI86jv/q8t8FQOiM/0E8QKBzfMozWHfkKap2gA1hOki+B5g3IsBNpxbUnfOum1+dgvYww==",
      "license": "MIT"
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/napi-postinstall": {
      "version": "0.3.4",
      "resolved": "https://registry.npmjs.org/napi-postinstall/-/napi-postinstall-0.3.4.tgz",
      "integrity": "sha512-PHI5f1O0EP5xJ9gQmFGMS6IZcrVvTjpXjz7Na41gTE7eE2hK11lg04CECCYEEjdc17EV4DO+fkGEtt7TpTaTiQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "napi-postinstall": "lib/cli.js"
      },
      "engines": {
        "node": "^12.20.0 || ^14.18.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/napi-postinstall"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/next": {
      "version": "15.5.9",
      "resolved": "https://registry.npmjs.org/next/-/next-15.5.9.tgz",
      "integrity": "sha512-agNLK89seZEtC5zUHwtut0+tNrc0Xw4FT/Dg+B/VLEo9pAcS9rtTKpek3V6kVcVwsB2YlqMaHdfZL4eLEVYuCg==",
      "license": "MIT",
      "dependencies": {
        "@next/env": "15.5.9",
        "@swc/helpers": "0.5.15",
        "caniuse-lite": "^1.0.30001579",
        "postcss": "8.4.31",
        "styled-jsx": "5.1.6"
      },
      "bin": {
        "next": "dist/bin/next"
      },
      "engines": {
        "node": "^18.18.0 || ^19.8.0 || >= 20.0.0"
      },
      "optionalDependencies": {
        "@next/swc-darwin-arm64": "15.5.7",
        "@next/swc-darwin-x64": "15.5.7",
        "@next/swc-linux-arm64-gnu": "15.5.7",
        "@next/swc-linux-arm64-musl": "15.5.7",
        "@next/swc-linux-x64-gnu": "15.5.7",
        "@next/swc-linux-x64-musl": "15.5.7",
        "@next/swc-win32-arm64-msvc": "15.5.7",
        "@next/swc-win32-x64-msvc": "15.5.7",
        "sharp": "^0.34.3"
      },
      "peerDependencies": {
        "@opentelemetry/api": "^1.1.0",
        "@playwright/test": "^1.51.1",
        "babel-plugin-react-compiler": "*",
        "react": "^18.2.0 || 19.0.0-rc-de68d2f4-20241204 || ^19.0.0",
        "react-dom": "^18.2.0 || 19.0.0-rc-de68d2f4-20241204 || ^19.0.0",
        "sass": "^1.3.0"
      },
      "peerDependenciesMeta": {
        "@opentelemetry/api": {
          "optional": true
        },
        "@playwright/test": {
          "optional": true
        },
        "babel-plugin-react-compiler": {
          "optional": true
        },
        "sass": {
          "optional": true
        }
      }
    },
    "node_modules/next/node_modules/postcss": {
      "version": "8.4.31",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.4.31.tgz",
      "integrity": "sha512-PS08Iboia9mts/2ygV3eLpY5ghnUcfLV/EXTOW1E2qYxJKGGBUtNjN76FYHnMs36RmARn41bC0AZmn+rR0OVpQ==",
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.6",
        "picocolors": "^1.0.0",
        "source-map-js": "^1.0.2"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/node-releases": {
      "version": "2.0.27",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object-keys": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz",
      "integrity": "sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.assign": {
      "version": "4.1.7",
      "resolved": "https://registry.npmjs.org/object.assign/-/object.assign-4.1.7.tgz",
      "integrity": "sha512-nK28WOo+QIjBkDduTINE4JkF/UJJKyf2EJxvJKfblDpyg0Q+pkOHNTL0Qwy6NP6FhE/EnzV73BxxqcJaXY9anw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0",
        "has-symbols": "^1.1.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object.entries": {
      "version": "1.1.9",
      "resolved": "https://registry.npmjs.org/object.entries/-/object.entries-1.1.9.tgz",
      "integrity": "sha512-8u/hfXFRBD1O0hPUjioLhoWFHRmt6tKA4/vZPyckBr18l1KE9uHrFaFaUi8MDRTpi4uak2goyPTSNJLXX2k2Hw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.fromentries": {
      "version": "2.0.8",
      "resolved": "https://registry.npmjs.org/object.fromentries/-/object.fromentries-2.0.8.tgz",
      "integrity": "sha512-k6E21FzySsSK5a21KRADBd/NGneRegFO5pLHfdQLpRDETUNJueLXs3WCzyQ3tFRDYgbq3KHGXfTbi2bs8WQ6rQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.2",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object.groupby": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/object.groupby/-/object.groupby-1.0.3.tgz",
      "integrity": "sha512-+Lhy3TQTuzXI5hevh8sBGqbmurHbbIjAi0Z4S63nthVLmLxfbj4T54a4CfZrXIrt9iP4mVAPYMo/v99taj3wjQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.values": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/object.values/-/object.values-1.2.1.tgz",
      "integrity": "sha512-gXah6aZrcUxjWg2zR2MwouP2eHlCBzdV4pygudehaKXSGW4v2AsRQUK+lwwXhii6KFZcunEnmSUoYp5CXibxtA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/openai": {
      "version": "6.15.0",
      "resolved": "https://registry.npmjs.org/openai/-/openai-6.15.0.tgz",
      "integrity": "sha512-F1Lvs5BoVvmZtzkUEVyh8mDQPPFolq4F+xdsx/DO8Hee8YF3IGAlZqUIsF+DVGhqf4aU0a3bTghsxB6OIsRy1g==",
      "license": "Apache-2.0",
      "bin": {
        "openai": "bin/cli"
      },
      "peerDependencies": {
        "ws": "^8.18.0",
        "zod": "^3.25 || ^4.0"
      },
      "peerDependenciesMeta": {
        "ws": {
          "optional": true
        },
        "zod": {
          "optional": true
        }
      }
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/own-keys": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/own-keys/-/own-keys-1.0.1.tgz",
      "integrity": "sha512-qFOyK5PjiWZd+QQIh+1jhdb9LpxTF0qs7Pm8o5QHYZ0M3vKqSqzsZaEB6oWlxZ+q2sJBMI/Ktgd2N5ZwQoRHfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "get-intrinsic": "^1.2.6",
        "object-keys": "^1.1.1",
        "safe-push-apply": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/possible-typed-array-names": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/possible-typed-array-names/-/possible-typed-array-names-1.1.0.tgz",
      "integrity": "sha512-/+5VFTchJDoVj3bhoqi6UeymcD00DAwb1nJwamzPvHEszJ4FpF6SNNbUbOS8yI56qHzdV8eK0qEfOSiodkTdxg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/potpack": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/potpack/-/potpack-1.0.2.tgz",
      "integrity": "sha512-choctRBIV9EMT9WGAZHn3V7t0Z2pMQyl0EZE6pFc/6ml3ssw7Dlf/oAOvFwjm1HVsqfQN8GfeFyJ+d8tRzqueQ==",
      "license": "ISC"
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/prop-types": {
      "version": "15.8.1",
      "resolved": "https://registry.npmjs.org/prop-types/-/prop-types-15.8.1.tgz",
      "integrity": "sha512-oj87CgZICdulUohogVAR7AjlC0327U4el4L6eAvOqCeudMDVU0NThNaV+b9Df4dXgSP1gXMTnPdhfe/2qDH5cg==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.4.0",
        "object-assign": "^4.1.1",
        "react-is": "^16.13.1"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/react": {
      "version": "19.2.0",
      "resolved": "https://registry.npmjs.org/react/-/react-19.2.0.tgz",
      "integrity": "sha512-tmbWg6W31tQLeB5cdIBOicJDJRR2KzXsV7uSK9iNfLWQ5bIZfxuPEHp7M8wiHyHnn0DD1i7w3Zmin0FtkrwoCQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "19.2.0",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-19.2.0.tgz",
      "integrity": "sha512-UlbRu4cAiGaIewkPyiRGJk0imDN2T3JjieT6spoL2UeSf5od4n5LB/mQ4ejmxhCFT1tYe8IvaFulzynWovsEFQ==",
      "license": "MIT",
      "dependencies": {
        "scheduler": "^0.27.0"
      },
      "peerDependencies": {
        "react": "^19.2.0"
      }
    },
    "node_modules/react-hot-toast": {
      "version": "2.6.0",
      "resolved": "https://registry.npmjs.org/react-hot-toast/-/react-hot-toast-2.6.0.tgz",
      "integrity": "sha512-bH+2EBMZ4sdyou/DPrfgIouFpcRLCJ+HoCA32UoAYHn6T3Ur5yfcDCeSr5mwldl6pFOsiocmrXMuoCJ1vV8bWg==",
      "license": "MIT",
      "dependencies": {
        "csstype": "^3.1.3",
        "goober": "^2.1.16"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "react": ">=16",
        "react-dom": ">=16"
      }
    },
    "node_modules/react-is": {
      "version": "16.13.1",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-16.13.1.tgz",
      "integrity": "sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==",
      "license": "MIT"
    },
    "node_modules/react-merge-refs": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/react-merge-refs/-/react-merge-refs-1.1.0.tgz",
      "integrity": "sha512-alTKsjEL0dKH/ru1Iyn7vliS2QRcBp9zZPGoWxUOvRGWPUYgjo+V01is7p04It6KhgrzhJGnIj9GgX8W4bZoCQ==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/gregberge"
      }
    },
    "node_modules/react-redux": {
      "version": "9.2.0",
      "resolved": "https://registry.npmjs.org/react-redux/-/react-redux-9.2.0.tgz",
      "integrity": "sha512-ROY9fvHhwOD9ySfrF0wmvu//bKCQ6AeZZq1nJNtbDC+kk5DuSuNX/n6YWYF/SYy7bSba4D4FSz8DJeKY/S/r+g==",
      "license": "MIT",
      "dependencies": {
        "@types/use-sync-external-store": "^0.0.6",
        "use-sync-external-store": "^1.4.0"
      },
      "peerDependencies": {
        "@types/react": "^18.2.25 || ^19",
        "react": "^18.0 || ^19",
        "redux": "^5.0.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "redux": {
          "optional": true
        }
      }
    },
    "node_modules/react-use-measure": {
      "version": "2.1.7",
      "resolved": "https://registry.npmjs.org/react-use-measure/-/react-use-measure-2.1.7.tgz",
      "integrity": "sha512-KrvcAo13I/60HpwGO5jpW7E9DfusKyLPLvuHlUyP5zqnmAPhNc6qTRjUQrdTADl0lpPpDVU2/Gg51UlOGHXbdg==",
      "license": "MIT",
      "peerDependencies": {
        "react": ">=16.13",
        "react-dom": ">=16.13"
      },
      "peerDependenciesMeta": {
        "react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/recharts": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/recharts/-/recharts-3.6.0.tgz",
      "integrity": "sha512-L5bjxvQRAe26RlToBAziKUB7whaGKEwD3znoM6fz3DrTowCIC/FnJYnuq1GEzB8Zv2kdTfaxQfi5GoH0tBinyg==",
      "license": "MIT",
      "workspaces": [
        "www"
      ],
      "dependencies": {
        "@reduxjs/toolkit": "1.x.x || 2.x.x",
        "clsx": "^2.1.1",
        "decimal.js-light": "^2.5.1",
        "es-toolkit": "^1.39.3",
        "eventemitter3": "^5.0.1",
        "immer": "^10.1.1",
        "react-redux": "8.x.x || 9.x.x",
        "reselect": "5.1.1",
        "tiny-invariant": "^1.3.3",
        "use-sync-external-store": "^1.2.2",
        "victory-vendor": "^37.0.2"
      },
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0",
        "react-dom": "^16.0.0 || ^17.0.0 || ^18.0.0 || ^19.0.0",
        "react-is": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      }
    },
    "node_modules/redux": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/redux/-/redux-5.0.1.tgz",
      "integrity": "sha512-M9/ELqF6fy8FwmkpnF0S3YKOqMyoWJ4+CS5Efg2ct3oY9daQvd/Pc71FpGZsVsbl3Cpb+IIcjBDUnnyBdQbq4w==",
      "license": "MIT"
    },
    "node_modules/redux-thunk": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/redux-thunk/-/redux-thunk-3.1.0.tgz",
      "integrity": "sha512-NW2r5T6ksUKXCabzhL9z+h206HQw/NJkcLm1GPImRQ8IzfXwRGqjVhKJGauHirT0DAuyy6hjdnMZaRoAcy0Klw==",
      "license": "MIT",
      "peerDependencies": {
        "redux": "^5.0.0"
      }
    },
    "node_modules/reflect.getprototypeof": {
      "version": "1.0.10",
      "resolved": "https://registry.npmjs.org/reflect.getprototypeof/-/reflect.getprototypeof-1.0.10.tgz",
      "integrity": "sha512-00o4I+DVrefhv+nX0ulyi3biSHCPDe+yLv5o/p6d/UVlirijB8E16FtfwSAi4g3tcqrQ4lRAqQSoFEZJehYEcw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.9",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.7",
        "get-proto": "^1.0.1",
        "which-builtin-type": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/regexp.prototype.flags": {
      "version": "1.5.4",
      "resolved": "https://registry.npmjs.org/regexp.prototype.flags/-/regexp.prototype.flags-1.5.4.tgz",
      "integrity": "sha512-dYqgNSZbDwkaJ2ceRd9ojCGjBq+mOm9LmtXnAnEGyHhN/5R7iDW2TRw3h+o/jCFxus3P2LfWIIiwowAjANm7IA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-errors": "^1.3.0",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "set-function-name": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/require-from-string": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/require-from-string/-/require-from-string-2.0.2.tgz",
      "integrity": "sha512-Xf0nWe6RseziFMu+Ap9biiUbmplq6S9/p+7w7YXP/JBHhrUDDUhwa+vANyubuqfZWTveU//DYVGsDG7RKL/vEw==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/reselect": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/reselect/-/reselect-5.1.1.tgz",
      "integrity": "sha512-K/BG6eIky/SBpzfHZv/dd+9JBFiS4SWV7FIujVyJRux6e45+73RaUHXLmIR1f7WOMaQ0U1km6qwklRQxpJJY0w==",
      "license": "MIT"
    },
    "node_modules/resolve": {
      "version": "1.22.11",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.11.tgz",
      "integrity": "sha512-RfqAvLnMl313r7c9oclB1HhUEAezcpLjz95wFH4LVuhk9JF/r22qmVP9AMmOU4vMX7Q8pN8jwNg/CSpdFnMjTQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.16.1",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/resolve-pkg-maps": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/resolve-pkg-maps/-/resolve-pkg-maps-1.0.0.tgz",
      "integrity": "sha512-seS2Tj26TBVOC2NIc2rOe2y2ZO7efxITtLZcGSOnHHNOQ7CkiUBfw0Iw2ck6xkIhPwLhKNLS8BO+hEpngQlqzw==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/privatenumber/resolve-pkg-maps?sponsor=1"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/safe-array-concat": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/safe-array-concat/-/safe-array-concat-1.1.3.tgz",
      "integrity": "sha512-AURm5f0jYEOydBj7VQlVvDrjeFgthDdEF5H1dP+6mNpoXOMo1quQqJ4wvJDyRZ9+pO3kGWoOdmV08cSv2aJV6Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "get-intrinsic": "^1.2.6",
        "has-symbols": "^1.1.0",
        "isarray": "^2.0.5"
      },
      "engines": {
        "node": ">=0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safe-push-apply": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/safe-push-apply/-/safe-push-apply-1.0.0.tgz",
      "integrity": "sha512-iKE9w/Z7xCzUMIZqdBsp6pEQvwuEebH4vdpjcDWnyzaI6yl6O9FHvVpmGelvEHNsoY6wGblkxR6Zty/h00WiSA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "isarray": "^2.0.5"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safe-regex-test": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/safe-regex-test/-/safe-regex-test-1.1.0.tgz",
      "integrity": "sha512-x/+Cz4YrimQxQccJf5mKEbIa1NzeCRNI5Ecl/ekmlYaampdNLPalVyIcCZNNH3MvmqBugV5TMYZXv0ljslUlaw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "is-regex": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/scheduler": {
      "version": "0.27.0",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.27.0.tgz",
      "integrity": "sha512-eNv+WrVbKu1f3vbYJT/xtiF5syA5HPIMtf9IgY/nKg0sWqzAUEvqY/xm7OcZc/qafLx/iO9FgOmeSAp4v5ti/Q==",
      "license": "MIT"
    },
    "node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/set-function-length": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/set-function-length/-/set-function-length-1.2.2.tgz",
      "integrity": "sha512-pgRc4hJ4/sNjWCSS9AmnS40x3bNMDTknHgL5UaMBTMyJnU90EgWh1Rz+MC9eFu4BuN/UwZjKQuY/1v3rM7HMfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2",
        "get-intrinsic": "^1.2.4",
        "gopd": "^1.0.1",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/set-function-name": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/set-function-name/-/set-function-name-2.0.2.tgz",
      "integrity": "sha512-7PGFlmtwsEADb0WYyvCMa1t+yke6daIG4Wirafur5kcf+MhUnPms1UeR0CKQdTZD81yESwMHbtn+TR+dMviakQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "functions-have-names": "^1.2.3",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/set-proto": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/set-proto/-/set-proto-1.0.0.tgz",
      "integrity": "sha512-RJRdvCo6IAnPdsvP/7m6bsQqNnn1FCBX5ZNtFL98MmFF/4xAIJTIg1YbHW5DC2W5SKZanrC6i4HsJqlajw/dZw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/sharp": {
      "version": "0.34.4",
      "resolved": "https://registry.npmjs.org/sharp/-/sharp-0.34.4.tgz",
      "integrity": "sha512-FUH39xp3SBPnxWvd5iib1X8XY7J0K0X7d93sie9CJg2PO8/7gmg89Nve6OjItK53/MlAushNNxteBYfM6DEuoA==",
      "hasInstallScript": true,
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "@img/colour": "^1.0.0",
        "detect-libc": "^2.1.0",
        "semver": "^7.7.2"
      },
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-darwin-arm64": "0.34.4",
        "@img/sharp-darwin-x64": "0.34.4",
        "@img/sharp-libvips-darwin-arm64": "1.2.3",
        "@img/sharp-libvips-darwin-x64": "1.2.3",
        "@img/sharp-libvips-linux-arm": "1.2.3",
        "@img/sharp-libvips-linux-arm64": "1.2.3",
        "@img/sharp-libvips-linux-ppc64": "1.2.3",
        "@img/sharp-libvips-linux-s390x": "1.2.3",
        "@img/sharp-libvips-linux-x64": "1.2.3",
        "@img/sharp-libvips-linuxmusl-arm64": "1.2.3",
        "@img/sharp-libvips-linuxmusl-x64": "1.2.3",
        "@img/sharp-linux-arm": "0.34.4",
        "@img/sharp-linux-arm64": "0.34.4",
        "@img/sharp-linux-ppc64": "0.34.4",
        "@img/sharp-linux-s390x": "0.34.4",
        "@img/sharp-linux-x64": "0.34.4",
        "@img/sharp-linuxmusl-arm64": "0.34.4",
        "@img/sharp-linuxmusl-x64": "0.34.4",
        "@img/sharp-wasm32": "0.34.4",
        "@img/sharp-win32-arm64": "0.34.4",
        "@img/sharp-win32-ia32": "0.34.4",
        "@img/sharp-win32-x64": "0.34.4"
      }
    },
    "node_modules/sharp/node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "license": "ISC",
      "optional": true,
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/stable-hash": {
      "version": "0.0.5",
      "resolved": "https://registry.npmjs.org/stable-hash/-/stable-hash-0.0.5.tgz",
      "integrity": "sha512-+L3ccpzibovGXFK+Ap/f8LOS0ahMrHTf3xu7mMLSpEGU0EO9ucaysSylKo9eRDFNhWve/y275iPmIZ4z39a9iA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/stats.js": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/stats.js/-/stats.js-0.17.0.tgz",
      "integrity": "sha512-hNKz8phvYLPEcRkeG1rsGmV5ChMjKDAWU7/OJJdDErPBNChQXxCo3WZurGpnWc6gZhAzEPFad1aVgyOANH1sMw==",
      "license": "MIT"
    },
    "node_modules/stop-iteration-iterator": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/stop-iteration-iterator/-/stop-iteration-iterator-1.1.0.tgz",
      "integrity": "sha512-eLoXW/DHyl62zxY4SCaIgnRhuMr6ri4juEYARS8E6sCEqzKpOiE521Ucofdx+KnDZl5xmvGYaaKCk5FEOxJCoQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "internal-slot": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/string.prototype.includes": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/string.prototype.includes/-/string.prototype.includes-2.0.1.tgz",
      "integrity": "sha512-o7+c9bW6zpAdJHTtujeePODAhkuicdAryFsfVKwA+wGw89wJ4GTY484WTucM9hLtDEOpOvI+aHnzqnC5lHp4Rg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.3"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/string.prototype.matchall": {
      "version": "4.0.12",
      "resolved": "https://registry.npmjs.org/string.prototype.matchall/-/string.prototype.matchall-4.0.12.tgz",
      "integrity": "sha512-6CC9uyBL+/48dYizRf7H7VAYCMCNTBeM78x/VTUe9bFEaxBepPJDa1Ow99LqI/1yF7kuy7Q3cQsYMrcjGUcskA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.6",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.6",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "internal-slot": "^1.1.0",
        "regexp.prototype.flags": "^1.5.3",
        "set-function-name": "^2.0.2",
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.repeat": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/string.prototype.repeat/-/string.prototype.repeat-1.0.0.tgz",
      "integrity": "sha512-0u/TldDbKD8bFCQ/4f5+mNRrXwZ8hg2w7ZR8wa16e8z9XpePWl3eGEcUD0OXpEH/VJH/2G3gjUtR3ZOiBe2S/w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-properties": "^1.1.3",
        "es-abstract": "^1.17.5"
      }
    },
    "node_modules/string.prototype.trim": {
      "version": "1.2.10",
      "resolved": "https://registry.npmjs.org/string.prototype.trim/-/string.prototype.trim-1.2.10.tgz",
      "integrity": "sha512-Rs66F0P/1kedk5lyYyH9uBzuiI/kNRmwJAR9quK6VOtIpZ2G+hMZd+HQbbv25MgCA6gEffoMZYxlTod4WcdrKA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "define-data-property": "^1.1.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-object-atoms": "^1.0.0",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.trimend": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/string.prototype.trimend/-/string.prototype.trimend-1.0.9.tgz",
      "integrity": "sha512-G7Ok5C6E/j4SGfyLCloXTrngQIQU3PWtXGst3yM7Bea9FRURf1S42ZHlZZtsNque2FN2PoUhfZXYLNWwEr4dLQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.trimstart": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/string.prototype.trimstart/-/string.prototype.trimstart-1.0.8.tgz",
      "integrity": "sha512-UXSH262CSZY1tfu3G3Secr6uGLCFVPMhIqHjlgCUtCCcgihYc/xKs9djMTMUOb2j1mVSeU8EU6NWc/iQKU6Gfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/strip-bom": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
      "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/styled-jsx": {
      "version": "5.1.6",
      "resolved": "https://registry.npmjs.org/styled-jsx/-/styled-jsx-5.1.6.tgz",
      "integrity": "sha512-qSVyDTeMotdvQYoHWLNGwRFJHC+i+ZvdBRYosOFgC+Wg1vx4frN2/RG/NA7SYqqvKNLf39P2LSRA2pu6n0XYZA==",
      "license": "MIT",
      "dependencies": {
        "client-only": "0.0.1"
      },
      "engines": {
        "node": ">= 12.0.0"
      },
      "peerDependencies": {
        "react": ">= 16.8.0 || 17.x.x || ^18.0.0-0 || ^19.0.0-0"
      },
      "peerDependenciesMeta": {
        "@babel/core": {
          "optional": true
        },
        "babel-plugin-macros": {
          "optional": true
        }
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/suspend-react": {
      "version": "0.0.8",
      "resolved": "https://registry.npmjs.org/suspend-react/-/suspend-react-0.0.8.tgz",
      "integrity": "sha512-ZC3r8Hu1y0dIThzsGw0RLZplnX9yXwfItcvaIzJc2VQVi8TGyGDlu92syMB5ulybfvGLHAI5Ghzlk23UBPF8xg==",
      "license": "MIT",
      "peerDependencies": {
        "react": ">=17.0"
      }
    },
    "node_modules/tailwind-merge": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/tailwind-merge/-/tailwind-merge-3.3.1.tgz",
      "integrity": "sha512-gBXpgUm/3rp1lMZZrM/w7D8GKqshif0zAymAhbCyIt8KMe+0v9DQ7cdYLR4FHH/cKpdTXb+A/tKKU3eolfsI+g==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/dcastil"
      }
    },
    "node_modules/tailwindcss": {
      "version": "4.1.16",
      "resolved": "https://registry.npmjs.org/tailwindcss/-/tailwindcss-4.1.16.tgz",
      "integrity": "sha512-pONL5awpaQX4LN5eiv7moSiSPd/DLDzKVRJz8Q9PgzmAdd1R4307GQS2ZpfiN7ZmekdQrfhZZiSE5jkLR4WNaA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/tapable": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/tapable/-/tapable-2.3.0.tgz",
      "integrity": "sha512-g9ljZiwki/LfxmQADO3dEY1CbpmXT5Hm2fJ+QaGKwSXUylMybePR7/67YW7jOrrvjEgL1Fmz5kzyAjWVWLlucg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/webpack"
      }
    },
    "node_modules/three": {
      "version": "0.128.0",
      "resolved": "https://registry.npmjs.org/three/-/three-0.128.0.tgz",
      "integrity": "sha512-i0ap/E+OaSfzw7bD1TtYnPo3VEplkl70WX5fZqZnfZsE3k3aSFudqrrC9ldFZfYFkn1zwDmBcdGfiIm/hnbyZA==",
      "license": "MIT"
    },
    "node_modules/three-mesh-bvh": {
      "version": "0.5.24",
      "resolved": "https://registry.npmjs.org/three-mesh-bvh/-/three-mesh-bvh-0.5.24.tgz",
      "integrity": "sha512-VTIgfjz8aFoPKTQoMIQQv9jJD4ybFRZuKKE1/kqy78FQcuHQ0+iIWv7C5cSb2inlvs7bNMVY3yRx3RXGZfrvzQ==",
      "license": "MIT",
      "peerDependencies": {
        "three": ">= 0.123.0"
      }
    },
    "node_modules/three-stdlib": {
      "version": "2.36.1",
      "resolved": "https://registry.npmjs.org/three-stdlib/-/three-stdlib-2.36.1.tgz",
      "integrity": "sha512-XyGQrFmNQ5O/IoKm556ftwKsBg11TIb301MB5dWNicziQBEs2g3gtOYIf7pFiLa0zI2gUwhtCjv9fmjnxKZ1Cg==",
      "license": "MIT",
      "dependencies": {
        "@types/draco3d": "^1.4.0",
        "@types/offscreencanvas": "^2019.6.4",
        "@types/webxr": "^0.5.2",
        "draco3d": "^1.4.1",
        "fflate": "^0.6.9",
        "potpack": "^1.0.1"
      },
      "peerDependencies": {
        "three": ">=0.128.0"
      }
    },
    "node_modules/tiny-invariant": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/tiny-invariant/-/tiny-invariant-1.3.3.tgz",
      "integrity": "sha512-+FbBPE1o9QAYvviau/qC5SE3caw21q3xkvWKBtja5vgqOWIHHJ3ioaq1VPfn/Szqctz2bU/oYeKd9/z5BL+PVg==",
      "license": "MIT"
    },
    "node_modules/tinyglobby": {
      "version": "0.2.15",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/tinyglobby/node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/tinyglobby/node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/troika-three-text": {
      "version": "0.46.4",
      "resolved": "https://registry.npmjs.org/troika-three-text/-/troika-three-text-0.46.4.tgz",
      "integrity": "sha512-Qsv0HhUKTZgSmAJs5wvO7YlBoJSP9TGPLmrg+K9pbQq4lseQdcevbno/WI38bwJBZ/qS56hvfqEzY0zUEFzDIw==",
      "license": "MIT",
      "dependencies": {
        "bidi-js": "^1.0.2",
        "troika-three-utils": "^0.46.0",
        "troika-worker-utils": "^0.46.0",
        "webgl-sdf-generator": "1.1.1"
      },
      "peerDependencies": {
        "three": ">=0.103.0"
      }
    },
    "node_modules/troika-three-utils": {
      "version": "0.46.0",
      "resolved": "https://registry.npmjs.org/troika-three-utils/-/troika-three-utils-0.46.0.tgz",
      "integrity": "sha512-llHyrXAcwzr0bpg80GxsIp73N7FuImm4WCrKDJkAqcAsWmE5pfP9+Qzw+oMWK1P/AdHQ79eOrOl9NjyW4aOw0w==",
      "license": "MIT",
      "peerDependencies": {
        "three": ">=0.103.0"
      }
    },
    "node_modules/troika-worker-utils": {
      "version": "0.46.0",
      "resolved": "https://registry.npmjs.org/troika-worker-utils/-/troika-worker-utils-0.46.0.tgz",
      "integrity": "sha512-bzOx5f2ZBxkFhXtIvDJlLn2AI3bzCkGVbCndl/2dL5QZrwHEKl45OEIilCxYQQWJG1rEbOD9O80tMjoYjw19OA==",
      "license": "MIT"
    },
    "node_modules/ts-api-utils": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-2.1.0.tgz",
      "integrity": "sha512-CUgTZL1irw8u29bzrOD/nH85jqyc74D6SshFgujOIA7osm2Rz7dYH77agkx7H4FBNxDq7Cjf+IjaX/8zwFW+ZQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18.12"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4"
      }
    },
    "node_modules/tsconfig-paths": {
      "version": "3.15.0",
      "resolved": "https://registry.npmjs.org/tsconfig-paths/-/tsconfig-paths-3.15.0.tgz",
      "integrity": "sha512-2Ac2RgzDe/cn48GvOe3M+o82pEFewD3UPbyoUHHdKasHwJKjds4fLXWf/Ux5kATBKN20oaFGu+jbElp1pos0mg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/json5": "^0.0.29",
        "json5": "^1.0.2",
        "minimist": "^1.2.6",
        "strip-bom": "^3.0.0"
      }
    },
    "node_modules/tsconfig-paths/node_modules/json5": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.2.tgz",
      "integrity": "sha512-g1MWMLBiz8FKi1e4w0UyVL3w+iJceWAFBAaBnnGKOpNa5f8TLktkbre1+s6oICydWAm+HRUGTmI+//xv2hvXYA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "minimist": "^1.2.0"
      },
      "bin": {
        "json5": "lib/cli.js"
      }
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
      "license": "0BSD"
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/typed-array-buffer": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/typed-array-buffer/-/typed-array-buffer-1.0.3.tgz",
      "integrity": "sha512-nAYYwfY3qnzX30IkA6AQZjVbtK6duGontcQm1WSG1MD94YLqK0515GNApXkoxKOWMusVssAHWLh9SeaoefYFGw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-typed-array": "^1.1.14"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/typed-array-byte-length": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/typed-array-byte-length/-/typed-array-byte-length-1.0.3.tgz",
      "integrity": "sha512-BaXgOuIxz8n8pIq3e7Atg/7s+DpiYrxn4vdot3w9KbnBhcRQq6o3xemQdIfynqSeXeDrF32x+WvfzmOjPiY9lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "for-each": "^0.3.3",
        "gopd": "^1.2.0",
        "has-proto": "^1.2.0",
        "is-typed-array": "^1.1.14"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typed-array-byte-offset": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/typed-array-byte-offset/-/typed-array-byte-offset-1.0.4.tgz",
      "integrity": "sha512-bTlAFB/FBYMcuX81gbL4OcpH5PmlFHqlCCpAl8AlEzMz5k53oNDvN8p1PNOWLEmI2x4orp3raOFB51tv9X+MFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "for-each": "^0.3.3",
        "gopd": "^1.2.0",
        "has-proto": "^1.2.0",
        "is-typed-array": "^1.1.15",
        "reflect.getprototypeof": "^1.0.9"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typed-array-length": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/typed-array-length/-/typed-array-length-1.0.7.tgz",
      "integrity": "sha512-3KS2b+kL7fsuk/eJZ7EQdnEmQoaho/r6KUef7hxvltNA5DR8NAUM+8wJMbJyZ4G9/7i3v5zPBIMN5aybAh2/Jg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "for-each": "^0.3.3",
        "gopd": "^1.0.1",
        "is-typed-array": "^1.1.13",
        "possible-typed-array-names": "^1.0.0",
        "reflect.getprototypeof": "^1.0.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typescript": {
      "version": "5.9.3",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.9.3.tgz",
      "integrity": "sha512-jl1vZzPDinLr9eUt3J/t7V6FgNEw9QjvBPdysz9KfQDD41fQrC2Y4vKQdiaUpFT4bXlb1RHhLpp8wtm6M5TgSw==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/typescript-eslint": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/typescript-eslint/-/typescript-eslint-8.46.2.tgz",
      "integrity": "sha512-vbw8bOmiuYNdzzV3lsiWv6sRwjyuKJMQqWulBOU7M0RrxedXledX8G8kBbQeiOYDnTfiXz0Y4081E1QMNB6iQg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/eslint-plugin": "8.46.2",
        "@typescript-eslint/parser": "8.46.2",
        "@typescript-eslint/typescript-estree": "8.46.2",
        "@typescript-eslint/utils": "8.46.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/unbox-primitive": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/unbox-primitive/-/unbox-primitive-1.1.0.tgz",
      "integrity": "sha512-nWJ91DjeOkej/TA8pXQ3myruKpKEYgqvpw9lz4OPHj/NWFNluYrjbz9j01CJ8yKQd2g4jFoOkINCTW2I5LEEyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-bigints": "^1.0.2",
        "has-symbols": "^1.1.0",
        "which-boxed-primitive": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/undici": {
      "version": "7.16.0",
      "resolved": "https://registry.npmjs.org/undici/-/undici-7.16.0.tgz",
      "integrity": "sha512-QEg3HPMll0o3t2ourKwOeUAZ159Kn9mx5pnzHRQO8+Wixmh88YdZRiIwat0iNzNNXn0yoEtXJqFpyW7eM8BV7g==",
      "license": "MIT",
      "engines": {
        "node": ">=20.18.1"
      }
    },
    "node_modules/undici-types": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.21.0.tgz",
      "integrity": "sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==",
      "license": "MIT"
    },
    "node_modules/unrs-resolver": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/unrs-resolver/-/unrs-resolver-1.11.1.tgz",
      "integrity": "sha512-bSjt9pjaEBnNiGgc9rUiHGKv5l4/TGzDmYw3RhnkJGtLhbnnA/5qJj7x3dNDCRx/PJxu774LlH8lCOlB4hEfKg==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "dependencies": {
        "napi-postinstall": "^0.3.0"
      },
      "funding": {
        "url": "https://opencollective.com/unrs-resolver"
      },
      "optionalDependencies": {
        "@unrs/resolver-binding-android-arm-eabi": "1.11.1",
        "@unrs/resolver-binding-android-arm64": "1.11.1",
        "@unrs/resolver-binding-darwin-arm64": "1.11.1",
        "@unrs/resolver-binding-darwin-x64": "1.11.1",
        "@unrs/resolver-binding-freebsd-x64": "1.11.1",
        "@unrs/resolver-binding-linux-arm-gnueabihf": "1.11.1",
        "@unrs/resolver-binding-linux-arm-musleabihf": "1.11.1",
        "@unrs/resolver-binding-linux-arm64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-arm64-musl": "1.11.1",
        "@unrs/resolver-binding-linux-ppc64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-riscv64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-riscv64-musl": "1.11.1",
        "@unrs/resolver-binding-linux-s390x-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-x64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-x64-musl": "1.11.1",
        "@unrs/resolver-binding-wasm32-wasi": "1.11.1",
        "@unrs/resolver-binding-win32-arm64-msvc": "1.11.1",
        "@unrs/resolver-binding-win32-ia32-msvc": "1.11.1",
        "@unrs/resolver-binding-win32-x64-msvc": "1.11.1"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.4.tgz",
      "integrity": "sha512-q0SPT4xyU84saUX+tomz1WLkxUbuaJnR1xWt17M7fJtEJigJeWUNGUqrauFXsHnqev9y9JTRGwk13tFBuKby4A==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/use-sync-external-store": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/use-sync-external-store/-/use-sync-external-store-1.6.0.tgz",
      "integrity": "sha512-Pp6GSwGP/NrPIrxVFAIkOQeyw8lFenOHijQWkUTrDvrF4ALqylP2C/KCkeS9dpUM3KvYRQhna5vt7IL95+ZQ9w==",
      "license": "MIT",
      "peerDependencies": {
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      }
    },
    "node_modules/utility-types": {
      "version": "3.11.0",
      "resolved": "https://registry.npmjs.org/utility-types/-/utility-types-3.11.0.tgz",
      "integrity": "sha512-6Z7Ma2aVEWisaL6TvBCy7P8rm2LQoPv6dJ7ecIaIixHcwfbJ0x7mWdbcwlIM5IGQxPZSFYeqRCqlOOeKoJYMkw==",
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/victory-vendor": {
      "version": "37.3.6",
      "resolved": "https://registry.npmjs.org/victory-vendor/-/victory-vendor-37.3.6.tgz",
      "integrity": "sha512-SbPDPdDBYp+5MJHhBCAyI7wKM3d5ivekigc2Dk2s7pgbZ9wIgIBYGVw4zGHBml/qTFbexrofXW6Gu4noGxrOwQ==",
      "license": "MIT AND ISC",
      "dependencies": {
        "@types/d3-array": "^3.0.3",
        "@types/d3-ease": "^3.0.0",
        "@types/d3-interpolate": "^3.0.1",
        "@types/d3-scale": "^4.0.2",
        "@types/d3-shape": "^3.1.0",
        "@types/d3-time": "^3.0.0",
        "@types/d3-timer": "^3.0.0",
        "d3-array": "^3.1.6",
        "d3-ease": "^3.0.1",
        "d3-interpolate": "^3.0.1",
        "d3-scale": "^4.0.2",
        "d3-shape": "^3.1.0",
        "d3-time": "^3.0.0",
        "d3-timer": "^3.0.1"
      }
    },
    "node_modules/webgl-constants": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/webgl-constants/-/webgl-constants-1.1.1.tgz",
      "integrity": "sha512-LkBXKjU5r9vAW7Gcu3T5u+5cvSvh5WwINdr0C+9jpzVB41cjQAP5ePArDtk/WHYdVj0GefCgM73BA7FlIiNtdg=="
    },
    "node_modules/webgl-sdf-generator": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/webgl-sdf-generator/-/webgl-sdf-generator-1.1.1.tgz",
      "integrity": "sha512-9Z0JcMTFxeE+b2x1LJTdnaT8rT8aEp7MVxkNwoycNmJWwPdzoXzMh0BjJSh/AEFP+KPYZUli814h8bJZFIZ2jA==",
      "license": "MIT"
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/which-boxed-primitive": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/which-boxed-primitive/-/which-boxed-primitive-1.1.1.tgz",
      "integrity": "sha512-TbX3mj8n0odCBFVlY8AxkqcHASw3L60jIuF8jFP78az3C2YhmGvqbHBpAjTRH2/xqYunrJ9g1jSyjCjpoWzIAA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-bigint": "^1.1.0",
        "is-boolean-object": "^1.2.1",
        "is-number-object": "^1.1.1",
        "is-string": "^1.1.1",
        "is-symbol": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-builtin-type": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/which-builtin-type/-/which-builtin-type-1.2.1.tgz",
      "integrity": "sha512-6iBczoX+kDQ7a3+YJBnh3T+KZRxM/iYNPXicqk66/Qfm1b93iu+yOImkg0zHbj5LNOcNv1TEADiZ0xa34B4q6Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "function.prototype.name": "^1.1.6",
        "has-tostringtag": "^1.0.2",
        "is-async-function": "^2.0.0",
        "is-date-object": "^1.1.0",
        "is-finalizationregistry": "^1.1.0",
        "is-generator-function": "^1.0.10",
        "is-regex": "^1.2.1",
        "is-weakref": "^1.0.2",
        "isarray": "^2.0.5",
        "which-boxed-primitive": "^1.1.0",
        "which-collection": "^1.0.2",
        "which-typed-array": "^1.1.16"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-collection": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/which-collection/-/which-collection-1.0.2.tgz",
      "integrity": "sha512-K4jVyjnBdgvc86Y6BkaLZEN933SwYOuBFkdmBu9ZfkcAbdVbpITnDmjvZ/aQjRXQrv5EPkTnD1s39GiiqbngCw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-map": "^2.0.3",
        "is-set": "^2.0.3",
        "is-weakmap": "^2.0.2",
        "is-weakset": "^2.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-typed-array": {
      "version": "1.1.19",
      "resolved": "https://registry.npmjs.org/which-typed-array/-/which-typed-array-1.1.19.tgz",
      "integrity": "sha512-rEvr90Bck4WZt9HHFC4DJMsjvu7x+r6bImz0/BrbWb7A2djJ8hnZMrWnHo9F8ssv0OMErasDhftrfROTyqSDrw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "for-each": "^0.3.5",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/ws": {
      "version": "8.18.3",
      "resolved": "https://registry.npmjs.org/ws/-/ws-8.18.3.tgz",
      "integrity": "sha512-PEIGCY5tSlUt50cqyMXfCzX+oOPqN0vuGqWzbcJ2xvnkzkq46oOpz7dQaTDBdfICb4N14+GARUDw2XV2N4tvzg==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "peerDependencies": {
        "bufferutil": "^4.0.1",
        "utf-8-validate": ">=5.0.2"
      },
      "peerDependenciesMeta": {
        "bufferutil": {
          "optional": true
        },
        "utf-8-validate": {
          "optional": true
        }
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/zod": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/zod/-/zod-4.2.1.tgz",
      "integrity": "sha512-0wZ1IRqGGhMP76gLqz8EyfBXKk0J2qo2+H3fi4mcUP/KtTocoX08nmIAHl1Z2kJIZbZee8KOpBCSNPRgauucjw==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/colinhacks"
      }
    },
    "node_modules/zod-validation-error": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/zod-validation-error/-/zod-validation-error-4.0.2.tgz",
      "integrity": "sha512-Q6/nZLe6jxuU80qb/4uJ4t5v2VEZ44lzQjPDhYJNztRQ4wyWc6VF3D3Kb/fAuPetZQnhS3hnajCf9CsWesghLQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "zod": "^3.25.0 || ^4.0.0"
      }
    },
    "node_modules/zustand": {
      "version": "3.7.2",
      "resolved": "https://registry.npmjs.org/zustand/-/zustand-3.7.2.tgz",
      "integrity": "sha512-PIJDIZKtokhof+9+60cpockVOq05sJzHCriyvaLBmEJixseQ1a5Kdov6fWZfWOu5SK9c+FhH1jU0tntLxRJYMA==",
      "license": "MIT",
      "engines": {
        "node": ">=12.7.0"
      },
      "peerDependencies": {
        "react": ">=16.8"
      },
      "peerDependenciesMeta": {
        "react": {
          "optional": true
        }
      }
    }
  }
}



================================================================================
FICHIER: D:\5GI\STI\fulltang-sti\package.json
================================================================================

{
  "name": "fulltang-sti",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "@supabase/ssr": "^0.7.0",
    "@supabase/supabase-js": "^2.81.1",
    "axios": "^1.13.2",
    "bytez.js": "^3.0.0",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "framer-motion": "^12.27.1",
    "lucide-react": "^0.552.0",
    "next": "15.5.9",
    "openai": "^6.15.0",
    "react": "19.2.0",
    "react-dom": "19.2.0",
    "react-hot-toast": "^2.6.0",
    "recharts": "^3.6.0",
    "tailwind-merge": "^3.3.1",
    "zod": "^4.2.1"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "@types/recharts": "^1.8.29",
    "eslint": "^9",
    "eslint-config-next": "16.0.1",
    "tailwindcss": "^4",
    "typescript": "^5"
  }
}



